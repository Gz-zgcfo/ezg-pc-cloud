{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{458:function(e,t,a){\"use strict\";a.r(t);var o=a(25),n={name:\"customerFollowUp_index\",data:function(){return{search_model:\"\",header:[{title:\"客户名称\",key:\"name\",minWidth:100},{title:\"联系方式\",key:\"tel\",minWidth:120},{title:\"公司名称\",key:\"companyname\",width:250,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>15?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,15)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"跟进类型\",key:\"followuptype\",minWidth:100},{title:\"完成状态\",key:\"finish_flag\",minWidth:100},{title:\"跟进内容\",key:\"servicecontent\",width:200,render:function(e,t){return\"\"==t.row.servicecontent||null==t.row.servicecontent?\"\":t.row.servicecontent.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.servicecontent.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.servicecontent)])]):e(\"span\",t.row.servicecontent)}},{title:\"录入人\",key:\"servicename\",minWidth:100},{title:\"录入部门\",key:\"departname\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:180},{title:\"跟进人\",key:\"followname\",minWidth:100},{title:\"更新时间\",key:\"contentcreatedate\",minWidth:180}],data:[],loading:!1,searchData:{createdate:[],companyname:\"\",followuptype:\"\",servicename:\"\",updatedate:[],departname:\"\"},page:1,pageSize:10,pageTotal:new Number,followUpType:\"\",followUpType_Map:\"\"}},methods:{search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.searchData.createdate=[],this.searchData.companyname=\"\",this.searchData.followuptype=\"\",this.searchData.servicename=\"\",this.searchData.updatedate=[],this.searchData.departname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"followuptype\",title:\"跟进类型\",format:\"follow_up_type\"},{field:\"servicecontent\",title:\"跟进内容\"},{field:\"servicename\",title:\"录入人\"},{field:\"followname\",title:\"跟进人\"},{field:\"departname\",title:\"录入部门\"},{field:\"createdate\",title:\"创建时间\"},{field:\"contentcreatedate\",title:\"更新时间\"},{field:\"customertype\",title:\"客户状态\",format:\"customerTypes\"},{field:\"customersource\",title:\"客户来源\",format:\"cluesources\"},{field:\"area\",title:\"区域\",format:\"area\"}])),bcreatedate:Object(o.a)(this.searchData.createdate[0]),ecreatedate:Object(o.a)(this.searchData.createdate[1]),companyname:this.searchData.companyname,followuptype:this.searchData.followuptype,servicename:this.searchData.servicename,departname:this.searchData.departname,bupdatedate:Object(o.a)(this.searchData.updatedate[0]),eupdatedate:Object(o.a)(this.searchData.updatedate[1])},t=this.$MergeURL(\"api/customer/customerFollowMsgList\",e);window.open(t)},downloadExcelField:function(){},getData:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,bcreatedate:Object(o.a)(e.searchData.createdate[0]),ecreatedate:Object(o.a)(e.searchData.createdate[1]),companyname:e.searchData.companyname,followuptype:e.searchData.followuptype,servicename:e.searchData.servicename,departname:e.searchData.departname,bupdatedate:Object(o.a)(e.searchData.updatedate[0]),eupdatedate:Object(o.a)(e.searchData.updatedate[1])}};this.$Get(\"api/customer/customerFollowMsgList\",t,function(t){e.data=t.data.data.rows,e.pageTotal=t.data.data.total,e.loading=!1;for(var a=0;a<e.data.length;a++)e.data[a].followuptype=e.followUpType_Map.get(e.data[a].followuptype),\"Y\"==e.data[a].finish_flag?e.data[a].finish_flag=\"完成\":\"N\"==e.data[a].finish_flag&&(e.data[a].finish_flag=\"未完成\")},function(e){})},getDataCenter:function(){var e=this;this.$GetDataCenter(\"follow_up_type\",function(t){e.followUpType=t.data.data.follow_up_type,e.followUpType_Map=e.$array2map(e.followUpType)})}},created:function(){this.getDataCenter(),this.getData()}},r=a(2),l=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                        筛选\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"searchData\",attrs:{model:e.searchData,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.searchData.companyname,callback:function(t){e.$set(e.searchData,\"companyname\",t)},expression:\"searchData.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"创建人：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.searchData.servicename,callback:function(t){e.$set(e.searchData,\"servicename\",t)},expression:\"searchData.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"followuptype\",label:\"跟进类型：\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},on:{\"on-change\":e.search},model:{value:e.searchData.followuptype,callback:function(t){e.$set(e.searchData,\"followuptype\",t)},expression:\"searchData.followuptype\"}},e._l(e.followUpType,function(t,o){return a(\"Option\",{key:o,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"录入部门：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.searchData.departname,callback:function(t){e.$set(e.searchData,\"departname\",t)},expression:\"searchData.departname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"企业录入时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:e.searchData.createdate,callback:function(t){e.$set(e.searchData,\"createdate\",t)},expression:\"searchData.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"内容创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.searchData.updatedate,callback:function(t){e.$set(e.searchData,\"updatedate\",t)},expression:\"searchData.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)],1)},[],!1,null,null,null);l.options.__file=\"followUpdata.vue\";t.default=l.exports}}]);"}