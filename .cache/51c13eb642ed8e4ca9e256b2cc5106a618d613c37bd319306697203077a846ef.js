{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{820:function(e,t,a){\"use strict\";a.r(t);var r=a(53),o={data:function(){return{backup:\"\",current_row:new Object,flow_show:!1,flow_message:{companyName:\"\"}}},methods:{save_flow:function(){var t=this,e={workOrderId:t.current_row.id,backup:t.backup};this.$http.post(\"api/order/next\",e).then(function(e){4e4==e.data.msgCode?\"流转成功\"==e.data.msg?(t.$Message.success(e.data.msg),t.flow_show=!1,r.a.$emit(\"flowsuccess\",!0)):t.$Message.warning(e.data.msg):t.$Message.warning(\"流转失败\")}).catch(function(e){t.$Message.warning(\"流转失败\")})}},created:function(){var t=this;r.a.$on(\"myflow\",function(e){t.flow_show=!0,t.current_row=e})}},n=a(4),i=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"700\",title:\"流转\"},model:{value:t.flow_show,callback:function(e){t.flow_show=e},expression:\"flow_show\"}},[a(\"Form\",{ref:\"current_row\",attrs:{model:t.current_row,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"CurrentProcess\",label:\"当前流程：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.CurrentProcess,callback:function(e){t.$set(t.current_row,\"CurrentProcess\",e)},expression:\"current_row.CurrentProcess\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.product,callback:function(e){t.$set(t.current_row,\"product\",e)},expression:\"current_row.product\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.companyname,callback:function(e){t.$set(t.current_row,\"companyname\",e)},expression:\"current_row.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"servername\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.servername,callback:function(e){t.$set(t.current_row,\"servername\",e)},expression:\"current_row.servername\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"归属客户：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.name,callback:function(e){t.$set(t.current_row,\"name\",e)},expression:\"current_row.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:t.current_row.departname,callback:function(e){t.$set(t.current_row,\"departname\",e)},expression:\"current_row.departname\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.save_flow}},[t._v(\"确定\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){t.flow_show=!1}}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"flow.vue\";var s=i.exports,l={props:{managestatus:{type:[String,Array],default:function(){return[]}}},data:function(){var o=this;return{search_model:\"\",sortField:\"updatedate\",order:\"desc\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"提示\",key:\"baseorderid\",width:120},{title:\"经营状态\",key:\"managestatusName\",width:120},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"计划完成时间\",key:\"person_plan_finish_date\",width:140},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",width:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,r){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){o.flowChart(r)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var t=o;if(null==r.row.resumeFlag||3==r.row.resumeFlag){var e=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=3\";o.$http.get(e).then(function(e){t.$backToLogin(e),4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==r.row.resumeFlag){var a=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=2\";o.$http.get(a).then(function(e){t.$backToLogin(e),4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}],tempArray:[]}},methods:{get_all_selection:function(e){this.tempArray=e},flow_all:function(){var a=this;if(0==this.tempArray.length)a.$Message.warning(\"请选择需要流转的工单！\");else for(var e=function(t){var e={workOrderId:a.tempArray[t].id,backup:\"批量流转\"};a.$Post(\"api/order/next\",e,function(e){a.tempArray.length==t+1&&a.$bus.emit(\"flowsuccess\",!0)},function(e){a.tempArray.length==t+1&&a.$bus.emit(\"flowsuccess\",!0)})},t=0;t<this.tempArray.length;t++)e(t)},sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"30\",page:\"1\",pageSize:\"1000000\",iscycle:\"N\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,serviceDept:\"'ACCOUNT'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var r=this;r.Sloading=!0;var e={params:{sortField:r.sortField,order:r.order,page:r.page,pageSize:r.pageSize,companyName:r.formInline.companyname,serviceName:r.formInline.servicename,serviceDept:\"'ACCOUNT'\",iscycle:\"N\"}};r.$http.get(\"api/order/workOrderList?workOrderStatus=30\",e).then(function(e){r.data=e.data.data.rows,r.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++){for(var a=0;a<r.managestatus.length;a++)if(r.data[t].managestatus==r.managestatus[a].typecode){r.data[t].managestatusName=r.managestatus[a].typename;break}\"\"!=r.data[t].CreateDate&&null!=r.data[t].CreateDate&&(r.data[t].CreateDate=r.data[t].CreateDate.slice(0,10)),\"\"!=r.data[t].ServiceStart&&null!=r.data[t].ServiceStart&&(r.data[t].ServiceStart=r.data[t].ServiceStart.slice(0,10)),\"\"!=r.data[t].UpdateDate&&null!=r.data[t].UpdateDate&&(r.data[t].UpdateDate=r.data[t].UpdateDate.slice(0,10))}r.Sloading=!1})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?2==this.current_row.resumeFlag?this.$Message.warning(\"当前工单已锁定！\"):r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},open_set_time:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_SET_FINISH_TIME\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var t=this;this.getData(),r.a.$on(\"flowsuccess\",function(e){t.getData()})}},c=Object(n.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                    \"),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.showflow}},[t._v(\"流转\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.open_set_time}},[t._v(\"设置计划完成时间\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.showdetail}},[t._v(\"查询详情\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.Sloading},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.showdetail,\"on-sort-change\":t.sort,\"on-selection-change\":t.get_all_selection}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:t.flowChart1,callback:function(e){t.flowChart1=e},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:t.flowChartImg}})])],1)],1)},[],!1,null,null,null);c.options.__file=\"serving.vue\";var d=c.exports,m={data:function(){return{formInline:{companyName:\"\",ordercode:\"\",createbyname:\"\",approval:\"\"}}},methods:{search:function(){r.a.$emit(\"search\",this.formInline)},reset:function(){this.formInline.companyName=\"\",this.formInline.ordercode=\"\",this.formInline.createbyname=\"\",this.formInline.approval=\"\",r.a.$emit(\"reset\",!0)}}},p=Object(n.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Poptip\",{staticStyle:{float:\"right\",\"margin-right\":\"20px\"},attrs:{title:\"筛选\",placement:\"bottom-end\",width:\"700\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}}},[a(\"Button\",{attrs:{type:\"text\",size:\"large\",icon:\"funnel\"}},[t._v(\"筛选\")]),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyName,callback:function(e){t.$set(t.formInline,\"companyName\",e)},expression:\"formInline.companyName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyName,callback:function(e){t.$set(t.formInline,\"companyName\",e)},expression:\"formInline.companyName\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)},[],!1,null,null,null);p.options.__file=\"search.vue\";var u={components:{Search:p.exports},props:{managestatus:{type:[String,Array],default:function(){return[]}}},data:function(){var o=this;return{isAdmin:!1,search_model:\"\",sortField:\"updatedate\",order:\"desc\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],workOrderStatus:[],workOrderStatus_map:new Map,header:[{title:\"工单状态\",key:\"workOrderStatus\",width:120,sortable:!0,render:function(e,t){return\"10\"==t.row.workOrderStatus?e(\"div\",\"未分配\"):\"20\"==t.row.workOrderStatus?e(\"div\",\"未开始\"):\"30\"==t.row.workOrderStatus?e(\"div\",\"服务中\"):\"40\"==t.row.workOrderStatus?e(\"div\",\"暂停\"):\"50\"==t.row.workOrderStatus?e(\"div\",\"退款终止\"):\"60\"==t.row.workOrderStatus?e(\"div\",\"已完结\"):e(\"div\",\"无状态\")}},{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"提示\",key:\"baseorderid\",width:120},{title:\"经营状态\",key:\"managestatusName\",width:120},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",width:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,r){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){o.flowChart(r)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var t=o;if(null==r.row.resumeFlag||3==r.row.resumeFlag){var e=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=3\";t.$backToLogin(res),o.$http.get(e).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==r.row.resumeFlag){var a=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=2\";t.$backToLogin(res),o.$http.get(a).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}]}},methods:{sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",iscycle:\"N\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,serviceDept:\"'ACCOUNT'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"workOrderStatus\",title:\"工单状态\",format:\"workOrderStatus\"},{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var r=this;r.Sloading=!0;var e={params:{sortField:r.sortField,order:r.order,page:r.page,pageSize:r.pageSize,companyName:r.formInline.companyname,serviceName:r.formInline.servicename,serviceDept:\"'ACCOUNT'\",iscycle:\"N\"}};r.$http.get(\"api/order/workOrderList\",e).then(function(e){r.data=e.data.data.rows,r.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++){for(var a=0;a<r.managestatus.length;a++)if(r.data[t].managestatus==r.managestatus[a].typecode){r.data[t].managestatusName=r.managestatus[a].typename;break}\"\"!=r.data[t].CreateDate&&null!=r.data[t].CreateDate&&(r.data[t].CreateDate=r.data[t].CreateDate.slice(0,10)),\"\"!=r.data[t].ServiceStart&&null!=r.data[t].ServiceStart&&(r.data[t].ServiceStart=r.data[t].ServiceStart.slice(0,10)),\"\"!=r.data[t].UpdateDate&&null!=r.data[t].UpdateDate&&(r.data[t].UpdateDate=r.data[t].UpdateDate.slice(0,10))}r.Sloading=!1})},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},reCreate:function(){var t=this;if(\"\"!=this.current_row){var e={params:{workOrderId:t.current_row.id}};t.$Get(\"api/order/resetWorkOrderProcess\",e,function(e){t.$Message.success(e.data.msg)})}else this.$Message.warning(\"请选择一行！\")},showflow:function(){\"\"!=this.current_row?r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")},getDataCenter:function(){this.$GetDataCenter(\"workOrderStatus\",res)}},created:function(){var t=this;this.getData(),r.a.$on(\"flowsuccess\",function(e){t.getData()}),10059==localStorage.getItem(\"id\")?t.isAdmin=!0:t.isAdmin=!1}},h=Object(n.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                    \"),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.showdetail}},[t._v(\"查询详情\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")]),t._v(\" \"),t.isAdmin?a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.reCreate}},[t._v(\"重新生成流程\")]):t._e()],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.showdetail,\"on-sort-change\":t.sort}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:t.flowChart1,callback:function(e){t.flowChart1=e},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:t.flowChartImg}})])],1)],1)},[],!1,null,null,null);h.options.__file=\"all.vue\";var w=h.exports,g={props:{managestatus:{type:[String,Array],default:function(){return[]}}},data:function(){var a=this;return{search_model:\"\",sortField:\"updatedate\",order:\"desc\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"经营状态\",key:\"managestatusName\",width:120},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",width:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:100,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.flowChart(t)}}},\"[流程图]\")])}}]}},methods:{sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"60\",page:\"1\",pageSize:\"1000000\",iscycle:\"N\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,serviceDept:\"'ACCOUNT'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var r=this;r.Sloading=!0;var e={params:{sortField:r.sortField,order:r.order,page:r.page,pageSize:r.pageSize,companyName:r.formInline.companyname,serviceName:r.formInline.servicename,serviceDept:\"'ACCOUNT'\",iscycle:\"N\"}};r.$http.get(\"api/order/workOrderList?workOrderStatus=60\",e).then(function(e){r.$backToLogin(e),r.data=e.data.data.rows,r.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++){for(var a=0;a<r.managestatus.length;a++)if(r.data[t].managestatus==r.managestatus[a].typecode){r.data[t].managestatusName=r.managestatus[a].typename;break}\"\"!=r.data[t].CreateDate&&null!=r.data[t].CreateDate&&(r.data[t].CreateDate=r.data[t].CreateDate.slice(0,10)),\"\"!=r.data[t].ServiceStart&&null!=r.data[t].ServiceStart&&(r.data[t].ServiceStart=r.data[t].ServiceStart.slice(0,10)),\"\"!=r.data[t].UpdateDate&&null!=r.data[t].UpdateDate&&(r.data[t].UpdateDate=r.data[t].UpdateDate.slice(0,10))}r.Sloading=!1})},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var t=this;this.getData(),r.a.$on(\"flowsuccess\",function(e){t.getData()})}},f=Object(n.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                    \"),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.showdetail}},[t._v(\"查询详情\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.Sloading},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.showdetail,\"on-sort-change\":t.sort}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:t.flowChart1,callback:function(e){t.flowChart1=e},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:t.flowChartImg}})])],1)],1)},[],!1,null,null,null);f.options.__file=\"finished.vue\";var y=f.exports,v={props:{managestatus:{type:[String,Array],default:function(){return[]}}},data:function(){var o=this;return{search_model:\"\",sortField:\"updatedate\",order:\"desc\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"经营状态\",key:\"managestatusName\",width:120},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"计划完成时间\",key:\"person_plan_finish_date\",width:140},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",width:140,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,r){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){o.flowChart(r)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var t=o;if(null==r.row.resumeFlag||3==r.row.resumeFlag){var e=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=3\";o.$http.get(e).then(function(e){t.$backToLogin(e),4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==r.row.resumeFlag){var a=\"api/order/serviceResume?workOrderId=\"+r.row.id+\"&resumeFlag=2\";o.$http.get(a).then(function(e){t.$backToLogin(e),4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}],tempArray:[]}},methods:{get_all_selection:function(e){this.tempArray=e},flow_all:function(){var a=this;if(0==this.tempArray.length)a.$Message.warning(\"请选择需要流转的工单！\");else for(var e=function(t){var e={workOrderId:a.tempArray[t].id,backup:\"批量流转\"};a.$Post(\"api/order/next\",e,function(e){a.tempArray.length==t+1&&a.$bus.emit(\"flowsuccess\",!0)},function(e){a.tempArray.length==t+1&&a.$bus.emit(\"flowsuccess\",!0)})},t=0;t<this.tempArray.length;t++)e(t)},sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"20\",page:\"1\",pageSize:\"1000000\",iscycle:\"N\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,serviceDept:\"'ACCOUNT'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var r=this;r.Sloading=!0;var e={params:{sortField:r.sortField,order:r.order,page:r.page,pageSize:r.pageSize,companyName:r.formInline.companyname,serviceName:r.formInline.servicename,serviceDept:\"'ACCOUNT'\",iscycle:\"N\"}};r.$http.get(\"api/order/workOrderList?workOrderStatus=20\",e).then(function(e){r.$backToLogin(e),r.data=e.data.data.rows,r.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++){for(var a=0;a<r.managestatus.length;a++)if(r.data[t].managestatus==r.managestatus[a].typecode){r.data[t].managestatusName=r.managestatus[a].typename;break}\"\"!=r.data[t].CreateDate&&null!=r.data[t].CreateDate&&(r.data[t].CreateDate=r.data[t].CreateDate.slice(0,10)),\"\"!=r.data[t].ServiceStart&&null!=r.data[t].ServiceStart&&(r.data[t].ServiceStart=r.data[t].ServiceStart.slice(0,10)),\"\"!=r.data[t].UpdateDate&&null!=r.data[t].UpdateDate&&(r.data[t].UpdateDate=r.data[t].UpdateDate.slice(0,10))}r.Sloading=!1})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?2==this.current_row.resumeFlag?this.$Message.warning(\"当前工单已锁定！\"):r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},open_set_time:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_SET_FINISH_TIME\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var t=this;this.getData(),r.a.$on(\"flowsuccess\",function(e){t.getData()})}},_=Object(n.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                    \"),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.showflow}},[t._v(\"流转\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.open_set_time}},[t._v(\"设置计划完成时间\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.showdetail}},[t._v(\"查询详情\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.Sloading},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.showdetail,\"on-sort-change\":t.sort,\"on-selection-change\":t.get_all_selection}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:t.flowChart1,callback:function(e){t.flowChart1=e},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:t.flowChartImg}})])],1)],1)},[],!1,null,null,null);_.options.__file=\"notbegin.vue\";var k={name:\"accounttaskmanagement_index\",components:{Serving:d,All:w,Finished:y,Notbegin:_.exports,Flow:s},data:function(){return{managestatus:[],loading:!1}},methods:{getGlobalDataCenter:function(){var t=this;this.$GetDataCenter(\"managestatus\",function(e){t.managestatus=e.data.data.managestatus,t.loading=!0})}},created:function(){this.getGlobalDataCenter()}},b=Object(n.a)(k,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.loading?a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未开始\",name:\"name1\"}},[a(\"notbegin\",{attrs:{managestatus:e.managestatus}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"服务中\",name:\"name2\"}},[a(\"serving\",{attrs:{managestatus:e.managestatus}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已完结\",name:\"name3\"}},[a(\"finished\",{attrs:{managestatus:e.managestatus}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"全部\",name:\"name4\"}},[a(\"all\",{attrs:{managestatus:e.managestatus}})],1)],1):e._e()],1)},[],!1,null,null,null);b.options.__file=\"myCommonTask_table.vue\";t.default=b.exports}}]);"}