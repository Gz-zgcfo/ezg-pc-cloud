{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{158:function(e,t,a){},330:function(e,t,a){\"use strict\";var r=a(158);a.n(r).a},402:function(e,t,a){\"use strict\";a.r(t);var r={name:\"unFinishApproveList\",props:{},data:function(){var e=this;return{search_model:\"\",tableLoading:!1,total:0,header:[{title:\"订单号码\",key:\"ordercode\",minWidth:160},{title:\"归属公司\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"创建人\",key:\"crealname\",minWidth:100},{title:\"跟进人\",key:\"frealname\",minWidth:100},{title:\"创建时间\",key:\"createdate\",minWidth:100},{title:\"缴费时间\",key:\"payTime\",minWidth:100},{title:\"缴费渠道\",key:\"paydirName\",minWidth:100},{title:\"订单价格\",key:\"paynumber\",minWidth:100},{title:\"已付款\",key:\"realnumber\",minWidth:100},{title:\"余款\",key:\"neednumber\",minWidth:100},{title:\"当前流程\",key:\"ProcessType\",minWidth:100},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:100,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"warning\",size:\"small\"},style:{marginRight:\"2px\"},directives:[{name:\"permission\",value:\"orderA.recordN\"}],on:{click:function(){e.open_approve_log(a)}}},\"审批记录\")])}}],data:[],page:1,pageSize:10,formValidateSearch:{ordercode:\"\",companyname:\"\",customername:\"\",customertel:\"\",crealname:\"\"},payDirs:[],payDirs_Map:new Map,selectRow:\"\"}},methods:{download_excel:function(){var e={page:\"1\",pageSize:\"1000000\",isAudit:\"N\",sortField:\"id\",order:\"desc\",ordercode:this.formValidateSearch.ordercode,companyname:this.formValidateSearch.companyname,customername:this.formValidateSearch.customername,customertel:this.formValidateSearch.customertel,crealname:this.formValidateSearch.crealname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"ordercode\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"crealname\",title:\"创建人\"},{field:\"frealname\",title:\"跟进人\"},{field:\"base_createdate\",title:\"创建时间\"},{field:\"payTime\",title:\"缴费时间\"},{field:\"base_paydir\",title:\"缴费渠道\",format:\"payDirs\"},{field:\"paynumber\",title:\"订单总价\"},{field:\"realnumber\",title:\"已付款\"},{field:\"neednumber\",title:\"余款\"},{field:\"ProcessType\",title:\"当前流程\"}]))},t=this.$MergeURL(\"api/order/auditList\",e);window.open(t)},get_table_data:function(){var e=this;e.tableLoading=!0;var t={params:{isAudit:\"N\",sortField:\"id\",order:\"desc\",page:e.page,pageSize:e.pageSize,ordercode:e.formValidateSearch.ordercode,companyname:e.formValidateSearch.companyname,customername:e.formValidateSearch.customername,customertel:e.formValidateSearch.customertel,crealname:e.formValidateSearch.crealname}};this.$Get(\"api/order/auditList\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var a=0;a<e.data.length;a++)e.data[a].base_createdate&&(e.data[a].createdate=e.data[a].base_createdate.slice(0,10)),e.data[a].paydirName=e.payDirs_Map.get(e.data[a].base_paydir);e.tableLoading=!1})},search:function(){this.page=1,this.get_table_data()},page_change:function(e){this.page=e,this.get_table_data()},page_size_change:function(e){this.pageSize=e,this.get_table_data()},handleReset:function(e){this.page=1,this.$refs[e].resetFields(),this.get_table_data()},select_row:function(e){this.selectRow=e},to_do_work_flow:function(e){e?this.$bus.emit(\"ORDER_APPROVE_DEALWITH\",e.id):this.$Message.warning(\"请选择一行！\")},open_approve_log:function(e){this.$bus.emit(\"ORDER_APPROVELIST_LOG\",e.row.id)},get_data_center:function(){var e=this;this.$GetDataCenter(\"payDirs\",function(t){e.payDirs=t.data.data.payDirs,e.payDirs_Map=e.$array2map(e.payDirs),e.get_table_data()})}},created:function(){var e=this;e.get_data_center(),e.$bus.on(\"UPDATE_ORDER_DATA\",function(t){e.get_table_data()})},mounted:function(){}},i=a(2),o=Object(i.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                        筛选\\n                    \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidateSearch\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:e.formValidateSearch,\"label-width\":80}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单号码：\",prop:\"ordercode\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.ordercode,callback:function(t){e.$set(e.formValidateSearch,\"ordercode\",t)},expression:\"formValidateSearch.ordercode\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"公司名称：\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.companyname,callback:function(t){e.$set(e.formValidateSearch,\"companyname\",t)},expression:\"formValidateSearch.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customername\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customername,callback:function(t){e.$set(e.formValidateSearch,\"customername\",t)},expression:\"formValidateSearch.customername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户电话：\",prop:\"customertel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customertel,callback:function(t){e.$set(e.formValidateSearch,\"customertel\",t)},expression:\"formValidateSearch.customertel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建人：\",prop:\"crealname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.crealname,callback:function(t){e.$set(e.formValidateSearch,\"crealname\",t)},expression:\"formValidateSearch.crealname\"}})],1)],1)],1),e._v(\" \"),a(\"center\",[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(t){e.handleReset(\"formValidateSearch\")}}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderA.transaction\"],expression:\"['orderA.transaction']\"}],attrs:{type:\"primary\",icon:\"ios-crop\",name:\"order_approve_submit\"},on:{click:function(t){e.to_do_work_flow(e.selectRow)}}},[e._v(\"办理审批\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderA.exportN\"],expression:\"['orderA.exportN']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.download_excel}},[e._v(\"导出Excel\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.get_table_data}},[e._v(\"刷新\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",border:\"\",columns:e.header,data:e.data,size:\"small\",loading:e.tableLoading},on:{\"on-row-click\":e.select_row,\"on-row-dblclick\":e.to_do_work_flow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",current:e.page,transfer:\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.page_change,\"on-page-size-change\":e.page_size_change}})],1)],1)],1)},[],!1,null,null,null);o.options.__file=\"unApproveList.vue\";var l=o.exports,n={name:\"FinishApproveList\",props:{},data:function(){var e=this;return{search_model:\"\",tableLoading:!1,total:0,header:[{title:\"订单号码\",key:\"ordercode\",minWidth:160},{title:\"归属公司\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"创建人\",key:\"crealname\",minWidth:100},{title:\"跟进人\",key:\"frealname\",minWidth:100},{title:\"创建时间\",key:\"createdate\",minWidth:100},{title:\"缴费时间\",key:\"payTime\",minWidth:100},{title:\"缴费渠道\",key:\"paydirName\",minWidth:100},{title:\"订单价格\",key:\"paynumber\",minWidth:100},{title:\"已付款\",key:\"realnumber\",minWidth:100},{title:\"余款\",key:\"neednumber\",minWidth:100},{title:\"当前流程\",key:\"ProcessType\",minWidth:100},{title:\"更新时间\",key:\"updatedate\",minWidth:100},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:150,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"primary\",size:\"small\"},directives:[{name:\"permission\",value:\"orderA.detail\"}],style:{marginRight:\"5px\"},on:{click:function(){e.order_detail(a)}}},\"详情\"),t(\"Button\",{props:{type:\"warning\",size:\"small\"},directives:[{name:\"permission\",value:\"orderA.recordN\"}],on:{click:function(){e.open_approve_log(a)}}},\"审批记录\")])}}],data:[],page:1,pageSize:10,formValidateSearch:{ordercode:\"\",companyname:\"\",customername:\"\",customertel:\"\",crealname:\"\"},payDirs:[],payDirs_Map:new Map,selectRow:\"\"}},methods:{download_excel:function(){var e={page:\"1\",pageSize:\"1000000\",isAudit:\"Y\",sortField:\"id\",order:\"desc\",ordercode:this.formValidateSearch.ordercode,companyname:this.formValidateSearch.companyname,customername:this.formValidateSearch.customername,customertel:this.formValidateSearch.customertel,crealname:this.formValidateSearch.crealname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"ordercode\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"crealname\",title:\"创建人\"},{field:\"frealname\",title:\"跟进人\"},{field:\"base_createdate\",title:\"创建时间\"},{field:\"payTime\",title:\"缴费时间\"},{field:\"base_paydir\",title:\"缴费渠道\",format:\"payDirs\"},{field:\"paynumber\",title:\"订单总价\"},{field:\"realnumber\",title:\"已付款\"},{field:\"neednumber\",title:\"余款\"},{field:\"ProcessType\",title:\"当前流程\"},{field:\"updatedate\",title:\"更新时间\"}]))},t=this.$MergeURL(\"api/order/auditList\",e);window.open(t)},get_table_data:function(){var e=this;e.tableLoading=!0;var t={params:{isAudit:\"Y\",sortField:\"id\",order:\"desc\",page:e.page,pageSize:e.pageSize,ordercode:e.formValidateSearch.ordercode,companyname:e.formValidateSearch.companyname,customername:e.formValidateSearch.customername,customertel:e.formValidateSearch.customertel,crealname:e.formValidateSearch.crealname}};this.$Get(\"api/order/auditList\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var a=0;a<e.data.length;a++)e.data[a].base_createdate&&(e.data[a].createdate=e.data[a].base_createdate.slice(0,10)),e.data[a].updatedate&&(e.data[a].updatedate=e.data[a].updatedate.slice(0,10)),e.data[a].paydirName=e.payDirs_Map.get(e.data[a].base_paydir);e.tableLoading=!1})},search:function(){this.page=1,this.get_table_data()},page_change:function(e){this.page=e,this.get_table_data()},page_size_change:function(e){this.pageSize=e,this.get_table_data()},handleReset:function(e){this.page=1,this.$refs[e].resetFields(),this.get_table_data()},select_row:function(e){this.selectRow=e},open_approve_log:function(e){this.$bus.emit(\"ORDER_APPROVELIST_LOG\",e.row.id)},order_detail:function(e){this.$bus.emit(\"OPEN_ORDER_DETAIL\",e.row.id)},get_data_center:function(){var e=this;this.$GetDataCenter(\"payDirs\",function(t){e.payDirs=t.data.data.payDirs,e.payDirs_Map=e.$array2map(e.payDirs),e.get_table_data()})}},created:function(){var e=this;e.get_data_center(),e.$bus.on(\"UPDATE_ORDER_DATA\",function(t){e.get_table_data()})},mounted:function(){}},s=Object(i.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                        筛选\\n                    \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidateSearch\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:e.formValidateSearch,\"label-width\":80}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单号码：\",prop:\"ordercode\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.ordercode,callback:function(t){e.$set(e.formValidateSearch,\"ordercode\",t)},expression:\"formValidateSearch.ordercode\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"公司名称：\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.companyname,callback:function(t){e.$set(e.formValidateSearch,\"companyname\",t)},expression:\"formValidateSearch.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customername\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customername,callback:function(t){e.$set(e.formValidateSearch,\"customername\",t)},expression:\"formValidateSearch.customername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户电话：\",prop:\"customertel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customertel,callback:function(t){e.$set(e.formValidateSearch,\"customertel\",t)},expression:\"formValidateSearch.customertel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建人：\",prop:\"crealname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.crealname,callback:function(t){e.$set(e.formValidateSearch,\"crealname\",t)},expression:\"formValidateSearch.crealname\"}})],1)],1)],1),e._v(\" \"),a(\"center\",[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(t){e.handleReset(\"formValidateSearch\")}}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderA.exportN\"],expression:\"['orderA.exportN']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.download_excel}},[e._v(\"导出Excel\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.get_table_data}},[e._v(\"刷新\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",border:\"\",columns:e.header,data:e.data,size:\"small\",loading:e.tableLoading},on:{\"on-row-click\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",current:e.page,transfer:\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.page_change,\"on-page-size-change\":e.page_size_change}})],1)],1)],1)},[],!1,null,null,null);s.options.__file=\"approveList.vue\";var d=s.exports,m=a(25),c={props:{id:{type:[String,Number]}},data:function(){return{openRelateOrder:!1,header:[{title:\"订单号码\",key:\"unusualCode\",minWidth:100},{title:\"产品内容\",key:\"productContent\",minWidth:150},{title:\"异常类型\",key:\"unusualType\",minWidth:80},{title:\"审批是由\",key:\"applyMemo\",minWidth:200},{title:\"流程状态\",key:\"currentProcessName\",minWidth:100},{title:\"创建时间\",key:\"createDate\",minWidth:100},{title:\"更新时间\",key:\"updateDate\",minWidth:100}],data:[],loading:!1,unusualType:[],unusualType_map:new Map}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(a,r){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),a()})})},get_data:function(){var e=this,t={params:{orderId:this.id}};this.$Get(\"api/order/unusual/workorder/findUnusualWorkOrderByOrderId\",t,function(t){t.data.data&&e.data.push({applyMemo:t.data.data.applyMemo,companyId:t.data.data.companyId,createBy:t.data.data.createBy,createDate:Object(m.a)(t.data.data.createDate),updateDate:Object(m.a)(t.data.data.updateDate),id:t.data.data.id,currentProcessName:t.data.data.currentProcessName,productContent:t.data.data.productContent,unusualCode:t.data.data.unusualCode,unusualType:e.unusualType_map.get(t.data.data.unusualType)})})}},created:function(){var e=this,t=this;this.$bus.off(\"RELATE_ORDER\",!0),this.$bus.on(\"RELATE_ORDER\",function(a){t.get_data_center().then(t.get_data()),t.openRelateOrder=!0,e.data=[]})}},p=Object(i.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"对应异常工单\",width:\"70%\"},model:{value:e.openRelateOrder,callback:function(t){e.openRelateOrder=t},expression:\"openRelateOrder\"}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);p.options.__file=\"relateOrder.vue\";var u={components:{relateOrder:p.exports},props:[\"payDirs\"],data:function(){return{accoutError:!1,openApproveDealWith:!1,kjdj:!1,formValidateDetail:{CompanyName:\"\",name:\"\",payTime:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\",usebalance:\"\"},submitLoading:!1,banlishenpi:{agree:\"1\",desc:\"\"},errMsg:\"\",orderItem:[],orderItemHeader:[{title:\"序号\",type:\"index\",minWidth:60,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.memo}})}}],orderId:\"\"}},methods:{check_order:function(e){var t=this,a={params:{orderId:e}};t.$Get(\"api/order/cycle/check/order/exception\",a,function(a){1==a.data.data.hasException&&(t.accoutError=!0,t.errMsg=a.data.data.msg,t.banlishenpi.agree=\"0\"),t.get_data(e)},function(e){t.accoutError=!1})},get_data:function(e){var t=this,a=\"api/order/detail/\"+e;this.$Get(a,{},function(e){t.formValidateDetail=e.data.data,t.orderItem=t.formValidateDetail.items;for(var a=0;a<t.orderItem.length;a++)if(\"会计到家\"==t.orderItem[a].product){t.kjdj=!0;break}})},submit:function(){var e=this;e.submitLoading=!0,e.$ButtonCollect(\"order_approve_submit\");var t={params:{bId:e.formValidateDetail.id,bType:10,auditFlag:e.banlishenpi.agree,auditMemo:e.banlishenpi.desc}};this.$Get(\"api/activiti/toDoWorkFlowByBid\",t,function(t){e.openApproveDealWith=!1,e.$Message.success(t.data.msg),e.banlishenpi.agree=\"1\",e.banlishenpi.desc=\"\",e.submitLoading=!1,e.$bus.emit(\"UPDATE_ORDER_DATA\",!0)},function(t){e.$Message.error(t),e.submitLoading=!1})},kuaiji:function(){},open_relateOrder:function(){this.$bus.emit(\"RELATE_ORDER\",!0)}},created:function(){var e=this;this.$bus.on(\"ORDER_APPROVE_DEALWITH\",function(t){e.orderId=t,e.check_order(t),e.openApproveDealWith=!0})}},h=Object(i.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"办理审批\",width:\"100%\",styles:{height:\"100%\",top:\"0px\"}},model:{value:e.openApproveDealWith,callback:function(t){e.openApproveDealWith=t},expression:\"openApproveDealWith\"}},[a(\"Form\",{ref:\"formValidateDetail\",attrs:{model:e.formValidateDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.CompanyName,callback:function(t){e.$set(e.formValidateDetail,\"CompanyName\",t)},expression:\"formValidateDetail.CompanyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.name,callback:function(t){e.$set(e.formValidateDetail,\"name\",t)},expression:\"formValidateDetail.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.payTime,callback:function(t){e.$set(e.formValidateDetail,\"payTime\",t)},expression:\"formValidateDetail.payTime\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.paynumber,callback:function(t){e.$set(e.formValidateDetail,\"paynumber\",t)},expression:\"formValidateDetail.paynumber\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"GDSreport\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.formValidateDetail.gdsreport,callback:function(t){e.$set(e.formValidateDetail,\"gdsreport\",t)},expression:\"formValidateDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"payDir\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.formValidateDetail.paydir,callback:function(t){e.$set(e.formValidateDetail,\"paydir\",t)},expression:\"formValidateDetail.paydir\"}},e._l(e.payDirs,function(t,r){return a(\"Option\",{key:r,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.realnumber,callback:function(t){e.$set(e.formValidateDetail,\"realnumber\",t)},expression:\"formValidateDetail.realnumber\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"异常工单\"}},[a(\"Button\",{attrs:{type:\"info\",size:\"small\"},on:{click:e.open_relateOrder}},[e._v(\"点击查看\")])],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"使用余额\",prop:\"usebalance\"}},[a(\"Input\",{attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:e.formValidateDetail.usebalance,callback:function(t){e.$set(e.formValidateDetail,\"usebalance\",t)},expression:\"formValidateDetail.usebalance\"}})],1)],1)],1),e._v(\" \"),a(\"Table\",{attrs:{border:\"\",columns:e.orderItemHeader,data:e.orderItem,size:\"small\"}})],1),e._v(\" \"),a(\"Tabs\",[a(\"TabPane\",{attrs:{label:\"任务处理\",icon:\"clipboard\"}},[a(\"Form\",{ref:\"banlishenpi\",staticStyle:{\"margin-top\":\"5px\"},attrs:{model:e.banlishenpi,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"审批备注\",prop:\"desc\"}},[a(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.banlishenpi.desc,callback:function(t){e.$set(e.banlishenpi,\"desc\",t)},expression:\"banlishenpi.desc\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"是否同意审批\",prop:\"agree\"}},[a(\"RadioGroup\",{model:{value:e.banlishenpi.agree,callback:function(t){e.$set(e.banlishenpi,\"agree\",t)},expression:\"banlishenpi.agree\"}},[a(\"Radio\",{attrs:{label:\"1\"}},[e._v(\"同意\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"0\"}},[e._v(\"驳回\")])],1)],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submit}},[e._v(\"提交\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"账期异常警示\",width:\"500\",\"mask-closable\":!1,closable:!1},model:{value:e.accoutError,callback:function(t){e.accoutError=t},expression:\"accoutError\"}},[a(\"Row\",[a(\"center\",[a(\"Icon\",{staticStyle:{color:\"red\",\"font-size\":\"40px\"},attrs:{type:\"alert\"}})],1),e._v(\" \"),a(\"center\",[a(\"h2\",{staticStyle:{color:\"red\",\"margin-top\":\"20px\"}},[e._v(\"该订单账期存在异常，请修正！\")])]),e._v(\" \"),a(\"h3\",{domProps:{innerHTML:e._s(e.errMsg)}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(t){e.accoutError=!1}}},[e._v(\"确认\")])],1)],1),e._v(\" \"),a(\"relate-order\",{attrs:{id:e.orderId}})],1)},[],!1,null,null,null);h.options.__file=\"dealWithApprove.vue\";var f=h.exports,y={props:{id:{type:[String,Number]}},data:function(){return{openRelateOrder:!1,header:[{title:\"订单号码\",key:\"unusualCode\",minWidth:100},{title:\"产品内容\",key:\"productContent\",minWidth:150},{title:\"异常类型\",key:\"unusualType\",minWidth:80},{title:\"审批是由\",key:\"applyMemo\",minWidth:200},{title:\"流程状态\",key:\"currentProcessName\",minWidth:100},{title:\"创建时间\",key:\"createDate\",minWidth:100},{title:\"更新时间\",key:\"updateDate\",minWidth:100}],data:[],loading:!1,unusualType:[],unusualType_map:new Map}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(a,r){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),a()})})},get_data:function(){var e=this,t={params:{orderId:this.id}};this.$Get(\"api/order/unusual/workorder/findUnusualWorkOrderByOrderId\",t,function(t){t.data.data&&e.data.push({applyMemo:t.data.data.applyMemo,companyId:t.data.data.companyId,createBy:t.data.data.createBy,createDate:Object(m.a)(t.data.data.createDate),updateDate:Object(m.a)(t.data.data.updateDate),id:t.data.data.id,currentProcessName:t.data.data.currentProcessName,productContent:t.data.data.productContent,unusualCode:t.data.data.unusualCode,unusualType:e.unusualType_map.get(t.data.data.unusualType)})})}},created:function(){var e=this,t=this;this.$bus.off(\"RELATE_ORDER_TWO\",!0),this.$bus.on(\"RELATE_ORDER_TWO\",function(a){t.get_data_center().then(t.get_data()),t.openRelateOrder=!0,e.data=[]})}},_=Object(i.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"对应异常工单\",width:\"70%\"},model:{value:e.openRelateOrder,callback:function(t){e.openRelateOrder=t},expression:\"openRelateOrder\"}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);_.options.__file=\"relateOrderTwo.vue\";var v={components:{relateOrderTwo:_.exports},props:[\"payDirs\"],data:function(){return{openOrderDetail:!1,formValidateDetail:{CompanyName:\"\",name:\"\",payTime:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\"},orderItem:[],orderItemHeader:[{title:\"序号\",type:\"index\",minWidth:60,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){var a=new RegExp(\"</br>\",\"g\");return e(\"div\",[e(\"Input\",{props:{value:t.row.memo.replace(a,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}],orderId:\"\"}},methods:{get_data:function(e){var t=this,a=\"api/order/detail/\"+e;this.$Get(a,{},function(e){t.formValidateDetail=e.data.data,t.orderItem=t.formValidateDetail.items;for(var a=0;a<t.orderItem.length;a++)if(\"会计到家\"==t.orderItem[a].product){t.kjdj=!0;break}})},open_relateOrder:function(){this.$bus.emit(\"RELATE_ORDER_TWO\",!0)}},created:function(){var e=this,t=this;this.$bus.on(\"OPEN_ORDER_DETAIL\",function(a){e.orderId=a,t.get_data(a),t.openOrderDetail=!0})}},b=(a(330),Object(i.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"100%\"},model:{value:e.openOrderDetail,callback:function(t){e.openOrderDetail=t},expression:\"openOrderDetail\"}},[a(\"Form\",{ref:\"formValidateDetail\",attrs:{model:e.formValidateDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.CompanyName,callback:function(t){e.$set(e.formValidateDetail,\"CompanyName\",t)},expression:\"formValidateDetail.CompanyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.name,callback:function(t){e.$set(e.formValidateDetail,\"name\",t)},expression:\"formValidateDetail.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.payTime,callback:function(t){e.$set(e.formValidateDetail,\"payTime\",t)},expression:\"formValidateDetail.payTime\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.paynumber,callback:function(t){e.$set(e.formValidateDetail,\"paynumber\",t)},expression:\"formValidateDetail.paynumber\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.realnumber,callback:function(t){e.$set(e.formValidateDetail,\"realnumber\",t)},expression:\"formValidateDetail.realnumber\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"payDir\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.formValidateDetail.paydir,callback:function(t){e.$set(e.formValidateDetail,\"paydir\",t)},expression:\"formValidateDetail.paydir\"}},e._l(e.payDirs,function(t,r){return a(\"Option\",{key:r,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"GDSreport\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.formValidateDetail.gdsreport,callback:function(t){e.$set(e.formValidateDetail,\"gdsreport\",t)},expression:\"formValidateDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"异常工单\"}},[a(\"Button\",{attrs:{type:\"info\",size:\"small\"},on:{click:e.open_relateOrder}},[e._v(\"点击查看\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{attrs:{id:\"show-order-item\",border:\"\",columns:e.orderItemHeader,data:e.orderItem,size:\"small\"}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"relate-order-two\",{attrs:{id:e.orderId}})],1)},[],!1,null,null,null));b.options.__file=\"orderDetail.vue\";var g={name:\"orderApprove_index\",components:{unApproveList:l,approveList:d,dealWithApprove:f,orderDetail:b.exports},data:function(){return{payDirs:[]}},methods:{get_data_center:function(){var e=this;this.$GetDataCenter(\"payDirs\",function(t){e.payDirs=t.data.data.payDirs})}},created:function(){this.get_data_center()}},k=Object(i.a)(g,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(\"div\",{staticStyle:{\"min-width\":\"900px\"}},[t(\"Tabs\",{attrs:{value:\"name1\"}},[t(\"TabPane\",{attrs:{label:\"订单审批\",name:\"name1\"}},[t(\"un-approve-list\")],1),this._v(\" \"),t(\"TabPane\",{attrs:{label:\"查看已审批\",name:\"name2\"}},[t(\"approve-list\")],1)],1)],1),this._v(\" \"),t(\"deal-with-approve\",{attrs:{payDirs:this.payDirs}}),this._v(\" \"),t(\"order-detail\",{attrs:{payDirs:this.payDirs}})],1)},[],!1,null,null,null);k.options.__file=\"index.vue\";t.default=k.exports}}]);"}