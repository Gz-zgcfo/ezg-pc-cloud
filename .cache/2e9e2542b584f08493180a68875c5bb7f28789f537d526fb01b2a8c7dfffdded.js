{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{826:function(t,a,n){\"use strict\";n.r(a);var o=n(114),r={props:[\"complaintType\",\"processType\"],data:function(){return{search_model:\"\",Nloading:!1,NpageTotal:new Number,Npage:\"1\",NpageSize:\"10\",Ndata:[],NformInline:{updatedate:[],createdate:[],companyname:\"\",customername:\"\",customertel:\"\",departname:\"\"},page:1,pageSize:10,current_row:\"\",header:[{title:\"客户\",width:100,key:\"name\"},{title:\"客户电话\",width:120,key:\"tel\"},{title:\"公司\",width:260,key:\"companyname\",render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",width:200,key:\"departname\"},{title:\"投诉类型\",width:120,key:\"typeName\"},{title:\"处理状态\",width:120,key:\"processName\"},{title:\"受理人\",width:120,key:\"receiving\"},{title:\"创建时间\",width:120,key:\"createdate\"},{title:\"更新时间\",width:120,key:\"updatedate\"},{title:\"创建人\",width:120,key:\"createby\"}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",processType:\"'unDone','doing'\",companyname:e.NformInline.companyname,customername:e.NformInline.customername,customertel:e.NformInline.customertel,bcreatedate:Object(o.a)(e.NformInline.createdate[0]),ecreatedate:Object(o.a)(e.NformInline.createdate[1]),bupdatedate:Object(o.a)(e.NformInline.updatedate[0]),eupdatedate:Object(o.a)(e.NformInline.updatedate[1]),departname:e.NformInline.departname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"type\",title:\"投诉类型\",format:\"complaintType\"},{field:\"processType\",title:\"处理状态\",format:\"processType\"},{field:\"receiving\",title:\"受理人\"},{field:\"createdate\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"},{field:\"createby\",title:\"创建人\"},{field:\"record\",title:\"投诉内容\"},{field:\"rx\",title:\"解决方案\"}]))},a=this.$MergeURL(\"api/customer/complaintList\",t);window.open(a)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.customername=\"\",this.NformInline.customertel=\"\",this.NformInline.updatedate=[],this.NformInline.createdate=[],this.NformInline.departname=\"\",this.getData()},getData:function(){var a=this;a.Nloading=!0;var e={params:{page:a.page,pageSize:a.pageSize,processType:\"'unDone','doing'\",sortField:\"updatedate\",companyname:a.NformInline.companyname,customername:a.NformInline.customername,customertel:a.NformInline.customertel,bcreatedate:Object(o.a)(a.NformInline.createdate[0]),ecreatedate:Object(o.a)(a.NformInline.createdate[1]),bupdatedate:Object(o.a)(a.NformInline.updatedate[0]),eupdatedate:Object(o.a)(a.NformInline.updatedate[1]),departname:a.NformInline.departname}};this.$Get(\"api/customer/complaintList\",e,function(e){a.Ndata=e.data.data.rows,a.NpageTotal=e.data.data.total,a.Nloading=!1;for(var t=0;t<a.Ndata.length;t++)a.Ndata[t].complaintManage=a.Ndata[t].complaint_manage,a.Ndata[t].typeName=a.complaintType.get(a.Ndata[t].type),a.Ndata[t].processName=a.processType.get(a.Ndata[t].processType),null==a.Ndata[t].createdate||\"\"==a.Ndata[t].createdate||(a.Ndata[t].createdate=a.Ndata[t].createdate.slice(0,10)),null==a.Ndata[t].updatedate||\"\"==a.Ndata[t].updatedate||(a.Ndata[t].updatedate=a.Ndata[t].updatedate.slice(0,10))})},save_current_row:function(e){this.current_row=e},NpageChange:function(e){this.page=e,this.getData()},NpageSizeChange:function(){this.pageSize=e,this.getData()},Add_deal_complain:function(){this.$bus.emit(\"ADD_COMPLAINT\",!0)},deal_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"DEAL_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")},open_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"SHOW_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")}},created:function(){var t=this;this.getData(),t.$bus.on(\"UPDATE_COMPLAINT\",function(e){t.getData()})}},l=n(4),i=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:t.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customername\",label:\"客户：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.NformInline.customername,callback:function(e){t.$set(t.NformInline,\"customername\",e)},expression:\"NformInline.customername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\"},model:{value:t.NformInline.createdate,callback:function(e){t.$set(t.NformInline,\"createdate\",e)},expression:\"NformInline.createdate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"更新时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\"},model:{value:t.NformInline.updatedate,callback:function(e){t.$set(t.NformInline,\"updatedate\",e)},expression:\"NformInline.updatedate\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.NformInline.departname,callback:function(e){t.$set(t.NformInline,\"departname\",e)},expression:\"NformInline.departname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customertel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.NformInline.customertel,callback:function(e){t.$set(t.NformInline,\"customertel\",e)},expression:\"NformInline.customertel\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.NformInline.companyname,callback:function(e){t.$set(t.NformInline,\"companyname\",e)},expression:\"NformInline.companyname\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1),t._v(\" \"),a(\"p\")],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintN.complaintN\"],expression:\"['complaintN.complaintN']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.Add_deal_complain}},[t._v(\"我要投诉\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintN.dealwith\"],expression:\"['complaintN.dealwith']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.deal_complain}},[t._v(\"我要处理\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.open_complain}},[t._v(\"查看\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.Ndata,loading:t.Nloading},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.open_complain}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.NpageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.NpageChange,\"on-page-size-change\":t.NpageSizeChange}})],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"unfinished.vue\";var s=i.exports,p={props:[\"complaintType\",\"processType\"],data:function(){return{search_model:\"\",Yloading:!1,NpageTotal:new Number,Npage:\"1\",NpageSize:\"10\",Ydata:[],YformInline:{updatedate:[],createdate:[],companyname:\"\",customername:\"\",customertel:\"\",departname:\"\"},page:1,pageSize:10,current_row:\"\",header:[{title:\"客户\",width:100,key:\"name\"},{title:\"客户电话\",width:120,key:\"tel\"},{title:\"公司\",width:240,key:\"companyname\",render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":14<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,14)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",width:200,key:\"departname\"},{title:\"投诉类型\",width:120,key:\"typeName\"},{title:\"处理状态\",width:120,key:\"processName\"},{title:\"受理人\",width:120,key:\"receiving\"},{title:\"创建时间\",width:120,key:\"createdate\"},{title:\"更新时间\",width:120,key:\"updatedate\"},{title:\"创建人\",width:120,key:\"createby\"}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",processType:\"done\",companyname:e.YformInline.companyname,customername:e.YformInline.customername,customertel:e.YformInline.customertel,bcreatedate:Object(o.a)(e.YformInline.createdate[0]),ecreatedate:Object(o.a)(e.YformInline.createdate[1]),bupdatedate:Object(o.a)(e.YformInline.updatedate[0]),eupdatedate:Object(o.a)(e.YformInline.updatedate[1]),departname:e.YformInline.departname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"type\",title:\"投诉类型\",format:\"complaintType\"},{field:\"processType\",title:\"处理状态\",format:\"processType\"},{field:\"receiving\",title:\"受理人\"},{field:\"createdate\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"},{field:\"createby\",title:\"创建人\"},{field:\"record\",title:\"投诉内容\"},{field:\"rx\",title:\"解决方案\"}]))},a=this.$MergeURL(\"api/customer/complaintList\",t);window.open(a)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.customername=\"\",this.YformInline.customertel=\"\",this.YformInline.updatedate=[],this.YformInline.createdate=[],this.YformInline.departname=\"\",this.getData()},getData:function(){var a=this;a.Yloading=!0;var e={params:{page:a.page,pageSize:a.pageSize,processType:\"done\",sortField:\"updatedate\",companyname:a.YformInline.companyname,customername:a.YformInline.customername,customertel:a.YformInline.customertel,bcreatedate:Object(o.a)(a.YformInline.createdate[0]),ecreatedate:Object(o.a)(a.YformInline.createdate[1]),bupdatedate:Object(o.a)(a.YformInline.updatedate[0]),eupdatedate:Object(o.a)(a.YformInline.updatedate[1]),departname:a.YformInline.departname}};this.$Get(\"api/customer/complaintList\",e,function(e){a.Ydata=e.data.data.rows,a.NpageTotal=e.data.data.total;for(var t=0;t<a.Ydata.length;t++)a.Ydata[t].typeName=a.complaintType.get(a.Ydata[t].type),a.Ydata[t].processName=a.processType.get(a.Ydata[t].processType),a.Ydata[t].complaintManage=a.Ydata[t].complaint_manage,null==a.Ydata[t].createdate||\"\"==a.Ydata[t].createdate||(a.Ydata[t].createdate=a.Ydata[t].createdate.slice(0,10)),null==a.Ydata[t].updatedate||\"\"==a.Ydata[t].updatedate||(a.Ydata[t].updatedate=a.Ydata[t].updatedate.slice(0,10));a.Yloading=!1})},save_current_row:function(e){this.current_row=e},YpageChange:function(e){this.page=e,this.getData()},YpageSizeChange:function(){this.pageSize=e,this.getData()},Add_deal_complain:function(){this.$bus.emit(\"ADD_COMPLAINT\",!0)},deal_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"DEAL_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")},open_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"SHOW_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")}},created:function(){var t=this;this.getData(),t.$bus.on(\"UPDATE_COMPLAINT\",function(e){t.getData()})}},c=Object(l.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:t.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customername\",label:\"客户：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.YformInline.customername,callback:function(e){t.$set(t.YformInline,\"customername\",e)},expression:\"YformInline.customername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\"},model:{value:t.YformInline.createdate,callback:function(e){t.$set(t.YformInline,\"createdate\",e)},expression:\"YformInline.createdate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"更新时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\"},model:{value:t.YformInline.updatedate,callback:function(e){t.$set(t.YformInline,\"updatedate\",e)},expression:\"YformInline.updatedate\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.YformInline.departname,callback:function(e){t.$set(t.YformInline,\"departname\",e)},expression:\"YformInline.departname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customertel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.YformInline.customertel,callback:function(e){t.$set(t.YformInline,\"customertel\",e)},expression:\"YformInline.customertel\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:t.YformInline.companyname,callback:function(e){t.$set(t.YformInline,\"companyname\",e)},expression:\"YformInline.companyname\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1),t._v(\" \"),a(\"p\")],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintY.dealwith\"],expression:\"['complaintY.dealwith']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.deal_complain}},[t._v(\"我要处理\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.open_complain}},[t._v(\"查看\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downloadExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.Ydata,loading:t.Yloading},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.open_complain}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.NpageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.YpageChange,\"on-page-size-change\":t.YpageSizeChange}})],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"finished.vue\";var m=c.exports,d={props:[\"complaintType\",\"processType\"],data:function(){return{loading:!1,deal_complaint:!1,deal:{},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:\"\"}},methods:{deal_complaint_detail:function(){var t=this;t.loading=!0;var e={id:t.deal.id,rx:t.deal.rx,processtype:t.deal.processType,complaintManage:t.deal.complaintManage};this.$Post(\"api/customer/updateComplaint\",e,function(e){t.deal_complaint=!1,t.loading=!1,t.$bus.emit(\"UPDATE_COMPLAINT\",!0)},function(e){t.loading=!1})}},created:function(){var t=this;t.$bus.on(\"DEAL_COMPLATNT\",function(e){t.deal_complaint=!0,t.deal=e})}},u=Object(l.a)(d,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n(\"div\",[n(\"Modal\",{attrs:{title:\"投诉处理\",width:\"600\"},model:{value:a.deal_complaint,callback:function(e){a.deal_complaint=e},expression:\"deal_complaint\"}},[n(\"Form\",{ref:\"deal\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:a.deal,\"label-width\":100}},[n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.deal.companyname,callback:function(e){a.$set(a.deal,\"companyname\",e)},expression:\"deal.companyname\"}})],1)],1),a._v(\" \"),n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"departname\",label:\"投诉部门：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.deal.departname,callback:function(e){a.$set(a.deal,\"departname\",e)},expression:\"deal.departname\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"typeName\",label:\"投诉类型：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.deal.typeName,callback:function(e){a.$set(a.deal,\"typeName\",e)},expression:\"deal.typeName\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:a.deal.record,callback:function(e){a.$set(a.deal,\"record\",e)},expression:\"deal.record\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"processType\",label:\"处理状态：\"}},[n(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",readonly:\"\"},model:{value:a.deal.processType,callback:function(e){a.$set(a.deal,\"processType\",e)},expression:\"deal.processType\"}},a._l(a.processType,function(e,t){return n(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"rx\",label:\"解决方案：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4},model:{value:a.deal.rx,callback:function(e){a.$set(a.deal,\"rx\",e)},expression:\"deal.rx\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"receiving\",label:\"受理人：\"}},[n(\"Input\",{attrs:{type:\"text\",rows:4,readonly:\"\"},model:{value:a.deal.receiving,callback:function(e){a.$set(a.deal,\"receiving\",e)},expression:\"deal.receiving\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"createby\",label:\"创建人：\"}},[n(\"Input\",{attrs:{type:\"text\",rows:4,readonly:\"\"},model:{value:a.deal.createby,callback:function(e){a.$set(a.deal,\"createby\",e)},expression:\"deal.createby\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"complaintManage\",label:\"客服反馈：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4},model:{value:a.deal.complaintManage,callback:function(e){a.$set(a.deal,\"complaintManage\",e)},expression:\"deal.complaintManage\"}})],1)],1)],1)],1),a._v(\" \"),n(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.deal_complaint_detail}},[a._v(\"处理\")]),a._v(\" \"),n(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){a.deal_complaint=!1}}},[a._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);u.options.__file=\"deal.vue\";var y=u.exports,h={props:[\"complaintType\",\"processType\"],data:function(){return{rows:4,show_complaint:!1,show:{},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:\"\"}},methods:{},created:function(){var t=this;t.$bus.on(\"SHOW_COMPLATNT\",function(e){t.show_complaint=!0,t.show=e})}},f=Object(l.a)(h,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n(\"div\",[n(\"Modal\",{attrs:{title:\"查看\",width:\"600\"},model:{value:a.show_complaint,callback:function(e){a.show_complaint=e},expression:\"show_complaint\"}},[n(\"Form\",{ref:\"show\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:a.show,\"label-width\":100}},[n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.show.companyname,callback:function(e){a.$set(a.show,\"companyname\",e)},expression:\"show.companyname\"}})],1)],1),a._v(\" \"),n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"departname\",label:\"投诉部门：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.show.departname,callback:function(e){a.$set(a.show,\"departname\",e)},expression:\"show.departname\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"typeName\",label:\"投诉类型：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.show.typeName,callback:function(e){a.$set(a.show,\"typeName\",e)},expression:\"show.typeName\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:a.show.record,callback:function(e){a.$set(a.show,\"record\",e)},expression:\"show.record\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"processType\",label:\"处理状态：\"}},[n(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:a.show.processType,callback:function(e){a.$set(a.show,\"processType\",e)},expression:\"show.processType\"}},a._l(a.processType,function(e,t){return n(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"rx\",label:\"解决方案：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:a.show.rx,callback:function(e){a.$set(a.show,\"rx\",e)},expression:\"show.rx\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"receiving\",label:\"受理人：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.show.receiving,callback:function(e){a.$set(a.show,\"receiving\",e)},expression:\"show.receiving\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"createby\",label:\"创建人：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.show.createby,callback:function(e){a.$set(a.show,\"createby\",e)},expression:\"show.createby\"}})],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"complaintManage\",label:\"客服反馈：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:a.show.complaintManage,callback:function(e){a.$set(a.show,\"complaintManage\",e)},expression:\"show.complaintManage\"}})],1)],1)],1)],1),a._v(\" \"),n(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){a.show_complaint=!1}}},[a._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);f.options.__file=\"show.vue\";var g=f.exports,_={props:[\"depart\",\"type\"],data:function(){return{loading:!1,rows:4,add_complaint:!1,add:{companyid:\"\",departid:\"\",type:\"\",record:\"\"},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:new Number,currentPage:new Number,InnerComplaintType:[]}},methods:{add_complaint_detail:function(){var t=this;t.loading=!0;var e={companyid:t.add.companyid,departid:t.add.departid,type:t.add.type,record:t.add.record};this.$Post(\"api/customer/createComplaint\",e,function(e){t.add_complaint=!1,t.loading=!1,t.$bus.emit(\"UPDATE_COMPLAINT\",!0),t.add.companyid=\"\",t.add.departid=\"\",t.add.type=\"\",t.add.record=\"\"},function(e){t.loading=!1})},close_complaint_detail:function(){this.add_complaint=!1,this.add.companyid=\"\",this.add.departid=\"\",this.add.type=\"\",this.add.record=\"\"},getCompany:function(){var n=this,e=\"\";n.currentPage=1,e=0==n.isSearch?\"/customer/company/list?page=1&pageSize=10\":\"/customer/company/list?page=1&pageSize=10&companyname=\"+n.searchCompany,n.selectCompany=!0,this.GetData(e,function(e){var t=e.data.data;n.company_data=[],n.company_data_total=t.total;for(var a=0;a<10;a++)n.company_data.push({CompanyName:t.rows[a].companyname,TEL:t.rows[a].customerTel,NAME:t.rows[a].customerName,cpid:t.rows[a].id,balance:t.rows[a].balance})})},keyDown:function(e){\"Enter\"==e.code&&this.searchCompanyData()},searchCompanyData:function(){var e=this;\"\"!=e.searchCompany?e.isSearch=!0:e.isSearch=!1,e.getCompany()},company_page_change:function(e){var n=this,t=\"\";t=0==n.isSearch?\"/customer/company/list?page=\"+e+\"&pageSize=10\":\"/customer/company/list?page=\"+e+\"&pageSize=10&companyname=\"+n.searchCompany,this.GetData(t,function(e){var t=e.data.data;n.company_data=[],n.company_data_total=t.total;for(var a=0;a<10;a++)n.company_data.push({CompanyName:t.rows[a].companyname,TEL:t.rows[a].customerTel,NAME:t.rows[a].customerName,cpid:t.rows[a].id,balance:t.rows[a].balance})})},rowSelect:function(e){this.selectCompany=!1,this.add.companyid=e.cpid,this.add.NAME=e.NAME,this.add.companyName=e.CompanyName},get_data_center:function(){var t=this;this.$GetDataCenter(\"InnerComplaintType\",function(e){t.InnerComplaintType=e.data.data.InnerComplaintType})}},created:function(){var t=this;t.$bus.on(\"ADD_COMPLAINT\",function(e){t.add_complaint=!0,t.get_data_center()})}},w=Object(l.a)(_,function(){var a=this,e=a.$createElement,n=a._self._c||e;return n(\"div\",[n(\"Modal\",{attrs:{title:\"我要投诉\",width:\"600\"},model:{value:a.add_complaint,callback:function(e){a.add_complaint=e},expression:\"add_complaint\"}},[n(\"Form\",{ref:\"add\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:a.add,\"label-width\":100}},[n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司：\"}},[n(\"Input\",{attrs:{type:\"text\",readonly:\"\"},on:{\"on-focus\":a.getCompany},model:{value:a.add.companyName,callback:function(e){a.$set(a.add,\"companyName\",e)},expression:\"add.companyName\"}})],1)],1),a._v(\" \"),n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"departid\",label:\"投诉部门：\"}},[n(\"Select\",{attrs:{transfer:\"\",placeholder:\"\"},model:{value:a.add.departid,callback:function(e){a.$set(a.add,\"departid\",e)},expression:\"add.departid\"}},a._l(a.depart,function(e,t){return n(\"Option\",{key:t,attrs:{value:e.ID}},[a._v(a._s(e.departname))])}),1)],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"type\",label:\"投诉类型：\"}},[n(\"Select\",{attrs:{transfer:\"\",placeholder:\"\"},model:{value:a.add.type,callback:function(e){a.$set(a.add,\"type\",e)},expression:\"add.type\"}},a._l(a.InnerComplaintType,function(e,t){return n(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"24\"}},[n(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:a.rows},model:{value:a.add.record,callback:function(e){a.$set(a.add,\"record\",e)},expression:\"add.record\"}})],1)],1)],1)],1),a._v(\" \"),n(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.add_complaint_detail}},[a._v(\"新增\")]),a._v(\" \"),n(\"Button\",{attrs:{type:\"ghost\"},on:{click:a.close_complaint_detail}},[a._v(\"关闭\")])],1)],1),a._v(\" \"),n(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:a.selectCompany,callback:function(e){a.selectCompany=e},expression:\"selectCompany\"}},[n(\"Row\",{attrs:{gutter:16}},[n(\"Col\",{attrs:{span:\"8\"}},[n(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":a.keyDown},model:{value:a.searchCompany,callback:function(e){a.searchCompany=e},expression:\"searchCompany\"}},[n(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:a.searchCompanyData},slot:\"append\"})],1)],1)],1),a._v(\" \"),n(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:a.columns44,data:a.company_data},on:{\"on-row-dblclick\":a.rowSelect}}),a._v(\" \"),n(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.company_data_total,current:a.currentPage,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){a.currentPage=e},\"on-change\":a.company_page_change}}),a._v(\" \"),n(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);w.options.__file=\"add_complaint.vue\";var v={name:\"complaintcenter_index\",components:{unFinsih:s,finsih:m,deal:y,show:g,addComplaint:w.exports},data:function(){return{smsDept:[],complaintType:[],processType:[],user:[],smsDept_map:new Map,complaintType_map:new Map,processType_map:new Map,user_map:new Map}},methods:{getData:function(){var a=this;this.$GetDataCenter(\"complaintType,processType\",function(e){var t=e.data.data;a.complaintType=t.complaintType,a.processType=t.processType,a.complaintType_map=Object(o.e)(a.complaintType),a.processType_map=Object(o.e)(a.processType)}),this.$http.get(\"api/customer/checkDepartMsg\").then(function(e){a.smsDept=e.data.data})},getUser:function(){var a=this;this.$http.get(\"api/user/list\",{params:{page:1,pageSize:1e4}}).then(function(e){var t=e.data.data.rows;a.user=t,a.user_map=Object(o.e)(a.user)})}},created:function(){this.getData()}},b=Object(l.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{staticStyle:{\"padding-bottom\":\"200px\"},attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"待处理\",name:\"name1\"}},[a(\"un-finsih\",{attrs:{complaintType:e.complaintType_map,processType:e.processType_map}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"finsih\",{attrs:{complaintType:e.complaintType_map,processType:e.processType_map}})],1)],1),e._v(\" \"),a(\"deal\",{attrs:{complaintType:e.complaintType_map,processType:e.processType}}),e._v(\" \"),a(\"show\",{attrs:{complaintType:e.complaintType,processType:e.processType}}),e._v(\" \"),a(\"add-complaint\",{attrs:{depart:e.smsDept,type:e.complaintType}})],1)},[],!1,null,null,null);b.options.__file=\"complaintcenter_index.vue\";a.default=b.exports},875:function(e,t,a){\"use strict\";a.r(t);var n={name:\"customerRate_index\",data:function(){return{data:[],header:[{title:\"序号\",type:\"index\",width:80},{title:\"公司名称\",minWidth:200,render:function(e,t){for(var a=[],n=0;n<t.row.itemObj.length;n++)a.push(t.row.itemObj[n].company_name);return e(\"div\",a.join(\",\"))}},{title:\"产品名称\",minWidth:200,render:function(e,t){for(var a=[],n=0;n<t.row.itemObj.length;n++)a.push(t.row.itemObj[n].product_name);return e(\"div\",a.join(\",\"))}},{title:\"服务人员\",minWidth:120,render:function(e,t){return e(\"div\",t.row.itemObj[0].server_name)}},{title:\"评价完结\",minWidth:120,key:\"status\"},{title:\"专业能力\",minWidth:120,key:\"ability_ranks\"},{title:\"服务态度\",minWidth:120,key:\"attitude_ranks\"},{title:\"服务态度\",minWidth:120,key:\"service_ranks\"},{title:\"意见与反馈\",minWidth:120,key:\"customer_memo\"},{title:\"评价时间\",minWidth:120,key:\"evaluate_time\"}],total:0,page:1,pageSize:10,loading:!1,search_model:\"\",formValidateSearch:{companyName:\"\",type:\"\"}}},methods:{Search:function(){this.page=1,this.get_data()},pageChange:function(e){this.page=e,this.get_data()},handleReset:function(){this.page=1,this.$refs.formValidateSearch.resetFields(),this.get_data()},get_data:function(){var a=this;a.loading=!0;var e={params:{page:a.page,pageSize:a.pageSize,sortField:\"id\",order:\"desc\"}};this.$Get(\"api/customer/work/order/callback/list\",e,function(e){a.loading=!1,a.total=e.data.data.total,a.data=e.data.data.rows;for(var t=0;t<a.data.length;t++)a.data[t].itemObj=JSON.parse(a.data[t].items),\"Y\"==a.data[t].callback_status?a.data[t].status=\"完成\":a.data[t].status=\"未完成\",a.data[t].evaluate_time&&(a.data[t].evaluate_time=a.data[t].evaluate_time.slice(0,10))})}},created:function(){this.get_data()}},o=a(4),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}}),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{loading:t.loading,\"highlight-row\":\"\",size:\"small\",border:\"\",columns:t.header,data:t.data}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\",\"padding-bottom\":\"10px\"},attrs:{size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}})],1)],1)],1)},[],!1,null,null,null);r.options.__file=\"index.vue\";t.default=r.exports}}]);"}