{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{862:function(e,t,a){\"use strict\";a.r(t);var o=a(114),n={name:\"customerFollowUp_index\",data:function(){return{search_model:\"\",header:[{title:\"客户名称\",key:\"name\",minWidth:100},{title:\"联系方式\",key:\"tel\",minWidth:120},{title:\"公司名称\",key:\"companyname\",width:250,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":15<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,15)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"跟进类型\",key:\"followuptype\",minWidth:100},{title:\"完成状态\",key:\"finish_flag\",minWidth:100},{title:\"跟进内容\",key:\"servicecontent\",width:200,render:function(e,t){return\"\"==t.row.servicecontent||null==t.row.servicecontent?\"\":10<t.row.servicecontent.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.servicecontent.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.servicecontent)])]):e(\"span\",t.row.servicecontent)}},{title:\"录入人\",key:\"servicename\",minWidth:100},{title:\"录入部门\",key:\"departname\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:180},{title:\"跟进人\",key:\"followname\",minWidth:100},{title:\"更新时间\",key:\"contentcreatedate\",minWidth:180}],data:[],loading:!1,searchData:{createdate:[],companyname:\"\",followuptype:\"\",servicename:\"\",updatedate:[],departname:\"\"},page:1,pageSize:10,pageTotal:new Number,followUpType:\"\",followUpType_Map:\"\"}},methods:{search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.searchData.createdate=[],this.searchData.companyname=\"\",this.searchData.followuptype=\"\",this.searchData.servicename=\"\",this.searchData.updatedate=[],this.searchData.departname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"followuptype\",title:\"跟进类型\",format:\"follow_up_type\"},{field:\"servicecontent\",title:\"跟进内容\"},{field:\"servicename\",title:\"录入人\"},{field:\"followname\",title:\"跟进人\"},{field:\"departname\",title:\"录入部门\"},{field:\"createdate\",title:\"创建时间\"},{field:\"contentcreatedate\",title:\"更新时间\"},{field:\"customertype\",title:\"客户状态\",format:\"customerTypes\"},{field:\"customersource\",title:\"客户来源\",format:\"cluesources\"},{field:\"area\",title:\"区域\",format:\"area\"}])),bcreatedate:Object(o.a)(e.searchData.createdate[0]),ecreatedate:Object(o.a)(e.searchData.createdate[1]),companyname:e.searchData.companyname,followuptype:e.searchData.followuptype,servicename:e.searchData.servicename,departname:e.searchData.departname,bupdatedate:Object(o.a)(e.searchData.updatedate[0]),eupdatedate:Object(o.a)(e.searchData.updatedate[1])},a=this.$MergeURL(\"api/customer/customerFollowMsgList\",t);window.open(a)},downloadExcelField:function(){},getData:function(){var a=this;a.loading=!0;var e={params:{page:a.page,pageSize:a.pageSize,bcreatedate:Object(o.a)(a.searchData.createdate[0]),ecreatedate:Object(o.a)(a.searchData.createdate[1]),companyname:a.searchData.companyname,followuptype:a.searchData.followuptype,servicename:a.searchData.servicename,departname:a.searchData.departname,bupdatedate:Object(o.a)(a.searchData.updatedate[0]),eupdatedate:Object(o.a)(a.searchData.updatedate[1])}};this.$Get(\"api/customer/customerFollowMsgList\",e,function(e){a.data=e.data.data.rows,a.pageTotal=e.data.data.total,a.loading=!1;for(var t=0;t<a.data.length;t++)a.data[t].followuptype=a.followUpType_Map.get(a.data[t].followuptype),\"Y\"==a.data[t].finish_flag?a.data[t].finish_flag=\"完成\":\"N\"==a.data[t].finish_flag&&(a.data[t].finish_flag=\"未完成\")},function(e){})},getDataCenter:function(){var t=this;this.$GetDataCenter(\"follow_up_type\",function(e){t.followUpType=e.data.data.follow_up_type,t.followUpType_Map=t.$array2map(t.followUpType)})}},created:function(){this.getDataCenter(),this.getData()}},r=a(4),l=Object(r.a)(n,function(){var a=this,e=a.$createElement,o=a._self._c||e;return o(\"div\",[o(\"Card\",[o(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[o(\"Collapse\",{model:{value:a.search_model,callback:function(e){a.search_model=e},expression:\"search_model\"}},[o(\"Panel\",{attrs:{name:\"1\"}},[o(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),a._v(\"\\n                        筛选\\n                        \"),o(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),o(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.search(e):null}},slot:\"content\"},[o(\"Form\",{ref:\"searchData\",attrs:{model:a.searchData,\"label-width\":100}},[o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[o(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.searchData.companyname,callback:function(e){a.$set(a.searchData,\"companyname\",e)},expression:\"searchData.companyname\"}})],1)],1),a._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"servicename\",label:\"创建人：\"}},[o(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.searchData.servicename,callback:function(e){a.$set(a.searchData,\"servicename\",e)},expression:\"searchData.servicename\"}})],1)],1),a._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"followuptype\",label:\"跟进类型：\"}},[o(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},on:{\"on-change\":a.search},model:{value:a.searchData.followuptype,callback:function(e){a.$set(a.searchData,\"followuptype\",e)},expression:\"searchData.followuptype\"}},a._l(a.followUpType,function(e,t){return o(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"departname\",label:\"录入部门：\"}},[o(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.searchData.departname,callback:function(e){a.$set(a.searchData,\"departname\",e)},expression:\"searchData.departname\"}})],1)],1),a._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"createdate\",label:\"企业录入时间：\"}},[o(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:a.searchData.createdate,callback:function(e){a.$set(a.searchData,\"createdate\",e)},expression:\"searchData.createdate\"}})],1)],1),a._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"内容创建时间：\"}},[o(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:a.searchData.updatedate,callback:function(e){a.$set(a.searchData,\"updatedate\",e)},expression:\"searchData.updatedate\"}})],1)],1)],1),a._v(\" \"),o(\"FormItem\",[o(\"Button\",{attrs:{type:\"primary\"},on:{click:a.search}},[a._v(\"搜索\")]),a._v(\" \"),o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:a.reset}},[a._v(\"重置\")])],1)],1)],1),a._v(\" \"),o(\"p\")],1)],1)],1),a._v(\" \"),o(\"Row\",[o(\"ButtonGroup\",[o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.downloadExcel}},[a._v(\"导出Excel\")])],1)],1),a._v(\" \"),o(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[o(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.header,loading:a.loading,data:a.data}}),a._v(\" \"),o(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,current:a.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1)],1)},[],!1,null,null,null);l.options.__file=\"followUpdata.vue\";t.default=l.exports}}]);"}