{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{447:function(t,e,a){\"use strict\";a.r(e);var o={name:\"complainAndAdvice_index\",data:function(){return{button_loading:!1,replycontent:\"\",openDetail:!1,openReply:!1,search:\"\",header:[{title:\"系统评价得分\",key:\"score\",minWidth:150},{title:\"意见或建议\",key:\"suggestion\",minWidth:300},{title:\"评价时间\",key:\"createdate\",minWidth:150},{title:\"评价人\",key:\"realname\",minWidth:150}],data:[],page:1,total:new Number,current_row:\"\"}},methods:{getData:function(){var t=this,e={params:{page:t.page,pageSize:10,sortField:\"createdate\"}};this.$Get(\"api/system/systemFeedbackList\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total})},showdetail:function(){\"\"==this.current_row||null==this.current_row?this.$Message.warning(\"请选择一行进行查看！\"):this.openDetail=!0},close_detail:function(){this.openDetail=!1},reply:function(){\"\"==this.current_row||null==this.current_row?this.$Message.warning(\"请选择一行进行查看！\"):this.openReply=!0},submit_reply:function(){var t=this;t.button_loading=!0;var e={feedback:t.current_row.id,feedbackby:t.current_row.createby,replycontent:t.replycontent};this.$Post(\"api/system/replySystemFeedback\",e,function(e){t.button_loading=!1,t.openReply=!1},function(e){t.button_loading=!1})},close_reply:function(){this.openReply=!1},save_current_row:function(t){this.current_row=t},pageChange:function(t){this.page=t,this.getData()}},created:function(){this.getData()}},n=a(2),r=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.showdetail}},[t._v(\"查看\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.reply}},[t._v(\"回复\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.showdetail}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看详情\",width:\"600\"},model:{value:t.openDetail,callback:function(e){t.openDetail=e},expression:\"openDetail\"}},[a(\"Form\",{attrs:{\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"评价人：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.current_row.realname,callback:function(e){t.$set(t.current_row,\"realname\",e)},expression:\"current_row.realname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"反馈与意见：\"}},[a(\"Input\",{attrs:{type:\"textarea\",readonly:\"\"},model:{value:t.current_row.suggestion,callback:function(e){t.$set(t.current_row,\"suggestion\",e)},expression:\"current_row.suggestion\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close_detail}},[t._v(\"关闭\")])],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"回复\",width:\"600\"},model:{value:t.openReply,callback:function(e){t.openReply=e},expression:\"openReply\"}},[a(\"Form\",{attrs:{\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"realname\",label:\"评价人：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.current_row.realname,callback:function(e){t.$set(t.current_row,\"realname\",e)},expression:\"current_row.realname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"suggestion\",label:\"反馈与意见：\"}},[a(\"Input\",{attrs:{type:\"textarea\",readonly:\"\"},model:{value:t.current_row.suggestion,callback:function(e){t.$set(t.current_row,\"suggestion\",e)},expression:\"current_row.suggestion\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"replycontent\",label:\"回复内容：\"}},[a(\"Input\",{attrs:{type:\"textarea\"},model:{value:t.replycontent,callback:function(e){t.replycontent=e},expression:\"replycontent\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.button_loading},on:{click:t.submit_reply}},[t._v(\"提交\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close_reply}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);r.options.__file=\"complainAndAdvice.vue\";e.default=r.exports}}]);"}