{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{390:function(e,t,a){\"use strict\";a.r(t);var r=a(9),o={data:function(){return{overdueOpen:!1,content:\"\",selectRow:{},loading:!1}},methods:{submit:function(){var e=this;e.loading=!0;var t={params:{id:e.selectRow.id,overdueCause:e.content}};this.$Get(\"api/order/work/order/setOverdueCause\",t,function(t){e.loading=!1,e.overdueOpen=!1,r.a.$emit(\"flowsuccess\",!0)},function(t){e.loading=!1})}},computed:{isContent:function(){return!this.content}},created:function(){var e=this;e.$bus.on(\"OPEN_OVER_DUE_REASON\",function(t){e.selectRow={},e.overdueOpen=!0,e.selectRow=t,e.content=\"\"})}},n=a(2),i=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Modal\",{attrs:{title:\"逾期原因\",width:\"400\"},model:{value:e.overdueOpen,callback:function(t){e.overdueOpen=t},expression:\"overdueOpen\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{gutter:10}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"h3\",[e._v(\"服务公司：\")])]),e._v(\" \"),a(\"Col\",{attrs:{span:\"16\"}},[a(\"h3\",[e._v(e._s(e.selectRow.companyname))])])],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{gutter:10}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"h3\",[e._v(\"产品名称：\")])]),e._v(\" \"),a(\"Col\",{attrs:{span:\"16\"}},[a(\"h3\",[e._v(e._s(e.selectRow.product))])])],1),e._v(\" \"),a(\"Row\",[a(\"Input\",{attrs:{type:\"textarea\",placeholder:\"请填写逾期原因！\",rows:5},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",long:\"\",disabled:e.isContent,loading:e.loading},on:{click:e.submit}},[e._v(\"提交\")])],1)],1)},[],!1,null,null,null);i.options.__file=\"overdueReason.vue\";var s=i.exports,l={data:function(){return{backup:\"\",current_row:new Object,flow_show:!1,flow_message:{companyName:\"\"}}},methods:{save_flow:function(){var e=this,t={workOrderId:e.current_row.id,backup:e.backup};this.$http.post(\"api/order/next\",t).then(function(t){4e4==t.data.msgCode?\"流转成功\"==t.data.msg?(e.$Message.success(t.data.msg),e.flow_show=!1,r.a.$emit(\"flowsuccess\",!0)):e.$Message.warning(t.data.msg):e.$Message.warning(\"流转失败\")}).catch(function(t){e.$Message.warning(\"流转失败\")})}},created:function(){var e=this;r.a.$on(\"myflow\",function(t){e.flow_show=!0,e.current_row=t})}},c=Object(n.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{width:\"700\",title:\"流转\"},model:{value:e.flow_show,callback:function(t){e.flow_show=t},expression:\"flow_show\"}},[a(\"Form\",{ref:\"current_row\",attrs:{model:e.current_row,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"CurrentProcess\",label:\"当前流程：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.CurrentProcess,callback:function(t){e.$set(e.current_row,\"CurrentProcess\",t)},expression:\"current_row.CurrentProcess\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.product,callback:function(t){e.$set(e.current_row,\"product\",t)},expression:\"current_row.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.companyname,callback:function(t){e.$set(e.current_row,\"companyname\",t)},expression:\"current_row.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"servername\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.servername,callback:function(t){e.$set(e.current_row,\"servername\",t)},expression:\"current_row.servername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"归属客户：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.name,callback:function(t){e.$set(e.current_row,\"name\",t)},expression:\"current_row.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",readonly:\"\"},model:{value:e.current_row.departname,callback:function(t){e.$set(e.current_row,\"departname\",t)},expression:\"current_row.departname\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.save_flow}},[e._v(\"确定\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.flow_show=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"flow.vue\";var p=c.exports,d={data:function(){var e=this;return{managestatus:[],order:\"desc\",sortField:\"updatedate\",search_model:\"\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\",product:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>12?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":t.row.product.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"计划完成时间\",key:\"person_plan_finish_date\",width:140},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"逾期原因\",key:\"overdue_cause\",width:150,render:function(e,t){return\"\"==t.row.overdue_cause||null==t.row.overdue_cause?\"\":t.row.overdue_cause.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.overdue_cause.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.overdue_cause)])]):e(\"span\",t.row.overdue_cause)}},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"备注\",key:\"memo\",width:150,render:function(e,t){return\"\"==t.row.memo||null==t.row.memo?\"\":t.row.memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.memo)])]):e(\"span\",t.row.memo)}},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.flowChart(a)}}},\"[流程图]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},directives:[{name:\"permission\",value:\"commercialStop\"}],on:{click:function(){var t=e;if(null==a.row.resumeFlag||3==a.row.resumeFlag){var r=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=3\");e.$http.get(r).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==a.row.resumeFlag){var o=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=2\");e.$http.get(o).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}],tempArray:[]}},methods:{get_all_selection:function(e){this.tempArray=e},flow_all:function(){var e=this;if(0==this.tempArray.length)e.$Message.warning(\"请选择需要流转的工单！\");else for(var t=function(t){var a={workOrderId:e.tempArray[t].id,backup:\"批量流转\"};e.$Post(\"api/order/next\",a,function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)},function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)})},a=0;a<this.tempArray.length;a++)t(a)},sort:function(e){\"\"==e.key?this.sortField=\"updatedate\":\"customer_area\"==e.key?this.sortField=\"area\":\"customer_status\"==e.key?this.sortField=\"customertype\":this.sortField=e.key,\"normal\"==e.order?(this.order=\"\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"30\",page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,product:this.formInline.product,serviceDept:\"'BUSSINESS'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var e=this;e.Sloading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,companyName:e.formInline.companyname,serviceName:e.formInline.servicename,product:e.formInline.product,serviceDept:\"'BUSSINESS'\"}};e.$http.get(\"api/order/workOrderList?workOrderStatus=30&\",t).then(function(t){e.$backToLogin(t),e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)\"\"!=e.data[a].CreateDate&&null!=e.data[a].CreateDate&&(e.data[a].CreateDate=e.data[a].CreateDate.slice(0,10)),\"\"!=e.data[a].ServiceStart&&null!=e.data[a].ServiceStart&&(e.data[a].ServiceStart=e.data[a].ServiceStart.slice(0,10)),\"\"!=e.data[a].UpdateDate&&null!=e.data[a].UpdateDate&&(e.data[a].UpdateDate=e.data[a].UpdateDate.slice(0,10));e.Sloading=!1})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.formInline.product=\"\",this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?2==this.current_row.resumeFlag?this.$Message.warning(\"当前工单已锁定！\"):r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},open_set_time:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_SET_FINISH_TIME\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},over_due_reason:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_OVER_DUE_REASON\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var e=this;this.getData(),r.a.$on(\"flowsuccess\",function(t){e.getData()})}},m=Object(n.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyname,callback:function(t){e.$set(e.formInline,\"companyname\",t)},expression:\"formInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.servicename,callback:function(t){e.$set(e.formInline,\"servicename\",t)},expression:\"formInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.product,callback:function(t){e.$set(e.formInline,\"product\",t)},expression:\"formInline.product\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.showflow}},[e._v(\"流转\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.open_set_time}},[e._v(\"设置计划完成时间\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.over_due_reason}},[e._v(\"逾期原因\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.showdetail}},[e._v(\"查询详情\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.company}},[e._v(\"查看公司\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data,loading:e.Sloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.showdetail,\"on-sort-change\":e.sort,\"on-selection-change\":e.get_all_selection}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowChart1,callback:function(t){e.flowChart1=t},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:e.flowChartImg}})])],1)],1)},[],!1,null,null,null);m.options.__file=\"serving.vue\";var u=m.exports,h={data:function(){return{formInline:{companyName:\"\",ordercode:\"\",createbyname:\"\",approval:\"\"}}},methods:{search:function(){r.a.$emit(\"search\",this.formInline)},reset:function(){this.formInline.companyName=\"\",this.formInline.ordercode=\"\",this.formInline.createbyname=\"\",this.formInline.approval=\"\",r.a.$emit(\"reset\",!0)}}},w=Object(n.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Poptip\",{staticStyle:{float:\"right\",\"margin-right\":\"20px\"},attrs:{title:\"筛选\",placement:\"bottom-end\",width:\"700\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}}},[a(\"Button\",{attrs:{type:\"text\",size:\"large\",icon:\"funnel\"}},[e._v(\"筛选\")]),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyName,callback:function(t){e.$set(e.formInline,\"companyName\",t)},expression:\"formInline.companyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyName,callback:function(t){e.$set(e.formInline,\"companyName\",t)},expression:\"formInline.companyName\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)},[],!1,null,null,null);w.options.__file=\"search.vue\";var f=w.exports,g=a(25),v={components:{Search:f},props:[\"companyarea\"],data:function(){var e=this;return{isAdmin:!1,managestatus:[],search_model:\"\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\",product:\"\",updatedate:[],createdate:[],departname:\"\",customerName:\"\",tel:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],workOrderStatus:[],workOrderStatus_map:new Map,sortField:\"updatedate\",order:\"desc\",header:[{title:\"工单状态\",key:\"workOrderStatus\",width:120,sortable:!0,render:function(e,t){return\"10\"==t.row.workOrderStatus?e(\"div\",\"未分配\"):\"20\"==t.row.workOrderStatus?e(\"div\",\"未开始\"):\"30\"==t.row.workOrderStatus?e(\"div\",\"服务中\"):\"40\"==t.row.workOrderStatus?e(\"div\",\"暂停\"):\"50\"==t.row.workOrderStatus?e(\"div\",\"退款终止\"):\"60\"==t.row.workOrderStatus?e(\"div\",\"已完结\"):e(\"div\",\"无状态\")}},{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>12?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"公司注册地\",key:\"companyarea\",width:120},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":t.row.product.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"逾期原因\",key:\"overdue_cause\",width:150,render:function(e,t){return\"\"==t.row.overdue_cause||null==t.row.overdue_cause?\"\":t.row.overdue_cause.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.overdue_cause.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.overdue_cause)])]):e(\"span\",t.row.overdue_cause)}},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"备注\",key:\"memo\",width:150,render:function(e,t){return\"\"==t.row.memo||null==t.row.memo?\"\":t.row.memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.memo)])]):e(\"span\",t.row.memo)}},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.flowChart(a)}}},\"[流程图]\")])}}]}},methods:{sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,product:this.formInline.product,bupdatedate:Object(g.a)(this.formInline.updatedate[0]),eupdatedate:Object(g.a)(this.formInline.updatedate[1]),bcreatedate:Object(g.a)(this.formInline.createdate[0]),ecreatedate:Object(g.a)(this.formInline.createdate[1]),customerName:this.formInline.customerName,tel:this.formInline.tel,departname:this.formInline.departname,serviceDept:\"'BUSSINESS'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"workOrderStatus\",title:\"工单状态\",format:\"workOrderStatus\"},{field:\"companyname\",title:\"公司名称\"},{field:\"companyarea\",title:\"公司注册地\",format:\"companyarea\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"UpdateDate\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var e=this;e.Sloading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,companyName:e.formInline.companyname,serviceName:e.formInline.servicename,product:e.formInline.product,bupdatedate:Object(g.a)(e.formInline.updatedate[0]),eupdatedate:Object(g.a)(e.formInline.updatedate[1]),bcreatedate:Object(g.a)(e.formInline.createdate[0]),ecreatedate:Object(g.a)(e.formInline.createdate[1]),departname:e.formInline.departname,customerName:e.formInline.customerName,tel:e.formInline.tel,serviceDept:\"'BUSSINESS'\"}};e.$http.get(\"api/order/workOrderList\",t).then(function(t){e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)if(\"\"!=e.data[a].CreateDate&&null!=e.data[a].CreateDate&&(e.data[a].CreateDate=e.data[a].CreateDate.slice(0,10)),\"\"!=e.data[a].ServiceStart&&null!=e.data[a].ServiceStart&&(e.data[a].ServiceStart=e.data[a].ServiceStart.slice(0,10)),\"\"!=e.data[a].UpdateDate&&null!=e.data[a].UpdateDate&&(e.data[a].UpdateDate=e.data[a].UpdateDate.slice(0,10)),null==e.data[a].companyarea||\"\"==e.data[a].companyarea)e.data[a].companyarea=\"\";else for(var r=e.data[a].companyarea.split(\"-\"),o=0;o<e.companyarea.length;o++)if(r[0]==e.companyarea[o].id)for(var n=0;n<e.companyarea[o].children.length;n++)r[1]==e.companyarea[o].children[n].id&&(e.data[a].companyarea=e.companyarea[o].typename+\" - \"+e.companyarea[o].children[n].typename);e.Sloading=!1})},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.formInline.product=\"\",this.formInline.updatedate=[],this.formInline.createdate=[],this.formInline.departname=\"\",this.formInline.tel=\"\",this.formInline.customerName=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},reset_wordorder_process:function(){if(\"\"!=this.current_row){var e=this,t={params:{workOrderId:e.current_row.id}};this.$Get(\"api/order/resetWorkOrderProcess\",t,function(t){e.$Message.success(t.data.msg)})}else this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")},getDataCenter:function(){var e=this;this.$GetDataCenter(\"workOrderStatus\",function(t){e.workOrderStatus=t.data.workOrderStatus,e.workOrderStatus_map=e.$array2map(e.workOrderStatus)})}},created:function(){var e=this;this.getDataCenter(),this.getData(),r.a.$on(\"flowsuccess\",function(t){e.getData()}),10059==localStorage.getItem(\"id\")?e.isAdmin=!0:e.isAdmin=!1}},_=Object(n.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyname,callback:function(t){e.$set(e.formInline,\"companyname\",t)},expression:\"formInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.servicename,callback:function(t){e.$set(e.formInline,\"servicename\",t)},expression:\"formInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.product,callback:function(t){e.$set(e.formInline,\"product\",t)},expression:\"formInline.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.departname,callback:function(t){e.$set(e.formInline,\"departname\",t)},expression:\"formInline.departname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"工单创建时间：\"}},[a(\"DatePicker\",{attrs:{type:\"daterange\",size:\"small\",transfer:\"\"},model:{value:e.formInline.createdate,callback:function(t){e.$set(e.formInline,\"createdate\",t)},expression:\"formInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"实际完成时间：\"}},[a(\"DatePicker\",{attrs:{type:\"daterange\",size:\"small\",transfer:\"\"},model:{value:e.formInline.updatedate,callback:function(t){e.$set(e.formInline,\"updatedate\",t)},expression:\"formInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customerName\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.customerName,callback:function(t){e.$set(e.formInline,\"customerName\",t)},expression:\"formInline.customerName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.tel,callback:function(t){e.$set(e.formInline,\"tel\",t)},expression:\"formInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.showdetail}},[e._v(\"查询详情\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.company}},[e._v(\"查看公司\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")]),e._v(\" \"),e.isAdmin?a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.reset_wordorder_process}},[e._v(\"重新工单流程\")]):e._e()],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{loading:e.Sloading,\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.showdetail,\"on-sort-change\":e.sort}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowChart1,callback:function(t){e.flowChart1=t},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:e.flowChartImg}})])],1)],1)},[],!1,null,null,null);_.options.__file=\"all.vue\";var y=_.exports,I={data:function(){return{loading:!1,openFinishWorkorder:!1,header:[{title:\"创建时间\",key:\"createdate\",width:150},{title:\"#\",key:\"realpath\",render:function(e,t){return\"\"==t.row.realpath||null==t.row.realpath?\"\":e(\"div\",{},[e(\"img\",{domProps:{height:100,src:\"/api/assets/\"+t.row.realpath},on:{click:function(){window.open(\"/api/assets/\"+t.row.realpath)}}})])}}],data:[]}},methods:{get_data:function(e){var t=this;t.loading=!0,t.openFinishWorkorder=!0;var a={params:{workorderId:e,page:1,pageSize:100,sortField:\"createdate\",order:\"desc\"}};t.$Get(\"api/legwork/showAttendancePictuer\",a,function(e){t.loading=!1,t.data=e.data.data.rows})}},created:function(){var e=this;e.$bus.on(\"OPEN_FINISH_WORKORDER\",function(t){e.get_data(t)})}},b=Object(n.a)(I,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"完结证明\",width:\"400\"},model:{value:e.openFinishWorkorder,callback:function(t){e.openFinishWorkorder=t},expression:\"openFinishWorkorder\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data,loading:e.loading}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);b.options.__file=\"finishWorkorder.vue\";var k={components:{finishWorkorder:b.exports},data:function(){var e=this;return{managestatus:[],sortField:\"updatedate\",order:\"desc\",search_model:\"\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\",product:\"\",updatedate:[]},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>12?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":t.row.product.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:140,sortable:!0},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:100,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.flowChart(a)}}},\"[流程图]\")])}}]}},methods:{sort:function(e){\"\"==e.key?this.sortField=\"updatedate\":\"customer_area\"==e.key?this.sortField=\"area\":\"customer_status\"==e.key?this.sortField=\"customertype\":this.sortField=e.key,\"normal\"==e.order?(this.order=\"\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"60\",page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,product:this.formInline.product,bupdatedate:Object(g.a)(this.formInline.updatedate[0]),eupdatedate:Object(g.a)(this.formInline.updatedate[1]),serviceDept:\"'BUSSINESS'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"UpdateDate\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var e=this;e.Sloading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,companyName:e.formInline.companyname,serviceName:e.formInline.servicename,bupdatedate:Object(g.a)(e.formInline.updatedate[0]),eupdatedate:Object(g.a)(e.formInline.updatedate[1]),product:e.formInline.product,serviceDept:\"'BUSSINESS'\"}};e.$http.get(\"api/order/workOrderList?workOrderStatus=60&\",t).then(function(t){e.$backToLogin(t),e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)\"\"!=e.data[a].CreateDate&&null!=e.data[a].CreateDate&&(e.data[a].CreateDate=e.data[a].CreateDate.slice(0,10)),\"\"!=e.data[a].ServiceStart&&null!=e.data[a].ServiceStart&&(e.data[a].ServiceStart=e.data[a].ServiceStart.slice(0,10)),\"\"!=e.data[a].UpdateDate&&null!=e.data[a].UpdateDate&&(e.data[a].UpdateDate=e.data[a].UpdateDate.slice(0,10));e.Sloading=!1})},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.formInline.product=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")},finish_workorder:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_FINISH_WORKORDER\",this.current_row.id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var e=this;this.getData(),r.a.$on(\"flowsuccess\",function(t){e.getData()})}},S=Object(n.a)(k,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyname,callback:function(t){e.$set(e.formInline,\"companyname\",t)},expression:\"formInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.servicename,callback:function(t){e.$set(e.formInline,\"servicename\",t)},expression:\"formInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.product,callback:function(t){e.$set(e.formInline,\"product\",t)},expression:\"formInline.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"实际完成时间：\"}},[a(\"DatePicker\",{attrs:{type:\"daterange\",size:\"small\",transfer:\"\"},model:{value:e.formInline.updatedate,callback:function(t){e.$set(e.formInline,\"updatedate\",t)},expression:\"formInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.showdetail}},[e._v(\"查询详情\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.company}},[e._v(\"查看公司\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.finish_workorder}},[e._v(\"完结证明\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data,loading:e.Sloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.showdetail,\"on-sort-change\":e.sort}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowChart1,callback:function(t){e.flowChart1=t},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:e.flowChartImg}})])],1),e._v(\" \"),a(\"finish-workorder\")],1)},[],!1,null,null,null);S.options.__file=\"finished.vue\";var C=S.exports,x={props:[\"paydir\"],data:function(){var e=this;return{isAdmin:!1,managestatus:[],sortField:\"updatedate\",order:\"desc\",search_model:\"\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\",product:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>12?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",key:\"departname\",width:140,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":t.row.product.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:140,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:140,sortable:!0},{title:\"计划完成时间\",key:\"person_plan_finish_date\",width:140},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"逾期原因\",key:\"overdue_cause\",width:200,render:function(e,t){return\"\"==t.row.overdue_cause||null==t.row.overdue_cause?\"\":t.row.overdue_cause.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\",wordWrap:\"true\",width:\"200px\"}},[e(\"span\",t.row.overdue_cause.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.overdue_cause)])]):e(\"span\",t.row.overdue_cause)}},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"备注\",key:\"memo\",width:150,render:function(e,t){return\"\"==t.row.memo||null==t.row.memo?\"\":t.row.memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.memo)])]):e(\"span\",t.row.memo)}},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.flowChart(a)}}},\"[流程图]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},directives:[{name:\"permission\",value:\"commercialStop\"}],on:{click:function(){var t=e;if(null==a.row.resumeFlag||3==a.row.resumeFlag){var r=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=3\");e.$http.get(r).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==a.row.resumeFlag){var o=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=2\");e.$http.get(o).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}],tempArray:[]}},methods:{get_all_selection:function(e){this.tempArray=e},flow_all:function(){var e=this;if(0==this.tempArray.length)e.$Message.warning(\"请选择需要流转的工单！\");else for(var t=function(t){var a={workOrderId:e.tempArray[t].id,backup:\"批量流转\"};e.$Post(\"api/order/next\",a,function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)},function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)})},a=0;a<this.tempArray.length;a++)t(a)},sort:function(e){\"\"==e.key?this.sortField=\"updatedate\":\"customer_area\"==e.key?this.sortField=\"area\":\"customer_status\"==e.key?this.sortField=\"customertype\":this.sortField=e.key,\"normal\"==e.order?(this.order=\"\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"20\",page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,product:this.formInline.product,serviceDept:\"'BUSSINESS'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var e=this;e.Sloading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,companyName:e.formInline.companyname,serviceName:e.formInline.servicename,product:e.formInline.product,serviceDept:\"'BUSSINESS'\"}};e.$http.get(\"api/order/workOrderList?workOrderStatus=20\",t).then(function(t){e.$backToLogin(t),e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)\"\"!=e.data[a].CreateDate&&null!=e.data[a].CreateDate&&(e.data[a].CreateDate=e.data[a].CreateDate.slice(0,10)),\"\"!=e.data[a].ServiceStart&&null!=e.data[a].ServiceStart&&(e.data[a].ServiceStart=e.data[a].ServiceStart.slice(0,10)),\"\"!=e.data[a].UpdateDate&&null!=e.data[a].UpdateDate&&(e.data[a].UpdateDate=e.data[a].UpdateDate.slice(0,10));e.Sloading=!1})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.formInline.product=\"\",this.getData()},save_current_row:function(e){this.current_row=e},reset_wordorder_process:function(){if(\"\"!=this.current_row){var e=this,t={params:{workOrderId:e.current_row.id}};this.$Get(\"api/order/resetWorkOrderProcess\",t,function(t){e.$Message.success(t.data.msg)})}else this.$Message.warning(\"请选择一行进行流转！\")},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?2==this.current_row.resumeFlag?this.$Message.warning(\"当前工单已锁定！\"):r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},open_set_time:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_SET_FINISH_TIME\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},over_due_reason:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_OVER_DUE_REASON\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var e=this;this.getData(),r.a.$on(\"flowsuccess\",function(t){e.getData()}),10228==localStorage.getItem(\"id\")||10059==localStorage.getItem(\"id\")?e.isAdmin=!0:e.isAdmin=!1}},$=Object(n.a)(x,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyname,callback:function(t){e.$set(e.formInline,\"companyname\",t)},expression:\"formInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.servicename,callback:function(t){e.$set(e.formInline,\"servicename\",t)},expression:\"formInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.product,callback:function(t){e.$set(e.formInline,\"product\",t)},expression:\"formInline.product\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.showflow}},[e._v(\"流转\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.open_set_time}},[e._v(\"设置计划完成时间\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.over_due_reason}},[e._v(\"逾期原因\")]),e._v(\" \"),e.isAdmin?a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.reset_wordorder_process}},[e._v(\"重新工单流程\")]):e._e(),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.showdetail}},[e._v(\"查询详情\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.company}},[e._v(\"查看公司\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data,loading:e.Sloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.showdetail,\"on-sort-change\":e.sort,\"on-selection-change\":e.get_all_selection}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowChart1,callback:function(t){e.flowChart1=t},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:e.flowChartImg}})])],1)],1)},[],!1,null,null,null);$.options.__file=\"notbegin.vue\";var D=$.exports,F={data:function(){var e=this;return{managestatus:[],order:\"desc\",sortField:\"updatedate\",search_model:\"\",isSearh:!1,formInline:{companyname:\"\",servicename:\"\",product:\"\"},Sloading:!1,current_row:\"\",flowChart1:!1,flowChartImg:\"\",pause:!1,endlife:!1,pageTotal:new Number,page:\"1\",pageSize:\"10\",data:[],header:[{title:\"归属公司\",key:\"companyname\",width:220,sortable:!0,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>12?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",key:\"departname\",width:120,sortable:!0},{title:\"产品全称\",key:\"product\",width:200,sortable:!0,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":t.row.product.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"目前进度\",key:\"CurrentProcess\",width:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",width:120,sortable:!0},{title:\"计划完成时间\",key:\"person_plan_finish_date\",width:140},{title:\"服务开始时间\",key:\"ServiceStart\",width:140,sortable:!0},{title:\"服务人员\",key:\"servername\",width:120,sortable:!0},{title:\"逾期原因\",key:\"overdue_cause\",width:150,render:function(e,t){return\"\"==t.row.overdue_cause||null==t.row.overdue_cause?\"\":t.row.overdue_cause.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.overdue_cause.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.overdue_cause)])]):e(\"span\",t.row.overdue_cause)}},{title:\"跟进人\",key:\"followname\",width:120,sortable:!0},{title:\"备注\",key:\"memo\",width:150,render:function(e,t){return\"\"==t.row.memo||null==t.row.memo?\"\":t.row.memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[e(\"span\",t.row.memo)])]):e(\"span\",t.row.memo)}},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.flowChart(a)}}},\"[流程图]\"),t(\"Button\",{props:{type:\"text\",size:\"small\",permission:\"['commercialStop']\"},on:{click:function(){var t=e;if(null==a.row.resumeFlag||3==a.row.resumeFlag){var r=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=3\");e.$http.get(r).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}else if(2==a.row.resumeFlag){var o=\"api/order/serviceResume?workOrderId=\".concat(a.row.id,\"&resumeFlag=2\");e.$http.get(o).then(function(e){4e4==e.data.msgCode?t.$Message.success(e.data.msg):t.$Message.error(e.data.msg),t.getData()})}}}},\"[暂停/解锁]\")])}}],tempArray:[]}},methods:{get_all_selection:function(e){this.tempArray=e},flow_all:function(){var e=this;if(0==this.tempArray.length)e.$Message.warning(\"请选择需要流转的工单！\");else for(var t=function(t){var a={workOrderId:e.tempArray[t].id,backup:\"批量流转\"};e.$Post(\"api/order/next\",a,function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)},function(a){e.tempArray.length==t+1&&e.$bus.emit(\"flowsuccess\",!0)})},a=0;a<this.tempArray.length;a++)t(a)},sort:function(e){\"\"==e.key?this.sortField=\"updatedate\":\"customer_area\"==e.key?this.sortField=\"area\":\"customer_status\"==e.key?this.sortField=\"customertype\":this.sortField=e.key,\"normal\"==e.order?(this.order=\"\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},downloadExcel:function(){var e={workOrderStatus:\"40\",page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,product:this.formInline.product,serviceDept:\"'BUSSINESS'\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/workOrderList\",e);window.open(t)},getData:function(){var e=this;e.Sloading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,companyName:e.formInline.companyname,serviceName:e.formInline.servicename,product:e.formInline.product,serviceDept:\"'BUSSINESS'\"}};e.$http.get(\"api/order/workOrderList?workOrderStatus=40&\",t).then(function(t){e.$backToLogin(t),e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)\"\"!=e.data[a].CreateDate&&null!=e.data[a].CreateDate&&(e.data[a].CreateDate=e.data[a].CreateDate.slice(0,10)),\"\"!=e.data[a].ServiceStart&&null!=e.data[a].ServiceStart&&(e.data[a].ServiceStart=e.data[a].ServiceStart.slice(0,10)),\"\"!=e.data[a].UpdateDate&&null!=e.data[a].UpdateDate&&(e.data[a].UpdateDate=e.data[a].UpdateDate.slice(0,10));e.Sloading=!1})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},search:function(){this.page=1,this.isSearh=!0,this.getData()},reset:function(){this.isSearh=!1,this.page=1,this.formInline.companyname=\"\",this.formInline.servicename=\"\",this.formInline.product=\"\",this.getData()},save_current_row:function(e){this.current_row=e},showdetail:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.current_row.id):this.$Message.warning(\"请选择一行查看详情！\")},showflow:function(){\"\"!=this.current_row?2==this.current_row.resumeFlag?this.$Message.warning(\"当前工单已锁定！\"):r.a.$emit(\"myflow\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},open_set_time:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_SET_FINISH_TIME\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},over_due_reason:function(){\"\"!=this.current_row?this.$bus.emit(\"OPEN_OVER_DUE_REASON\",this.current_row):this.$Message.warning(\"请选择一行进行流转！\")},flowChart:function(e){this.flowChart1=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+e.row.id+\"&bussinessType=20&time=\"+new Date},company:function(){\"\"!=this.current_row?this.$store.commit(\"open_gobal_company_detail_modal\",this.current_row.company_id):this.$Message.warning(\"请选择一行查看！\")}},created:function(){var e=this;this.getData(),r.a.$on(\"flowsuccess\",function(t){e.getData()})}},O=Object(n.a)(F,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInline\",attrs:{model:e.formInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.companyname,callback:function(t){e.$set(e.formInline,\"companyname\",t)},expression:\"formInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.servicename,callback:function(t){e.$set(e.formInline,\"servicename\",t)},expression:\"formInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品：\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:e.formInline.product,callback:function(t){e.$set(e.formInline,\"product\",t)},expression:\"formInline.product\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.open_set_time}},[e._v(\"设置计划完成时间\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.over_due_reason}},[e._v(\"逾期原因\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.showdetail}},[e._v(\"查询详情\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.company}},[e._v(\"查看公司\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data,loading:e.Sloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.showdetail,\"on-sort-change\":e.sort,\"on-selection-change\":e.get_all_selection}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowChart1,callback:function(t){e.flowChart1=t},expression:\"flowChart1\"}},[a(\"center\",[a(\"img\",{attrs:{src:e.flowChartImg}})])],1)],1)},[],!1,null,null,null);O.options.__file=\"stop.vue\";var z={name:\"commercialTaskManagement\",components:{Serving:u,All:y,Finished:C,Notbegin:D,Flow:p,overDueReason:s,Stop:O.exports},data:function(){return{openTab:\"name1\",companyarea:[]}},methods:{getDataCenter:function(){var e=this;this.$GetDataCenter(\"companyarea\",function(t){e.companyarea=t.data.data.companyarea})}},created:function(){this.getDataCenter();\"10228\"==localStorage.getItem(\"id\")&&(this.openTab=\"name4\")}},N=Object(n.a)(z,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{model:{value:e.openTab,callback:function(t){e.openTab=t},expression:\"openTab\"}},[a(\"TabPane\",{attrs:{label:\"未开始\",name:\"name1\"}},[a(\"notbegin\",{attrs:{companyarea:e.companyarea}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"服务中\",name:\"name2\"}},[a(\"serving\",{attrs:{companyarea:e.companyarea}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已完结\",name:\"name3\"}},[a(\"finished\",{attrs:{companyarea:e.companyarea}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"暂停\",name:\"name5\"}},[a(\"stop\",{attrs:{companyarea:e.companyarea}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"全部\",name:\"name4\"}},[a(\"all\",{attrs:{companyarea:e.companyarea}})],1)],1),e._v(\" \"),a(\"over-due-reason\")],1)},[],!1,null,null,null);N.options.__file=\"myCommonTask_table.vue\";t.default=N.exports}}]);"}