{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{415:function(t,a,e){\"use strict\";e.r(a);var n=e(25),r={data:function(){return{type:\"day\",dateRange:[],tableLoading:!1,open_person_history:!1,historyHeader:[{title:\"销售人员\",key:\"realname\",align:\"center\"},{title:\"创建时间\",key:\"begin_period\",align:\"center\"},{title:\"是否完成\",key:\"statusName\",align:\"center\"},{title:\"计划销售额\",key:\"saleroom\",align:\"center\"},{title:\"实际销售额\",key:\"finish_saleroom\",align:\"center\"},{title:\"计划新增客户数\",key:\"new_customer_num\",align:\"center\"},{title:\"实际新增客户数\",key:\"finish_new_customer_num\",align:\"center\"}],historyData:[],pageTotal:new Number,page:1,pageSize:10,CommonresultType:\"\",CommonresultType_Map:new Map,saler:\"\",allSaler:[]}},methods:{date_change:function(t){this.dateRange[0]=t[0],this.dateRange[1]=t[1],this.getHistoryData()},pageChange:function(t){this.page=t,this.getHistoryData()},getHistoryData:function(){var t=this;t.tableLoading=!0;var a={params:{begin_period:Object(n.b)(t.dateRange[0]),end_period:Object(n.b)(t.dateRange[1]),page:t.page,pageSize:t.pageSize,type:t.type,saler:t.saler,sortField:\"begin_period\"}};this.$Get(\"api/crm/sale/index/person/plan/list\",a,function(a){t.pageTotal=a.data.data.total,t.historyData=a.data.data.rows;for(var e=0;e<t.historyData.length;e++)t.historyData[e].status&&(t.historyData[e].statusName=t.CommonresultType_Map.get(t.historyData[e].status));t.tableLoading=!1})},getDataCenter:function(){var t=this;this.$GetDataCenter(\"CommonresultType\",function(a){t.CommonresultType=a.data.data.CommonresultType,t.CommonresultType_Map=t.$array2map(t.CommonresultType)})},get_all_saler:function(){var t=this;this.$Get(\"api/user/getAllUserListByDepartId\",{params:{departId:11532}},function(a){t.allSaler=a.data.data,t.allSaler.push({id:\"\",realname:\"\"})})}},created:function(){this.getDataCenter(),this.get_all_saler(),this.getHistoryData()}},i=e(2),o=Object(i.a)(r,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",[e(\"Card\",{attrs:{title:\"个人计划\"}},[e(\"Row\",{attrs:{gutter:16,type:\"flex\",justify:\"space-around\"}},[e(\"Col\",{attrs:{span:\"6\"}},[e(\"Select\",{attrs:{size:\"small\",placeholder:\"请选择人员\"},on:{\"on-change\":function(a){t.getHistoryData()}},model:{value:t.saler,callback:function(a){t.saler=a},expression:\"saler\"}},t._l(t.allSaler,function(a){return e(\"Option\",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.realname))])}),1)],1),t._v(\" \"),e(\"Col\",{attrs:{span:\"8\"}},[e(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",placement:\"bottom\",placeholder:\"选择日期\",size:\"small\",transfer:\"\"},on:{\"on-change\":t.date_change},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:\"dateRange\"}})],1),t._v(\" \"),e(\"Col\",{attrs:{span:\"6\"}},[e(\"Select\",{attrs:{size:\"small\"},on:{\"on-change\":function(a){t.getHistoryData()}},model:{value:t.type,callback:function(a){t.type=a},expression:\"type\"}},[e(\"Option\",{attrs:{value:\"week\"}},[t._v(\"周计划\")]),t._v(\" \"),e(\"Option\",{attrs:{value:\"day\"}},[t._v(\"日计划\")])],1)],1)],1),t._v(\" \"),e(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:16}},[e(\"Table\",{attrs:{columns:t.historyHeader,data:t.historyData,loading:t.tableLoading}}),t._v(\" \"),e(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(a){t.page=a},\"on-change\":t.pageChange}})],1),t._v(\" \"),e(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);o.options.__file=\"historyData.vue\";var s=o.exports,l={data:function(){return{dateRange:[],tableLoading:!1,open_team_rank:!1,teamRankHeader:[{title:\"销售排名\",key:\"row_no\",align:\"center\"},{title:\"销售人员\",key:\"realname\",align:\"center\"},{title:\"销售金额\",key:\"sumrealnumber\",align:\"center\"},{title:\"新增客户数\",key:\"new_customer\",align:\"center\"},{title:\"团队名\",key:\"departname\",align:\"center\"}],teamRankData:[],pageTotal:new Number,page:1,pageSize:10}},methods:{pageChange:function(t){this.page=t,this.getRankData()},getRankData:function(){var t=this;t.tableLoading=!0;var a={params:{begin_createdate:Object(n.a)(t.dateRange[0]),end_createdate:Object(n.a)(t.dateRange[1]),page:t.page,pageSize:t.pageSize}};this.$Get(\"api/crm/sale/index/team/performance/ranking\",a,function(a){t.pageTotal=a.data.data.total,t.teamRankData=a.data.data.rows,t.tableLoading=!1})}},created:function(){this.getRankData()}},c=Object(i.a)(l,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",[e(\"Card\",{attrs:{title:\"销售排行榜\",width:\"588\"},model:{value:t.open_team_rank,callback:function(a){t.open_team_rank=a},expression:\"open_team_rank\"}},[e(\"Row\",{attrs:{gutter:16}},[e(\"center\",[e(\"DatePicker\",{staticStyle:{width:\"200px\"},attrs:{type:\"daterange\",placement:\"bottom\",placeholder:\"选择日期\",size:\"small\"},on:{\"on-change\":function(a){t.getRankData()}},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:\"dateRange\"}})],1)],1),t._v(\" \"),e(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:16}},[e(\"Table\",{attrs:{columns:t.teamRankHeader,data:t.teamRankData,loading:t.tableLoading}}),t._v(\" \"),e(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(a){t.page=a},\"on-change\":t.pageChange}})],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"finish.vue\";var p=c.exports,d=e(83),u=e.n(d),g={components:{VePie:u.a},data:function(){return{departId:\"11\",chartData:{columns:[\"name\",\"value\"],rows:[]},optionData:[]}},methods:{getTableData:function(){var t,a=this;t=\"11\"==a.departId?{params:{departId:\"\"}}:{params:{departId:a.departId}},this.$Get(\"api/crm/sale/index/customer/source/report\",t,function(t){a.chartData.rows=t.data.data})},getOption:function(){var t=this;this.$Get(\"api/system/depart/list\",{params:{terminal_flag:\"1\",alias_code:\"MARKET\"}},function(a){t.optionData=a.data.data,t.optionData.push({ID:\"11\",departname:\"全部\"})})}},created:function(){this.getOption(),this.getTableData()}},m=Object(i.a)(g,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",[e(\"Row\",{staticStyle:{\"margin-bottom\":\"40px\"}},[e(\"center\",[e(\"Select\",{staticStyle:{width:\"150px\"},attrs:{size:\"small\"},on:{\"on-change\":t.getTableData},model:{value:t.departId,callback:function(a){t.departId=a},expression:\"departId\"}},t._l(t.optionData,function(a){return e(\"Option\",{key:a.ID,attrs:{value:a.ID}},[t._v(t._s(a.departname))])}),1)],1)],1),t._v(\" \"),e(\"Row\",[e(\"ve-pie\",{attrs:{data:t.chartData}})],1)],1)},[],!1,null,null,null);m.options.__file=\"classic.vue\";var h=m.exports,_={components:{VePie:u.a},data:function(){return{type:\"volume\",chartData:{columns:[\"name\",\"value\"],rows:[]}}},methods:{getTableData:function(){var t=this,a={params:{type:t.type}};this.$Get(\"api/crm/sale/index/channel/type/report\",a,function(a){t.chartData.rows=a.data.data})}},created:function(){this.getTableData()}},v=Object(i.a)(_,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",[e(\"Row\",{staticStyle:{\"margin-bottom\":\"40px\"}},[e(\"center\",[e(\"Select\",{staticStyle:{width:\"150px\"},attrs:{size:\"small\"},on:{\"on-change\":t.getTableData},model:{value:t.type,callback:function(a){t.type=a},expression:\"type\"}},[e(\"Option\",{attrs:{value:\"volume\"}},[t._v(\"累计销售额\")]),t._v(\" \"),e(\"Option\",{attrs:{value:\"customer_num\"}},[t._v(\"累计新增客户\")])],1)],1)],1),t._v(\" \"),e(\"Row\",[e(\"ve-pie\",{attrs:{data:t.chartData}})],1)],1)},[],!1,null,null,null);v.options.__file=\"attitude.vue\";var y={name:\"statistics_index\",components:{historyData:s,finish:p,classic:h,attitude:v.exports},data:function(){return{}}},f=Object(i.a)(y,function(){var t=this.$createElement,a=this._self._c||t;return a(\"div\",{staticStyle:{\"min-width\":\"700px\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"history-data\")],1)],1),this._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"finish\")],1)],1),this._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"Icon\",{attrs:{type:\"android-map\"}}),this._v(\"\\n                    客户来源分析\\n                \")],1),this._v(\" \"),a(\"classic\")],1)],1),this._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"Icon\",{attrs:{type:\"android-map\"}}),this._v(\"\\n                    渠道价值分析\\n                \")],1),this._v(\" \"),a(\"attitude\")],1)],1)],1)],1)},[],!1,null,null,null);f.options.__file=\"index.vue\";a.default=f.exports},83:function(t,a,e){t.exports=e(77)(218)}}]);"}