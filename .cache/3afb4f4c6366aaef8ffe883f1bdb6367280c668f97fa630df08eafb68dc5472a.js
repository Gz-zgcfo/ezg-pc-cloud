{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{123:function(t,e,a){},124:function(t,e,a){},125:function(t,e,a){},126:function(t,e,a){},127:function(t,e,a){},128:function(t,e,a){},129:function(t,e,a){},130:function(t,e,a){},257:function(t,e,a){\"use strict\";var o=a(123);a.n(o).a},259:function(t,e,a){\"use strict\";var o=a(124);a.n(o).a},261:function(t,e,a){\"use strict\";var o=a(125);a.n(o).a},263:function(t,e,a){\"use strict\";var o=a(126);a.n(o).a},265:function(t,e,a){\"use strict\";var o=a(127);a.n(o).a},267:function(t,e,a){\"use strict\";var o=a(128);a.n(o).a},269:function(t,e,a){\"use strict\";var o=a(129);a.n(o).a},271:function(t,e,a){\"use strict\";var o=a(130);a.n(o).a},383:function(t,e,a){\"use strict\";a.r(e);var o={data:function(){return{selectRow:\"\",customerId:\"\",customerTypes:[],cluesources:[],customerrating:[],area:[],sf_yn:[],importance:[],cluesources_map:new Map,customerrating_map:new Map,area_map:new Map,sf_yn_map:new Map,importance_map:new Map,customerTypes_Casr:[],customerTypes_array:[]}},methods:{get_data_center:function(){var t=this;return new Promise(function(e,a){var o=t;t.$GetDataCenter(\"customerTypes,cluesources,customerrating,area,sf_yn,importance\",function(t){o.customerTypes=t.data.data.customerTypes,o.cluesources=t.data.data.cluesources,o.customerrating=t.data.data.customerrating,o.area=t.data.data.area,o.sf_yn=t.data.data.sf_yn,o.importance=t.data.data.importance,o.cluesources_map=o.$array2map(o.cluesources),o.customerrating_map=o.$array2map(o.customerrating),o.area_map=o.$array2map(o.area),o.sf_yn_map=o.$array2map(o.sf_yn),o.importance_map=o.$array2map(o.importance),o.customerTypes_Casr=o.$changeCars(o.customerTypes),o.customerTypes_array=o.$Data2Casr(o.customerTypes),e()})})},check_select:function(t){this.selectRow?this.$bus.emit(t,this.selectRow):this.$Message.warning(\"请选择需要操作的客户！\")}},created:function(){}},r=a(25),n={data:function(){return{openTag:!1,header:[{type:\"selection\",width:60,align:\"center\"},{title:\"标签\",key:\"labelName\"}],data:[],total:0,page:1,pageSize:10,selectTagArray:[]}},methods:{select_cancel:function(t,e){this.selectTagArray.splice(this.selectTagArray.indexOf(e.id),1)},select_change:function(t,e){this.selectTagArray.push(e.id)},page_change:function(t){this.page=t,this.get_data()},get_data:function(){var t=this,e={params:{page:t.page,pageSize:10}};this.$Get(\"api/system/label/list\",e,function(e){t.data=[];for(var a=0;a<e.data.data.rows.length;a++)t.selectTagArray.includes(e.data.data.rows[a].id)&&(e.data.data.rows[a]._checked=!0),t.data.push(e.data.data.rows[a]);t.total=e.data.data.total})}},created:function(){var t=this;this.$bus.on(\"OPEN_TAG\",function(e){t.page=1,t.selectTagArray=[],t.selectTagArray=e,t.get_data(),t.openTag=!0})}},l=(a(257),a(2)),i=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"400\",title:\"选择标签\",id:\"top\"},model:{value:t.openTag,callback:function(e){t.openTag=e},expression:\"openTag\"}},[a(\"Table\",{ref:\"selection\",attrs:{border:\"\",columns:t.header,data:t.data},on:{\"on-select-cancel\":t.select_cancel,\"on-select\":t.select_change}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.openTag=!1}}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"tag_select.vue\";var s=i.exports,c={props:{cluesources:{type:Array},customerrating:{type:Array},area:{type:Array},sf_yn:{type:Array},importance:{type:Array},customerTypes_Casr:{type:Array}},data:function(){var t=this;return{channelShow:!1,ChannelType:[],allLabel:[],LabelArray:[],customerShow:!1,openCustomerCreate:!1,loading:!1,formValidate:{id:\"\",name:\"\",tel:\"\",fixedphone:\"\",qq:\"\",weixin:\"\",address:\"\",customertype:[10917,10822],customersource:\"\",importlevel:\"3\",area:\"\",issend:\"Y\",customerlabel:[],createdate:\"\",updatedate:\"\",gxr:\"\",backup:\"\",sourcesubdivision:\"\",isbound:\"\",email:\"\",channelsource:\"\",channelTypeId:\"\",recCustomer:\"\",importance:\"ordinary\",labels:[]},ruleValidate:{name:[{required:!0,trigger:\"change\",message:\"姓名不能为空\"}],customertype:[{required:!0,message:\"客户状态不能为空\",trigger:\"change\",type:\"array\"}],customersource:[{required:!0,trigger:\"change\",message:\"请选择客户来源\"}],tel:[{validator:function(e,a,o){if(\"\"==a||null==a)o();else if(/^1\\d{10}$/.test(a)){var r={params:{tel:a}};t.$Get(\"api/customer/findCustomerByTel\",r,function(t){null!=t.data.data?o(new Error(\"抱歉，电话号码重复\")):o()},function(t){o(new Error(\"验证错误\"))})}else o(new Error(\"电话格式不正确\"))},trigger:\"blur\",type:\"number\"}],fixedphone:[{validator:function(t,e,a){\"\"==e||null==e?a():/\\d{3}-\\d{8}|\\d{4}-\\d{7}/.test(e)?a():a(new Error(\"固话格式不正确\"))},trigger:\"change\",type:\"number\"}],importlevel:[{required:!0,trigger:\"change\",message:\"请选择客户等级\"}],area:[{required:!0,trigger:\"change\",message:\"请选择区域\"}],channelTypeId:[{validator:function(e,a,o){\"xzqd\"!=t.formValidate.customersource||\"\"!=a&&null!=a?o():o(new Error(\"请选择渠道类型\"))},trigger:\"change\",message:\"请选择渠道来源\"}],email:[{type:\"email\",trigger:\"change\",message:\"邮箱格式不正确\"}],qq:[{validator:function(t,e,a){\"\"==e||null==e?a():/^[1-9]\\d{4,10}$/.test(e)?a():a(new Error(\"QQ格式不正确\"))},trigger:\"change\"}]}}},methods:{modal_status_change:function(t){t||(this.$refs.formValidate.resetFields(),this.formValidate.customertype=[10917,10822],this.formValidate.importlevel=\"3\",this.formValidate.issend=\"Y\",this.formValidate.importance=\"ordinary\")},create:function(){var t=this;this.$ButtonCollect(\"marketingManagement_index_entry_save\"),this.formValidate.tel||this.formValidate.email||this.formValidate.fixedphone||this.formValidate.weixin?(this.loading=!0,this.$refs.formValidate.validate(function(e){e?t.create_customer():t.loading=!1})):this.$Message.warning(\"联系方式需至少填写一项！\")},create_customer:function(){var t=this,e={address:t.formValidate.address,area:t.formValidate.area,name:t.formValidate.name,tel:t.formValidate.tel,backup:t.formValidate.backup,customertype:t.formValidate.customertype.join(\"-\"),issend:t.formValidate.issend,fixedphone:t.formValidate.fixedphone,qq:t.formValidate.qq,weixin:t.formValidate.weixin,email:t.formValidate.email,customersource:t.formValidate.customersource,sourcesubdivision:t.formValidate.sourcesubdivision,importlevel:t.formValidate.importlevel,channelTypeId:t.formValidate.channelTypeId,recCustomer:t.formValidate.recCustomer,labels:t.formValidate.labels.join(\",\"),importance:t.formValidate.importance};t.$Post(\"api/customer/saveCustomer\",e,function(e){t.openCustomerCreate=!1,t.loading=!1,setTimeout(function(){t.$bus.emit(\"UPDATE_CUSTOMER\",!0),t.$bus.emit(\"CREATE_AFTER_EDIT\",e.data.data)},300)},function(e){t.loading=!1})},handleReset:function(){this.$refs.formValidate.resetFields()},check_channel:function(t){\"xzqd\"==t?(this.channelShow=!0,this.get_channel_type()):(this.channelShow=!1,this.formValidate.channelTypeId=\"\"),this.customerShow=\"khtj\"==t},get_channel_type:function(){var t=this;this.$Get(\"api/channel/type/queryUserChannel?type=xs\",{},function(e){t.ChannelType=e.data.data})},open_tag:function(){this.$bus.emit(\"OPEN_TAG\",this.formValidate.labels)},close_tag:function(t){this.formValidate.labels.splice(t,1)},get_all_label:function(){var t=this;this.$Get(\"api/system/label/list?page=1&pageSize=100\",{},function(e){t.allLabel=e.data.data.rows})}},created:function(){this.get_all_label()},mounted:function(){var t=this;this.$bus.on(\"CREATE_CUSTOMER\",function(e){t.formValidate.labels=[],t.openCustomerCreate=!0})},watch:{\"formValidate.labels\":function(){this.LabelArray=[];for(var t=0;t<this.formValidate.labels.length;t++)for(var e=0;e<this.allLabel.length;e++)if(this.formValidate.labels[t]==this.allLabel[e].id){this.LabelArray.push(this.allLabel[e]);break}}}},m=Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增客户\",width:\"700\",\"mask-closable\":!1},on:{\"on-visible-change\":t.modal_status_change},model:{value:t.openCustomerCreate,callback:function(e){t.openCustomerCreate=e},expression:\"openCustomerCreate\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{rules:t.ruleValidate,model:t.formValidate,\"label-width\":80}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"姓名\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"固话\",prop:\"fixedphone\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.fixedphone,callback:function(e){t.$set(t.formValidate,\"fixedphone\",e)},expression:\"formValidate.fixedphone\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"QQ\",prop:\"qq\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.qq,callback:function(e){t.$set(t.formValidate,\"qq\",e)},expression:\"formValidate.qq\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"微信\",prop:\"weixin\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.weixin,callback:function(e){t.$set(t.formValidate,\"weixin\",e)},expression:\"formValidate.weixin\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"邮箱\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,\"email\",e)},expression:\"formValidate.email\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"服务地址\",prop:\"address\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.address,callback:function(e){t.$set(t.formValidate,\"address\",e)},expression:\"formValidate.address\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户状态\",prop:\"customertype\"}},[a(\"Cascader\",{attrs:{trigger:\"hover\",data:t.customerTypes_Casr,size:\"small\"},model:{value:t.formValidate.customertype,callback:function(e){t.$set(t.formValidate,\"customertype\",e)},expression:\"formValidate.customertype\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户来源\",prop:\"customersource\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.check_channel},model:{value:t.formValidate.customersource,callback:function(e){t.$set(t.formValidate,\"customersource\",e)},expression:\"formValidate.customersource\"}},t._l(t.cluesources,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户等级\",prop:\"importlevel\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\",placement:\"bottom\"},model:{value:t.formValidate.importlevel,callback:function(e){t.$set(t.formValidate,\"importlevel\",e)},expression:\"formValidate.importlevel\"}},t._l(t.customerrating,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1)],1),t._v(\" \"),t.channelShow?a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"选择渠道\",prop:\"channelTypeId\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.channelTypeId,callback:function(e){t.$set(t.formValidate,\"channelTypeId\",e)},expression:\"formValidate.channelTypeId\"}},t._l(t.ChannelType,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.channel_type_name))])}),1)],1)],1)],1):t._e(),t._v(\" \"),t.customerShow?a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"推荐客户\",prop:\"recCustomer\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidate.recCustomer,callback:function(e){t.$set(t.formValidate,\"recCustomer\",e)},expression:\"formValidate.recCustomer\"}})],1)],1)],1):t._e(),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"区域\",prop:\"area\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.area,callback:function(e){t.$set(t.formValidate,\"area\",e)},expression:\"formValidate.area\"}},t._l(t.area,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"发送短信\",prop:\"issend\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.issend,callback:function(e){t.$set(t.formValidate,\"issend\",e)},expression:\"formValidate.issend\"}},t._l(t.sf_yn,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户重要性\",prop:\"importance\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.importance,callback:function(e){t.$set(t.formValidate,\"importance\",e)},expression:\"formValidate.importance\"}},t._l(t.importance,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"标签\",prop:\"customerTags\"}},[t._l(t.LabelArray,function(e,o){return a(\"Tag\",{key:o,attrs:{name:o,closable:\"\"},on:{\"on-close\":function(e){t.close_tag(o)}}},[t._v(t._s(e.labelName))])}),t._v(\" \"),a(\"Button\",{attrs:{name:\"marketingManagement_index_entry_add\",icon:\"ios-plus-empty\",type:\"dashed\",size:\"small\"},on:{click:t.open_tag}},[t._v(\"添加\")])],2)],1)],1),t._v(\" \"),a(\"Row\",[a(\"FormItem\",{staticStyle:{\"marin-top\":\"20px\"},attrs:{label:\"备注\",prop:\"backup\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\"},model:{value:t.formValidate.backup,callback:function(e){t.$set(t.formValidate,\"backup\",e)},expression:\"formValidate.backup\"}})],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.create}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:t.handleReset}},[t._v(\"重置\")])],1)],1)],1)},[],!1,null,null,null);m.options.__file=\"create.vue\";var d=m.exports,p={props:{cluesources:{type:Array},customerrating:{type:Array},area:{type:Array},sf_yn:{type:Array},importance:{type:Array},customerTypes_Casr:{type:Array},customer:{type:[Array,Object,String]}},data:function(){var t=this;return{loading:!1,LabelArray:[],allLabel:[],ChannelType:[],isOpenEdit:!1,formValidate:{id:\"\",NAME:\"\",TEL:\"\",fixedPhone:\"\",qq:\"\",weixin:\"\",ADDRESS:\"\",customerType:[],customersource:\"\",importlevel:\"\",AREA:\"\",issend:\"\",customerlabel:[],createdate:\"\",updatedate:\"\",gxr:\"\",backup:\"\",sourcesubdivision:\"\",isbound:\"\",email:\"\",channelsource:\"\",channel_type_id:\"\",rec_customer:\"\",importance:\"\",labels:[]},ruleValidate:{NAME:[{required:!0,trigger:\"change\",message:\"姓名不能为空\"}],customerType:[{required:!0,message:\"客户状态不能为空\",trigger:\"change\",type:\"array\"}],customersource:[{required:!0,trigger:\"change\",message:\"请选择客户来源\"}],TEL:[{validator:function(t,e,a){\"\"==e||null==e?a():/^1\\d{10}$/.test(e)?a():a(new Error(\"电话格式不正确\"))},trigger:\"blur\",type:\"number\"}],fixedPhone:[{validator:function(t,e,a){\"\"==e||null==e?a():/\\d{3}-\\d{8}|\\d{4}-\\d{7}/.test(e)?a():a(new Error(\"固话格式不正确\"))},trigger:\"change\",type:\"number\"}],importlevel:[{required:!0,trigger:\"change\",message:\"请选择客户等级\"}],area:[{required:!0,trigger:\"change\",message:\"请选择区域\"}],channel_type_id:[{validator:function(e,a,o){\"xzqd\"!=t.formValidate.customersource||\"\"!=a&&null!=a?o():o(new Error(\"请选择渠道类型\"))},trigger:\"change\",message:\"请选择渠道来源\"}],email:[{type:\"email\",trigger:\"change\",message:\"邮箱格式不正确\"}],qq:[{validator:function(t,e,a){\"\"==e||null==e?a():/^[1-9]\\d{4,10}$/.test(e)?a():a(new Error(\"QQ格式不正确\"))},trigger:\"change\"}]}}},methods:{get_data:function(t){var e=this,a={params:{id:t}};this.$Get(\"/api/customer/detail\",a,function(t){if(e.formValidate=t.data.data,e.formValidate.customerType?(e.formValidate.customerType=e.formValidate.customerType.split(\"-\"),e.formValidate.customerType[0]=parseInt(e.formValidate.customerType[0]),e.formValidate.customerType[1]=parseInt(e.formValidate.customerType[1])):e.formValidate.customerType=[],e.formValidate.importlevel&&(e.formValidate.importlevel=\"\"+e.formValidate.importlevel),e.formValidate.labels){e.formValidate.labels=e.formValidate.labels.split(\",\");for(var a=0;a<e.formValidate.labels.length;a++)e.formValidate.labels[a]=parseInt(e.formValidate.labels[a])}e.$emit(\"cancel-loading\",!0)})},get_channel_type:function(){var t=this,e=this,a={};return new Promise(function(o,r){t.$Get(\"api/channel/type/queryUserChannel?type=xs\",a,function(t){e.ChannelType=t.data.data,o()})})},get_all_label:function(){var t=this,e=this,a={};return new Promise(function(o,r){t.$Get(\"api/system/label/list?page=1&pageSize=100\",a,function(t){e.allLabel=t.data.data.rows,o()})})},open_tag:function(){this.formValidate.labels||(this.formValidate.labels=[]),this.$bus.emit(\"OPEN_TAG\",this.formValidate.labels)},close_tag:function(t){this.formValidate.labels.splice(t,1)},update:function(){var t=this;this.formValidate.TEL||this.formValidate.email||this.formValidate.fixedPhone||this.formValidate.weixin?(this.loading=!0,this.$refs.formValidate.validate(function(e){e?t.submit():t.loading=!1})):this.$Message.warning(\"联系方式需至少填写一项！\")},submit:function(){var t=this,e=\"\";t.formValidate.labels&&(e=t.formValidate.labels.join(\",\"));var a={id:t.formValidate.ID,address:t.formValidate.ADDRESS,area:t.formValidate.AREA,name:t.formValidate.NAME,tel:t.formValidate.TEL,backup:t.formValidate.backup,customertype:t.formValidate.customerType[0]+\"-\"+t.formValidate.customerType[1],issend:t.formValidate.issend,fixedphone:t.formValidate.fixedPhone,qq:t.formValidate.qq,weixin:t.formValidate.weixin,email:t.formValidate.email,customersource:t.formValidate.customersource,sourcesubdivision:t.formValidate.sourcesubdivision,importlevel:t.formValidate.importlevel,channelTypeId:t.formValidate.channel_type_id,recCustomer:t.formValidate.rec_customer,labels:e,importance:t.formValidate.importance};this.$Post(\"api/customer/updateCustomer\",a,function(e){t.loading=!1,setTimeout(function(){t.$bus.emit(\"UPDATE_CUSTOMER\",!0)},300)},function(e){t.loading=!1})}},created:function(){var t=this;Promise.all([this.get_channel_type(),this.get_all_label()]).then(function(){t.get_data(t.customer.ID)})},watch:{\"formValidate.labels\":function(){if(this.LabelArray=[],this.formValidate.labels)for(var t=0;t<this.formValidate.labels.length;t++)for(var e=0;e<this.allLabel.length;e++)if(this.formValidate.labels[t]==this.allLabel[e].id){this.LabelArray.push(this.allLabel[e]);break}}}},u=Object(l.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Form\",{ref:\"formValidate\",attrs:{rules:t.ruleValidate,model:t.formValidate,\"label-width\":80}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"姓名\",prop:\"NAME\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.NAME,callback:function(e){t.$set(t.formValidate,\"NAME\",e)},expression:\"formValidate.NAME\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"电话\",prop:\"TEL\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.TEL,callback:function(e){t.$set(t.formValidate,\"TEL\",e)},expression:\"formValidate.TEL\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"固话\",prop:\"fixedPhone\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.fixedPhone,callback:function(e){t.$set(t.formValidate,\"fixedPhone\",e)},expression:\"formValidate.fixedPhone\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"QQ\",prop:\"qq\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.qq,callback:function(e){t.$set(t.formValidate,\"qq\",e)},expression:\"formValidate.qq\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"微信\",prop:\"weixin\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.weixin,callback:function(e){t.$set(t.formValidate,\"weixin\",e)},expression:\"formValidate.weixin\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"邮箱\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,\"email\",e)},expression:\"formValidate.email\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"服务地址\",prop:\"ADDRESS\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.ADDRESS,callback:function(e){t.$set(t.formValidate,\"ADDRESS\",e)},expression:\"formValidate.ADDRESS\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户状态\",prop:\"customerType\"}},[a(\"Cascader\",{attrs:{trigger:\"hover\",data:t.customerTypes_Casr},model:{value:t.formValidate.customerType,callback:function(e){t.$set(t.formValidate,\"customerType\",e)},expression:\"formValidate.customerType\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户来源\",prop:\"customersource\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.customersource,callback:function(e){t.$set(t.formValidate,\"customersource\",e)},expression:\"formValidate.customersource\"}},t._l(t.cluesources,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1),t._v(\" \"),\"xzqd\"==t.formValidate.customersource?a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"渠道名称\",prop:\"channel_type_id\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.channel_type_id,callback:function(e){t.$set(t.formValidate,\"channel_type_id\",e)},expression:\"formValidate.channel_type_id\"}},t._l(t.ChannelType,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.channel_type_name))])}),1)],1):t._e(),t._v(\" \"),\"khtj\"==t.formValidate.customersource?a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"推荐客户\",prop:\"rec_customer\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidate.rec_customer,callback:function(e){t.$set(t.formValidate,\"rec_customer\",e)},expression:\"formValidate.rec_customer\"}})],1):t._e(),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户等级\",prop:\"importlevel\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:10919==t.formValidate.customerType[0]},model:{value:t.formValidate.importlevel,callback:function(e){t.$set(t.formValidate,\"importlevel\",e)},expression:\"formValidate.importlevel\"}},t._l(t.customerrating,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"重要性\",prop:\"importance\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.importance,callback:function(e){t.$set(t.formValidate,\"importance\",e)},expression:\"formValidate.importance\"}},t._l(t.importance,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"区域\",prop:\"AREA\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.AREA,callback:function(e){t.$set(t.formValidate,\"AREA\",e)},expression:\"formValidate.AREA\"}},t._l(t.area,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"发送短信\",prop:\"issend\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.issend,callback:function(e){t.$set(t.formValidate,\"issend\",e)},expression:\"formValidate.issend\"}},t._l(t.sf_yn,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"标签\",prop:\"customerlabelTags\"}},[t._l(t.LabelArray,function(e,o){return a(\"Tag\",{key:o,attrs:{name:o,closable:\"\"},on:{\"on-close\":function(e){t.close_tag(o)}}},[t._v(t._s(e.labelName))])}),t._v(\" \"),a(\"Button\",{attrs:{name:\"marketingManagement_index_edit_addtag\",icon:\"ios-plus-empty\",type:\"dashed\",size:\"small\"},on:{click:t.open_tag}},[t._v(\"添加\")])],2),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"创建时间\",prop:\"CREATEDATE\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.CREATEDATE,callback:function(e){t.$set(t.formValidate,\"CREATEDATE\",e)},expression:\"formValidate.CREATEDATE\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"更新时间\",prop:\"updatedate\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.updatedate,callback:function(e){t.$set(t.formValidate,\"updatedate\",e)},expression:\"formValidate.updatedate\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"备注\",prop:\"backup\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\"},model:{value:t.formValidate.backup,callback:function(e){t.$set(t.formValidate,\"backup\",e)},expression:\"formValidate.backup\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"}},[a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"primary\",name:\"marketingManagement_index_edit_save\",loading:t.loading},on:{click:t.update}},[t._v(\"保存\")])],1)],1)],1)},[],!1,null,null,null);u.options.__file=\"edit.vue\";var f=u.exports,_={props:{customer:{type:[Array,Object,String]},taxtype:{type:Array},companyarea:{type:Array},importance:{type:Array},cluesources:{type:Array}},data:function(){var t=this,e=/^[\\u4e00-\\u9fa5()()]+|$/;return{loading:!1,formValidate:{taxtype:\"tax13\",tel:this.customer.TEL,companyname:\"\",followby:localStorage.getItem(\"realname\"),legalrepresentative:\"\",importlevel:\"\",createby:localStorage.getItem(\"realname\"),cluesource:this.customer.customersourceCode,customerid:this.customer.ID,companyarea:[],companyarea_temp:[]},ruleValidate:{companyname:[{required:!0,trigger:\"blur\",validator:function(a,o,r){if(\"\"==o||null==o)r(new Error(\"企业名称不能为空\"));else if(e.test(o)){var n={params:{companyName:o=encodeURI(o)}};t.$Get(\"api/customer/findCompanyByName\",n,function(t){null!=t.data.data?r(new Error(\"抱歉，公司名重复\")):r()},function(t){r(new Error(\"系统异常！\"))})}else r(new Error(\"企业名称必须为汉字\"))}}],legalrepresentative:[{required:!0,trigger:\"change\",message:\"法人名称不能为空\"}],importlevel:[{required:!0,trigger:\"change\",message:\"重要等级不能为空\"}],cluesource:[{required:!0,trigger:\"change\",message:\"企业来源不能为空\"}],taxtype:[{required:!0,message:\"企业纳税类型不能为空\",trigger:\"change\"}],companyarea:[{required:!0,message:\"企业注册地不能为空\",trigger:\"change\",type:\"array\"}]}}},methods:{check_data:function(t){var e=this;this.$refs.formValidate.validate(function(a){if(!a)return e.loading=!1,!1;t()})}},created:function(){}},h={mixins:[_],data:function(){return{openCreateCompany:!1}},methods:{submit:function(){this.check_data(this.create)},create:function(){var t=this,e={cluesource:t.formValidate.cluesource,companyarea:t.formValidate.companyarea.join(\"-\"),companyname:t.formValidate.companyname,customerid:t.formValidate.customerid,importlevel:t.formValidate.importlevel.toString(),legalrepresentative:t.formValidate.legalrepresentative,taxtype:t.formValidate.taxtype,tel:t.formValidate.tel};this.$Post(\"api/customer/saveCompany\",e,function(e){t.$refs.formValidate.resetFields(),t.loading=!1,t.$emit(\"update\",t.customer.ID),t.openCreateCompany=!1},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.off(\"OPEN_COMPANY_CREATE\",!0),this.$bus.on(\"OPEN_COMPANY_CREATE\",function(e){t.openCreateCompany=!0})}},g=Object(l.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增企业\",\"mask-closable\":!1},model:{value:t.openCreateCompany,callback:function(e){t.openCreateCompany=e},expression:\"openCreateCompany\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":100}},[a(\"FormItem\",{attrs:{label:\"公司名称\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.companyname,callback:function(e){t.$set(t.formValidate,\"companyname\",e)},expression:\"formValidate.companyname\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"公司注册地\",prop:\"companyarea\"}},[a(\"Cascader\",{attrs:{data:t.companyarea},model:{value:t.formValidate.companyarea,callback:function(e){t.$set(t.formValidate,\"companyarea\",e)},expression:\"formValidate.companyarea\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"跟进销售\",prop:\"followby\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.followby,callback:function(e){t.$set(t.formValidate,\"followby\",e)},expression:\"formValidate.followby\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"法人\",prop:\"legalrepresentative\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.legalrepresentative,callback:function(e){t.$set(t.formValidate,\"legalrepresentative\",e)},expression:\"formValidate.legalrepresentative\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"重要等级\",prop:\"importlevel\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.importlevel,callback:function(e){t.$set(t.formValidate,\"importlevel\",e)},expression:\"formValidate.importlevel\"}},t._l(t.importance,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename)+\"\\n                    \")])}),1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"创建人\",prop:\"createby\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.createby,callback:function(e){t.$set(t.formValidate,\"createby\",e)},expression:\"formValidate.createby\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"企业来源\",prop:\"cluesource\"}},[a(\"Select\",{attrs:{transfer:\"\",placement:\"top\",size:\"small\"},model:{value:t.formValidate.cluesource,callback:function(e){t.$set(t.formValidate,\"cluesource\",e)},expression:\"formValidate.cluesource\"}},t._l(t.cluesources,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename)+\"\\n                    \")])}),1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"企业纳税类型\",prop:\"taxtype\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.taxtype,callback:function(e){t.$set(t.formValidate,\"taxtype\",e)},expression:\"formValidate.taxtype\"}},t._l(t.taxtype,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename)+\"\\n                    \")])}),1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.submit}},[t._v(\"新增\")])],1)],1)],1)},[],!1,null,null,null);g.options.__file=\"create.vue\";var v=g.exports,y={mixins:[_],data:function(){return{openUpdateCompany:!1}},methods:{submit:function(){this.check_data(this.create)},create:function(){var t=this,e={accountgrade:t.formValidate.accountgrade,cluesource:t.formValidate.cluesource,companyarea:t.formValidate.companyarea_temp.join(\"-\"),companyname:t.formValidate.companyname,id:t.formValidate.id,importlevel:t.formValidate.importlevel.toString()};this.$Post(\"api/customer/updateCompany\",e,function(e){t.$refs.formValidate.resetFields(),t.loading=!1,t.$emit(\"update\",t.customer.ID),t.openUpdateCompany=!1},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.off(\"OPEN_COMPANY_UPDATE\",!0),this.$bus.on(\"OPEN_COMPANY_UPDATE\",function(e){t.formValidate=e,t.formValidate.companyarea?(t.formValidate.companyarea_temp=t.formValidate.companyarea.split(\"-\"),t.formValidate.companyarea_temp[0]=parseInt(t.formValidate.companyarea_temp[0]),t.formValidate.companyarea_temp[1]=parseInt(t.formValidate.companyarea_temp[1])):t.formValidate.companyarea=[],t.openUpdateCompany=!0})}},b=Object(l.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增企业\",\"mask-closable\":!1},model:{value:t.openUpdateCompany,callback:function(e){t.openUpdateCompany=e},expression:\"openUpdateCompany\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":100}},[a(\"FormItem\",{attrs:{label:\"公司名称\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.companyname,callback:function(e){t.$set(t.formValidate,\"companyname\",e)},expression:\"formValidate.companyname\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"公司注册地\"}},[a(\"Cascader\",{attrs:{data:t.companyarea},model:{value:t.formValidate.companyarea_temp,callback:function(e){t.$set(t.formValidate,\"companyarea_temp\",e)},expression:\"formValidate.companyarea_temp\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"跟进销售\",prop:\"followby\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.followby,callback:function(e){t.$set(t.formValidate,\"followby\",e)},expression:\"formValidate.followby\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"法人\",prop:\"legalrepresentative\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.legalrepresentative,callback:function(e){t.$set(t.formValidate,\"legalrepresentative\",e)},expression:\"formValidate.legalrepresentative\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"重要等级\",prop:\"importlevel\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.importlevel,callback:function(e){t.$set(t.formValidate,\"importlevel\",e)},expression:\"formValidate.importlevel\"}},t._l(t.importance,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename)+\"\\n                    \")])}),1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"创建人\",prop:\"createby\"}},[a(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:t.formValidate.createby,callback:function(e){t.$set(t.formValidate,\"createby\",e)},expression:\"formValidate.createby\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"企业来源\",prop:\"cluesource\"}},[a(\"Select\",{attrs:{transfer:\"\",placement:\"top\",size:\"small\"},model:{value:t.formValidate.cluesource,callback:function(e){t.$set(t.formValidate,\"cluesource\",e)},expression:\"formValidate.cluesource\"}},t._l(t.cluesources,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename)+\"\\n                    \")])}),1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.submit}},[t._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);b.options.__file=\"update.vue\";var w=b.exports,k=Object(l.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"工商信息\",\"mask-closable\":!1},model:{value:t.modal8,callback:function(e){t.modal8=e},expression:\"modal8\"}},[a(\"Form\",{ref:\"formValidate3\",attrs:{model:t.formValidate3,\"label-width\":100}},[a(\"FormItem\",{attrs:{label:\"公司名称\",prop:\"companyname\"}},[a(\"Input\",{attrs:{disabled:\"\"},model:{value:t.formValidate3.companyname,callback:function(e){t.$set(t.formValidate3,\"companyname\",e)},expression:\"formValidate3.companyname\"}})],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"信息机构代码\",prop:\"creditcode\"}},[a(\"Input\",{model:{value:t.formValidate3.creditcode,callback:function(e){t.$set(t.formValidate3,\"creditcode\",e)},expression:\"formValidate3.creditcode\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"机构代码\",prop:\"orgcode\"}},[a(\"Input\",{model:{value:t.formValidate3.orgcode,callback:function(e){t.$set(t.formValidate3,\"orgcode\",e)},expression:\"formValidate3.orgcode\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"主营项目\",prop:\"mainproduct\"}},[a(\"Input\",{model:{value:t.formValidate3.mainproduct,callback:function(e){t.$set(t.formValidate3,\"mainproduct\",e)},expression:\"formValidate3.mainproduct\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"所属行业\",prop:\"industry\"}},[a(\"Input\",{model:{value:t.formValidate3.industry,callback:function(e){t.$set(t.formValidate3,\"industry\",e)},expression:\"formValidate3.industry\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"公司性质\",prop:\"companytype\"}},[a(\"Input\",{model:{value:t.formValidate3.companytype,callback:function(e){t.$set(t.formValidate3,\"companytype\",e)},expression:\"formValidate3.companytype\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"注册地址\",prop:\"eegaddress\"}},[a(\"Input\",{model:{value:t.formValidate3.eegaddress,callback:function(e){t.$set(t.formValidate3,\"eegaddress\",e)},expression:\"formValidate3.eegaddress\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"基本户开户行\",prop:\"basicbank\"}},[a(\"Input\",{model:{value:t.formValidate3.basicbank,callback:function(e){t.$set(t.formValidate3,\"basicbank\",e)},expression:\"formValidate3.basicbank\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"基本户账号\",prop:\"basicbankcode\"}},[a(\"Input\",{model:{value:t.formValidate3.basicbankcode,callback:function(e){t.$set(t.formValidate3,\"basicbankcode\",e)},expression:\"formValidate3.basicbankcode\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"一般户开户行\",prop:\"simplebank\"}},[a(\"Input\",{model:{value:t.formValidate3.simplebank,callback:function(e){t.$set(t.formValidate3,\"simplebank\",e)},expression:\"formValidate3.simplebank\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"国税号码\",prop:\"cnumber\"}},[a(\"Input\",{model:{value:t.formValidate3.cnumber,callback:function(e){t.$set(t.formValidate3,\"cnumber\",e)},expression:\"formValidate3.cnumber\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"国税密码\",prop:\"cpassword\"}},[a(\"Input\",{model:{value:t.formValidate3.cpassword,callback:function(e){t.$set(t.formValidate3,\"cpassword\",e)},expression:\"formValidate3.cpassword\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"开户许可证\",prop:\"bankcode\"}},[a(\"Input\",{model:{value:t.formValidate3.bankcode,callback:function(e){t.$set(t.formValidate3,\"bankcode\",e)},expression:\"formValidate3.bankcode\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"地税号码\",prop:\"pnumber\"}},[a(\"Input\",{model:{value:t.formValidate3.pnumber,callback:function(e){t.$set(t.formValidate3,\"pnumber\",e)},expression:\"formValidate3.pnumber\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"地税密码\",prop:\"ppassword\"}},[a(\"Input\",{model:{value:t.formValidate3.ppassword,callback:function(e){t.$set(t.formValidate3,\"ppassword\",e)},expression:\"formValidate3.ppassword\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"工商注册号\",prop:\"regnumber\"}},[a(\"Input\",{model:{value:t.formValidate3.regnumber,callback:function(e){t.$set(t.formValidate3,\"regnumber\",e)},expression:\"formValidate3.regnumber\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"纳税等级\",prop:\"financelevel\"}},[a(\"Select\",{attrs:{transfer:\"\"},model:{value:t.formValidate3.financelevel,callback:function(e){t.$set(t.formValidate3,\"financelevel\",e)},expression:\"formValidate3.financelevel\"}},t._l(t.financelevelValue,function(e){return a(\"Option\",{key:e.value,attrs:{value:e.value}},[t._v(\"\\n                            \"+t._s(e.label)+\"\\n                        \")])}),1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);k.options.__file=\"amend.vue\";var x=k.exports,V={data:function(){return{data:[],header:[{title:\"变更前公司名称\",key:\"oldValue\",minWidth:160},{title:\"变更后公司名称\",key:\"newValue\",minWidth:160},{title:\"修改时间\",key:\"updateDate\",minWidth:160},{title:\"操作人员\",key:\"realname\",minWidth:160}],loading:!1,openComNameLog:!1}},methods:{get_data:function(t){var e=this;e.$ButtonCollect(\"marketingManagement_index_company_businessinfo_namelog\"),e.loading=!0;var a={params:{companyid:t,page:1,pageSize:100,sortField:\"updateDate\"}};this.$Get(\"api/customer/company/companyNameChangeLogList\",a,function(t){e.data=t.data.data.rows,e.loading=!1})}},created:function(){var t=this;this.$bus.off(\"OPEN_COMPANY_LOG\",!0),this.$bus.on(\"OPEN_COMPANY_LOG\",function(e){t.get_data(e),t.openComNameLog=!0})}},C=Object(l.a)(V,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"680\",title:\"公司名称变更日志\"},model:{value:t.openComNameLog,callback:function(e){t.openComNameLog=e},expression:\"openComNameLog\"}},[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,loading:t.loading,data:t.data}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);C.options.__file=\"changeLog.vue\";var I=C.exports,T=a(78),S=a.n(T),$=a(79);function E(t,e,a){return new Promise(function(o,r){o(Object($.c)(\"customer/company/shift\",t,e,a))}).catch(function(t){return t})}function D(t,e,a){return new Promise(function(o,r){o(Object($.b)(\"customer/list\",t,e,a))}).catch(function(t){return t})}function O(t,e,a,o,r,n,l){try{var i=t[n](l),s=i.value}catch(t){return void a(t)}i.done?e(s):Promise.resolve(s).then(o,r)}function R(t){return function(){var e=this,a=arguments;return new Promise(function(o,r){var n=t.apply(e,a);function l(t){O(n,o,r,l,i,\"next\",t)}function i(t){O(n,o,r,l,i,\"throw\",t)}l(void 0)})}}var F={props:{company:{type:[String,Object]}},data:function(){return{submitLoading:!1,companyName:\"\",customerName:\"\",searchName:\"\",customerId:\"\",companyId:\"\",loading:!1,total:0,header:[{title:\"客户名称\",key:\"name\"},{title:\"联系方式\",key:\"tel\"}],data:[],page:1,pageSize:10,openShiftCompany:!0}},methods:{get_data:function(){var t=R(S.a.mark(function t(){var e,a,o,r,n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this).loading=!0,a={params:{page:e.page,pageSize:e.pageSize,name:e.searchName}},t.prev=3,t.next=6,D(a);case 6:o=t.sent,r=o.total,n=o.rows,e.total=r,e.data=n.map(function(t){var e={};return e.id=t.ID,e.name=t.NAME,e.tel=t.TEL,e}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),e.$Message.error(\"页面异常！\");case 17:e.loading=!1;case 18:case\"end\":return t.stop()}},t,this,[[3,13]])}));return function(){return t.apply(this,arguments)}}(),row_select_customer:function(t){this.customerName=t.name,this.customerId=t.id},page_change:function(t){this.page=t,this.get_data()},close:function(){this.$emit(\"close\")},submit:function(){var t=R(S.a.mark(function t(){var e,a,o,r;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this,!this.companyId||!this.customerId){t.next=17;break}return a={companyId:e.companyId,customerId:e.customerId},t.prev=3,t.next=6,E(a);case 6:o=t.sent,r=o.status,o.data,r&&e.close(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),e.$Message.error(\"页面异常！\");case 15:t.next=18;break;case 17:this.$Message.warning(\"请先选择变更对象！\");case 18:case\"end\":return t.stop()}},t,this,[[3,12]])}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.get_data(),this.companyName=this.company.companyname,this.companyId=this.company.id}},N=Object(l.a)(F,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"转移公司\",width:\"600\"},on:{\"on-cancel\":t.close},model:{value:t.openShiftCompany,callback:function(e){t.openShiftCompany=e},expression:\"openShiftCompany\"}},[a(\"Form\",{attrs:{\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"NAME\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\",size:\"small\"},model:{value:t.companyName,callback:function(e){t.companyName=e},expression:\"companyName\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"newFollowName\",label:\"新归属客户：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\",size:\"small\"},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:\"customerName\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"Input\",{attrs:{placeholder:\"输入客户名称搜索\"},on:{\"on-enter\":t.get_data},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:\"searchName\"}},[a(\"Button\",{attrs:{slot:\"append\",name:\"marketingManagement_index_change_search\",icon:\"ios-search\"},on:{click:t.get_data},slot:\"append\"},[t._v(\"搜索\")])],1)],1),t._v(\" \"),a(\"Col\",{staticStyle:{\"line-height\":\"32px\"},attrs:{span:\"24\"}},[a(\"Tag\",{attrs:{color:\"blue\"}},[t._v(\"温馨提示：双击下方列表选择需要变更的客户名称\")])],1)],1),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:t.header,loading:t.loading,data:t.data,size:\"small\"},on:{\"on-row-dblclick\":t.row_select_customer}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{name:\"marketingManagement_index_change_change\",type:\"primary\",loading:t.submitLoading},on:{click:t.submit}},[t._v(\"变更\")])],1)],1)],1)},[],!1,null,null,null);N.options.__file=\"shift.vue\";var A={components:{createCompany:v,updateCompany:w,amendCompany:x,changeLog:I,shiftCompany:N.exports},props:{customer:{type:[Array,Object,String]},importance:{type:Array},cluesources:{type:Array}},data:function(){var t=this;return{selectRow:\"\",companyData:[],loading:!1,close:!1,header:[{title:\"序号\",type:\"index\",width:60,align:\"center\"},{title:\"公司名称\",minWidth:250,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":e.row.companyname.length>15?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,15)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"跟进销售\",key:\"followby\",minWidth:100},{title:\"交易状态\",key:\"enterprisestatusText\",minWidth:100},{title:\"法人\",key:\"legalrepresentative\",minWidth:100},{title:\"重要等级\",key:\"importlevelText\",minWidth:100},{title:\"创建人\",key:\"createby\",minWidth:100},{title:\"企业来源\",key:\"cluesourceText\",minWidth:150},{title:\"操作\",key:\"action\",minWidth:250,align:\"center\",render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\",disabled:\"readonly\"==a.row.status},style:{marginRight:\"5px\"},on:{click:function(){t.$bus.emit(\"OPEN_COMPANY_UPDATE\",a.row)}}},\"编辑\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){t.edit(a)}}},\"工商信息\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){t.get_company_name_change_log(a.row.id)}}},\"名称变更日志\")])}}],data:[],companyarea_Casr:[],taxtype:[],openShiftCompany:!1,selectCompany:\"\"}},methods:{get_data:function(t){var e=this;e.loading=!0;var a=\"api/customer/findCompanysByCustomerId/\"+t;this.$Get(a,{},function(t){e.data=t.data.data,e.loading=!1})},select_row:function(t){this.selectCompany=t},get_data_center:function(){var t=this;this.$GetDataCenter(\"companyarea,taxtype\",function(e){t.companyarea_Casr=t.$changeCars(e.data.data.companyarea),t.taxtype=e.data.data.taxtype,t.close=!0})},get_company_name_change_log:function(t){this.$bus.emit(\"OPEN_COMPANY_LOG\",t)},open_company_create:function(){this.$bus.emit(\"OPEN_COMPANY_CREATE\",!0)},shift_company:function(){this.selectCompany?this.openShiftCompany=!0:this.$Message.warning(\"请选择需要变更的公司！\")},close_shift_company:function(){this.openShiftCompany=!1,this.selectCompany=\"\",this.get_data(this.customer.ID)}},created:function(){var t=this,e=this;this.get_data_center(),this.get_data(this.customer.ID),this.$bus.off(\"UPDATE_CUSTOMER\",!0),this.$bus.on(\"UPDATE_CUSTOMER\",function(a){e.get_data(t.customer.ID),e.selectRow=\"\"})}},M=Object(l.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Button\",{attrs:{name:\"marketingManagement_index_company_add\",type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:t.open_company_create}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"company.shift\"],expression:\"['company.shift']\"}],attrs:{name:\"marketingManagement_index_company_add\",type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:t.shift_company}},[t._v(\"转移\")]),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{loading:t.loading,\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.select_row}}),t._v(\" \"),t.close?a(\"create-company\",{attrs:{taxtype:t.taxtype,companyarea:t.companyarea_Casr,customer:t.customer,importance:t.importance,cluesources:t.cluesources},on:{update:t.get_data}}):t._e(),t._v(\" \"),t.close?a(\"update-company\",{attrs:{taxtype:t.taxtype,companyarea:t.companyarea_Casr,customer:t.customer,importance:t.importance,cluesources:t.cluesources},on:{update:t.get_data}}):t._e(),t._v(\" \"),a(\"change-log\"),t._v(\" \"),t.openShiftCompany?a(\"shift-company\",{attrs:{company:t.selectCompany},on:{close:t.close_shift_company}}):t._e()],1)},[],!1,null,null,null);M.options.__file=\"index.vue\";var z=M.exports,P={props:{row:Object},filters:{DateFormat:function(t){if(t)return t.slice(0,10)}}},L=(a(259),Object(l.a)(P,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"订单号: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.ordercode))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"开始时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.ServiceStart)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务部门: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.departname))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务人: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.servername))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"状态: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.workOrderStatus))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"创建时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.CreateDate)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"更新时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.UpdateDate)))])])],1)],1)],1)},[],!1,null,\"df4e3c56\",null));L.options.__file=\"oneExpandRow.vue\";var j=L.exports,U={props:{workOrderStatus:{type:Map},departname:{type:String},customer:{type:[String,Object,Array]}},data:function(){return{loading:!1,header:[{type:\"expand\",width:50,render:function(t,e){return t(j,{props:{row:e.row}})}},{title:\"公司\",key:\"companyname\"},{title:\"产品名称\",key:\"product\"},{title:\"当前进度\",key:\"CurrentProcess\"}],data:[]}},methods:{open_expand:function(t,e){1==this.data[e]._expanded?this.$set(this.data[e],\"_expanded\",!1):this.$set(this.data[e],\"_expanded\",!0)},get_data:function(t,e){var a=this;a.loading=!0;var o={params:{page:1,pageSize:1e3,sortField:\"UpdateDate\",nonWorkOrderStatus:60,customerId:t,serviceDept:e,iscycle:\"N\"}};this.$Get(\"api/order/workOrderList\",o,function(t){var e=t.data.data.rows;a.data=[];for(var o=0;o<e.length;o++){var r={};r.CreateDate=e[o].CreateDate,r.CurrentProcess=e[o].CurrentProcess,r.IsOver=e[o].IsOver,r.IsShared=e[o].IsShared,r.IsWork=e[o].IsWork,r.ServiceDeptID=e[o].ServiceDeptID,r.ServiceEnd=e[o].ServiceEnd,r.ServiceStart=e[o].ServiceStart,r.UpdateDate=e[o].UpdateDate,r.companyname=e[o].companyname,r.followname=e[o].followname,r.id=e[o].id,r.name=e[o].name,r.ordercode=e[o].ordercode,r.product=e[o].product,r.resumeFlag=e[o].resumeFlag,r.resumeMsg=e[o].resumeMsg,r.servername=e[o].servername,r.tel=e[o].tel,r.departname=e[o].departname,r.workOrderStatus=a.workOrderStatus.get(e[o].workOrderStatus),r._expanded=!1,a.data.push(r)}a.loading=!1})}},mounted:function(){this.get_data(this.customer.ID,this.departname)}},q=Object(l.a)(U,function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",[e(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",border:\"\",loading:this.loading,columns:this.header,data:this.data,\"no-data-text\":\"该客户暂无服务中的工单！\"},on:{\"on-row-click\":this.open_expand}})],1)},[],!1,null,null,null);q.options.__file=\"oneOffService.vue\";var W=q.exports,B={props:{row:Object},filters:{DateFormat:function(t){if(t)return t.slice(0,10)}}},G=(a(261),Object(l.a)(B,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"订单号: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.ordercode))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"开始时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.account_begin_time)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务部门: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.departname))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务会计: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.server_realname))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"累计外勤数量: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.dljz_legwork+t.row.kjdj_legwork))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"创建时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.createdate)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"更新时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.updatedate)))])])],1)],1)],1)},[],!1,null,\"7d4bfdf4\",null));G.options.__file=\"cycleExpandRow.vue\";var Y=G.exports,Q={props:{customer:{type:[String,Object,Array]}},data:function(){return{loading:!1,header:[{type:\"expand\",width:50,render:function(t,e){return t(Y,{props:{row:e.row}})}},{title:\"公司\",key:\"CompanyName\"},{title:\"产品名称\",key:\"product\"},{title:\"截止税期\",key:\"end_period\"}],data:[]}},methods:{open_expand:function(t,e){1==this.data[e]._expanded?this.$set(this.data[e],\"_expanded\",!1):this.$set(this.data[e],\"_expanded\",!0)},get_data:function(t){var e=this;e.loading=!0;var a={params:{page:1,pageSize:100,un_service_status:\"stop\",customerid:t}};this.$Get(\"api/order/cycle/service/record/list\",a,function(t){var a=t.data.data.rows;e.data=[];for(var o=0;o<a.length;o++){var r={};r.id=a[o].id,r.CompanyName=a[o].CompanyName,r.product=a[o].product,r.end_period=a[o].end_period,r.ordercode=a[o].ordercode,r.account_begin_time=a[o].account_begin_time,r.departname=a[o].departname,r.server_realname=a[o].server_realname,r.accmanager_realname=a[o].accmanager_realname,r.balance_count=a[o].balance_count,r.createdate=a[o].createdate,r.updatedate=a[o].updatedate,r.service_time=a[o].service_time,r.legwork_valid_num=a[o].legwork_valid_num,r.dljz_legwork=a[o].dljz_legwork,r.kjdj_legwork=a[o].kjdj_legwork,r._expanded=!1,e.data.push(r)}e.loading=!1})}},mounted:function(){this.get_data(this.customer.ID)}},H=Object(l.a)(Q,function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",[e(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",border:\"\",loading:this.loading,columns:this.header,data:this.data,\"no-data-text\":\"该客户未开通记账服务！\"},on:{\"on-row-click\":this.open_expand}})],1)},[],!1,null,null,null);H.options.__file=\"cycleService.vue\";var J=H.exports,K={props:{customer:{type:[String,Object,Array]}},components:{oneOffService:W,cycleService:J},data:function(){return{loading:!0,openTabPane:\"account\",workOrderStatus_map:new Map}},methods:{getDataCenter:function(){var t=this;this.$GetDataCenter(\"workOrderStatus\",function(e){t.workOrderStatus_map=t.$array2map(e.data.data.workOrderStatus),t.loading=!1})}},created:function(){this.getDataCenter()}},Z=Object(l.a)(K,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[t.loading?t._e():a(\"Tabs\",{model:{value:t.openTabPane,callback:function(e){t.openTabPane=e},expression:\"openTabPane\"}},[a(\"TabPane\",{attrs:{label:\"会计服务进度\",name:\"account\"}},[a(\"cycle-service\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{customer:t.customer}}),t._v(\" \"),a(\"one-off-service\",{attrs:{workOrderStatus:t.workOrderStatus_map,departname:\"'ACCOUNT'\",customer:t.customer}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"商事服务进度\",name:\"commercial\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:t.workOrderStatus_map,departname:\"'BUSSINESS'\",customer:t.customer}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"企划服务进度\",name:\"plan\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:t.workOrderStatus_map,departname:\"'PLAN'\",customer:t.customer}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"审计服务进度\",name:\"aduit\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:t.workOrderStatus_map,departname:\"'ADUIT'\",customer:t.customer}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"行政服务进度\",name:\"administration\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:t.workOrderStatus_map,departname:\"'EXECUTIVE'\",customer:t.customer}})],1)],1)],1)},[],!1,null,null,null);Z.options.__file=\"index.vue\";var X=Z.exports,tt={data:function(){return{openAllDetail:!1,fiedDetail:{clocktime:\"\",endtime:\"\",fieldlength:\"\",assiststatus:\"\",clockshows:\"\",address1:\"\",address2:\"\",remark:\"\",imgs:[]}}},methods:{get_data:function(t){var e=this,a={params:{followRecordId:t}};this.$Get(\"api/customer/follow/record/detail\",a,function(t){if(t.data.data,null!=t.data.data){if(e.openAllDetail=!0,e.fiedDetail=t.data.data,t.data.data.realpaths){var a;e.fiedDetail.imgs=[],a=e.fiedDetail.realpaths.split(\",\");for(var o=0;o<a.length;o++)e.fiedDetail.imgs.push(a[o])}}else e.$Message.warning(\"暂无数据！\")})}},created:function(){var t=this;this.$bus.on(\"OPEN_CUSTOMER_FOLLOW_FIELD\",function(e){t.openAllDetail=!0,t.get_data(e)})}},et=Object(l.a)(tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看外勤详情\",width:\"600\"},model:{value:t.openAllDetail,callback:function(e){t.openAllDetail=e},expression:\"openAllDetail\"}},[a(\"Form\",{ref:\"fiedDetail\",attrs:{model:t.fiedDetail,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"clocktime\",label:\"上门时间：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.clocktime,callback:function(e){t.$set(t.fiedDetail,\"clocktime\",e)},expression:\"fiedDetail.clocktime\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"endtime\",label:\"离开时间：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.endtime,callback:function(e){t.$set(t.fiedDetail,\"endtime\",e)},expression:\"fiedDetail.endtime\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"fieldlength\",label:\"外勤时长：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.fieldlength,callback:function(e){t.$set(t.fiedDetail,\"fieldlength\",e)},expression:\"fiedDetail.fieldlength\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"assiststatus\",label:\"外勤类型：\"}},[a(\"Select\",{attrs:{type:\"text\",disabled:\"\"},model:{value:t.fiedDetail.assiststatus,callback:function(e){t.$set(t.fiedDetail,\"assiststatus\",e)},expression:\"fiedDetail.assiststatus\"}},[a(\"Option\",{attrs:{value:\"N\"}},[t._v(\"非协助外勤\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"Y\"}},[t._v(\"协助外勤\")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"clockshows\",label:\"打卡说明：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.clockshows,callback:function(e){t.$set(t.fiedDetail,\"clockshows\",e)},expression:\"fiedDetail.clockshows\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"address1\",label:\"第一次打卡地址：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.address1,callback:function(e){t.$set(t.fiedDetail,\"address1\",e)},expression:\"fiedDetail.address1\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"address2\",label:\"第二次打卡地址：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.fiedDetail.address2,callback:function(e){t.$set(t.fiedDetail,\"address2\",e)},expression:\"fiedDetail.address2\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"remark\",label:\"备注总结：\"}},[a(\"Input\",{attrs:{type:\"textarea\",readonly:\"\"},model:{value:t.fiedDetail.remark,callback:function(e){t.$set(t.fiedDetail,\"remark\",e)},expression:\"fiedDetail.remark\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{margin:\"5px\"},attrs:{prop:\"Providentfund\",label:\"附件：\",readonly:\"\"}},t._l(t.fiedDetail.imgs,function(t,e){return a(\"Row\",{key:e},[a(\"a\",{attrs:{target:\"_blank\",href:\"/api/assets/\"+t}},[a(\"img\",{attrs:{src:\"/api/assets/\"+t,alt:\"\",width:\"100\",height:\"100\"}})])])}),1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);et.options.__file=\"fieldDetail.vue\";var at=et.exports,ot=(a(87),{props:{customer:{type:[Object,Array,String]},followUpType:{type:[Array]}},data:function(){return{openFinish:!0,openFollowCreate:!1,formValidate:{companyId:\"\",followResult:\"\",followUpType:\"\",content:\"\",attIds:\"\",customerId:this.customer.ID,followupdate:\"\",followuptime:\"\",finishFlag:\"\"},ruleValidate:{content:[{required:!0,trigger:\"change\",message:\"跟进内容必填！\"}]},loading:!1,followupshow:!0,showFile:[],fileArray:[],market_status:[],companynameArray:[],isClue:!1}},methods:{handleUpload:function(t){return this.fileArray.push(t),this.showFile.push(t),!1},fileRemove:function(t){this.fileArray.splice(t,1),this.showFile.splice(t,1)},get_company_array:function(t){var e=this,a=\"api/customer/findCompanysByCustomerId/\"+t;this.$Get(a,{},function(t){t.data.data.length&&(e.formValidate.companyId=t.data.data[0].id),e.companynameArray=t.data.data})},get_role:function(){var t=localStorage.getItem(\"Main_Role\");if(\"kuaiji\"==t||\"shangshi\"==t||\"qihua\"==t||\"shenji\"==t)switch(this.followupshow=!1,t){case\"kuaiji\":this.formValidate.followUpType=\"18\",this.formValidate.finishFlag=\"N\";break;case\"shangshi\":this.formValidate.followUpType=\"17\";break;case\"qihua\":this.formValidate.followUpType=\"19\";break;case\"shenji\":this.formValidate.followUpType=\"23\"}else this.followupshow=!0},get_data_center:function(){var t=this;this.$GetDataCenter(\"market_status\",function(e){t.market_status=e.data.data.market_status})},cancel:function(){this.showFile=[],this.fileArray=[],this.formValidate.content=\"\"},submit:function(){var t=this;this.loading=!0,this.$refs.formValidate.validate(function(e){if(!e)return t.loading=!1,!1;t.fileArray.length?t.uploadImg():t.uploadNote()})},uploadImg:function(){var t=this;t.loading=!0,t.$ButtonCollect(\"marketingManagement_index_followUp_submit\");for(var e=new FormData,a=0;a<t.fileArray.length;a++)e.append(\"files\",t.fileArray[a]);this.$Post(\"/api/customer/addCustomerContentImg\",e,function(e){for(var a=[],o=0;o<e.data.data.length;o++)a.push(e.data.data[o].id);t.formValidate.attIds=a.toString(),t.uploadNote()},function(e){t.loading=!1})},uploadNote:function(){var t=this,e={companyId:t.formValidate.companyId,followResult:t.formValidate.followResult,followUpType:t.formValidate.followUpType,content:t.formValidate.content,attIds:t.formValidate.attIds,customerId:t.formValidate.customerId,finishFlag:t.formValidate.finishFlag,notifyDate:Object(r.a)(t.formValidate.followupdate)+\" \"+t.formValidate.followuptime};this.$Post(\"api/customer/addCustomerContentNote\",e,function(e){t.isClue?t.CreateClue():(setTimeout(function(){t.loading=!1},300),t.openFollowCreate=!1,t.$emit(\"update\",t.customer.ID))},function(e){t.loading=!1})},CreateClue:function(){var t=this,e={companyId:t.formValidate.companyId,followUpType:\"20\",content:t.formValidate.content,attIds:t.formValidate.attIds,customerId:t.formValidate.customerId};this.$Post(\"api/customer/addCustomerContentNote\",e,function(e){setTimeout(function(){t.loading=!1},300),t.openFollowCreate=!1,t.$emit(\"update\",t.customer.ID)},function(e){t.loading=!1})}},mounted:function(){var t=this,e=this;this.get_data_center(),this.$bus.on(\"OPEN_CUSTOMER_CREATE_FOLLOW_UP\",function(a){e.formValidate.content=\"\",e.get_company_array(t.customer.ID),e.get_role(),e.openFollowCreate=!0})}}),rt=Object(l.a)(ot,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增跟进\",\"mask-closable\":!1},model:{value:t.openFollowCreate,callback:function(e){t.openFollowCreate=e},expression:\"openFollowCreate\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{rules:t.ruleValidate,model:t.formValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{prop:\"companyId\",label:\"公司名称\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.companyId,callback:function(e){t.$set(t.formValidate,\"companyId\",e)},expression:\"formValidate.companyId\"}},t._l(t.companynameArray,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.companyname))])}),1)],1),t._v(\" \"),t.followupshow?a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"跟进结果\",prop:\"followResult\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.followResult,callback:function(e){t.$set(t.formValidate,\"followResult\",e)},expression:\"formValidate.followResult\"}},t._l(t.market_status,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"跟进类型\",prop:\"followUpType\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.followUpType,callback:function(e){t.$set(t.formValidate,\"followUpType\",e)},expression:\"formValidate.followUpType\"}},t._l(t.followUpType,function(e){return a(\"Option\",{key:e.typecode,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1)],1):t._e(),t._v(\" \"),t.openFinish?a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"完成状态\",prop:\"finishFlag\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.finishFlag,callback:function(e){t.$set(t.formValidate,\"finishFlag\",e)},expression:\"formValidate.finishFlag\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[t._v(\"完成\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[t._v(\"未完成\")])],1)],1)],1)],1):t._e(),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{prop:\"isClue\"}},[a(\"Checkbox\",{model:{value:t.isClue,callback:function(e){t.isClue=e},expression:\"isClue\"}},[t._v(\"生成线索\")])],1)],1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{label:\"跟进记录\",prop:\"content\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\"},model:{value:t.formValidate.content,callback:function(e){t.$set(t.formValidate,\"content\",e)},expression:\"formValidate.content\"}})],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-top\":\"20px\",\"margin-bottom\":\"20px\"},attrs:{label:\"通知时间\",prop:\"date\"}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"11\"}},[a(\"DatePicker\",{attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",size:\"small\"},model:{value:t.formValidate.followupdate,callback:function(e){t.$set(t.formValidate,\"followupdate\",e)},expression:\"formValidate.followupdate\"}})],1),t._v(\" \"),a(\"Col\",{staticStyle:{\"text-align\":\"center\"},attrs:{span:\"2\"}},[t._v(\"-\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"TimePicker\",{attrs:{transfer:\"\",type:\"time\",format:\"HH:mm\",placeholder:\"选择时间\",\"hide-disabled-options\":\"\",\"disabled-hours\":[0,1,2,3,4,5,6,7],size:\"small\"},model:{value:t.formValidate.followuptime,callback:function(e){t.$set(t.formValidate,\"followuptime\",e)},expression:\"formValidate.followuptime\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[t._v(\"沟通证据\")]),t._v(\" \"),a(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",\"before-upload\":t.handleUpload,action:\"/api/customer/addCustomerContentImg\"}},[a(\"Button\",{attrs:{name:\"marketingManagement_index_followUp_selectfile\",type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[t._v(\"选择文件\")])],1),t._v(\" \"),t._l(t.showFile,function(e,o){return a(\"div\",{key:o},[t._v(t._s(e.name)+\"\\n                    \"),a(\"Button\",{attrs:{name:\"marketingManagement_index_followUp_removefile\",type:\"text\"},on:{click:function(e){t.fileRemove(o)}}},[t._v(\"移除\")])],1)})],2)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{name:\"marketingManagement_index_followUp_submit\",type:\"primary\",loading:t.loading,disabled:t.loading},on:{click:t.submit}},[t._v(\"提交\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:t.cancel}},[t._v(\"重置\")])],1)],1)],1)},[],!1,null,null,null);rt.options.__file=\"createFollowUp.vue\";var nt=rt.exports,lt={props:{customer:{type:[Object,Array,String]}},components:{followField:at,followCreate:nt},data:function(){return{currentIndex:-1,pinglun:[],markert_follow_up_type:[],market_status:[],footer:!1,followList:[],spinShow:!1,currentName:\"\",onlyMarket:\"\",single:!1}},methods:{get_data_center:function(){var t=this,e=this;return new Promise(function(a,o){t.$GetDataCenter(\"markert_follow_up_type,market_status\",function(t){e.markert_follow_up_type=t.data.data.markert_follow_up_type,e.market_status=t.data.data.market_status,a()})})},get_data:function(t){var e=this,a={};a=e.single?{params:{customerId:t,followUpType:\"11,12,13,14,15\"}}:{params:{customerId:t}},e.spinShow=!0,this.$Get(\"api/customer/findCustomerContentById\",a,function(t){e.followList=t.data.data;for(var a=0;a<e.followList.length;a++){if(null!=e.followList[a].imgurls){for(var o=[],r=e.followList[a].imgurls.split(\",\"),n=0;n<r.length;n++){var l={url:\"\",type:\"\"};l.url=\"api/assets/\"+r[n].split(\"``\")[1],l.realpath=\"api/assets/\"+r[n].split(\"``\")[1],l.type=l.url.split(\".\")[1],\"doc\"!=l.type&&\"docx\"!=l.type&&\"xls\"!=l.type&&\"xlxs\"!=l.type&&\"pptx\"!=l.type&&\"ppt\"!=l.type||(l.url=\"http://view.officeapps.live.com/op/view.aspx?src=\"+encodeURI(\"http://cloud.zgcfo.com/\"+l.url)),o.push(l)}e.followList[a].imgs=o}if(e.followList[a].buttons){var i=e.followList[a].buttons.split(\",\");e.followList[a].buttonDetail=[];for(var s=0;s<i.length;s++){var c={};c.buttonsZt=i[s].split(\"``\")[3],c.buttonsdetail=i[s].split(\"``\")[2],c.buttonText=i[s].split(\"``\")[1],e.followList[a].buttonDetail.push(c)}}if(e.followList[a].evaluatecontents){var m=e.followList[a].evaluatecontents.split(\",\");e.followList[a].evaluateNum=m.length,e.followList[a].chat=[];for(var d=0;d<m.length;d++){var p={};p.content=m[d].split(\"``\")[3],p.date=m[d].split(\"``\")[2],p.name=m[d].split(\"``\")[1],e.followList[a].chat.push(p)}}else e.followList[a].evaluateNum=0,e.followList[a].chat=[]}e.spinShow=!1,e.footer=!0})},lingqu:function(t){var e=this,a=\"api\"+t.buttonsdetail;this.$Get(a,{},function(t){e.get_data(e.customer.ID)})},open_evaluate:function(t,e){this.currentIndex==e?this.currentIndex=-1:this.currentIndex=e},send:function(t,e,a){var o=this,n={bussinessid:t,evaluatecontent:o.pinglun[e],serviceranks:a};this.$Post(\"api/customer/addErevaluate\",n,function(t){var a={content:o.pinglun[e],date:Object(r.d)(new Date),name:localStorage.getItem(\"realname\")},n=o.followList[e].chat,l=n.unshift(a);o.$set(o.followList[e],\"evaluateNum\",l),o.$set(o.followList[e],\"chat\",n),o.currentIndex=-1,o.currentIndex=e,o.pinglun[e]=\"\"},function(t){})},open_create_followUp:function(){this.$bus.emit(\"OPEN_CUSTOMER_CREATE_FOLLOW_UP\",!0)},open_detail:function(t){this.$bus.emit(\"OPEN_CUSTOMER_FOLLOW_FIELD\",t)},download:function(t){window.open(t.realpath)}},created:function(){var t=this;this.currentName=localStorage.getItem(\"realname\"),this.get_data_center().then(function(){t.get_data(t.customer.ID)})}},it=(a(263),Object(l.a)(lt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Row\",{staticStyle:{height:\"56px\"}},[a(\"Row\",[a(\"Button\",{attrs:{name:\"marketingManagement_index_followUp_add\",type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:t.open_create_followUp}},[t._v(\"新增\")]),t._v(\" \"),a(\"Checkbox\",{staticStyle:{float:\"right\"},on:{\"on-change\":function(e){t.get_data(t.customer.ID)}},model:{value:t.single,callback:function(e){t.single=e},expression:\"single\"}},[t._v(\"只看市场跟进\")])],1)],1),t._v(\" \"),a(\"Scroll\",{attrs:{height:\"500\"}},[t.spinShow?a(\"Spin\",{attrs:{fix:\"\"}},[a(\"Icon\",{staticClass:\"demo-spin-icon-load\",attrs:{type:\"load-c\",size:\"18\"}}),t._v(\" \"),a(\"div\",[t._v(\"加载跟进记录中...\")])],1):t._e(),t._v(\" \"),a(\"Timeline\",{staticStyle:{\"margin-top\":\"15px\",\"margin-right\":\"10px\"}},[a(\"div\",{staticClass:\"content\"},[t._l(t.followList,function(e,o){return a(\"TimelineItem\",{key:o,attrs:{color:\"blue\"}},[\"11\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-telephone\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"12\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-chatbubble\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"13\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"chatbubbles\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"14\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"android-contacts\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"15\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"gear-b\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"16\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"android-hangout\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"17\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"social-buffer\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"18\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"social-bitcoin\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"19\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-lightbulb\"},slot:\"dot\"}):t._e(),t._v(\" \"),\"20\"==e.followType?a(\"Icon\",{attrs:{slot:\"dot\",type:\"android-wifi\"},slot:\"dot\"}):t._e(),t._v(\" \"),a(\"Card\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"2\"}},[a(\"Avatar\",{attrs:{icon:\"person\"}})],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"2\"}},[a(\"B\",{staticStyle:{\"line-height\":\"32px\"}},[t._v(t._s(e.userName))])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"5\"}},[a(\"P\",{staticStyle:{\"line-height\":\"32px\"}},[t._v(\"跟进类型： \"),a(\"span\",[t._v(t._s(e.followTypeName))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"15\"}},[a(\"P\",{staticStyle:{\"line-height\":\"32px\",\"text-align\":\"right\"}},[t._v(t._s(e.createDate))])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[a(\"Col\",{attrs:{span:\"20\"}},[a(\"P\",[t._v(t._s(e.serviceContent))])],1),t._v(\" \"),\"22\"==e.followType?a(\"Col\",{attrs:{span:\"4\"}},[a(\"Button\",{staticStyle:{float:\"right\"},attrs:{type:\"primary\"},on:{click:function(a){t.open_detail(e.id)}}},[t._v(\"查看详情\")])],1):t._e()],1),t._v(\" \"),e.imgs?a(\"Row\",{attrs:{gutter:12}},[a(\"Row\",[a(\"Tag\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{type:\"border\",color:\"blue\"}},[t._v(\"点击图标可预览\")])],1),t._v(\" \"),t._l(e.imgs,function(e,o){return a(\"Col\",{key:o,staticStyle:{\"max-width\":\"200px\"},attrs:{span:\"8\"}},[a(\"Row\",[\"doc\"==e.type||\"docx\"==e.type?a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/word.png\",alt:\"word\",width:\"95%\"}})]):\"xls\"==e.type||\"xlsx\"==e.type?a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/excel.png\",alt:\"excel\",width:\"95%\"}})]):\"pptx\"==e.type||\"ppt\"==e.type?a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/ppt.png\",alt:\"ppt\",width:\"95%\"}})]):\"txt\"==e.type?a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/txt.png\",alt:\"txt\",width:\"95%\"}})]):\"pdf\"==e.type?a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/pdf.jpg\",alt:\"txt\",width:\"95%\"}})]):a(\"a\",{attrs:{target:\"_blank\",href:e.url}},[a(\"img\",{attrs:{src:e.url,alt:\"图片\",width:\"95%\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}})])]),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"5px\"}},[a(\"center\",[a(\"Button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){t.download(e)}}},[t._v(\"下载\")])],1)],1)],1)})],2):t._e(),t._v(\" \"),\"11\"==e.followType||\"12\"==e.followType||\"13\"==e.followType?a(\"Div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"18\"}},[a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(a){t.open_evaluate(e.serviceId,o)}}},[t._v(\"评价（\"+t._s(e.evaluateNum)+\"）\")])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"6\"}},[a(\"Rate\",{staticStyle:{float:\"right\"},attrs:{\"allow-half\":\"\"},model:{value:e.ranks,callback:function(a){t.$set(e,\"ranks\",a)},expression:\"item.ranks\"}})],1)],1),t._v(\" \"),t.currentIndex==o?a(\"Div\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"22\"}},[a(\"Input\",{key:o,staticStyle:{width:\"99%\"},attrs:{type:\"textarea\",autosize:!0,placeholder:\"请输入您要评价的内容\"},model:{value:t.pinglun[o],callback:function(e){t.$set(t.pinglun,o,e)},expression:\"pinglun[index]\"}})],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"2\"}},[a(\"Button\",{staticStyle:{float:\"right\"},attrs:{type:\"primary\"},on:{click:function(a){t.send(e.bussinessId,o,e.ranks)}}},[t._v(\"评价\")])],1)],1),t._v(\" \"),a(\"Div\",[a(\"Row\",{staticStyle:{\"margin-top\":\"5px\"}},t._l(e.chat,function(e,r){return t.currentIndex==o?a(\"Div\",{key:r,staticClass:\"bubbleItem\",staticStyle:{\"font-size\":\"10px\"}},[a(\"Span\",{staticClass:\"bubble\",class:[e.name==t.currentName?\"leftBubble\":\"rightBubble\"]},[a(\"span\",[t._v(t._s(e.name))]),t._v(\" \"),a(\"span\",{staticStyle:{float:\"right\"}},[t._v(t._s(e.date))]),a(\"br\"),t._v(\" \"),a(\"span\",[t._v(t._s(e.content))]),t._v(\" \"),a(\"span\",{staticClass:\"bottomLevel\"}),t._v(\" \"),a(\"span\",{staticClass:\"topLevel\"})])],1):t._e()}),1)],1)],1):t._e()],1):t._e(),t._v(\" \"),e.buttonDetail?a(\"Row\",[a(\"div\",{staticStyle:{float:\"right\"}},t._l(e.buttonDetail,function(e,o){return a(\"Button\",{key:o,staticStyle:{\"margin-left\":\"5px\"},attrs:{type:\"primary\",shape:\"circle\",disabled:\"1\"==e.buttonsZt},on:{click:function(a){t.lingqu(e)}}},[t._v(\"\\n                                    \"+t._s(e.buttonText)+\"\\n                                \")])}),1)]):t._e()],1)],1)}),t._v(\" \"),a(\"div\",[t.footer?a(\"center\",{staticStyle:{\"padding-bottom\":\"30px\"}},[t._v(\"没有更多数据了！\")]):t._e()],1)],2)])],1),t._v(\" \"),a(\"follow-field\"),t._v(\" \"),a(\"follow-create\",{attrs:{followUpType:t.markert_follow_up_type,customer:t.customer},on:{update:t.get_data}})],1)},[],!1,null,null,null));it.options.__file=\"index.vue\";var st=it.exports,ct={props:{payDirs:{type:Array}},data:function(){return{openOrderDetail:!1,formValidateDetail:{CompanyName:\"\",name:\"\",payTime:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\"},orderItem:[],orderItemHeader:[{title:\"序号\",type:\"index\",minWidth:60,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(t,e){return t(\"div\",{domProps:{innerHTML:e.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(t,e){var a=new RegExp(\"</br>\",\"g\");return t(\"div\",[t(\"Input\",{props:{value:e.row.memo.replace(a,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}]}},methods:{get_data:function(t){var e=this,a=\"api/order/detail/\"+t;this.$Get(a,{},function(t){e.formValidateDetail=t.data.data,e.orderItem=e.formValidateDetail.items;for(var a=0;a<e.orderItem.length;a++)if(\"会计到家\"==e.orderItem[a].product){e.kjdj=!0;break}})}},created:function(){var t=this;this.$bus.on(\"CUSTOMER_ORDER_DETAIL\",function(e){t.get_data(e.id),t.openOrderDetail=!0})}},mt=(a(265),Object(l.a)(ct,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"100%\"},model:{value:t.openOrderDetail,callback:function(e){t.openOrderDetail=e},expression:\"openOrderDetail\"}},[a(\"Form\",{ref:\"formValidateDetail\",attrs:{model:t.formValidateDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidateDetail.CompanyName,callback:function(e){t.$set(t.formValidateDetail,\"CompanyName\",e)},expression:\"formValidateDetail.CompanyName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidateDetail.name,callback:function(e){t.$set(t.formValidateDetail,\"name\",e)},expression:\"formValidateDetail.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidateDetail.payTime,callback:function(e){t.$set(t.formValidateDetail,\"payTime\",e)},expression:\"formValidateDetail.payTime\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidateDetail.paynumber,callback:function(e){t.$set(t.formValidateDetail,\"paynumber\",e)},expression:\"formValidateDetail.paynumber\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.formValidateDetail.realnumber,callback:function(e){t.$set(t.formValidateDetail,\"realnumber\",e)},expression:\"formValidateDetail.realnumber\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"payDir\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:t.formValidateDetail.paydir,callback:function(e){t.$set(t.formValidateDetail,\"paydir\",e)},expression:\"formValidateDetail.paydir\"}},t._l(t.payDirs,function(e,o){return a(\"Option\",{key:o,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"GDSreport\"}},[a(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:t.formValidateDetail.gdsreport,callback:function(e){t.$set(t.formValidateDetail,\"gdsreport\",e)},expression:\"formValidateDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[t._v(\"已报道\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[t._v(\"未报道\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[t._v(\"不用报道\")])],1)],1)],1)],1),t._v(\" \"),a(\"Table\",{attrs:{id:\"show-order-item\",border:\"\",columns:t.orderItemHeader,data:t.orderItem,size:\"small\"}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));function dt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}mt.options.__file=\"orderDetail.vue\";var pt={components:{orderDetail:mt.exports},props:{customer:{type:[Array,Object,String]},cluesources:{type:Array}},data:function(){var t=this;return{loading:!1,header:[{title:\"订单号码\",key:\"ordercode\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"产品名称\",key:\"productname\",minWidth:180,render:function(t,e){return\"\"==e.row.productname||null==e.row.productname?\"\":e.row.productname.length>10?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.productname.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.productname)])]):t(\"span\",e.row.productname)}},{title:\"流程状态\",key:\"ProcessType\",minWidth:120},{title:\"缴费渠道\",key:\"base_paydir\",minWidth:140},{title:\"订单价格\",key:\"paynumber\",minWidth:120},{title:\"已付款\",key:\"realnumber\",minWidth:100},{title:\"创建时间\",key:\"base_createdate\",minWidth:120},{title:\"缴费日期\",key:\"payTime\",minWidth:120},{title:\"上传合同\",key:\"contract_flag\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:120,render:function(e,a){var o=t;if(a.index!=t.pageSize)return e(\"div\",[e(\"Button\",{props:{type:\"warning\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.record\"}],on:{click:function(){o.$bus.emit(\"ORDER_APPROVELIST_LOG\",a.row.id)}}},\"审批记录\")])}}],data:[],total:0,page:1,pageSize:10,payDirs:[],payDirs_map:new Map,order_contract_flag:[],order_contract_flag_map:new Map,selectRow:\"\"}},methods:{get_data:function(t){var e,a=this;a.loading=!0;var o={params:(e={sortField:a.sortField,order:a.order,page:a.page,pageSize:a.pageSize,customerId:a.customer.ID},dt(e,\"sortField\",\"id\"),dt(e,\"order\",\"desc\"),e)};this.$Get(\"api/order/list\",o,function(t){a.data=t.data.data.rows,a.total=t.data.data.total;for(var e=0;e<a.data.length;e++)a.data[e].base_paydir=a.payDirs_map.get(a.data[e].base_paydir),a.data[e].contract_flag=a.order_contract_flag_map.get(a.data[e].contract_flag),a.data[e].base_createdate&&(a.data[e].base_createdate=a.data[e].base_createdate.slice(0,10));a.loading=!1})},pageChange:function(t){this.page=t,this.get_data()},rowClassName:function(t,e){if(\"调整订单\"==t.ProcessType&&t.id!=this.selectRow.id)return\"demo-table-error-row\"},get_data_center:function(){var t=this,e=this;return new Promise(function(a,o){t.$GetDataCenter(\"payDirs,order_contract_flag\",function(t){e.payDirs=t.data.data.payDirs,e.order_contract_flag=t.data.data.order_contract_flag,e.payDirs_map=e.$array2map(e.payDirs),e.order_contract_flag_map=e.$array2map(e.order_contract_flag),a()})})},select_row:function(t){t.id?this.selectRow=t:this.selectRow=\"\"},open_show_order:function(){this.selectRow?this.$bus.emit(\"CUSTOMER_ORDER_DETAIL\",this.selectRow):this.$Message.warning(\"请选择需要查看的订单！\")},db_click:function(t){this.$bus.emit(\"CUSTOMER_ORDER_DETAIL\",t)}},created:function(){var t=this;this.get_data_center().then(function(){t.get_data(t.customer.ID)})}},ut=(a(267),Object(l.a)(pt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Button\",{attrs:{name:\"marketingManagement_index_orderlist_check\",type:\"primary\",shape:\"circle\",icon:\"ios-search-strong\"},on:{click:t.open_show_order}},[t._v(\"查看\")]),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",loading:t.loading,\"row-class-name\":t.rowClassName,columns:t.header,data:t.data},on:{\"on-row-dblclick\":t.db_click,\"on-row-click\":t.select_row}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{current:t.page,size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}}),t._v(\" \"),a(\"order-detail\",{attrs:{payDirs:t.payDirs}})],1)},[],!1,null,null,null));ut.options.__file=\"index.vue\";var ft=ut.exports,_t={data:function(){var t=this;return{loading:!1,formValidate:{name:\"\",tel:\"\",qq:\"\",wechat:\"\",email:\"\",jobplace:\"\",sendmsgflag:\"0\",memo:\"\",id:\"\"},ruleValidate:{name:[{required:!0,message:\"请输入姓名\",trigger:\"blur\"}],tel:[{validator:function(e,a,o){if(\"\"==a||null==a)o();else if(/^1\\d{10}$/.test(a)){var r={params:{tel:a}};t.$Get(\"api/customer/findCustomerByTel\",r,function(t){null!=t.data.data?o(new Error(\"抱歉，电话号码重复\")):o()},function(t){o(new Error(\"验证错误\"))})}else o(new Error(\"电话格式不正确\"))},trigger:\"blur\"}],email:[{type:\"email\",trigger:\"blur\",message:\"邮箱格式不正确\"}],qq:[{validator:function(t,e,a){\"\"==e||null==e?a():/^[1-9]\\d{4,10}$/.test(e)?a():a(new Error(\"QQ格式不正确\"))},trigger:\"blur\"}]}}},methods:{check_data:function(t){var e=this;if(!(this.formValidate.tel||this.formValidate.email||this.formValidate.qq||this.formValidate.weixin))return this.$Message.warning(\"联系方式需至少填写一项！\"),!1;this.loading=!0,this.$refs.formValidate.validate(function(a){if(!a)return e.loading=!1,!1;t()})}}},ht={mixins:[_t],props:{customerId:{type:[Number,String]}},data:function(){return{openRelationCreate:!1}},methods:{submit:function(){this.check_data(this.create)},create:function(){var t=this;t.$ButtonCollect(\"marketingManagement_index_client_add\");var e={name:t.formValidate.name,tel:t.formValidate.tel,qq:t.formValidate.qq,wechat:t.formValidate.wechat,email:t.formValidate.email,jobplace:t.formValidate.jobplace,sendmsgflag:t.formValidate.sendmsgflag,memo:t.formValidate.memo,customerid:this.customerId};this.$Post(\"api/customer/addCustomerRelation\",e,function(e){t.loading=!1,t.openRelationCreate=!1,t.$refs.formValidate.resetFields(),t.$emit(\"update\",!0)},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.on(\"CREATE_CUSTOMER_RELATION\",function(e){t.openRelationCreate=!0})}},gt=Object(l.a)(ht,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增联系人\"},model:{value:t.openRelationCreate,callback:function(e){t.openRelationCreate=e},expression:\"openRelationCreate\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":80}},[a(\"FormItem\",{attrs:{label:\"姓名\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"QQ\",prop:\"qq\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.qq,callback:function(e){t.$set(t.formValidate,\"qq\",e)},expression:\"formValidate.qq\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"微信\",prop:\"wechat\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.wechat,callback:function(e){t.$set(t.formValidate,\"wechat\",e)},expression:\"formValidate.wechat\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"email\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,\"email\",e)},expression:\"formValidate.email\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"职位\",prop:\"jobplace\"}},[a(\"Select\",{attrs:{size:\"small\"},model:{value:t.formValidate.jobplace,callback:function(e){t.$set(t.formValidate,\"jobplace\",e)},expression:\"formValidate.jobplace\"}},[a(\"Option\",{attrs:{value:\"老板\"}},[t._v(\"老板\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"高层\"}},[t._v(\"高层\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"中层\"}},[t._v(\"中层\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"基层\"}},[t._v(\"基层\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"发送信息\",prop:\"sendmsgflag\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.sendmsgflag,callback:function(e){t.$set(t.formValidate,\"sendmsgflag\",e)},expression:\"formValidate.sendmsgflag\"}},[a(\"Option\",{attrs:{value:\"1\"}},[t._v(\"是\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"0\"}},[t._v(\"否\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"memo\"}},[a(\"Input\",{attrs:{type:\"textarea\",size:\"small\",autosize:{minRows:2,maxRows:5}},model:{value:t.formValidate.memo,callback:function(e){t.$set(t.formValidate,\"memo\",e)},expression:\"formValidate.memo\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.submit}},[t._v(\"新增\")])],1)],1)],1)},[],!1,null,null,null);gt.options.__file=\"create.vue\";var vt=gt.exports,yt={mixins:[_t],data:function(){return{updateRelation:!1}},methods:{submit:function(){this.check_data(this.create)},create:function(){var t=this;t.$ButtonCollect(\"marketingManagement_index_client_add\");var e={name:t.formValidate.name,tel:t.formValidate.tel,qq:t.formValidate.qq,wechat:t.formValidate.wechat,email:t.formValidate.email,jobplace:t.formValidate.jobplace,sendmsgflag:t.formValidate.sendmsgflag,memo:t.formValidate.memo,id:t.formValidate.id};this.$Post(\"api/customer/updateCustomerRelation\",e,function(e){t.loading=!1,t.updateRelation=!1,t.$emit(\"update\",!0)},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.on(\"UPDATE_CUSTOMER_RELATION\",function(e){t.formValidate=e,t.updateRelation=!0})}},bt=Object(l.a)(yt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"修改联系人\"},model:{value:t.updateRelation,callback:function(e){t.updateRelation=e},expression:\"updateRelation\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":80}},[a(\"FormItem\",{attrs:{label:\"姓名\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"QQ\",prop:\"qq\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.qq,callback:function(e){t.$set(t.formValidate,\"qq\",e)},expression:\"formValidate.qq\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"微信\",prop:\"wechat\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.wechat,callback:function(e){t.$set(t.formValidate,\"wechat\",e)},expression:\"formValidate.wechat\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"email\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.email,callback:function(e){t.$set(t.formValidate,\"email\",e)},expression:\"formValidate.email\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"职位\",prop:\"jobplace\"}},[a(\"Select\",{attrs:{size:\"small\"},model:{value:t.formValidate.jobplace,callback:function(e){t.$set(t.formValidate,\"jobplace\",e)},expression:\"formValidate.jobplace\"}},[a(\"Option\",{attrs:{value:\"老板\"}},[t._v(\"老板\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"高层\"}},[t._v(\"高层\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"中层\"}},[t._v(\"中层\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"基层\"}},[t._v(\"基层\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"发送信息\",prop:\"sendmsgflag\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:t.formValidate.sendmsgflag,callback:function(e){t.$set(t.formValidate,\"sendmsgflag\",e)},expression:\"formValidate.sendmsgflag\"}},[a(\"Option\",{attrs:{value:\"1\"}},[t._v(\"是\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"0\"}},[t._v(\"否\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"memo\"}},[a(\"Input\",{attrs:{type:\"textarea\",size:\"small\",autosize:{minRows:2,maxRows:5}},model:{value:t.formValidate.memo,callback:function(e){t.$set(t.formValidate,\"memo\",e)},expression:\"formValidate.memo\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.submit}},[t._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);bt.options.__file=\"update.vue\";var wt=bt.exports,kt={props:{customer:{type:[Array,Object,String]}},components:{createRelation:vt,updateRelation:wt},data:function(){var t=this;return{header:[{type:\"index\",minWidth:60,align:\"center\"},{title:\"姓名\",key:\"name\",minWidth:100},{title:\"电话\",key:\"tel\",minWidth:150},{title:\"QQ\",key:\"qq\",minWidth:150},{title:\"微信\",key:\"wechat\",minWidth:150},{title:\"邮箱\",key:\"email\",minWidth:150},{title:\"职位\",key:\"jobplace\",minWidth:100},{title:\"发送信息\",key:\"isSend\",minWidth:100},{title:\"备注\",key:\"memo\",minWidth:100},{title:\"操作\",key:\"action\",width:150,align:\"center\",render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.$bus.emit(\"UPDATE_CUSTOMER_RELATION\",a.row)}}},\"修改\"),e(\"Button\",{props:{type:\"text\",size:\"small\"}},[e(\"Poptip\",{props:{confirm:!0,title:\"您确定要删除此关系人吗！\",transfer:!0},on:{\"on-ok\":function(){t.remove(a)},\"on-cancel\":function(){}}},\"删除\")])])}}],data:[],loading:!1}},methods:{get_data:function(t){var e=this,a=\"api/customer/findCustomerRelationById/\"+t.ID;e.loading=!0;this.$Get(a,{},function(t){e.data=t.data.data;for(var a=0;a<e.data.length;a++)1==e.data[a].sendmsgflag?e.data[a].isSend=\"是\":e.data[a].isSend=\"否\";e.loading=!1})},remove:function(t){var e=this;e.$ButtonCollect(\"marketingManagement_index_client_delect\");var a=\"api/customer/delCustomerRelation/\"+t.row.id;this.$Get(a,{},function(t){this.$Message.success(\"删除成功！\"),e.get_data(this.customer)},function(t){this.$Message.error(\"删除失败！\")})},open_create:function(){this.$bus.emit(\"CREATE_CUSTOMER_RELATION\",!0)}},created:function(){this.get_data(this.customer)}},xt=Object(l.a)(kt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:t.open_create}},[t._v(\"新增\")]),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",loading:t.loading,border:\"\",columns:t.header,data:t.data}}),t._v(\" \"),a(\"update-relation\",{on:{update:function(e){t.get_data(t.customer)}}}),t._v(\" \"),a(\"create-relation\",{attrs:{customerId:t.customer.ID},on:{update:function(e){t.get_data(t.customer)}}})],1)},[],!1,null,null,null);xt.options.__file=\"index.vue\";var Vt=xt.exports,Ct={props:{customer:{type:[Array,Object,String]}},data:function(){var t=this;return{loading:!1,uploadModal:!1,header:[{title:\"序号\",type:\"index\",minWidth:60},{title:\"附件名称\",key:\"attachmenttitle\",minWidth:150},{title:\"上传时间\",key:\"createdate\",minWidth:180},{title:\"附件格式\",key:\"extend\",minWidth:120},{title:\"备注\",key:\"content\",minWidth:200},{title:\"操作\",key:\"action\",width:200,render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\",placement:\"left\"},on:{click:function(){t.beforeview(a.row)}}},\"预览\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.fileDownload(a)}}},\"下载\"),e(\"Button\",{props:{type:\"text\",size:\"small\"}},[e(\"Poptip\",{props:{confirm:!0,title:\"您确定要删除此附件吗！\"},on:{\"on-ok\":function(){t.files_delete(a)},\"on-cancel\":function(){}}},\"删除\")])])}}],data:[],file:[],upload_loading:!1}},methods:{get_file_list:function(){var t=this;t.loading=!0;var e={params:{customerId:t.customer.ID,bType:\"CustomerData\"}};this.$Get(\"/api/customer/findCustomerFilesById\",e,function(e){t.data=e.data.data,t.loading=!1})},files_delete:function(t){var e=this;e.$ButtonCollect(\"marketingManagement_index_uploadfile_delect\");var a=\"/api/customer/customerFileRemove/\"+t.row.id;this.$Get(a,config,function(t){e.$Message.success(\"删除成功！\"),e.get_file_list()},function(t){e.$Message.error(t)})},fileDownload:function(t){this.$ButtonCollect(\"marketingManagement_index_uploadfile_download\"),window.open(\"/api/customer/fileDownload/\"+t.row.id)},viewFiles:function(){},handleUpload:function(t){return this.file.push(t),!1},fileRemove:function(t){this.file.splice(this.file.indexOf(t),1)},upload:function(){var t=this;t.$ButtonCollect(\"marketingManagement_index_uploadfile_upload\"),t.upload_loading=!0;for(var e=new FormData,a=\"api/zuul/customer/customerFilesUploadById/\"+t.customer.ID,o=0;o<this.file.length;o++)e.append(\"files\",this.file[o]);e.append(\"customerId\",t.customer.ID),this.$Post(a,e,function(e){t.upload_loading=!1,t.file=[],setTimeout(function(){t.get_file_list()},300),t.uploadModal=!1},function(e){t.upload_loading=!1})},beforeview:function(t){\"docx\"==t.extend||\"doc\"==t.extend||\"ppt\"==t.extend||\"pptx\"==t.extend||\"xls\"==t.extend||\"xlsx\"==t.extend?window.open(\"http://view.officeapps.live.com/op/view.aspx?src=\"+encodeURI(\"http://cloud.zgcfo.com/api/assets/upload/files/\"+t.realpath)):window.open(\"http://cloud.zgcfo.com/api/assets/\"+t.realpath)}},created:function(){var t=this;this.$bus.on(\"FOLLOW_UP_UPDATE_FILE\",function(e){t.get_file_list()})},mounted:function(){this.get_file_list()}},It=Object(l.a)(Ct,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"plus\"},on:{click:function(e){t.uploadModal=!0}}},[t._v(\"上传附件\")]),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{border:\"\",columns:t.header,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Modal\",{attrs:{title:\"上传附件\"},model:{value:t.uploadModal,callback:function(e){t.uploadModal=e},expression:\"uploadModal\"}},[a(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",\"before-upload\":t.handleUpload,action:\"\"}},[a(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[t._v(\"选择文件\")])],1),t._v(\" \"),t._l(t.file,function(e,o){return a(\"div\",{key:o},[t._v(t._s(e.name)+\"\\n            \"),a(\"Button\",{attrs:{type:\"text\",size:\"small\"},on:{click:function(a){t.fileRemove(e)}}},[t._v(\"移除\")])],1)}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.upload_loading},on:{click:t.upload}},[t._v(\"上传\")])],1)],2)],1)},[],!1,null,null,null);It.options.__file=\"index.vue\";var Tt={components:{editForm:f,company:z,dymaic:X,follow:st,order:ft,relation:Vt,upload:It.exports},props:{cluesources:{type:Array},customerrating:{type:Array},area:{type:Array},sf_yn:{type:Array},importance:{type:Array},customerTypes_Casr:{type:Array},customer:{type:[Array,Object,String]}},data:function(){return{loading:!0,openPanel:[],openEdit:!0}},methods:{close:function(){this.$emit(\"close-edit\",!0)},open:function(){}}},St=Object(l.a)(Tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"客户详情\",width:\"100\",styles:{height:\"100%\",top:\"0px\",minWidth:\"900px\"}},on:{\"on-cancel\":t.close},model:{value:t.openEdit,callback:function(e){t.openEdit=e},expression:\"openEdit\"}},[a(\"div\",{attrs:{slot:\"close\"},slot:\"close\"},[a(\"Icon\",{staticStyle:{\"font-size\":\"20px\",\"padding-top\":\"10px\"},attrs:{type:\"close\"},on:{click:t.close}})],1),t._v(\" \"),t.loading?a(\"Spin\",{attrs:{fix:\"\"}}):t._e(),t._v(\" \"),a(\"Row\",{staticStyle:{overflow:\"hidden\",\"*zoom\":\"1\"}},[a(\"Card\",{staticStyle:{width:\"300px\",float:\"left\"},attrs:{title:\"信息编辑\"}},[a(\"edit-form\",{attrs:{customer:t.customer,cluesources:t.cluesources,customerrating:t.customerrating,area:t.area,sf_yn:t.sf_yn,importance:t.importance,customerTypes_Casr:t.customerTypes_Casr},on:{\"cancel-loading\":function(e){t.loading=!1}}})],1),t._v(\" \"),a(\"Card\",{staticStyle:{\"margin-left\":\"310px\",\"min-width\":\"590px\"}},[a(\"Collapse\",{attrs:{accordion:\"\"},model:{value:t.openPanel,callback:function(e){t.openPanel=e},expression:\"openPanel\"}},[a(\"Panel\",{attrs:{name:\"company\"}},[t._v(\"\\n                        企业信息\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"company\"==t.openPanel[0]?a(\"company\",{attrs:{customer:t.customer,importance:t.importance,cluesources:t.cluesources}}):t._e()],1)]),t._v(\" \"),a(\"Panel\",{attrs:{name:\"followUp\"}},[t._v(\"\\n                        客户跟进记录\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"followUp\"==t.openPanel[0]?a(\"follow\",{attrs:{customer:t.customer}}):t._e()],1)]),t._v(\" \"),a(\"Panel\",{attrs:{name:\"order\"}},[t._v(\"\\n                        订单详情\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"order\"==t.openPanel[0]?a(\"order\",{attrs:{customer:t.customer,cluesources:t.cluesources}}):t._e()],1)]),t._v(\" \"),a(\"Panel\",{attrs:{name:\"relation\"}},[t._v(\"\\n                        客户关系人\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"relation\"==t.openPanel[0]?a(\"relation\",{attrs:{customer:t.customer}}):t._e()],1)]),t._v(\" \"),a(\"Panel\",{attrs:{name:\"dymaic\"}},[t._v(\"\\n                        服务动态\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"dymaic\"==t.openPanel[0]?a(\"dymaic\",{attrs:{customer:t.customer}}):t._e()],1)]),t._v(\" \"),a(\"Panel\",{attrs:{name:\"upload\"}},[t._v(\"\\n                        附件\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"upload\"==t.openPanel[0]?a(\"upload\",{attrs:{customer:t.customer}}):t._e()],1)])],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);St.options.__file=\"index.vue\";var $t=St.exports,Et={data:function(){return{openChangeMarket:!1,customerDetail:{NAME:\"\",ID:\"\",followbyname:\"\"},newFollowName:\"\",newFollowId:\"\",submit_loading:!1,loading:!1,realname:\"\",page:1,total:0,header:[{title:\"市场人员\",key:\"realname\",minWidth:200},{title:\"所属部门\",key:\"GROUP_CONCAT(td.departname)\",minWidth:250}],data:[]}},methods:{change_submit:function(){var t=this;t.submit_loading=!0;var e={customerId:t.customerDetail.ID,userId:t.newFollowId};this.$Post(\"api/customer/shift\",e,function(e){t.submit_loading=!1,t.open_change_market=!1,t.newFollowByName=\"\",t.newFollowById=\"\",t.$bus.emit(\"UPDATE_CUSTOMER\",!0)},function(e){t.submit_loading=!1})},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:10,realname:t.realname}};this.$Get(\"api/user/saler/list\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total,t.loading=!1},function(e){t.loading=!1})},page_change:function(t){this.page=t,this.get_data()},row_select_market:function(t){this.newFollowId=t.id,this.newFollowName=t.realname}},created:function(){var t=this;this.$bus.off(\"CUSTOMER_CHANGE_MARKETER\",!0),this.$bus.on(\"CUSTOMER_CHANGE_MARKETER\",function(e){t.customerDetail=e,t.get_data(),t.openChangeMarket=!0})}},Dt=Object(l.a)(Et,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"变更市场人员\",width:\"600\"},model:{value:t.openChangeMarket,callback:function(e){t.openChangeMarket=e},expression:\"openChangeMarket\"}},[a(\"Form\",{attrs:{\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"NAME\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\",size:\"small\"},model:{value:t.customerDetail.NAME,callback:function(e){t.$set(t.customerDetail,\"NAME\",e)},expression:\"customerDetail.NAME\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"followbyname\",label:\"原市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\",size:\"small\"},model:{value:t.customerDetail.followbyname,callback:function(e){t.$set(t.customerDetail,\"followbyname\",e)},expression:\"customerDetail.followbyname\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"newFollowName\",label:\"新市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\",size:\"small\"},model:{value:t.newFollowName,callback:function(e){t.newFollowName=e},expression:\"newFollowName\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"Input\",{attrs:{placeholder:\"输入市场人员名称搜索\"},on:{\"on-enter\":t.get_data},model:{value:t.realname,callback:function(e){t.realname=e},expression:\"realname\"}},[a(\"Button\",{attrs:{slot:\"append\",name:\"marketingManagement_index_change_search\",icon:\"ios-search\"},on:{click:t.get_data},slot:\"append\"},[t._v(\"搜索\")])],1)],1),t._v(\" \"),a(\"Col\",{staticStyle:{\"line-height\":\"32px\"},attrs:{span:\"14\"}},[a(\"span\",[t._v(\"温馨提示：双击下方列表选择需要变更的市场人员\")])])],1),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:t.header,loading:t.loading,data:t.data},on:{\"on-row-dblclick\":t.row_select_market}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{name:\"marketingManagement_index_change_change\",type:\"primary\",loading:t.submit_loading},on:{click:t.change_submit}},[t._v(\"变更\")])],1)],1)],1)},[],!1,null,null,null);Dt.options.__file=\"change.vue\";var Ot=Dt.exports,Rt={data:function(){return{loading:!1,open_customer_change_log:!1,id:\"\",page:1,pageSize:10,customerName:\"\",pageTotal:new Number,data:[],columns:[{title:\"变更前跟进人\",key:\"old_followby_realname\",minWidth:150},{title:\"变更后跟进人\",key:\"new_followby_realname\",minWidth:150},{title:\"变更时间\",key:\"shift_time\",minWidth:200}]}},methods:{getData:function(){var t=this,e={params:{page:t.page,pageSize:t.pageSize,customerId:t.id}};this.$Get(\"api/customer/shift/log/list\",e,function(e){t.data=e.data.data.rows,t.pageTotal=e.data.data.total})},pageChange:function(t){this.page=t,this.getData()}},created:function(){var t=this;this.$bus.off(\"OPEN_CHANGE_LOG\",!0),this.$bus.on(\"OPEN_CHANGE_LOG\",function(e){t.open_customer_change_log=!0,t.id=e.ID,t.customerName=e.NAME,t.getData()})}},Ft=Object(l.a)(Rt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"客户变更日志\",width:\"600\"},model:{value:t.open_customer_change_log,callback:function(e){t.open_customer_change_log=e},expression:\"open_customer_change_log\"}},[a(\"Row\",{attrs:{gutter:10}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"h3\",[t._v(\"客户名称：\")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"16\"}},[a(\"h2\",[t._v(t._s(t.customerName))])])],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:10}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.columns,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);Ft.options.__file=\"changeLog.vue\";var Nt=Ft.exports,At={name:\"cluesLibrary_index\",data:function(){var t=this;return{openClueModal:!1,tableColumnsN:[{title:\"客户名称\",key:\"customer_name\",minWidth:130},{title:\"客户电话\",key:\"customer_tel\",minWidth:130},{title:\"线索详情\",key:\"clue_memo\",minWidth:300,render:function(t,e){return t(\"div\",{domProps:{innerHTML:e.row.clue_memo}})}},{title:\"线索创建时间\",key:\"createdate\",minWidth:160},{title:\"操作\",align:\"center\",key:\"action\",fixed:\"right\",minWidth:90,render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"warning\",size:\"small\",permission:\"['cluesLibraryM.y.cheek']\"},style:{marginRight:\"2px\"},on:{click:function(){t.lingq(a)}}},\"领取\")])}}],tableColumnsY:[{title:\"客户名称\",key:\"customer_name\",minWidth:130},{title:\"客户电话\",key:\"customer_tel\",minWidth:130},{title:\"线索详情\",key:\"clue_memo\",minWidth:300,render:function(t,e){return t(\"div\",{domProps:{innerHTML:e.row.clue_memo}})}},{title:\"线索创建时间\",key:\"createdate\",minWidth:160},{title:\"领取人\",key:\"rrealname\",minWidth:100}],tableDataN:[],pageTotalN:0,tableDataY:[],pageTotalY:0,pageN:1,pageY:1,cluetype:[],clue_level:[],clue_level_map:new Map,cluetype_map:new Map,customerId:\"\"}},methods:{get_data_center:function(){this.$GetDataCenter(\"cluetype,clue_level\",function(t){var e=t.data.data;_self.cluetype=e.cluetype,_self.clue_level=e.clue_level,_self.clue_level_map=_self.$array2map(_self.clue_level),_self.cluetype_map=_self.$array2map(_self.cluetype)})},getTableDataN:function(){var t=this,e={params:{receipt:\"N\",sortField:\"clue_level\",order:\"asc\",page:t.pageN,pageSize:10,customerId:t.customerId}};this.$Get(\"api/clue/list\",e,function(e){t.pageTotalN=e.data.data.total,t.tableDataN=e.data.data.rows;for(var a=0;a<t.tableDataN.length;a++)t.tableDataN[a].clue_level=t.clue_level_map.get(t.tableDataN[a].clue_level)})},getTableDataY:function(){var t=this,e={params:{receipt:\"Y\",sortField:\"clue_level\",order:\"asc\",page:t.pageY,pageSize:10,customerId:t.customerId}};this.$Get(\"api/clue/list\",e,function(e){t.pageTotalY=e.data.data.total,t.tableDataY=e.data.data.rows;for(var a=0;a<t.tableDataY.length;a++)t.tableDataY[a].clue_level=t.clue_level_map.get(t.tableDataY[a].clue_level)})},pageChangeN:function(t){this.pageN=t,this.getTableDataN()},pageChangeY:function(t){this.pageY=t,this.getTableDataY()},lingq:function(t){var e=this,a={id:t.row.id};this.$Post(\"api/clue/receiptClue\",a,function(t){e.getTableDataN(),e.getTableDataY()},function(t){})}},created:function(){var t=this;t.$bus.off(\"OPEN_CUSTOMER_CLUE_LOG\",!0),t.$bus.on(\"OPEN_CUSTOMER_CLUE_LOG\",function(e){t.customerId=e.ID,t.getTableDataN(),t.getTableDataY(),t.openClueModal=!0})}},Mt=(a(269),Object(l.a)(At,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Modal\",{attrs:{width:\"1000\",title:\"线索\"},model:{value:t.openClueModal,callback:function(e){t.openClueModal=e},expression:\"openClueModal\"}},[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未领取\",name:\"name1\"}},[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}}),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.tableColumnsN,data:t.tableDataN}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotalN,\"show-total\":\"\",\"show-elevator\":\"\",current:t.pageN},on:{\"update:current\":function(e){t.pageN=e},\"on-change\":t.pageChangeN}})],1)],1)],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"已领取\",name:\"name2\"}},[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}}),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.tableColumnsY,data:t.tableDataY}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotalY,current:t.pageY,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.pageY=e},\"on-change\":t.pageChangeY}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)},[],!1,null,null,null));Mt.options.__file=\"clue.vue\";var zt=Mt.exports,Pt={data:function(){return{allTypes:[],search_model:\"\",formValidate:{depart:\"N\",fieldtype:\"\",clocktime:[]},loading:!1,open_customer_field_log:!1,id:\"\",page:1,pageSize:10,customerName:\"\",pageTotal:new Number,data:[],columns:[{title:\"服务企业\",key:\"CompanyName\",width:250},{title:\"打卡人\",key:\"realname\",width:120},{title:\"打卡类型\",key:\"typename\",width:150},{title:\"打卡时间\",key:\"clocktime\",width:200},{title:\"离开时间\",key:\"endtime\",width:200},{title:\"打卡时长\",key:\"fieldlength\",width:120},{title:\"外勤结果\",key:\"resulttype\",width:120}]}},methods:{getData:function(){var t=this,e={params:{page:t.page,pageSize:t.pageSize,customerId:t.id,isNeed:t.formValidate.depart,fieldtype:t.formValidate.fieldtype,bclocktime:Object(r.a)(t.formValidate.clocktime[0]),eclocktime:Object(r.a)(t.formValidate.clocktime[1]),sortField:\"clocktime\",order:\"desc\",sumField:\"fieldlength\"}};this.$Get(\"api/legwork/showLegworkInfoByCusId\",e,function(e){t.data=e.data.data.rows,t.pageTotal=e.data.data.total,t.data.push({endtime:\"外勤时间总计：\",fieldlength:e.data.data.sum.fieldlength})})},pageChange:function(t){this.page=t,this.getData()},Search:function(){this.page=1,this.getData()},handleReset:function(t){this.$refs[t].resetFields(),this.Search()},get_all_field_type:function(){var t=this;this.$GetDataCenter(\"fieldClockType\",function(e){t.allTypes=e.data.data.fieldClockType})}},created:function(){var t=this;this.get_all_field_type(),this.$bus.off(\"OPEN_CUSTOMER_FIELD_LOG\",!0),this.$bus.on(\"OPEN_CUSTOMER_FIELD_LOG\",function(e){t.open_customer_field_log=!0,t.id=e.ID,t.customerName=e.NAME,t.getData()})}},Lt=Object(l.a)(Pt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"客户外勤日志\",width:\"80%\"},model:{value:t.open_customer_field_log,callback:function(e){t.open_customer_field_log=e},expression:\"open_customer_field_log\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{gutter:10}},[a(\"Form\",{ref:\"formValidate\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:t.formValidate,\"label-width\":120}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"外勤部门：\",prop:\"name\"}},[a(\"RadioGroup\",{on:{\"on-change\":t.Search},model:{value:t.formValidate.depart,callback:function(e){t.$set(t.formValidate,\"depart\",e)},expression:\"formValidate.depart\"}},[a(\"Radio\",{attrs:{label:\"N\"}},[t._v(\"全部\")]),t._v(\" \"),a(\"Radio\",{attrs:{label:\"Y\"}},[t._v(\"会计部\")])],1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"外勤类型：\",prop:\"fieldtype\"}},[a(\"Select\",{attrs:{size:\"small\"},on:{\"on-change\":t.Search},model:{value:t.formValidate.fieldtype,callback:function(e){t.$set(t.formValidate,\"fieldtype\",e)},expression:\"formValidate.fieldtype\"}},[a(\"Option\",{attrs:{value:\"\"}},[t._v(\"全部\")]),t._v(\" \"),t._l(t.allTypes,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])})],2)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"外勤时间：\",prop:\"clocktime\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",transfer:\"\",placement:\"bottom-end\",size:\"small\"},on:{\"on-change\":t.Search},model:{value:t.formValidate.clocktime,callback:function(e){t.$set(t.formValidate,\"clocktime\",e)},expression:\"formValidate.clocktime\"}})],1)],1)],1),t._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.Search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(e){t.handleReset(\"formValidate\")}}},[t._v(\"\\n                                            重置\\n                                        \")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:10}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"h3\",[t._v(\"客户名称：\")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"16\"}},[a(\"h2\",[t._v(t._s(t.customerName))])])],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:10}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.columns,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);Lt.options.__file=\"field.vue\";var jt=Lt.exports,Ut={data:function(){return{isOpenCustomerLog:!1,loading:!1,page:1,pageSize:10,columns:[{title:\"公司名称\",key:\"companyname\",minWidth:150},{title:\"类型\",key:\"typename\",minWidth:120},{title:\"动态\",key:\"content\",minWidth:250,render:function(t,e){return\"\"==e.row.content||null==e.row.content?\"\":e.row.content.length>15?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.content.slice(0,15)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\",style:{width:\"200px\",whiteSpace:\"normal\"}},[t(\"span\",e.row.content)])]):t(\"span\",e.row.content)}},{title:\"变更时间\",key:\"createdate\",minWidth:150},{title:\"操作人\",key:\"realname\",minWidth:150}],data:[],pageTotal:0,customerId:\"\",customerName:\"\",customerDynamicType:[]}},methods:{pageChange:function(t){this.page=t,this.get_data()},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,customer_id:t.customerId}};this.$Get(\"api/customer/dynamic/record/list\",e,function(e){t.loading=!1,t.data=e.data.data.rows,t.pageTotal=e.data.data.total;for(var a=0;a<t.data.length;a++)t.data[a].type&&(t.data[a].typename=t.find_customer_dynamic_type(t.data[a].type))})},find_customer_dynamic_type:function(t){for(var e=t.split(\"-\"),a=0;a<this.customerDynamicType.length;a++)if(this.customerDynamicType[a].typecode==e[0]&&e.length>1)for(var o=0;o<this.customerDynamicType[a].children.length;o++)if(this.customerDynamicType[a].children[o].typecode==e[1])return this.customerDynamicType[a].typename+\" - \"+this.customerDynamicType[a].children[o].typename},get_data_center:function(){var t=this;return new Promise(function(e,a){var o=t;t.$GetDataCenter(\"customer_dynamic_type\",function(t){o.customerDynamicType=t.data.data.customer_dynamic_type,e()})})}},created:function(){var t=this;this.$bus.off(\"OPEN_CUSTOMER_LOG\",!0),this.$bus.on(\"OPEN_CUSTOMER_LOG\",function(e){t.customerId=e.ID,t.customerName=e.NAME,t.isOpenCustomerLog=!0,t.get_data_center().then(function(){t.get_data()})})}},qt=Object(l.a)(Ut,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Modal\",{attrs:{title:\"客户日志\",width:\"90%\"},model:{value:t.isOpenCustomerLog,callback:function(e){t.isOpenCustomerLog=e},expression:\"isOpenCustomerLog\"}},[a(\"Row\",[a(\"center\",[a(\"h2\",[t._v(\"客户名称：\"+t._s(t.customerName))])])],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.columns,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)},[],!1,null,null,null);qt.options.__file=\"dymaic.vue\";var Wt=qt.exports,Bt=a(109),Gt=a.n(Bt),Yt={data:function(){return{qrcode2Open:!1,loading:!1}},methods:{get_code:function(t){var e=this;e.qrcode2Open=!0,document.getElementById(\"qrcode\").innerHTML=\"\";var a={params:{customerId:t,redirectUrl:\"/servicecenter\"}};this.$Get(\"api/customer/bind/image/create\",a,function(t){new Gt.a(\"qrcode\",{text:t.data.data,width:200,height:200,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:Gt.a.CorrectLevel.H}),e.qrcode2Open=!0,e.loading=!1})}},mounted:function(){var t=this;t.$bus.off(\"OPEN_CODE\"),t.$bus.on(\"OPEN_CODE\",function(e){e.TEL?(t.loading=!0,t.get_code(e.ID)):t.$Message.warning(\"该客户未录入手机号，无法生成二维码！\")})}},Qt=Object(l.a)(Yt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看二维码\"},model:{value:t.qrcode2Open,callback:function(e){t.qrcode2Open=e},expression:\"qrcode2Open\"}},[t.loading?a(\"Spin\",{attrs:{fix:\"\"}}):t._e(),t._v(\" \"),a(\"center\",[a(\"div\",{attrs:{id:\"qrcode\"}})]),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);Qt.options.__file=\"code.vue\";var Ht=Qt.exports,Jt={data:function(){return{openDeleteCustomer:!1,loading:!1,NAME:\"\",ID:\"\"}},methods:{deleteCustomer:function(){var t=this;t.$ButtonCollect(\"marketingManagement_index_delete_delete\"),t.loading=!0;var e=\"/api/customer/deleteCustomerById/\"+t.ID;this.$Get(e,{},function(e){t.openDeleteCustomer=!1,t.$bus.emit(\"UPDATE_CUSTOMER\",!0),t.$Message.success(\"删除成功!\")},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.off(\"DELETE_CUSTOMER\",!0),this.$bus.on(\"DELETE_CUSTOMER\",function(e){t.NAME=e.NAME,t.ID=e.ID,t.openDeleteCustomer=!0})}},Kt=Object(l.a)(Jt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"360\"},model:{value:t.openDeleteCustomer,callback:function(e){t.openDeleteCustomer=e},expression:\"openDeleteCustomer\"}},[a(\"p\",{staticStyle:{color:\"#f60\",\"text-align\":\"center\"},attrs:{slot:\"header\"},slot:\"header\"},[a(\"Icon\",{attrs:{type:\"information-circled\"}}),t._v(\" \"),a(\"span\",[t._v(\"删除客户 - \"+t._s(t.NAME))])],1),t._v(\" \"),a(\"div\",{staticStyle:{\"text-align\":\"center\"}},[a(\"p\",[t._v(\"客户信息删除无法恢复\")]),t._v(\" \"),a(\"p\",[t._v(\"确定删除吗？\")])]),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"error\",name:\"marketingManagement_index_delete_delete\",size:\"large\",long:\"\",loading:t.loading},on:{click:t.deleteCustomer}},[t._v(\"删除\")])],1)])],1)},[],!1,null,null,null);Kt.options.__file=\"del.vue\";var Zt={name:\"marketingManagement_index\",mixins:[o],components:{createCustomer:d,tagSelect:s,changeMarker:Ot,changeLog:Nt,clueLog:zt,field:jt,dymaic:Wt,Qcode:Ht,delCustomer:Kt.exports,editCustomer:$t},data:function(){return{openEdit:!1,search_model:\"\",header:[{title:\"姓名\",key:\"NAME\",sortable:\"custom\",minWidth:120},{title:\"归属公司\",key:\"companynames\",minWidth:210,render:function(t,e){if(\"\"==e.row.companynames||null==e.row.companynames)return\"\";var a=e.row.companynames.split(\",\");return a[0].length>13?t(\"Poptip\",{props:{trigger:\"hover\",title:\"归属公司\",placement:\"bottom\"}},[t(\"span\",a[0].slice(0,13)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"ul\",a.map(function(e){return[t(\"li\",{style:{padding:\"4px\"}},\"公司名：\"+e)]}))])]):t(\"Poptip\",{props:{trigger:\"hover\",title:\"归属公司\",placement:\"bottom\"}},[t(\"span\",a[0]),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"ul\",a.map(function(e){return[t(\"li\",{style:{padding:\"4px\"}},\"公司名：\"+e)]}))])])}},{title:\"剩余时间(天)\",key:\"residue_time\",minWidth:130,sortable:\"custom\"},{title:\"电话\",key:\"TEL\",minWidth:120},{title:\"客户状态\",key:\"customerType\",minWidth:140,sortable:\"custom\"},{title:\"客户来源\",key:\"customersource\",minWidth:120,sortable:\"custom\"},{title:\"客户等级\",key:\"importlevel\",minWidth:120,sortable:\"custom\"},{title:\"客户重要性\",key:\"importance\",minWidth:120},{title:\"区域\",key:\"AREA\",minWidth:80,sortable:\"custom\"},{title:\"渠道名称\",key:\"channelTypeName\",minWidth:140,sortable:\"custom\"},{title:\"跟进人\",key:\"followbyname\",minWidth:120,sortable:\"custom\"},{title:\"创建时间\",key:\"CREATEDATE\",minWidth:120,sortable:\"custom\"},{title:\"线索权重\",key:\"clue_ranks\",minWidth:120,sortable:\"custom\"},{title:\"更新时间\",key:\"updatedate\",minWidth:120,sortable:\"custom\"},{title:\"微信绑定\",key:\"isbound\",minWidth:90}],data:[],page:1,pageSize:10,total:0,tableLoading:!0,formValidate:{name:\"\",tel:\"\",companyname:\"\",followbyname:\"\",customerType:[],area:\"\",customersource:\"\",channelTypeName:\"\",isbound:\"\",credate:[],upddate:[],labelName:\"\",importlevel:\"\",begin_residue_time:\"\",end_residue_time:\"\",importance:\"\",order:\"desc\",sortField:\"updatedate\"},createCustomerStatus:!1}},methods:{download_excel:function(){this.$ButtonCollect(\"marketingManagement_index_edit_excel\");var t={page:\"1\",pageSize:\"1000000\",name:this.formValidate.name,tel:this.formValidate.tel,customerType:this.formValidate.customerType.join(\"-\"),channelTypeName:this.formValidate.channelTypeName,followbyname:this.formValidate.followbyname,isbound:this.formValidate.isbound,customersource:this.formValidate.customersource,area:this.formValidate.area,companyname:this.formValidate.companyname,labelName:this.formValidate.labelName,importlevel:this.formValidate.importlevel,importance:this.formValidate.importance,bcreatedate:Object(r.a)(this.formValidate.credate[0]),ecreatedate:Object(r.a)(this.formValidate.credate[1]),bupdatedate:Object(r.a)(this.formValidate.upddate[0]),eupdatedate:Object(r.a)(this.formValidate.upddate[1]),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"NAME\",title:\"姓名\"},{field:\"companynames\",title:\"公司\"},{field:\"customerType\",title:\"客户状态\",format:\"customerTypes\"},{field:\"customersource\",title:\"客户来源\",format:\"cluesources\"},{field:\"importlevel\",title:\"客户等级\",format:\"importlevel\"},{field:\"AREA\",title:\"地区\",format:\"area\"},{field:\"channelTypeName\",title:\"渠道名称\"},{field:\"followbyname\",title:\"跟进人\"},{field:\"CREATEDATE\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"},{field:\"isbound\",title:\"微信绑定\",format:\"sf_yn\"},{field:\"lastfollowdate\",title:\"市场最后跟进时间\"},{field:\"importance\",title:\"客户重要性\",format:\"importance\"}]))},e=this.$MergeURL(\"api/customer/list\",t);window.open(e)},sort:function(t){\"normal\"==t.order?(this.order=\"\",this.sortName=\"updatedate\"):(this.sortName=t.key,this.order=t.order),this.get_data()},search:function(){this.page=1,this.get_data()},handleReset:function(){this.page=1,this.$refs.formValidate.resetFields(),this.formValidate.credate=[],this.formValidate.upddate=[],this.formValidate.end_residue_time=\"\",this.formValidate.customerType=[],this.get_data()},get_data:function(){var t=this;this.selectRow=\"\",t.tableLoading=!0;var e={params:{order:t.order,page:t.page,pageSize:t.pageSize,sortField:t.sortName,name:t.formValidate.name,tel:t.formValidate.tel,customerType:t.formValidate.customerType.join(\"-\"),channelTypeName:t.formValidate.channelTypeName,followbyname:t.formValidate.followbyname,isbound:t.formValidate.isbound,customersource:t.formValidate.customersource,area:t.formValidate.area,labelName:t.formValidate.labelName,importlevel:t.formValidate.importlevel,companyName:t.formValidate.companyname,importance:t.formValidate.importance,bcreatedate:Object(r.a)(t.formValidate.credate[0]),ecreatedate:Object(r.a)(t.formValidate.credate[1]),bupdatedate:Object(r.a)(t.formValidate.upddate[0]),eupdatedate:Object(r.a)(t.formValidate.upddate[1]),begin_residue_time:t.formValidate.begin_residue_time,end_residue_time:t.formValidate.end_residue_time}};this.$Get(\"api/customer/list\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total;for(var a=0;a<t.data.length;a++)if(t.data[a].customerType=t.findCustomerType(t.data[a].customerType),t.data[a].importlevel&&(t.data[a].importlevel=t.customerrating_map.get(t.data[a].importlevel.toString())),t.data[a].AREA=t.area_map.get(t.data[a].AREA),t.data[a].customersourceCode=t.data[a].customersource,t.data[a].customersource=t.cluesources_map.get(t.data[a].customersource),t.data[a].importance=t.importance_map.get(t.data[a].importance),t.data[a].isbound=t.sf_yn_map.get(t.data[a].isbound),t.data[a].CREATEDATE&&(t.data[a].CREATEDATE=t.data[a].CREATEDATE.slice(0,10)),t.data[a].updatedate&&(t.data[a].updatedate=t.data[a].updatedate.slice(0,10)),null==t.data[a].residue_time);else if(t.data[a].residue_time<1){var o=24-(new Date).getHours();t.data[a].residue_time=o+\"小时\"}else t.data[a].residue_time=t.data[a].residue_time;t.tableLoading=!1})},page_change:function(t){this.page=t,this.get_data()},page_size_change:function(t){this.pageSize=t,this.page=1,this.get_data()},select_row:function(t){this.selectRow=t},row_class_name:function(t,e){return(t.residue_time<=7||\"string\"==typeof t.residue_time)&&null!=t.residue_time?\"demo-table-followdate-warning-row\":\"\"},open_edit:function(){this.selectRow?this.openEdit=!0:this.$Message.warning(\"请选择一行!\")},findCustomerType:function(t){if(\"\"==t||null==t)return\"\";for(var e=t.split(\"-\"),a=0;a<this.customerTypes_array.length;a++)if(this.customerTypes_array[a].id==e[1]&&\"\"!=e[1])return this.customerTypes_array[a].ptypename+\" - \"+this.customerTypes_array[a].typename},create_customer:function(){var t=this;0==this.createCustomerStatus?(this.createCustomerStatus=!0,setTimeout(function(){t.$bus.emit(\"CREATE_CUSTOMER\",!0)},200)):this.$bus.emit(\"CREATE_CUSTOMER\",!0)},close_edit:function(){this.openEdit=!1}},created:function(){var t=this,e=this,a=localStorage.getItem(\"Main_Role\");e.sortName=\"salers\"==a?\"lastfollowdate\":\"updatedate\",this.get_data_center().then(function(){e.get_data()}).catch(function(){e.get_data(),e.$Message.error(\"属性转换失败！\")}),this.$bus.off(\"UPDATE_CUSTOMER\",!0),this.$bus.on(\"UPDATE_CUSTOMER\",function(t){e.get_data()}),this.$bus.off(\"CREATE_AFTER_EDIT\",!0),this.$bus.on(\"CREATE_AFTER_EDIT\",function(e){e.ID=e.id,e.customersourceCode=e.customersource,t.selectRow=e,setTimeout(function(){t.openEdit=!0},300)})}},Xt=(a(271),Object(l.a)(Zt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidate\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:t.formValidate,\"label-width\":120}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"电话：\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.tel,callback:function(e){t.$set(t.formValidate,\"tel\",e)},expression:\"formValidate.tel\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司：\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.companyname,callback:function(e){t.$set(t.formValidate,\"companyname\",e)},expression:\"formValidate.companyname\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:12}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"跟进人：\",prop:\"followbyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.followbyname,callback:function(e){t.$set(t.formValidate,\"followbyname\",e)},expression:\"formValidate.followbyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户状态：\",prop:\"customerType\"}},[a(\"Cascader\",{staticStyle:{\"margin-top\":\"5px\",width:\"100%\"},attrs:{trigger:\"hover\",data:t.customerTypes_Casr,size:\"small\"},model:{value:t.formValidate.customerType,callback:function(e){t.$set(t.formValidate,\"customerType\",e)},expression:\"formValidate.customerType\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"区域：\",prop:\"area\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.formValidate.area,callback:function(e){t.$set(t.formValidate,\"area\",e)},expression:\"formValidate.area\"}},t._l(t.area,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(\"\\n                                                \"+t._s(e.typename)+\"\\n                                            \")])}),1)],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:12}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户来源：\",prop:\"customersource\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.formValidate.customersource,callback:function(e){t.$set(t.formValidate,\"customersource\",e)},expression:\"formValidate.customersource\"}},t._l(t.cluesources,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(\"\\n                                                \"+t._s(e.typename)+\"\\n                                            \")])}),1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"渠道名称：\",prop:\"channelTypeName\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.channelTypeName,callback:function(e){t.$set(t.formValidate,\"channelTypeName\",e)},expression:\"formValidate.channelTypeName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"微信绑定：\",prop:\"isbound\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.formValidate.isbound,callback:function(e){t.$set(t.formValidate,\"isbound\",e)},expression:\"formValidate.isbound\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[t._v(\"是\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[t._v(\"否\")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:12}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建时间：\",prop:\"credate\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",transfer:\"\",placement:\"bottom-end\",size:\"small\"},model:{value:t.formValidate.credate,callback:function(e){t.$set(t.formValidate,\"credate\",e)},expression:\"formValidate.credate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"更新时间：\",prop:\"upddate\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",transfer:\"\",placement:\"bottom-start\",size:\"small\"},model:{value:t.formValidate.upddate,callback:function(e){t.$set(t.formValidate,\"upddate\",e)},expression:\"formValidate.upddate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"标签：\",prop:\"labelName\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.labelName,callback:function(e){t.$set(t.formValidate,\"labelName\",e)},expression:\"formValidate.labelName\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:12}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户等级：\",prop:\"importlevel\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.formValidate.importlevel,callback:function(e){t.$set(t.formValidate,\"importlevel\",e)},expression:\"formValidate.importlevel\"}},[a(\"Option\",{attrs:{value:\"\"}}),t._v(\" \"),t._l(t.customerrating,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(\"\\n                                                \"+t._s(e.typename)+\"\\n                                            \")])})],2)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"剩余跟进时间：\",prop:\"begin_residue_time\"}},[a(\"Input\",{staticStyle:{width:\"30%\"},attrs:{size:\"small\",placeholder:\"起始\"},model:{value:t.formValidate.begin_residue_time,callback:function(e){t.$set(t.formValidate,\"begin_residue_time\",e)},expression:\"formValidate.begin_residue_time\"}}),t._v(\" - \\n                                        \"),a(\"Input\",{staticStyle:{width:\"30%\"},attrs:{size:\"small\",placeholder:\"结束\"},model:{value:t.formValidate.end_residue_time,callback:function(e){t.$set(t.formValidate,\"end_residue_time\",e)},expression:\"formValidate.end_residue_time\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户重要性：\",prop:\"importance\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.formValidate.importance,callback:function(e){t.$set(t.formValidate,\"importance\",e)},expression:\"formValidate.importance\"}},[a(\"Option\",{attrs:{value:\"\"}}),t._v(\" \"),t._l(t.importance,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(\"\\n                                                \"+t._s(e.typename)+\"\\n                                            \")])})],2)],1)],1)],1),t._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_search\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\",name:\"marketingManagement_index_edit_reset\"},on:{click:t.handleReset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"marketingM.add\"],expression:\"['marketingM.add']\"}],attrs:{type:\"primary\",name:\"marketingManagement_index_edit_add\",icon:\"plus\"},on:{click:t.create_customer}},[t._v(\"录入\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"marketingM.edit\"],expression:\"['marketingM.edit']\"}],attrs:{type:\"primary\",name:\"marketingManagement_index_edit_edit\",icon:\"edit\"},on:{click:t.open_edit}},[t._v(\"编辑\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"marketingM.change\"],expression:\"['marketingM.change']\"}],attrs:{type:\"primary\",name:\"marketingManagement_index_edit_change\",icon:\"ios-crop\"},on:{click:function(e){t.check_select(\"CUSTOMER_CHANGE_MARKETER\")}}},[t._v(\"变更\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"marketingM.delete\"],expression:\"['marketingM.delete']\"}],attrs:{type:\"primary\",name:\"marketingManagement_index_edit_delete\",icon:\"trash-b\"},on:{click:function(e){t.check_select(\"DELETE_CUSTOMER\")}}},[t._v(\"删除\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_qrcode\",icon:\"grid\"},on:{click:function(e){t.check_select(\"OPEN_CODE\")}}},[t._v(\"查看二维码\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_excel\",icon:\"ios-download\"},on:{click:t.download_excel}},[t._v(\"导出Excel\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_info_log\",icon:\"drag\"},on:{click:function(e){t.check_select(\"OPEN_CHANGE_LOG\")}}},[t._v(\"销售变更日志\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_log\",icon:\"ios-color-filter-outline\"},on:{click:function(e){t.check_select(\"OPEN_CUSTOMER_LOG\")}}},[t._v(\"客户动态\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_field_log\",icon:\"navigate\"},on:{click:function(e){t.check_select(\"OPEN_CUSTOMER_FIELD_LOG\")}}},[t._v(\"客户外勤\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_field_log\",icon:\"android-share-alt\"},on:{click:function(e){t.check_select(\"OPEN_CUSTOMER_CLUE_LOG\")}}},[t._v(\"客户线索\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,\"row-class-name\":t.row_class_name,loading:t.tableLoading},on:{\"on-current-change\":t.select_row,\"on-row-dblclick\":t.open_edit,\"on-sort-change\":t.sort}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change}})],1)],1),t._v(\" \"),a(\"tag-select\"),t._v(\" \"),t.createCustomerStatus?a(\"create-customer\",{attrs:{cluesources:t.cluesources,customerrating:t.customerrating,area:t.area,sf_yn:t.sf_yn,importance:t.importance,customerTypes_Casr:t.customerTypes_Casr}}):t._e(),t._v(\" \"),a(\"change-marker\"),t._v(\" \"),a(\"change-log\"),t._v(\" \"),a(\"clue-log\"),t._v(\" \"),a(\"field\"),t._v(\" \"),a(\"dymaic\"),t._v(\" \"),a(\"Qcode\"),t._v(\" \"),a(\"del-customer\"),t._v(\" \"),t.openEdit?a(\"edit-customer\",{attrs:{customer:t.selectRow,cluesources:t.cluesources,customerrating:t.customerrating,area:t.area,sf_yn:t.sf_yn,importance:t.importance,customerTypes_Casr:t.customerTypes_Casr},on:{\"close-edit\":t.close_edit}}):t._e()],1)},[],!1,null,null,null));Xt.options.__file=\"customerManagment.vue\";var te=Xt.exports;e.default=te},78:function(t,e,a){t.exports=a(81)},79:function(t,e,a){\"use strict\";a.d(e,\"b\",function(){return s}),a.d(e,\"a\",function(){return m}),a.d(e,\"c\",function(){return c});var o=a(6),r=a.n(o),n=a(7),l=a.n(n);function i(t){200==t.status?l.a.Message.error(t.data.msg):l.a.Message.error(\"服务器异常！\"+t.message)}function s(t,e,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,n=\"api/\"+t;return new Promise(function(t,a){r.a.get(n,e).then(function(e){200==e.status&&4e4==e.data.msgCode?t(e.data.data):o(e)}).catch(function(t){a(o(t))})})}function c(t,e,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,n=\"api/\"+t;return new Promise(function(t,a){r.a.post(n,e).then(function(e){200==e.status&&4e4==e.data.msgCode?(l.a.Message.success(e.data.msg||\"执行成功！\"),t({status:!0,data:e.data})):(l.a.Message.error(e.data.msg),t({status:!1,data:e.data}))}).catch(function(t){a(o(t))})})}function m(t){var e={params:{groupCodes:t}};return new Promise(function(t,a){r.a.get(\"api/system/tsType/queryTsTypeByGroupCodes\",e).then(function(e){200==e.status&&4e4==e.data.msgCode?t(e.data.data):fail(e)}).catch(function(t){a(i(t))})})}},81:function(t,e,a){var o=function(){return this||\"object\"==typeof self&&self}()||Function(\"return this\")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf(\"regeneratorRuntime\")>=0,n=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,t.exports=a(82),r)o.regeneratorRuntime=n;else try{delete o.regeneratorRuntime}catch(t){o.regeneratorRuntime=void 0}},82:function(t,e){!function(e){\"use strict\";var a,o=Object.prototype,r=o.hasOwnProperty,n=\"function\"==typeof Symbol?Symbol:{},l=n.iterator||\"@@iterator\",i=n.asyncIterator||\"@@asyncIterator\",s=n.toStringTag||\"@@toStringTag\",c=\"object\"==typeof t,m=e.regeneratorRuntime;if(m)c&&(t.exports=m);else{(m=e.regeneratorRuntime=c?t.exports:{}).wrap=b;var d=\"suspendedStart\",p=\"suspendedYield\",u=\"executing\",f=\"completed\",_={},h={};h[l]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(D([])));v&&v!==o&&r.call(v,l)&&(h=v);var y=V.prototype=k.prototype=Object.create(h);x.prototype=y.constructor=V,V.constructor=x,V[s]=x.displayName=\"GeneratorFunction\",m.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===x||\"GeneratorFunction\"===(e.displayName||e.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,V):(t.__proto__=V,s in t||(t[s]=\"GeneratorFunction\")),t.prototype=Object.create(y),t},m.awrap=function(t){return{__await:t}},C(I.prototype),I.prototype[i]=function(){return this},m.AsyncIterator=I,m.async=function(t,e,a,o){var r=new I(b(t,e,a,o));return m.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},C(y),y[s]=\"Generator\",y[l]=function(){return this},y.toString=function(){return\"[object Generator]\"},m.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var o=e.pop();if(o in t)return a.value=o,a.done=!1,a}return a.done=!0,a}},m.values=D,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=a,this.tryEntries.forEach($),!t)for(var e in this)\"t\"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,r){return i.type=\"throw\",i.arg=t,e.next=o,r&&(e.method=\"next\",e.arg=a),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n],i=l.completion;if(\"root\"===l.tryLoc)return o(\"end\");if(l.tryLoc<=this.prev){var s=r.call(l,\"catchLoc\"),c=r.call(l,\"finallyLoc\");if(s&&c){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else{if(!c)throw new Error(\"try statement without catch or finally\");if(this.prev<l.finallyLoc)return o(l.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,\"finallyLoc\")&&this.prev<o.finallyLoc){var n=o;break}}n&&(\"break\"===t||\"continue\"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=e,n?(this.method=\"next\",this.next=n.finallyLoc,_):this.complete(l)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),$(a),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var o=a.completion;if(\"throw\"===o.type){var r=o.arg;$(a)}return r}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,e,o){return this.delegate={iterator:D(t),resultName:e,nextLoc:o},\"next\"===this.method&&(this.arg=a),_}}}function b(t,e,a,o){var r=e&&e.prototype instanceof k?e:k,n=Object.create(r.prototype),l=new E(o||[]);return n._invoke=function(t,e,a){var o=d;return function(r,n){if(o===u)throw new Error(\"Generator is already running\");if(o===f){if(\"throw\"===r)throw n;return O()}for(a.method=r,a.arg=n;;){var l=a.delegate;if(l){var i=T(l,a);if(i){if(i===_)continue;return i}}if(\"next\"===a.method)a.sent=a._sent=a.arg;else if(\"throw\"===a.method){if(o===d)throw o=f,a.arg;a.dispatchException(a.arg)}else\"return\"===a.method&&a.abrupt(\"return\",a.arg);o=u;var s=w(t,e,a);if(\"normal\"===s.type){if(o=a.done?f:p,s.arg===_)continue;return{value:s.arg,done:a.done}}\"throw\"===s.type&&(o=f,a.method=\"throw\",a.arg=s.arg)}}}(t,a,l),n}function w(t,e,a){try{return{type:\"normal\",arg:t.call(e,a)}}catch(t){return{type:\"throw\",arg:t}}}function k(){}function x(){}function V(){}function C(t){[\"next\",\"throw\",\"return\"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function I(t){var e;this._invoke=function(a,o){function n(){return new Promise(function(e,n){!function e(a,o,n,l){var i=w(t[a],t,o);if(\"throw\"!==i.type){var s=i.arg,c=s.value;return c&&\"object\"==typeof c&&r.call(c,\"__await\")?Promise.resolve(c.__await).then(function(t){e(\"next\",t,n,l)},function(t){e(\"throw\",t,n,l)}):Promise.resolve(c).then(function(t){s.value=t,n(s)},function(t){return e(\"throw\",t,n,l)})}l(i.arg)}(a,o,e,n)})}return e=e?e.then(n,n):n()}}function T(t,e){var o=t.iterator[e.method];if(o===a){if(e.delegate=null,\"throw\"===e.method){if(t.iterator.return&&(e.method=\"return\",e.arg=a,T(t,e),\"throw\"===e.method))return _;e.method=\"throw\",e.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return _}var r=w(o,t.iterator,e.arg);if(\"throw\"===r.type)return e.method=\"throw\",e.arg=r.arg,e.delegate=null,_;var n=r.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,\"return\"!==e.method&&(e.method=\"next\",e.arg=a),e.delegate=null,_):n:(e.method=\"throw\",e.arg=new TypeError(\"iterator result is not an object\"),e.delegate=null,_)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(S,this),this.reset(!0)}function D(t){if(t){var e=t[l];if(e)return e.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=a,e.done=!0,e};return n.next=n}}return{next:O}}function O(){return{value:a,done:!0}}}(function(){return this||\"object\"==typeof self&&self}()||Function(\"return this\")())},87:function(t,e,a){\"use strict\";function o(t,e){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){var t,a,o,r=this.result;t=r,a=function(t){e.push(t)},(o=new Image).src=t,o.onload=function(){var t=document.createElement(\"canvas\"),e=t.getContext(\"2d\");t.width=800,t.height=600,e.drawImage(this,0,0,800,600);var o=t.toDataURL(\"image/jpeg\",.7);a(function(t){for(var e=t.split(\",\"),a=e[0].match(/:(.*?);/)[1],o=atob(e[1]),r=o.length,n=new Uint8Array(r);r--;)n[r]=o.charCodeAt(r);return new Blob([n],{type:a})}(o))}}}a.d(e,\"a\",function(){return o})}}]);"}