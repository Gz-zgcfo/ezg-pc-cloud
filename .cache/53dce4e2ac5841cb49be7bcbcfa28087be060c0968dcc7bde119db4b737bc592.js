{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{161:function(e,t,a){},162:function(e,t,a){},336:function(e,t,a){\"use strict\";var o=a(161);a.n(o).a},338:function(e,t,a){\"use strict\";var o=a(162);a.n(o).a},410:function(e,t,a){\"use strict\";a.r(t);var o=a(25),n={data:function(){var e=this;return{unusualType:[],unusualType_map:new Map,selectRow:\"\",tableLoading:!1,total:0,data:[],page:1,pageSize:10,header:[{title:\"订单号码\",key:\"unusual_code\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"产品内容\",key:\"product_content\",minWidth:180,render:function(e,t){return\"\"==t.row.product_content||null==t.row.product_content?\"\":t.row.product_content.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product_content.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product_content)])]):e(\"span\",t.row.product_content)}},{title:\"异常类型\",key:\"unusual_type\",minWidth:120},{title:\"审批是由\",key:\"apply_memo\",minWidth:180,render:function(e,t){return\"\"==t.row.apply_memo||null==t.row.apply_memo?\"\":t.row.apply_memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.apply_memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.apply_memo)])]):e(\"span\",t.row.apply_memo)}},{title:\"流程状态\",key:\"current_process_name\",minWidth:120,sorttable:\"custom\"},{title:\"创建人\",key:\"realname\",minWidth:100},{title:\"创建时间\",key:\"create_date\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:100,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"warning\",size:\"small\"},style:{marginRight:\"2px\"},on:{click:function(){e.open_approve_log(a)}}},\"查看详情\")])}}]}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(a,o){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),a()})})},get_table_data:function(){var e=this;e.tableLoading=!0;var t={params:{isAudit:\"N\",page:e.page,pageSize:e.pageSize}};this.$Get(\"api/order/unusual/workorder/auditList\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var a=0;a<e.data.length;a++)e.data[a].create_date=Object(o.a)(e.data[a].create_date),e.data[a].unusual_type=e.unusualType_map.get(e.data[a].unusual_type);e.tableLoading=!1})},download_excel:function(){var e={isAudit:\"N\",page:\"1\",pageSize:\"1000000\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"unusual_code\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"tel\",title:\"客户电话\"},{field:\"product_content\",title:\"产品内容\"},{field:\"unusual_type\",title:\"异常类型\",format:\"unusualType\"},{field:\"tel\",title:\"客户电话\"},{field:\"apply_memo\",title:\"审批是由\"},{field:\"current_process_name\",title:\"流程状态\"},{field:\"realname\",title:\"创建人\"},{field:\"create_date\",title:\"创建时间\"}]))},t=this.$MergeURL(\"api/order/unusual/workorder/auditList\",e);window.open(t)},refresh:function(){this.get_table_data(),this.selectRow=\"\"},page_change:function(e){this.page=e,this.data=[],this.get_table_data()},page_size_change:function(e){this.pageSize=e,this.data=[],this.get_table_data()},select_row:function(e){this.selectRow=e},to_do_work_flow:function(e){e?this.$bus.emit(\"AB_ORDER_APPROVE_DEAL\",e):this.$Message.warning(\"请选择一行！\")},open_approve_log:function(e){this.$bus.emit(\"OPEN_AB_ORDER_DETAIL\",e.row)}},created:function(){var e=this;e.get_data_center().then(e.get_table_data()),this.$bus.on(\"UPDATE_AB_ORDER_DATA\",function(t){e.get_table_data()})}},r=a(2),l=Object(r.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-crop\"},on:{click:function(t){e.to_do_work_flow(e.selectRow)}}},[e._v(\"办理审批\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.download_excel}},[e._v(\"导出Excel\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.refresh}},[e._v(\"刷新\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",border:\"\",columns:e.header,data:e.data,size:\"small\",loading:e.tableLoading},on:{\"on-row-click\":e.select_row,\"on-row-dblclick\":e.to_do_work_flow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",current:e.page,transfer:\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.page_change,\"on-page-size-change\":e.page_size_change}})],1)],1)],1)},[],!1,null,null,null);l.options.__file=\"unApproveAbList.vue\";var i=l.exports,s={data:function(){var e=this;return{unusualType:[],unusualType_map:new Map,selectRow:\"\",tableLoading:!1,total:0,data:[],page:1,pageSize:10,header:[{title:\"订单号码\",key:\"unusual_code\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"产品内容\",key:\"product_content\",minWidth:180,render:function(e,t){return\"\"==t.row.product_content||null==t.row.product_content?\"\":t.row.product_content.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product_content.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product_content)])]):e(\"span\",t.row.product_content)}},{title:\"异常类型\",key:\"unusual_type\",minWidth:120},{title:\"审批是由\",key:\"apply_memo\",minWidth:180,render:function(e,t){return\"\"==t.row.apply_memo||null==t.row.apply_memo?\"\":t.row.apply_memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.apply_memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.apply_memo)])]):e(\"span\",t.row.apply_memo)}},{title:\"流程状态\",key:\"current_process_name\",minWidth:120,sorttable:\"custom\"},{title:\"创建人\",key:\"realname\",minWidth:100},{title:\"创建时间\",key:\"create_date\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:150,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"primary\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.order_detail(a)}}},\"详情\"),t(\"Button\",{props:{type:\"warning\",size:\"small\"},on:{click:function(){e.open_approve_log(a)}}},\"审批记录\")])}}],recordData:[]}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(a,o){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),a()})})},get_table_data:function(){var e=this;e.tableLoading=!0;var t={params:{isAudit:\"Y\",page:e.page,pageSize:e.pageSize}};this.$Get(\"api/order/unusual/workorder/auditList\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var a=0;a<e.data.length;a++)e.data[a].create_date=Object(o.a)(e.data[a].create_date),e.data[a].unusual_type=e.unusualType_map.get(e.data[a].unusual_type);e.tableLoading=!1})},download_excel:function(){var e={isAudit:\"Y\",page:\"1\",pageSize:\"1000000\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"unusual_code\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"tel\",title:\"客户电话\"},{field:\"product_content\",title:\"产品内容\"},{field:\"unusual_type\",title:\"异常类型\",format:\"unusualType\"},{field:\"tel\",title:\"客户电话\"},{field:\"apply_memo\",title:\"审批是由\"},{field:\"current_process_name\",title:\"流程状态\"},{field:\"realname\",title:\"创建人\"},{field:\"create_date\",title:\"创建时间\"}]))},t=this.$MergeURL(\"api/order/unusual/workorder/auditList\",e);window.open(t)},refresh:function(){this.get_table_data(),this.selectRow=\"\"},page_change:function(e){this.page=e,this.data=[],this.get_table_data()},page_size_change:function(e){this.pageSize=e,this.data=[],this.get_table_data()},select_row:function(e){this.selectRow=e},open_approve_log:function(e){this.$bus.emit(\"ORDER_AB_APPROVELIST_LOG\",e)},order_detail:function(e){this.$bus.emit(\"OPEN_AB_ORDER_DETAIL\",e.row)}},created:function(){var e=this;e.get_data_center().then(e.get_table_data()),e.$bus.on(\"UPDATE_AB_ORDER_DATA\",function(t){e.get_table_data()})}},p=Object(r.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.download_excel}},[e._v(\"导出Excel\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.refresh}},[e._v(\"刷新\")])],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",border:\"\",columns:e.header,data:e.data,size:\"small\",loading:e.tableLoading},on:{\"on-row-click\":e.select_row,\"on-row-dblclick\":e.to_do_work_flow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",current:e.page,transfer:\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.page_change,\"on-page-size-change\":e.page_size_change}})],1)],1)],1)},[],!1,null,null,null);p.options.__file=\"approveAbList.vue\";var c=p.exports,d={data:function(){return{openAbApproveDeal:!1,formValidateDetail:{},banlishenpi:{agree:\"1\",desc:\"\"},submitLoading:!1}},methods:{get_data:function(e){this.formValidateDetail=e},submit:function(){var e=this,t={applyId:e.formValidateDetail.applyId,auditStatus:e.banlishenpi.agree,memo:e.banlishenpi.desc};this.$Post(\"api/order/unusual/workorder/audit\",t,function(t){e.banlishenpi.agree=\"1\",e.banlishenpi.desc=\"\",e.submitLoading=!1,e.openAbApproveDeal=!1,e.$bus.emit(\"UPDATE_AB_ORDER_DATA\",!0)},function(){})}},created:function(){var e=this;this.$bus.on(\"AB_ORDER_APPROVE_DEAL\",function(t){e.get_data(t),e.openAbApproveDeal=!0})}},m=Object(r.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"办理审批\",width:\"100%\"},model:{value:e.openAbApproveDeal,callback:function(t){e.openAbApproveDeal=t},expression:\"openAbApproveDeal\"}},[a(\"Form\",{ref:\"formValidateDetail\",attrs:{model:e.formValidateDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"企业名称\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.companyname,callback:function(t){e.$set(e.formValidateDetail,\"companyname\",t)},expression:\"formValidateDetail.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系人\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.name,callback:function(t){e.$set(e.formValidateDetail,\"name\",t)},expression:\"formValidateDetail.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.tel,callback:function(t){e.$set(e.formValidateDetail,\"tel\",t)},expression:\"formValidateDetail.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"异常类别\",prop:\"unusual_type\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.unusual_type,callback:function(t){e.$set(e.formValidateDetail,\"unusual_type\",t)},expression:\"formValidateDetail.unusual_type\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"FormItem\",{attrs:{label:\"产品内容\",prop:\"product_content\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",rows:2,readonly:\"\"},model:{value:e.formValidateDetail.product_content,callback:function(t){e.$set(e.formValidateDetail,\"product_content\",t)},expression:\"formValidateDetail.product_content\"}})],1)],1),e._v(\" \"),a(\"Row\",[a(\"FormItem\",{attrs:{label:\"审批是由\",prop:\"apply_memo\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.formValidateDetail.apply_memo,callback:function(t){e.$set(e.formValidateDetail,\"apply_memo\",t)},expression:\"formValidateDetail.apply_memo\"}})],1)],1)],1),e._v(\" \"),a(\"Tabs\",[a(\"TabPane\",{attrs:{label:\"任务处理\",icon:\"clipboard\"}},[a(\"Form\",{ref:\"banlishenpi\",staticStyle:{\"margin-top\":\"5px\"},attrs:{model:e.banlishenpi,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"审批备注\",prop:\"desc\"}},[a(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.banlishenpi.desc,callback:function(t){e.$set(e.banlishenpi,\"desc\",t)},expression:\"banlishenpi.desc\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"是否同意审批\",prop:\"agree\"}},[a(\"RadioGroup\",{model:{value:e.banlishenpi.agree,callback:function(t){e.$set(e.banlishenpi,\"agree\",t)},expression:\"banlishenpi.agree\"}},[a(\"Radio\",{attrs:{label:\"1\"}},[e._v(\"同意\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"0\"}},[e._v(\"驳回\")])],1)],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submit}},[e._v(\"提交\")])],1)],1)],1)},[],!1,null,null,null);m.options.__file=\"dealAbApprove.vue\";var u=m.exports,_={data:function(){return{openAbOrderDetail:!1,formValidateDetail:{}}},methods:{get_data:function(e){this.formValidateDetail=e}},created:function(){var e=this;this.$bus.on(\"OPEN_AB_ORDER_DETAIL\",function(t){e.get_data(t),e.openAbOrderDetail=!0})}},v=(a(336),Object(r.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"100%\"},model:{value:e.openAbOrderDetail,callback:function(t){e.openAbOrderDetail=t},expression:\"openAbOrderDetail\"}},[a(\"Form\",{ref:\"formValidateDetail\",attrs:{model:e.formValidateDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"企业名称\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.companyname,callback:function(t){e.$set(e.formValidateDetail,\"companyname\",t)},expression:\"formValidateDetail.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系人\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.name,callback:function(t){e.$set(e.formValidateDetail,\"name\",t)},expression:\"formValidateDetail.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.tel,callback:function(t){e.$set(e.formValidateDetail,\"tel\",t)},expression:\"formValidateDetail.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"异常类别\",prop:\"unusual_type\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.formValidateDetail.unusual_type,callback:function(t){e.$set(e.formValidateDetail,\"unusual_type\",t)},expression:\"formValidateDetail.unusual_type\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"FormItem\",{attrs:{label:\"产品内容\",prop:\"product_content\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",rows:2,readonly:\"\"},model:{value:e.formValidateDetail.product_content,callback:function(t){e.$set(e.formValidateDetail,\"product_content\",t)},expression:\"formValidateDetail.product_content\"}})],1)],1),e._v(\" \"),a(\"Row\",[a(\"FormItem\",{attrs:{label:\"审批是由\",prop:\"apply_memo\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.formValidateDetail.apply_memo,callback:function(t){e.$set(e.formValidateDetail,\"apply_memo\",t)},expression:\"formValidateDetail.apply_memo\"}})],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));v.options.__file=\"abOrderDetail.vue\";var b=v.exports,h={data:function(){return{loading:!1,opencheckMemo:!1,header:[{title:\"审批备注\",key:\"record\",minWidth:200},{title:\"审批时间\",key:\"createDate\",minWidth:150},{title:\"创建人\",key:\"auditName\",minWidth:120}],data:[]}},methods:{get_data:function(e){for(var t,a=e.row._info.split(\"_&_\"),o=0;o<a.length;o++)\"1\"!=(t=a[o].split(\"``\"))[1]&&\"Agree\"!=t[1]||(t[1]=\"同意\"),\"0\"!=t[1]&&\"Reject\"!=t[1]||(t[1]=\"不同意\"),this.data.push({auditName:t[0],record:t[1],createDate:t[2],recordDesc:t[3]})},cancel:function(){this.data=[]}},created:function(){var e=this;this.$bus.off(\"ORDER_AB_APPROVELIST_LOG\",!0),this.$bus.on(\"ORDER_AB_APPROVELIST_LOG\",function(t){e.get_data(t),e.opencheckMemo=!0})}},f=(a(338),Object(r.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{ref:\"log\",attrs:{id:\"top\",title:\"查看审批备注\",width:\"70%\"},on:{\"on-cancel\":e.cancel},model:{value:e.opencheckMemo,callback:function(t){e.opencheckMemo=t},expression:\"opencheckMemo\"}},[a(\"Table\",{attrs:{border:\"\",loading:e.loading,columns:e.header,data:e.data,size:\"small\"}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));f.options.__file=\"aduitLog.vue\";var y={name:\"abOrderApprove_index\",components:{unApproveAbList:i,ApproveAbList:c,abOrderDetail:b,aduitLog:f.exports,dealAbApprove:u},data:function(){return{}}},g=Object(r.a)(y,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(\"div\",{staticStyle:{\"min-width\":\"900px\"}},[t(\"Tabs\",{attrs:{value:\"name1\"}},[t(\"TabPane\",{attrs:{label:\"异常工单审批\",name:\"name1\"}},[t(\"un-approve-ab-list\")],1),this._v(\" \"),t(\"TabPane\",{attrs:{label:\"查看已审批\",name:\"name2\"}},[t(\"approve-ab-list\")],1)],1)],1),this._v(\" \"),t(\"ab-order-detail\"),this._v(\" \"),t(\"aduit-log\"),this._v(\" \"),t(\"deal-ab-approve\")],1)},[],!1,null,null,null);g.options.__file=\"index.vue\";t.default=g.exports},416:function(e,t,a){\"use strict\";a.r(t);var o={name:\"selectName\",data:function(){return{openSelectCompany:!1,searchCompany:\"\",header:[{title:\"企业名称\",key:\"companyname\",minWidth:300},{title:\"联系人\",key:\"customerName\",minWidth:150},{title:\"联系电话\",key:\"customerTel\",minWidth:150}],data:[],total:0,page:1,pageSize:10,loading:!1}},methods:{get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:10,companyname:e.searchCompany}};this.$Get(\"api/customer/company/list\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total,e.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},row_select:function(e){this.$emit(\"company-change\",e),this.openSelectCompany=!1}},created:function(){var e=this;this.$bus.off(\"AB_ORDER_OPEN_SELECT_COMPANY\",!0),this.$bus.on(\"AB_ORDER_OPEN_SELECT_COMPANY\",function(t){e.get_data(),e.openSelectCompany=!0})}},n=a(2),r=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:e.openSelectCompany,callback:function(t){e.openSelectCompany=t},expression:\"openSelectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-enter\":e.get_data},model:{value:e.searchCompany,callback:function(t){e.searchCompany=t},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.get_data},slot:\"append\"})],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",loading:e.loading,size:\"small\",columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.row_select}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,current:e.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);r.options.__file=\"companySelect.vue\";var l={name:\"abnormalWorkOrder_index\",components:{companySelect:r.exports},data:function(){return{openAddAbOrderDetail:!1,abnormalOrderDetail:{companyId:\"\",companyName:\"\",linkname:\"\",linkTel:\"\",type:\"\",productContent:\"\",reason:\"\"},ruleInline:{companyName:[{required:!0,message:\"请选择！\",trigger:\"change\"}],linkname:[{required:!0,message:\"请选择！\",trigger:\"change\"}],linkTel:[{required:!0,message:\"请选择！\",trigger:\"change\"}],type:[{required:!0,message:\"请选择！\",trigger:\"change\"}],productContent:[{required:!0,message:\"不能为空！\",trigger:\"change\"}],reason:[{required:!0,message:\"不能为空！\",trigger:\"change\"}]}}},methods:{open_company:function(){this.$bus.emit(\"AB_ORDER_OPEN_SELECT_COMPANY\",!0)},setting_company:function(e){this.abnormalOrderDetail.companyId=e.id,this.abnormalOrderDetail.companyName=e.companyname,this.abnormalOrderDetail.linkname=e.customerName,this.abnormalOrderDetail.linkTel=e.customerTel},create:function(e){var t=this;this.$refs[e].validate(function(e){e?(t.add_ab_order(),t.close()):t.$Message.error(\"请先补全相关信息!\")})},add_ab_order:function(){var e=this,t={companyId:e.abnormalOrderDetail.companyId,unusualType:e.abnormalOrderDetail.type,productContent:e.abnormalOrderDetail.productContent,applyMemo:e.abnormalOrderDetail.reason};this.$Post(\"api/order/unusual/workorder/addWorkOrder\",t,function(t){e.$Message.success(\"提交成功!\"),e.$bus.emit(\"OPEN_AB_ORDER_LIST\",!0),e.openAddAbOrderDetail=!1},function(){})},close:function(e){this.$emit(\"close\",e)}},created:function(){}},i=Object(n.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增异常工单\",value:!0,width:\"100\"},on:{\"on-cancel\":e.close}},[a(\"Form\",{ref:\"abnormalOrderDetail\",attrs:{model:e.abnormalOrderDetail,rules:e.ruleInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"企业名称\",prop:\"companyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_company},model:{value:e.abnormalOrderDetail.companyName,callback:function(t){e.$set(e.abnormalOrderDetail,\"companyName\",t)},expression:\"abnormalOrderDetail.companyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系人\",prop:\"linkname\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_company},model:{value:e.abnormalOrderDetail.linkname,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkname\",t)},expression:\"abnormalOrderDetail.linkname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系电话\",prop:\"linkTel\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_company},model:{value:e.abnormalOrderDetail.linkTel,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkTel\",t)},expression:\"abnormalOrderDetail.linkTel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"异常类别\",prop:\"type\"}},[a(\"RadioGroup\",{model:{value:e.abnormalOrderDetail.type,callback:function(t){e.$set(e.abnormalOrderDetail,\"type\",t)},expression:\"abnormalOrderDetail.type\"}},[a(\"Radio\",{attrs:{label:\"LowPrice\"}},[e._v(\"优惠价格\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Discount\"}},[e._v(\"产品折扣\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Gift\"}},[e._v(\"赠送\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Cancel\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Other\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"产品内容\",prop:\"productContent\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:2,size:\"small\"},model:{value:e.abnormalOrderDetail.productContent,callback:function(t){e.$set(e.abnormalOrderDetail,\"productContent\",t)},expression:\"abnormalOrderDetail.productContent\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"审批事由\",prop:\"reason\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,size:\"small\"},model:{value:e.abnormalOrderDetail.reason,callback:function(t){e.$set(e.abnormalOrderDetail,\"reason\",t)},expression:\"abnormalOrderDetail.reason\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(t){e.create(\"abnormalOrderDetail\")}}},[e._v(\"创建\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.close}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),a(\"company-select\",{on:{\"company-change\":e.setting_company}})],1)},[],!1,null,null,null);i.options.__file=\"addAbOrder.vue\";var s=i.exports,p={data:function(){return{openShowAbOrderDetail:!1,abnormalOrderDetail:{applyId:\"\",companyId:\"\",companyName:\"\",linkname:\"\",linkTel:\"\",type:\"\",productContent:\"\",reason:\"\"}}},methods:{get_data:function(e){var t=this,a={params:{applyId:e.applyId}};this.$Get(\"api/order/unusual/workorder/searchWordOrderById\",a,function(a){t.abnormalOrderDetail.applyId=e.applyId,t.abnormalOrderDetail.companyId=a.data.data.company_id,t.abnormalOrderDetail.productContent=a.data.data.product_content,t.abnormalOrderDetail.reason=a.data.data.apply_memo,t.abnormalOrderDetail.type=a.data.data.unusual_type,t.abnormalOrderDetail.companyName=e.companyname,t.abnormalOrderDetail.linkname=e.name,t.abnormalOrderDetail.linkTel=e.tel})}},created:function(){var e=this;this.$bus.off(\"OPEN_AB_ORDERLIST_DETAIL\",!0),this.$bus.on(\"OPEN_AB_ORDERLIST_DETAIL\",function(t){e.get_data(t),e.openShowAbOrderDetail=!0})}},c=Object(n.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看异常工单\",width:\"100\",\"mask-closable\":!1},on:{\"on-cancel\":e.cancel},model:{value:e.openShowAbOrderDetail,callback:function(t){e.openShowAbOrderDetail=t},expression:\"openShowAbOrderDetail\"}},[a(\"Form\",{ref:\"abnormalOrderDetail\",attrs:{model:e.abnormalOrderDetail,rules:e.ruleInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"企业名称\",prop:\"companyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.companyName,callback:function(t){e.$set(e.abnormalOrderDetail,\"companyName\",t)},expression:\"abnormalOrderDetail.companyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系人\",prop:\"linkname\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.linkname,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkname\",t)},expression:\"abnormalOrderDetail.linkname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系电话\",prop:\"linkTel\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.linkTel,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkTel\",t)},expression:\"abnormalOrderDetail.linkTel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"异常类别\",prop:\"type\"}},[a(\"RadioGroup\",{model:{value:e.abnormalOrderDetail.type,callback:function(t){e.$set(e.abnormalOrderDetail,\"type\",t)},expression:\"abnormalOrderDetail.type\"}},[a(\"Radio\",{attrs:{label:\"LowPrice\",disabled:\"\"}},[e._v(\"优惠价格\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Discount\",disabled:\"\"}},[e._v(\"产品折扣\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Gift\",disabled:\"\"}},[e._v(\"赠送\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Cancel\",disabled:\"\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Other\",disabled:\"\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"产品内容\",prop:\"productContent\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:2,size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.productContent,callback:function(t){e.$set(e.abnormalOrderDetail,\"productContent\",t)},expression:\"abnormalOrderDetail.productContent\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"审批事由\",prop:\"reason\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.reason,callback:function(t){e.$set(e.abnormalOrderDetail,\"reason\",t)},expression:\"abnormalOrderDetail.reason\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.openShowAbOrderDetail=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"showAbOrder.vue\";var d=c.exports,m={data:function(){return{openEditAbOrder:!1,abnormalOrderDetail:{applyId:\"\",companyId:\"\",companyName:\"\",linkname:\"\",linkTel:\"\",type:\"\",productContent:\"\",reason:\"\"}}},methods:{get_data:function(e){var t=this,a={params:{applyId:e.applyId}};this.$Get(\"api/order/unusual/workorder/searchWordOrderById\",a,function(a){t.abnormalOrderDetail.applyId=e.applyId,t.abnormalOrderDetail.companyId=a.data.data.company_id,t.abnormalOrderDetail.productContent=a.data.data.product_content,t.abnormalOrderDetail.reason=a.data.data.apply_memo,t.abnormalOrderDetail.type=a.data.data.unusual_type,t.abnormalOrderDetail.companyName=e.companyname,t.abnormalOrderDetail.linkname=e.name,t.abnormalOrderDetail.linkTel=e.tel})},edit:function(){var e=this,t={applyId:e.abnormalOrderDetail.applyId,companyId:e.abnormalOrderDetail.companyId,unusualType:e.abnormalOrderDetail.type,productContent:e.abnormalOrderDetail.productContent,applyMemo:e.abnormalOrderDetail.reason};this.$Post(\"api/order/unusual/workorder/editWorkOrder\",t,function(t){setTimeout(function(){e.$Message.success(\"编辑成功！\"),e.$bus.emit(\"UPDATE_AB_ORDERLIST\",!0),e.openEditAbOrder=!1},500)},function(){})}},created:function(){var e=this;this.$bus.off(\"OPEN_AB_ORDERLIST_EDIT\",!0),this.$bus.on(\"OPEN_AB_ORDERLIST_EDIT\",function(t){e.get_data(t),e.openEditAbOrder=!0})}},u=Object(n.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑异常工单\",width:\"100\",\"mask-closable\":!1},on:{\"on-cancel\":e.cancel},model:{value:e.openEditAbOrder,callback:function(t){e.openEditAbOrder=t},expression:\"openEditAbOrder\"}},[a(\"Form\",{ref:\"abnormalOrderDetail\",attrs:{model:e.abnormalOrderDetail,rules:e.ruleInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"企业名称\",prop:\"companyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.companyName,callback:function(t){e.$set(e.abnormalOrderDetail,\"companyName\",t)},expression:\"abnormalOrderDetail.companyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系人\",prop:\"linkname\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.linkname,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkname\",t)},expression:\"abnormalOrderDetail.linkname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系电话\",prop:\"linkTel\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.abnormalOrderDetail.linkTel,callback:function(t){e.$set(e.abnormalOrderDetail,\"linkTel\",t)},expression:\"abnormalOrderDetail.linkTel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"异常类别\",prop:\"type\"}},[a(\"RadioGroup\",{model:{value:e.abnormalOrderDetail.type,callback:function(t){e.$set(e.abnormalOrderDetail,\"type\",t)},expression:\"abnormalOrderDetail.type\"}},[a(\"Radio\",{attrs:{label:\"LowPrice\"}},[e._v(\"优惠价格\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Discount\"}},[e._v(\"产品折扣\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Gift\"}},[e._v(\"赠送\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Cancel\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"Other\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"产品内容\",prop:\"productContent\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:2,size:\"small\"},model:{value:e.abnormalOrderDetail.productContent,callback:function(t){e.$set(e.abnormalOrderDetail,\"productContent\",t)},expression:\"abnormalOrderDetail.productContent\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",[a(\"FormItem\",{attrs:{label:\"审批事由\",prop:\"reason\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,size:\"small\"},model:{value:e.abnormalOrderDetail.reason,callback:function(t){e.$set(e.abnormalOrderDetail,\"reason\",t)},expression:\"abnormalOrderDetail.reason\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.openEditAbOrder=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);u.options.__file=\"editAbOrder.vue\";var _=u.exports,v=a(25),b={name:\"abnormalOrderList_index\",components:{addAbOrder:s,showAbOrder:d,editAbOrder:_},data:function(){return{unusualType:[],unusualType_map:new Map,selectRow:\"\",data:[],page:1,pageSize:10,loading:!1,total:0,header:[{title:\"订单号码\",key:\"unusual_code\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"产品内容\",key:\"product_content\",minWidth:180,render:function(e,t){return\"\"==t.row.product_content||null==t.row.product_content?\"\":t.row.product_content.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product_content.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product_content)])]):e(\"span\",t.row.product_content)}},{title:\"流程状态\",key:\"current_process_name\",minWidth:120,sorttable:\"custom\"},{title:\"异常类型\",key:\"unusual_type\",minWidth:120},{title:\"审批是由\",key:\"apply_memo\",minWidth:180,render:function(e,t){return\"\"==t.row.apply_memo||null==t.row.apply_memo?\"\":t.row.apply_memo.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.apply_memo.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.apply_memo)])]):e(\"span\",t.row.apply_memo)}},{title:\"创建时间\",key:\"create_date\",minWidth:120},{title:\"创建人\",key:\"realname\",minWidth:100}],openAdd:!1}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(a,o){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),a()})})},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize}};this.$Get(\"api/order/unusual/workorder/list\",t,function(t){e.data=t.data.data.rows;for(var a=0;a<e.data.length;a++)e.data[a].create_date=Object(v.a)(e.data[a].create_date),e.data[a].unusual_type=e.unusualType_map.get(e.data[a].unusual_type);e.total=t.data.data.total,e.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},pageSizeChange:function(e){this.pageSize=e,this.get_data()},select_row:function(e){e.applyId?this.selectRow=e:this.selectRow=\"\"},close:function(e){this.openAdd=!1,e&&this.get_data()},open_edit:function(){this.selectRow?\"Ready\"!=this.selectRow.current_process?this.$Message.warning(\"当前订单状态不允许编辑！\"):this.$bus.emit(\"OPEN_AB_ORDERLIST_EDIT\",this.selectRow):this.$Message.warning(\"请选择一行进行操作！\")},open_abOrder_detail:function(e){this.$bus.emit(\"OPEN_AB_ORDERLIST_DETAIL\",e)},abOrder_show:function(){this.selectRow?this.open_abOrder_detail(this.selectRow):this.$Message.warning(\"请选择一行进行操作！\")},del_abOrder:function(){var e=this;if(e.selectRow){var t={params:{applyId:e.selectRow.applyId}};e.$Get(\"api/order/unusual/workorder/deleteWorkOrder\",t,function(t){setTimeout(function(){e.$Message.success(\"删除成功！\"),e.get_data()},500)})}else this.$Message.warning(\"请选择一行进行操作！\")}},created:function(){var e=this;this.get_data_center().then(this.get_data()),this.$bus.on(\"OPEN_AB_ORDER_LIST\",function(t){e.get_data()}),this.$bus.on(\"UPDATE_AB_ORDERLIST\",function(t){e.get_data()})}},h=Object(n.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",{staticStyle:{\"min-width\":\"800px\"}},[a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.openAdd=!0}}},[e._v(\"新增\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"edit\"},on:{click:e.open_edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:e.abOrder_show}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"trash-b\"},on:{click:e.del_abOrder}},[e._v(\"删除\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{loading:e.loading,\"highlight-row\":\"\",size:\"small\",border:\"\",columns:e.header,data:e.data},on:{\"on-row-click\":e.select_row,\"on-row-dblclick\":e.open_abOrder_detail}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:e.page},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1),e._v(\" \"),e.openAdd?a(\"add-ab-order\",{on:{close:e.close}}):e._e(),e._v(\" \"),a(\"show-ab-order\"),e._v(\" \"),a(\"edit-ab-order\")],1)},[],!1,null,null,null);h.options.__file=\"index.vue\";t.default=h.exports},438:function(e,t,a){\"use strict\";a.r(t);var o={props:[\"invoiceStatus\"],data:function(){return{openUpdateTemplate:!1,loading:!1,invoiceTemplate:{}}},methods:{update_templ:function(){var e=this;e.loading=!0;var t={id:e.invoiceTemplate.id,invoiceStatus:e.invoiceTemplate.invoice_status,taxMemo:e.invoiceTemplate.tax_memo,enterpriseName:e.invoiceTemplate.enterprise_name,invoiceType:e.invoiceTemplate.invoice_type,taxNum:e.invoiceTemplate.tax_num,invoiceContent:e.invoiceTemplate.invoice_content,taxMoney:e.invoiceTemplate.tax_money,registerAddress:e.invoiceTemplate.register_address,register_tel:e.invoiceTemplate.registerTel,bank:e.invoiceTemplate.bank,bankAccount:e.invoiceTemplate.bank_account,receiver:e.invoiceTemplate.receiver,receiverMobile:e.invoiceTemplate.receiver_mobile,receiverAddress:e.invoiceTemplate.receiver_address,email:e.invoiceTemplate.email};this.$Post(\"api/customer/updateCustomerInvoice\",t,function(t){e.loading=!1,e.openUpdateTemplate=!1,e.$bus.emit(\"UPDATE_INVOICE_LIST\",!0)},function(t){e.loading=!1})}},created:function(){var e=this;this.$bus.off(\"OPEN_EDIT_INVOICE_TEMPLATE\",!0),this.$bus.on(\"OPEN_EDIT_INVOICE_TEMPLATE\",function(t){e.invoiceTemplate=t,e.openUpdateTemplate=!0})}},n=a(2),r=Object(n.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{width:\"700\",title:\"查看\"},model:{value:e.openUpdateTemplate,callback:function(t){e.openUpdateTemplate=t},expression:\"openUpdateTemplate\"}},[a(\"Form\",{ref:\"invoiceTemplate\",attrs:{model:e.invoiceTemplate,\"label-width\":120}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户名称\",prop:\"customerName\"}},[a(\"Input\",{attrs:{placeholder:\"\",readonly:\"\"},model:{value:e.invoiceTemplate.customerName,callback:function(t){e.$set(e.invoiceTemplate,\"customerName\",t)},expression:\"invoiceTemplate.customerName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"单位名称\",prop:\"enterprise_name\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.enterprise_name,callback:function(t){e.$set(e.invoiceTemplate,\"enterprise_name\",t)},expression:\"invoiceTemplate.enterprise_name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"发票类型\",prop:\"invoice_type\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.invoice_type,callback:function(t){e.$set(e.invoiceTemplate,\"invoice_type\",t)},expression:\"invoiceTemplate.invoice_type\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"纳税人识别号\",prop:\"tax_num\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.tax_num,callback:function(t){e.$set(e.invoiceTemplate,\"tax_num\",t)},expression:\"invoiceTemplate.tax_num\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"发票内容\",prop:\"invoice_content\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.invoice_content,callback:function(t){e.$set(e.invoiceTemplate,\"invoice_content\",t)},expression:\"invoiceTemplate.invoice_content\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"开票金额\",prop:\"tax_money\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.tax_money,callback:function(t){e.$set(e.invoiceTemplate,\"tax_money\",t)},expression:\"invoiceTemplate.tax_money\"}})],1)],1)],1),e._v(\" \"),\"增值税专用发票\"==e.invoiceTemplate.invoice_type||\"专用发票\"==e.invoiceTemplate.invoice_type?a(\"Row\",[a(\"FormItem\",{attrs:{label:\"注册地址\",prop:\"register_address\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.register_address,callback:function(t){e.$set(e.invoiceTemplate,\"register_address\",t)},expression:\"invoiceTemplate.register_address\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"注册电话\",prop:\"register_tel\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.register_tel,callback:function(t){e.$set(e.invoiceTemplate,\"register_tel\",t)},expression:\"invoiceTemplate.register_tel\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"开户银行\",prop:\"bank\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.bank,callback:function(t){e.$set(e.invoiceTemplate,\"bank\",t)},expression:\"invoiceTemplate.bank\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"银行账户\",prop:\"bank_account\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.bank_account,callback:function(t){e.$set(e.invoiceTemplate,\"bank_account\",t)},expression:\"invoiceTemplate.bank_account\"}})],1)],1):e._e(),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"领取方式\",prop:\"express_type\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.express_type,callback:function(t){e.$set(e.invoiceTemplate,\"express_type\",t)},expression:\"invoiceTemplate.express_type\"}})],1),e._v(\" \"),\"快递\"==e.invoiceTemplate.express_type?a(\"Row\",[a(\"FormItem\",{attrs:{label:\"接收人\",prop:\"receiver\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.receiver,callback:function(t){e.$set(e.invoiceTemplate,\"receiver\",t)},expression:\"invoiceTemplate.receiver\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"联系方式\",prop:\"receiver_mobile\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.receiver_mobile,callback:function(t){e.$set(e.invoiceTemplate,\"receiver_mobile\",t)},expression:\"invoiceTemplate.receiver_mobile\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"收件地址\",prop:\"receiver_address\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.receiver_address,callback:function(t){e.$set(e.invoiceTemplate,\"receiver_address\",t)},expression:\"invoiceTemplate.receiver_address\"}})],1)],1):e._e(),e._v(\" \"),\"邮箱\"==e.invoiceTemplate.express_type?a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"email\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.email,callback:function(t){e.$set(e.invoiceTemplate,\"email\",t)},expression:\"invoiceTemplate.email\"}})],1):e._e(),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"tax_memo\"}},[a(\"Input\",{attrs:{placeholder:\"\",type:\"textarea\",row:\"5\"},model:{value:e.invoiceTemplate.tax_memo,callback:function(t){e.$set(e.invoiceTemplate,\"tax_memo\",t)},expression:\"invoiceTemplate.tax_memo\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"创建时间\",prop:\"create_date\"}},[a(\"Input\",{attrs:{placeholder:\"\",readonly:\"\"},model:{value:e.invoiceTemplate.create_date,callback:function(t){e.$set(e.invoiceTemplate,\"create_date\",t)},expression:\"invoiceTemplate.create_date\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"状态\",prop:\"invoice_status\"}},[a(\"Select\",{attrs:{placeholder:\"\"},model:{value:e.invoiceTemplate.invoice_status,callback:function(t){e.$set(e.invoiceTemplate,\"invoice_status\",t)},expression:\"invoiceTemplate.invoice_status\"}},e._l(e.invoiceStatus,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.update_templ}},[e._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);r.options.__file=\"show.vue\";var l=r.exports;a(25);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={components:{showTemplate:l},name:\"invoicelist_index\",data:function(){var e,t=this;return i(e={invoiceStatus:[],invoiceStatus_Map:new Map,selectRow:[],logoutLoading:!1,logoutReason:\"\",openLogout:!1},\"selectRow\",{}),i(e,\"current_row\",\"\"),i(e,\"search_model\",\"\"),i(e,\"loading\",!1),i(e,\"openDetail\",!1),i(e,\"seacrhFormInline\",{followName:\"\",customerName:\"\"}),i(e,\"page\",1),i(e,\"pageSize\",10),i(e,\"total\",0),i(e,\"data\",[]),i(e,\"header\",[{title:\"状态\",key:\"invoice_status_name\",minWidth:120,render:function(e,a){return e(\"div\",{},t.invoiceStatus_Map.get(a.row.invoice_status))}},{title:\"客户名称\",key:\"customerName\",minWidth:100},{title:\"单位名称\",key:\"enterprise_name\",minWidth:220},{title:\"发票类别\",key:\"invoice_type\",minWidth:120},{title:\"发票内容\",key:\"invoice_content\",minWidth:120},{title:\"领取方式\",key:\"express_type\",minWidth:120},{title:\"跟进销售\",key:\"followby\",minWidth:120},{title:\"创建时间\",key:\"create_date\",minWidth:120,render:function(e,t){var a=t.row.create_date;return a&&(a=a.slice(0,10)),e(\"div\",{},a)}},{title:\"备注\",key:\"tax_memo\",minWidth:150},{title:\"操作\",width:100,align:\"center\",render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){t.update_template(a.row)}}},\"查看\")])}}]),e},methods:{save_current_row:function(e){this.current_row=e},update_template:function(e){this.$bus.emit(\"OPEN_EDIT_INVOICE_TEMPLATE\",e)},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,sortField:\"id\",followName:e.seacrhFormInline.followName,customerName:e.seacrhFormInline.customerName}};this.$Get(\"api/customer/customerInvoiceList\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1}),this.current_row=\"\"},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.page=1,this.get_data()},reset:function(){this.$refs.seacrhFormInline.resetFields(),this.get_data()},get_data_center:function(){var e=this;this.$GetDataCenter(\"invoiceStatus\",function(t){e.invoiceStatus=t.data.data.invoiceStatus,e.invoiceStatus_Map=e.$array2map(e.invoiceStatus),e.get_data()})}},created:function(){this.get_data_center();var e=this;this.$bus.on(\"UPDATE_INVOICE_LIST\",function(t){e.get_data()})}},p=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                  筛选\\n                  \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customerName\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.customerName,callback:function(t){e.$set(e.seacrhFormInline,\"customerName\",t)},expression:\"seacrhFormInline.customerName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"followName\",label:\"跟进人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.followName,callback:function(t){e.$set(e.seacrhFormInline,\"followName\",t)},expression:\"seacrhFormInline.followName\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\"),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data},on:{\"on-current-change\":e.save_current_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1)],1),e._v(\" \"),a(\"show-template\",{attrs:{invoiceStatus:e.invoiceStatus}})],1)},[],!1,null,null,null);p.options.__file=\"index.vue\";t.default=p.exports}}]);"}