{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{855:function(e,a,t){\"use strict\";t.r(a);var l={data:function(){var t=this;return{loading_table:!1,searchLabel:\"\",isSearch:!1,modal2:!1,title:\"录入\",isEidt:!1,modal1:!1,loading:!1,edit_loading:!1,issendValue:[],searchformInline:{labelName:\"\"},formValidate:{labelname:\"\",labelcode:\"\",channelFlag:\"\",labelMemo:\"\"},formValidate2:{id:\"\",labelName:\"\",labelCode:\"\",channelFlag:\"\",labelMemo:\"\"},ruleValidate:{labelname:[{required:!0,message:\"请填写标签名\",trigger:\"blur\"}],labelcode:[{required:!0,message:\"请填写标签编码\",trigger:\"blur\"}],channelFlag:[{required:!0,message:\"请选择是否为渠道商标签\",trigger:\"change\"}]},columns:[{type:\"index\",minWidth:60,align:\"center\"},{title:\"标签名称\",key:\"labelName\",minWidth:120},{title:\"编码\",key:\"labelCode\",minWidth:120},{title:\"是否为渠道商标签\",key:\"channelFlag\",minWidth:150},{title:\"说明\",key:\"labelMemo\",minWidth:200},{title:\"操作\",key:\"action\",width:150,align:\"center\",render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"primary\",size:\"small\",permission:\"['customerTabM.edit']\"},style:{marginRight:\"5px\"},on:{click:function(){t.edit(a.row)}}},\"编辑\"),e(\"Button\",{props:{type:\"error\",size:\"small\",permission:\"['customerTabM.delete']\"},on:{click:function(){t.remove(a.row)}}},\"删除\")])}}],data:[],pageTotal:new Number,pageSize:10,customerid:\"\",page:1}},methods:{searchLabelData:function(){\"\"==this.searchLabel?this.isSearch=!1:this.isSearch=!0,this.getTableData()},reset:function(){var e=this;e.isSearch=!1,e.searchformInline.labelName=\"\",e.page=1,e.getTableData()},getTableData:function(){var o=this;if(this.loading_table=!0,o.data=[],o.isSearch=!0)var e=\"/api/system/label/list?page=\"+o.page+\"&pageSize=\"+o.pageSize+\"&labelName=\"+o.searchLabel;else e=\"/api/system/label/list?page=\"+o.page+\"&pageSize=\"+o.pageSize;this.$http.get(e).then(function(e){o.$backToLogin(e),o.pageTotal=e.data.data.total;for(var a=e.data.data.rows,t=0;t<a.length;t++){var l={};l.labelName=a[t].labelName,l.labelCode=a[t].labelCode,l.labelMemo=a[t].labelMemo,l.id=a[t].id,0==a[t].channelFlag?l.channelFlag=\"否\":l.channelFlag=\"是\",o.data.push(l)}o.loading_table=!1})},selectRow:function(e){this.customerid=e.customerId},pageChange:function(e){this.page=e,this.getTableData()},pageSizeChange:function(e){this.pageSize=e,this.data=[],this.getTableData()},addTag:function(e){var a=this,t=this;t.loading=!0,setTimeout(function(){a.$refs[e].validate(function(e){if(e){t.loading=!0;a.$http({method:\"post\",url:\"api/system/label/saveLabel\",data:t.formValidate,headers:{\"Content-Type\":\"application/json\"}}).then(function(e){4e4==e.data.msgCode&&(t.$Message.success(\"录入成功!\"),t.getTableData(),t.modal1=!1,t.formValidate.id=\"\",t.formValidate.labelname=\"\",t.formValidate.labelCode=\"\",t.formValidate.channelFlag=\"\",t.formValidate.labelMemo=\"\",t.loading=!1)}).catch(function(e){t.$Message.error(\"录入失败！\"),t.loading=!1})}else t.loading=!1})},2e3)},edit:function(e){var a=this;a.modal2=!0,\"否\"==e.channelFlag?a.formValidate2.channelFlag=\"0\":a.formValidate2.channelFlag=\"1\",a.formValidate2.labelName=e.labelName,a.formValidate2.labelCode=e.labelCode,a.formValidate2.labelMemo=e.labelMemo,a.formValidate2.id=e.id},editTag:function(){var a=this;a.edit_loading=!0;var e={labelname:a.formValidate2.labelName,labelcode:a.formValidate2.labelCode,labelmemo:a.formValidate2.labelMemo,id:a.formValidate2.id};this.$http({method:\"post\",url:\"/api/system/label/updateLabel\",data:e,headers:{\"Content-Type\":\"application/json\"}}).then(function(e){\"40000\"==e.data.msgCode?(a.$Message.success(\"修改成功\"),a.modal2=!1,a.page=1,a.getTableData()):(a.$Message.error(\"修改失败\"),a.modal2=!0),a.edit_loading=!1}).catch(function(e){a.$Message.error(\"修改失败\"),a.edit_loading=!1,a.modal2=!0})},remove:function(e){var a=this,t={id:e.id};this.$http.post(\"/api/system/label/delLabelById\",t).then(function(e){\"40000\"==e.data.msgCode?(a.getTableData(),a.$Message.success(\"删除成功\")):a.$Message.error(\"删除失败\")}).catch(function(e){a.$Message.error(\"删除失败\")})},cancel:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getTableData()}},o=t(4),i=Object(o.a)(l,function(){var a=this,e=a.$createElement,t=a._self._c||e;return t(\"div\",[t(\"Card\",[t(\"Row\",[t(\"ButtonGroup\",[t(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"customerTabM.add\"],expression:\"['customerTabM.add']\"}],attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(e){a.modal1=!0}}},[a._v(\"录入\")])],1),a._v(\" \"),t(\"Col\",{staticStyle:{float:\"right\"},attrs:{span:\"6\"}},[t(\"Input\",{attrs:{placeholder:\"输入标签名称搜索\"},on:{\"on-keydown\":function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.searchLabelData(e):null}},model:{value:a.searchLabel,callback:function(e){a.searchLabel=e},expression:\"searchLabel\"}},[t(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:a.searchLabelData},slot:\"append\"})],1)],1)],1),a._v(\" \"),t(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[t(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.columns,data:a.data,loading:a.loading_table},on:{\"on-current-change\":a.selectRow,\"on-row-dblclick\":a.edit}}),a._v(\" \"),t(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,current:a.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1),a._v(\" \"),t(\"Modal\",{attrs:{title:\"录入\"},model:{value:a.modal1,callback:function(e){a.modal1=e},expression:\"modal1\"}},[t(\"Form\",{ref:\"formValidate\",attrs:{model:a.formValidate,rules:a.ruleValidate,\"label-width\":120}},[t(\"FormItem\",{attrs:{label:\"标签名\",prop:\"labelname\"}},[t(\"Input\",{model:{value:a.formValidate.labelname,callback:function(e){a.$set(a.formValidate,\"labelname\",e)},expression:\"formValidate.labelname\"}})],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"编码\",prop:\"labelcode\"}},[t(\"Input\",{model:{value:a.formValidate.labelcode,callback:function(e){a.$set(a.formValidate,\"labelcode\",e)},expression:\"formValidate.labelcode\"}})],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"是否为渠道商标签\",prop:\"channelflag\"}},[t(\"Select\",{attrs:{transfer:\"\"},model:{value:a.formValidate.channelflag,callback:function(e){a.$set(a.formValidate,\"channelflag\",e)},expression:\"formValidate.channelflag\"}},[t(\"Option\",{attrs:{value:\"1\"}},[a._v(\"是\")]),a._v(\" \"),t(\"Option\",{attrs:{value:\"0\"}},[a._v(\"否\")])],1)],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"说明\",prop:\"labelmemo\"}},[t(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:a.formValidate.labelmemo,callback:function(e){a.$set(a.formValidate,\"labelmemo\",e)},expression:\"formValidate.labelmemo\"}})],1)],1),a._v(\" \"),t(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:function(e){a.addTag(\"formValidate\")}}},[a._v(\"新增\")]),a._v(\" \"),t(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(e){a.cancel(\"formValidate\")}}},[a._v(\"重置\")])],1)],1),a._v(\" \"),t(\"Modal\",{attrs:{title:\"编辑\"},model:{value:a.modal2,callback:function(e){a.modal2=e},expression:\"modal2\"}},[t(\"Form\",{ref:\"formValidate2\",attrs:{model:a.formValidate2,rules:a.ruleValidate,\"label-width\":120}},[t(\"FormItem\",{attrs:{label:\"标签名\",prop:\"labelName\"}},[t(\"Input\",{model:{value:a.formValidate2.labelName,callback:function(e){a.$set(a.formValidate2,\"labelName\",e)},expression:\"formValidate2.labelName\"}})],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"编码\",prop:\"labelCode\"}},[t(\"Input\",{model:{value:a.formValidate2.labelCode,callback:function(e){a.$set(a.formValidate2,\"labelCode\",e)},expression:\"formValidate2.labelCode\"}})],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"是否为渠道商标签\",prop:\"channelFlag\"}},[t(\"Select\",{attrs:{transfer:\"\"},model:{value:a.formValidate2.channelFlag,callback:function(e){a.$set(a.formValidate2,\"channelFlag\",e)},expression:\"formValidate2.channelFlag\"}},[t(\"Option\",{attrs:{value:\"1\"}},[a._v(\"是\")]),a._v(\" \"),t(\"Option\",{attrs:{value:\"0\"}},[a._v(\"否\")])],1)],1),a._v(\" \"),t(\"FormItem\",{attrs:{label:\"说明\",prop:\"labelMemo\"}},[t(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:a.formValidate2.labelMemo,callback:function(e){a.$set(a.formValidate2,\"labelMemo\",e)},expression:\"formValidate2.labelMemo\"}})],1)],1),a._v(\" \"),t(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"Button\",{attrs:{type:\"primary\",loading:a.edit_loading},on:{click:a.editTag}},[a._v(\"编辑\")])],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"customerTabManagement_table.vue\";var n={components:{indexTable:i.exports},name:\"customerTabManagement_index\",data:function(){return{}}},r=Object(o.a)(n,function(){var e=this.$createElement,a=this._self._c||e;return a(\"div\",[a(\"index-table\")],1)},[],!1,null,null,null);r.options.__file=\"customerTabManagement.vue\";a.default=r.exports}}]);"}