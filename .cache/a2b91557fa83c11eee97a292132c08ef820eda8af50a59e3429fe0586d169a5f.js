{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{112:function(e,t,a){},223:function(e,t,a){\"use strict\";var i=a(112);a.n(i).a},464:function(e,t,a){\"use strict\";a.r(t);a(87);var i={name:\"ownspace_index\",data:function(){return{userForm:{realName:\"\",mobilephone:\"\",officephone:\"\",aliasName:\"\",email:\"\",userId:localStorage.id},inforValidate:{realName:[{required:!0,message:\"请输入姓名！\",trigger:\"change\",type:\"string\"},{validator:function(e,t,a){t?a():a(new Error(\"请输入真实姓名！\"))}}],mobilephone:[{required:!0,message:\"请输入手机号码！\"},{validator:function(e,t,a){t||\"mobilephone\"!=e.field||a(new Error(\"请输入手机号码！\")),t||a(),/^1[0-9]{10}$/.test(t)?a():a(new Error(\"请输入正确格式的手机号！\"))}}]},img:\"\",save_loading:!1,uploadImg:\"\"}},methods:{cancelEditUserInfor:function(){this.$store.commit(\"removeTag\",\"ownspace_index\"),localStorage.pageOpenedList=JSON.stringify(this.$store.state.app.pageOpenedList);var e=\"\";e=this.$store.state.app.pageOpenedList.length>1?this.$store.state.app.pageOpenedList[1].name:this.$store.state.app.pageOpenedList[0].name,this.$router.push({name:e})},saveEdit:function(){var e=this;this.save_loading=!0;try{this.$refs.userForm.validate(function(t){t?e.save_info():e.save_loading=!1})}catch(e){this.save_loading=!1}},save_info:function(){var e=this,t=new FormData;for(var a in this.userForm)t.append(a,e.userForm[a]);this.img.includes(\"api/assets/upload/files\")||t.append(\"files\",e.uploadImg),this.$Post(\"api/user/modyfiyPerson\",t,function(t){e.get_user_data(),e.save_loading=!1},function(t){e.save_loading=!1})},handleUpload:function(e){var t=this;this.uploadImg=e;var a=new FileReader;a.readAsDataURL(e);var i=e.name;return a.onload=function(e){var a={name:i,src:this.result};t.img=a.src},!1},get_user_data:function(){var e=this;this.$Get(\"api/user/findUserDetail\",{},function(t){var a=t.data.data,i=a.realname,o=a.mobilephone,r=a.officephone,n=a.email,s=a.aliasName,l=a.portrait;e.userForm.realName=i,e.userForm.mobilephone=o,e.userForm.officephone=r,e.userForm.email=n,e.userForm.aliasName=s,e.img=\"/api/assets/\"+l})}},mounted:function(){this.get_user_data()}},o=(a(223),a(2)),r=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"Icon\",{attrs:{type:\"person\"}}),e._v(\"\\n            个人信息\\n        \")],1),e._v(\" \"),a(\"div\",[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\",height:\"200px\",\"border-radius\":\"100px\",\"margin-left\":\"60px\",border:\"1px solid #ccc\"}},[a(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":e.handleUpload,action:\"\"}},[a(\"img\",{staticStyle:{\"border-radius\":\"105px\"},attrs:{src:e.img,width:\"200\",height:\"200\"}}),e._v(\" \"),a(\"div\",{staticStyle:{position:\"relative\",top:\"-40px\",\"font-size\":\"16px\"}},[a(\"center\",[e._v(\"点击更换\")])],1)])],1),e._v(\" \"),a(\"Form\",{ref:\"userForm\",attrs:{model:e.userForm,\"label-width\":100,\"label-position\":\"right\",rules:e.inforValidate}},[a(\"FormItem\",{attrs:{label:\"真实姓名\",prop:\"realName\"}},[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\"}},[a(\"Input\",{model:{value:e.userForm.realName,callback:function(t){e.$set(e.userForm,\"realName\",t)},expression:\"userForm.realName\"}})],1)]),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"用户别名\",prop:\"aliasName\"}},[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\"}},[a(\"Input\",{model:{value:e.userForm.aliasName,callback:function(t){e.$set(e.userForm,\"aliasName\",t)},expression:\"userForm.aliasName\"}})],1)]),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"个人电话\",prop:\"mobilephone\"}},[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\"}},[a(\"Input\",{model:{value:e.userForm.mobilephone,callback:function(t){e.$set(e.userForm,\"mobilephone\",t)},expression:\"userForm.mobilephone\"}})],1)]),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"工作电话\",prop:\"officephone\"}},[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\"}},[a(\"Input\",{model:{value:e.userForm.officephone,callback:function(t){e.$set(e.userForm,\"officephone\",t)},expression:\"userForm.officephone\"}})],1)]),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"email\"}},[a(\"div\",{staticStyle:{display:\"inline-block\",width:\"200px\"}},[a(\"Input\",{model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,\"email\",t)},expression:\"userForm.email\"}})],1)]),e._v(\" \"),a(\"div\",[a(\"Button\",{staticStyle:{width:\"100px\",\"margin-left\":\"60px\"},attrs:{type:\"primary\",loading:e.save_loading},on:{click:e.saveEdit}},[e._v(\"保存\")]),e._v(\" \"),a(\"Button\",{staticStyle:{width:\"100px\"},attrs:{type:\"ghost\"},on:{click:e.cancelEditUserInfor}},[e._v(\"取消\")])],1)],1)],1)])],1)},[],!1,null,null,null);r.options.__file=\"own-space.vue\";t.default=r.exports},87:function(e,t,a){\"use strict\";function i(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var e,a,i,o=this.result;e=o,a=function(e){t.push(e)},(i=new Image).src=e,i.onload=function(){var e=document.createElement(\"canvas\"),t=e.getContext(\"2d\");e.width=800,e.height=600,t.drawImage(this,0,0,800,600);var i=e.toDataURL(\"image/jpeg\",.7);a(function(e){for(var t=e.split(\",\"),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),o=i.length,r=new Uint8Array(o);o--;)r[o]=i.charCodeAt(o);return new Blob([r],{type:a})}(i))}}}a.d(t,\"a\",function(){return i})}}]);"}