{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{436:function(e,a,t){\"use strict\";t.r(a);var l={data:function(){var e=this;return{loading_table:!1,searchLabel:\"\",isSearch:!1,modal2:!1,title:\"录入\",isEidt:!1,modal1:!1,loading:!1,edit_loading:!1,issendValue:[],searchformInline:{labelName:\"\"},formValidate:{labelname:\"\",labelcode:\"\",channelFlag:\"\",labelMemo:\"\"},formValidate2:{id:\"\",labelName:\"\",labelCode:\"\",channelFlag:\"\",labelMemo:\"\"},ruleValidate:{labelname:[{required:!0,message:\"请填写标签名\",trigger:\"blur\"}],labelcode:[{required:!0,message:\"请填写标签编码\",trigger:\"blur\"}],channelFlag:[{required:!0,message:\"请选择是否为渠道商标签\",trigger:\"change\"}]},columns:[{type:\"index\",minWidth:60,align:\"center\"},{title:\"标签名称\",key:\"labelName\",minWidth:120},{title:\"编码\",key:\"labelCode\",minWidth:120},{title:\"是否为渠道商标签\",key:\"channelFlag\",minWidth:150},{title:\"说明\",key:\"labelMemo\",minWidth:200},{title:\"操作\",key:\"action\",width:150,align:\"center\",render:function(a,t){return a(\"div\",[a(\"Button\",{props:{type:\"primary\",size:\"small\",permission:\"['customerTabM.edit']\"},style:{marginRight:\"5px\"},on:{click:function(){e.edit(t.row)}}},\"编辑\"),a(\"Button\",{props:{type:\"error\",size:\"small\",permission:\"['customerTabM.delete']\"},on:{click:function(){e.remove(t.row)}}},\"删除\")])}}],data:[],pageTotal:new Number,pageSize:10,customerid:\"\",page:1}},methods:{searchLabelData:function(){\"\"==this.searchLabel?this.isSearch=!1:this.isSearch=!0,this.getTableData()},reset:function(){this.isSearch=!1,this.searchformInline.labelName=\"\",this.page=1,this.getTableData()},getTableData:function(){var e=this;if(this.loading_table=!0,e.data=[],e.isSearch=!0)var a=\"/api/system/label/list?page=\"+e.page+\"&pageSize=\"+e.pageSize+\"&labelName=\"+e.searchLabel;else a=\"/api/system/label/list?page=\"+e.page+\"&pageSize=\"+e.pageSize;this.$http.get(a).then(function(a){e.$backToLogin(a),e.pageTotal=a.data.data.total;for(var t=a.data.data.rows,l=0;l<t.length;l++){var o={};o.labelName=t[l].labelName,o.labelCode=t[l].labelCode,o.labelMemo=t[l].labelMemo,o.id=t[l].id,0==t[l].channelFlag?o.channelFlag=\"否\":o.channelFlag=\"是\",e.data.push(o)}e.loading_table=!1})},selectRow:function(e){this.customerid=e.customerId},pageChange:function(e){this.page=e,this.getTableData()},pageSizeChange:function(e){this.pageSize=e,this.data=[],this.getTableData()},addTag:function(e){var a=this,t=this;t.loading=!0,setTimeout(function(){a.$refs[e].validate(function(e){if(e){t.loading=!0;a.$http({method:\"post\",url:\"api/system/label/saveLabel\",data:t.formValidate,headers:{\"Content-Type\":\"application/json\"}}).then(function(e){4e4==e.data.msgCode&&(t.$Message.success(\"录入成功!\"),t.getTableData(),t.modal1=!1,t.formValidate.id=\"\",t.formValidate.labelname=\"\",t.formValidate.labelCode=\"\",t.formValidate.channelFlag=\"\",t.formValidate.labelMemo=\"\",t.loading=!1)}).catch(function(e){t.$Message.error(\"录入失败！\"),t.loading=!1})}else t.loading=!1})},2e3)},edit:function(e){this.modal2=!0,\"否\"==e.channelFlag?this.formValidate2.channelFlag=\"0\":this.formValidate2.channelFlag=\"1\",this.formValidate2.labelName=e.labelName,this.formValidate2.labelCode=e.labelCode,this.formValidate2.labelMemo=e.labelMemo,this.formValidate2.id=e.id},editTag:function(){var e=this;e.edit_loading=!0;var a={labelname:e.formValidate2.labelName,labelcode:e.formValidate2.labelCode,labelmemo:e.formValidate2.labelMemo,id:e.formValidate2.id};this.$http({method:\"post\",url:\"/api/system/label/updateLabel\",data:a,headers:{\"Content-Type\":\"application/json\"}}).then(function(a){\"40000\"==a.data.msgCode?(e.$Message.success(\"修改成功\"),e.modal2=!1,e.page=1,e.getTableData()):(e.$Message.error(\"修改失败\"),e.modal2=!0),e.edit_loading=!1}).catch(function(a){e.$Message.error(\"修改失败\"),e.edit_loading=!1,e.modal2=!0})},remove:function(e){var a=this,t={id:e.id};this.$http.post(\"/api/system/label/delLabelById\",t).then(function(e){\"40000\"==e.data.msgCode?(a.getTableData(),a.$Message.success(\"删除成功\")):a.$Message.error(\"删除失败\")}).catch(function(e){a.$Message.error(\"删除失败\")})},cancel:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getTableData()}},o=t(2),i=Object(o.a)(l,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"div\",[t(\"Card\",[t(\"Row\",[t(\"ButtonGroup\",[t(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"customerTabM.add\"],expression:\"['customerTabM.add']\"}],attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(a){e.modal1=!0}}},[e._v(\"录入\")])],1),e._v(\" \"),t(\"Col\",{staticStyle:{float:\"right\"},attrs:{span:\"6\"}},[t(\"Input\",{attrs:{placeholder:\"输入标签名称搜索\"},on:{\"on-keydown\":function(a){return\"button\"in a||!e._k(a.keyCode,\"enter\",13,a.key,\"Enter\")?e.searchLabelData(a):null}},model:{value:e.searchLabel,callback:function(a){e.searchLabel=a},expression:\"searchLabel\"}},[t(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchLabelData},slot:\"append\"})],1)],1)],1),e._v(\" \"),t(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[t(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.columns,data:e.data,loading:e.loading_table},on:{\"on-current-change\":e.selectRow,\"on-row-dblclick\":e.edit}}),e._v(\" \"),t(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(a){e.page=a},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1),e._v(\" \"),t(\"Modal\",{attrs:{title:\"录入\"},model:{value:e.modal1,callback:function(a){e.modal1=a},expression:\"modal1\"}},[t(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,rules:e.ruleValidate,\"label-width\":120}},[t(\"FormItem\",{attrs:{label:\"标签名\",prop:\"labelname\"}},[t(\"Input\",{model:{value:e.formValidate.labelname,callback:function(a){e.$set(e.formValidate,\"labelname\",a)},expression:\"formValidate.labelname\"}})],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"编码\",prop:\"labelcode\"}},[t(\"Input\",{model:{value:e.formValidate.labelcode,callback:function(a){e.$set(e.formValidate,\"labelcode\",a)},expression:\"formValidate.labelcode\"}})],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"是否为渠道商标签\",prop:\"channelflag\"}},[t(\"Select\",{attrs:{transfer:\"\"},model:{value:e.formValidate.channelflag,callback:function(a){e.$set(e.formValidate,\"channelflag\",a)},expression:\"formValidate.channelflag\"}},[t(\"Option\",{attrs:{value:\"1\"}},[e._v(\"是\")]),e._v(\" \"),t(\"Option\",{attrs:{value:\"0\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"说明\",prop:\"labelmemo\"}},[t(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.formValidate.labelmemo,callback:function(a){e.$set(e.formValidate,\"labelmemo\",a)},expression:\"formValidate.labelmemo\"}})],1)],1),e._v(\" \"),t(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:function(a){e.addTag(\"formValidate\")}}},[e._v(\"新增\")]),e._v(\" \"),t(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(a){e.cancel(\"formValidate\")}}},[e._v(\"重置\")])],1)],1),e._v(\" \"),t(\"Modal\",{attrs:{title:\"编辑\"},model:{value:e.modal2,callback:function(a){e.modal2=a},expression:\"modal2\"}},[t(\"Form\",{ref:\"formValidate2\",attrs:{model:e.formValidate2,rules:e.ruleValidate,\"label-width\":120}},[t(\"FormItem\",{attrs:{label:\"标签名\",prop:\"labelName\"}},[t(\"Input\",{model:{value:e.formValidate2.labelName,callback:function(a){e.$set(e.formValidate2,\"labelName\",a)},expression:\"formValidate2.labelName\"}})],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"编码\",prop:\"labelCode\"}},[t(\"Input\",{model:{value:e.formValidate2.labelCode,callback:function(a){e.$set(e.formValidate2,\"labelCode\",a)},expression:\"formValidate2.labelCode\"}})],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"是否为渠道商标签\",prop:\"channelFlag\"}},[t(\"Select\",{attrs:{transfer:\"\"},model:{value:e.formValidate2.channelFlag,callback:function(a){e.$set(e.formValidate2,\"channelFlag\",a)},expression:\"formValidate2.channelFlag\"}},[t(\"Option\",{attrs:{value:\"1\"}},[e._v(\"是\")]),e._v(\" \"),t(\"Option\",{attrs:{value:\"0\"}},[e._v(\"否\")])],1)],1),e._v(\" \"),t(\"FormItem\",{attrs:{label:\"说明\",prop:\"labelMemo\"}},[t(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.formValidate2.labelMemo,callback:function(a){e.$set(e.formValidate2,\"labelMemo\",a)},expression:\"formValidate2.labelMemo\"}})],1)],1),e._v(\" \"),t(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"Button\",{attrs:{type:\"primary\",loading:e.edit_loading},on:{click:e.editTag}},[e._v(\"编辑\")])],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"customerTabManagement_table.vue\";var n={components:{indexTable:i.exports},name:\"customerTabManagement_index\",data:function(){return{}}},r=Object(o.a)(n,function(){var e=this.$createElement,a=this._self._c||e;return a(\"div\",[a(\"index-table\")],1)},[],!1,null,null,null);r.options.__file=\"customerTabManagement.vue\";a.default=r.exports}}]);"}