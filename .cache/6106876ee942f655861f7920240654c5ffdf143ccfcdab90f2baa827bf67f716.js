{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{872:function(t,e,i){\"use strict\";i.r(e);var l=i(114),a={name:\"clockin_index\",data:function(){return{loading:!1,header:[{title:\"姓名\",key:\"user_alias_name\",width:120},{title:\"年月\",key:\"yearmonth\",width:120},{title:\"1号\",key:\"01\",width:80},{title:\"2号\",key:\"02\",width:80},{title:\"3号\",key:\"03\",width:80},{title:\"4号\",key:\"04\",width:80},{title:\"5号\",key:\"05\",width:80},{title:\"6号\",key:\"06\",width:80},{title:\"7号\",key:\"07\",width:80},{title:\"8号\",key:\"08\",width:80},{title:\"9号\",key:\"09\",width:80},{title:\"10号\",key:\"10\",width:80},{title:\"11号\",key:\"11\",width:80},{title:\"12号\",key:\"12\",width:80},{title:\"13号\",key:\"13\",width:80},{title:\"14号\",key:\"14\",width:80},{title:\"15号\",key:\"15\",width:80},{title:\"16号\",key:\"16\",width:80},{title:\"17号\",key:\"17\",width:80},{title:\"18号\",key:\"18\",width:80},{title:\"19号\",key:\"19\",width:80},{title:\"20号\",key:\"20\",width:80},{title:\"21号\",key:\"21\",width:80},{title:\"22号\",key:\"22\",width:80},{title:\"23号\",key:\"23\",width:80},{title:\"24号\",key:\"24\",width:80},{title:\"25号\",key:\"25\",width:80},{title:\"26号\",key:\"26\",width:80},{title:\"27号\",key:\"27\",width:80},{title:\"28号\",key:\"28\",width:80},{title:\"29号\",key:\"29\",width:80},{title:\"30号\",key:\"30\",width:80},{title:\"31号\",key:\"31\",width:80}],data:[],page:1,pageSize:10,pageTotal:new Number,file:[],yearmonth:\"\",submit_loading:!1,formValidate:{},userAliasName:\"\"}},methods:{handleUpload:function(t){return this.file.push(t),!1},fileRemove:function(t){this.file.splice(this.file.indexOf(t),1)},submit:function(){var t=this;t.yearmonth?t.upload():t.$Message.error(\"请输入考勤日期！\")},upload:function(){var e=this;e.submit_loading=!0;for(var t=new FormData,i=0;i<this.file.length;i++)t.append(\"file\",this.file[i]);t.append(\"yearmonth\",Object(l.c)(this.yearmonth)),this.$Post(\"api/legwork/importLegworkMsg\",t,function(t){e.submit_loading=!1,e.file=[]},function(t){e.submit_loading=!1})},download:function(){var t={page:\"1\",pageSize:\"1000\",yearmonth:Object(l.c)(this.yearmonth),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"userId\",title:\"工号\"},{field:\"user_alias_name\",title:\"姓名\"},{field:\"yearmonth\",title:\"考勤月份\"},{field:\"01\",title:\"1\"},{field:\"02\",title:\"2\"},{field:\"03\",title:\"3\"},{field:\"04\",title:\"4\"},{field:\"05\",title:\"5\"},{field:\"06\",title:\"6\"},{field:\"07\",title:\"7\"},{field:\"08\",title:\"8\"},{field:\"09\",title:\"9\"},{field:\"10\",title:\"10\"},{field:\"11\",title:\"11\"},{field:\"12\",title:\"12\"},{field:\"13\",title:\"13\"},{field:\"14\",title:\"14\"},{field:\"15\",title:\"15\"},{field:\"16\",title:\"16\"},{field:\"17\",title:\"17\"},{field:\"18\",title:\"18\"},{field:\"19\",title:\"19\"},{field:\"20\",title:\"20\"},{field:\"21\",title:\"21\"},{field:\"22\",title:\"22\"},{field:\"23\",title:\"23\"},{field:\"24\",title:\"24\"},{field:\"25\",title:\"25\"},{field:\"26\",title:\"26\"},{field:\"27\",title:\"27\"},{field:\"28\",title:\"28\"},{field:\"29\",title:\"29\"},{field:\"30\",title:\"30\"},{field:\"31\",title:\"31\"}]))},e=this.$MergeURL(\"api/legwork/exportLegworkMsg\",t);window.open(e)},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:10,yearmonth:Object(l.c)(e.yearmonth),userAliasName:e.userAliasName}};this.$Get(\"api/legwork/exportLegworkMsg\",t,function(t){e.data=t.data.data.rows,e.pageTotal=t.data.data.total,e.loading=!1})},pageChange:function(t){this.page=t,this.get_data()}}},o=i(4),d=Object(o.a)(a,function(){var i=this,t=i.$createElement,l=i._self._c||t;return l(\"div\",[l(\"Row\",[l(\"Col\",{attrs:{span:\"12\"}},[l(\"Card\",{attrs:{title:\"上传考勤表\"}},[l(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\",height:\"200px\"}},[l(\"Form\",{ref:\"formValidate\",attrs:{model:i.formValidate,\"label-width\":120}},[l(\"FormItem\",{attrs:{prop:\"companyId\"}},[l(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[i._v(\"考勤月份：\")]),i._v(\" \"),l(\"DatePicker\",{staticStyle:{width:\"150px\"},attrs:{type:\"month\",placeholder:\"请选择月份\",size:\"small\"},model:{value:i.yearmonth,callback:function(t){i.yearmonth=t},expression:\"yearmonth\"}})],1),i._v(\" \"),l(\"FormItem\",{staticStyle:{\"margin-bottom\":\"20px\"}},[l(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[i._v(\"考勤表：\")]),i._v(\" \"),l(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":i.handleUpload,action:\"\"}},[l(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[i._v(\"选择文件\")])],1),i._v(\" \"),i._l(i.file,function(e,t){return l(\"div\",{key:t},[i._v(i._s(e.name)+\"\\n                                \"),l(\"Button\",{attrs:{type:\"text\"},on:{click:function(t){i.fileRemove(e)}}},[i._v(\"移除\")])],1)})],2),i._v(\" \"),l(\"FormItem\",[l(\"Button\",{attrs:{type:\"primary\",loading:i.submit_loading},on:{click:i.submit}},[i._v(\"上传\")])],1)],1)],1)],1)],1),i._v(\" \"),l(\"Col\",{attrs:{span:\"12\"}},[l(\"Card\",{attrs:{title:\"下载考勤统计表\"}},[l(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\",height:\"200px\"}},[l(\"Form\",{ref:\"formValidate\",attrs:{model:i.formValidate,\"label-width\":120}},[l(\"FormItem\",{attrs:{prop:\"companyId\"}},[l(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[i._v(\"考勤月份：\")]),i._v(\" \"),l(\"DatePicker\",{staticStyle:{width:\"150px\"},attrs:{type:\"month\",placeholder:\"请选择月份\",size:\"small\"},model:{value:i.yearmonth,callback:function(t){i.yearmonth=t},expression:\"yearmonth\"}})],1),i._v(\" \"),l(\"FormItem\",[l(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[i._v(\"姓名：\")]),i._v(\" \"),l(\"Input\",{staticStyle:{width:\"150px\"},attrs:{type:\"text\",size:\"small\"},model:{value:i.userAliasName,callback:function(t){i.userAliasName=t},expression:\"userAliasName\"}})],1),i._v(\" \"),l(\"FormItem\",[l(\"Button\",{staticStyle:{\"margin-right\":\"8px\"},attrs:{type:\"primary\"},on:{click:i.get_data}},[i._v(\"查询\")]),i._v(\" \"),l(\"Button\",{attrs:{type:\"ghost\"},on:{click:i.download}},[i._v(\"下载\")])],1)],1)],1)],1)],1)],1),i._v(\" \"),l(\"Row\",[l(\"Card\",{attrs:{title:\"考勤统计\"}},[l(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:i.header,loading:i.loading,data:i.data}}),i._v(\" \"),l(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:i.pageTotal,current:i.page,\"show-total\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){i.page=t},\"on-change\":i.pageChange}})],1)],1)],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";e.default=d.exports}}]);"}