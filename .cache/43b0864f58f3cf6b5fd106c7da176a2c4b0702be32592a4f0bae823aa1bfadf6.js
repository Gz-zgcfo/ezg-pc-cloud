{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{431:function(e,t,a){},658:function(e,t,a){\"use strict\";var r=a(431);a.n(r).a},837:function(e,t,a){\"use strict\";a.r(t);var r=a(114),o={data:function(){return{tabshow:\"name11\",value1:[1,2],current_row:\"\",huashu:!1,show_allot_detail:!1,task_message:{id:\"\",companyname:\"\",name:\"\",tel:\"\",product:\"\",departname:\"\",servername:\"\",servertel:\"\",followbyrealname:\"\",followbytel:\"\",backup:\"\"},process:{companyName:\"1111111111\"},correlation:{}}},created:function(){var t=this;this.$bus.on(\"openAllotTask\",function(e){t.show_allot_detail=!0,t.current_row=e,t.tabshow=\"name11\",t.getData()})},methods:{getData:function(){var t=this,e=\"api/order/workOrderDetail?workOrderId=\"+t.current_row.row.id;this.$http.get(e).then(function(e){t.task_message=e.data.data.taskInfo[0],t.process=e.data.data.process,t.correlation=e.data.data.correlation})}}},n=(a(658),a(4)),l=Object(n.a)(o,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"查看详情\",width:\"70%\"},model:{value:a.show_allot_detail,callback:function(e){a.show_allot_detail=e},expression:\"show_allot_detail\"}},[r(\"Tabs\",{model:{value:a.tabshow,callback:function(e){a.tabshow=e},expression:\"tabshow\"}},[r(\"TabPane\",{attrs:{label:\"任务信息\",name:\"name11\"}},[r(\"Collapse\",{model:{value:a.value1,callback:function(e){a.value1=e},expression:\"value1\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[a._v(\"\\n                        基本信息\\n                        \"),r(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[r(\"Form\",{ref:\"task_message\",attrs:{model:a.task_message,\"label-width\":90}},[r(\"Row\",[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"公司名称：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.companyname,callback:function(e){a.$set(a.task_message,\"companyname\",e)},expression:\"task_message.companyname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.name,callback:function(e){a.$set(a.task_message,\"name\",e)},expression:\"task_message.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"客户电话：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.tel,callback:function(e){a.$set(a.task_message,\"tel\",e)},expression:\"task_message.tel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"产品名称：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.product,callback:function(e){a.$set(a.task_message,\"product\",e)},expression:\"task_message.product\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"服务部门：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.departname,callback:function(e){a.$set(a.task_message,\"departname\",e)},expression:\"task_message.departname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{label:\"服务备注：\",prop:\"customerMemo\"}},[r(\"Input\",{attrs:{size:\"small\",type:\"textarea\"},model:{value:a.task_message.backup,callback:function(e){a.$set(a.task_message,\"backup\",e)},expression:\"task_message.backup\"}})],1)],1)],1)],1)],1)]),a._v(\" \"),r(\"Panel\",{attrs:{name:\"2\"}},[a._v(\"\\n                        相关联系人\\n                        \"),r(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[r(\"Form\",{ref:\"task_message\",attrs:{model:a.task_message,\"label-width\":90}},[r(\"Row\",[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"服务人员：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.servername,callback:function(e){a.$set(a.task_message,\"servername\",e)},expression:\"task_message.servername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"联系方式：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.servertel,callback:function(e){a.$set(a.task_message,\"servertel\",e)},expression:\"task_message.servertel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"销售人员：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.followbyrealname,callback:function(e){a.$set(a.task_message,\"followbyrealname\",e)},expression:\"task_message.followbyrealname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{label:\"联系方式：\",prop:\"Input\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:a.task_message.followbytel,callback:function(e){a.$set(a.task_message,\"followbytel\",e)},expression:\"task_message.followbytel\"}})],1)],1)],1)],1)],1)])],1)],1),a._v(\" \"),r(\"TabPane\",{attrs:{label:\"相关在服工单\",name:\"name44\"}},[r(\"Row\",[r(\"Scroll\",{attrs:{height:\"500\"}},[a.correlation.length?a._e():r(\"div\",[r(\"center\",[a._v(\"暂无数据\")])],1),a._v(\" \"),a._l(a.correlation,function(t,e){return r(\"div\",{key:e},[r(\"Form\",{ref:\"item\",refInFor:!0,staticStyle:{margin:\"10px\",padding:\"5px\",\"padding-top\":\"10px\",border:\"1px solid #EEE9E9\"},attrs:{model:t,\"label-width\":100}},[r(\"Row\",[r(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}}),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"公司名称：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.companyname,callback:function(e){a.$set(t,\"companyname\",e)},expression:\"item.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"所办服务：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.product,callback:function(e){a.$set(t,\"product\",e)},expression:\"item.product\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}}),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"目前进度：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.CurrentProcess,callback:function(e){a.$set(t,\"CurrentProcess\",e)},expression:\"item.CurrentProcess\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"服务部门：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.departname,callback:function(e){a.$set(t,\"departname\",e)},expression:\"item.departname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}}),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"服务人员：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.servername,callback:function(e){a.$set(t,\"servername\",e)},expression:\"item.servername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"FormItem\",{attrs:{label:\"联系方式：\"}},[r(\"Input\",{attrs:{readonly:\"\"},model:{value:t.servertel,callback:function(e){a.$set(t,\"servertel\",e)},expression:\"item.servertel\"}})],1)],1)],1)],1)],1)})],2)],1)],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){a.show_allot_detail=!1}}},[a._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);l.options.__file=\"detail.vue\";var s=l.exports,i={data:function(){return{show:!0,common_allot_open:!1,workorderIds:\"\",departName:\"\",ServiceDeptID:\"\",allDepartUser:[],loading:!1,servicerID:\"\"}},methods:{getAllUserList:function(){var e=\"api/user/getUserListByDepartId?departId=\"+this.ServiceDeptID,t=this;this.$http.get(e).then(function(e){t.allDepartUser=e.data.data})},allot:function(){var t=this;t.loading=!0;var e={workOrderIds:t.workorderIds,userId:t.servicerID};this.$Post(\"api/order/batchUpdateServicer\",e,function(e){t.show=!1,t.workorderIds=\"\",t.departName=\"\",t.ServiceDeptID=\"\",t.servicerID=\"\",t.common_allot_open=!1,t.$bus.emit(\"update_allot_index\",!0),t.loading=!1},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.on(\"global_allot_commonorder\",function(e){t.show=!0,t.ServiceDeptID=e[0],t.departName=e[1],t.workorderIds=e[2],t.getAllUserList(),t.common_allot_open=!0})}},c=Object(n.a)(i,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"Modal\",{attrs:{title:\"一键分配工单\",width:\"300\"},model:{value:a.common_allot_open,callback:function(e){a.common_allot_open=e},expression:\"common_allot_open\"}},[r(\"Form\",{attrs:{\"label-width\":90}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[a._v(\"1\")]),a._v(\" \"),r(\"Col\",{attrs:{span:\"20\"}},[r(\"FormItem\",{attrs:{prop:\"departName\",label:\"服务部门：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.departName,callback:function(e){a.departName=e},expression:\"departName\"}})],1)],1)],1),a._v(\" \"),a.show?r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[a._v(\"1\")]),a._v(\" \"),r(\"Col\",{attrs:{span:\"20\"}},[r(\"FormItem\",{attrs:{label:\"服务人员：\"}},[r(\"Select\",{attrs:{transfer:\"\",filterable:\"\"},model:{value:a.servicerID,callback:function(e){a.servicerID=e},expression:\"servicerID\"}},a._l(a.allDepartUser,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.id}},[a._v(a._s(e.realname))])}),1)],1)],1)],1):a._e()],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){a.common_allot_open=!1}}},[a._v(\"关闭\")]),a._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.allot}},[a._v(\"分配\")])],1)],1)},[],!1,null,null,null);c.options.__file=\"allot_service.vue\";var p=c.exports,m={data:function(){return{show:!0,workorderIds:\"\",departName:\"\",ServiceDeptID:\"\",allDepartUser:\"\",allot_account_open:!1,loading:!1,servicerID:\"\"}},methods:{getAllUserList:function(){var e=\"api/user/getAllUserListByDepartId?departId=\"+this.ServiceDeptID,t=this;this.$http.get(e).then(function(e){t.allDepartUser=e.data.data})},allotAccount:function(){var e=this;e.loading=!0;var t={workOrderIds:e.workorderIds,userId:e.servicerID,managerId:e.servicerID};this.$Post(\"api/order/work/order/share\",t,function(){e.show=!1,e.workorderIds=\"\",e.servicerID=\"\",e.ServiceDeptID=\"\",e.departName=\"\",e.allot_account_open=!1,e.$bus.emit(\"update_allot_index\",!0),e.loading=!1},function(){e.loading=!1})}},created:function(){var t=this;this.$bus.on(\"global_allot_accountorder\",function(e){t.show=!0,t.ServiceDeptID=e[0],t.departName=e[1],t.workorderIds=e[2],t.getAllUserList(),t.allot_account_open=!0})}},d=Object(n.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Modal\",{attrs:{title:\"分配会计\",width:\"300\"},model:{value:t.allot_account_open,callback:function(e){t.allot_account_open=e},expression:\"allot_account_open\"}},[a(\"Form\",{attrs:{\"label-width\":90}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"departName\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:t.departName,callback:function(e){t.departName=e},expression:\"departName\"}})],1)],1)],1),t._v(\" \"),t.show?a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"服务人员\"}},[a(\"Select\",{attrs:{transfer:\"\",filterable:\"\"},model:{value:t.servicerID,callback:function(e){t.servicerID=e},expression:\"servicerID\"}},t._l(t.allDepartUser,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.realname))])}),1)],1)],1)],1):t._e()],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){t.allot_account_open=!1}}},[t._v(\"关闭\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.allotAccount}},[t._v(\"分配\")])],1)],1)},[],!1,null,null,null);d.options.__file=\"allot_accout_service.vue\";var u={components:{AllotDetail:s,allotAccountService:d.exports,allotService:p},data:function(){var a=this;return{companyarea:\"\",search_model:\"\",local_router_name:\"\",Nloading:!1,Yloading:!1,isSearhN:!1,isSearhY:!1,change_rowN:[],change_rowY:[],detailModal:!1,formInlineN:{companyname:\"\",servicename:\"\",departname:\"\"},formInlineY:{companyname:\"\",servicename:\"\",departname:\"\",allottime:[]},columns:[{type:\"selection\",width:60,align:\"center\"},{title:\"归属公司\",key:\"companyname\",width:220,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"公司注册地\",key:\"companyarea\",width:120},{title:\"归属客户\",key:\"name\",width:120},{title:\"产品全称\",key:\"product\",width:200,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"产品数量\",key:\"productnumber\",width:120},{title:\"订单号\",key:\"ordercode\",width:150},{title:\"服务部门\",key:\"departname\",width:120},{title:\"更新时间\",key:\"UpdateDate\",width:120},{title:\"创建时间\",key:\"CreateDate\",width:120},{title:\"跟进人\",key:\"followname\",width:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:70,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){a.$store.commit(\"open_gobal_work_order_detail_modal\",t.row.id)}}},\"详情\")])}}],Ycolumns:[{type:\"selection\",width:60,align:\"center\"},{title:\"归属公司\",key:\"companyname\",width:220,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":12<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,12)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"公司注册地\",key:\"companyarea\",width:120},{title:\"归属客户\",key:\"name\",width:120},{title:\"产品全称\",key:\"product\",width:200,render:function(e,t){return\"\"==t.row.product||null==t.row.product?\"\":10<t.row.product.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.product.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.product)])]):e(\"span\",t.row.product)}},{title:\"订单号\",key:\"ordercode\",width:150},{title:\"服务人员\",key:\"servername\",width:120},{title:\"当前流程\",key:\"CurrentProcess\",width:120},{title:\"服务起始时间\",key:\"ServiceStart\",width:120},{title:\"服务终止时间\",key:\"ServiceEnd\",width:120},{title:\"是否开始执行\",key:\"IsWork\",width:120},{title:\"分配时间\",key:\"allotTime\",width:120},{title:\"服务部门\",key:\"departname\",width:120},{title:\"服务是否完成\",key:\"IsOver\",width:120},{title:\"更新时间\",key:\"UpdateDate\",width:120},{title:\"创建时间\",key:\"CreateDate\",width:120},{title:\"跟进人\",key:\"followname\",width:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:70,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){a.$store.commit(\"open_gobal_work_order_detail_modal\",t.row.id)}}},\"详情\")])}}],NpageTotal:new Number,Npage:1,NpageSize:10,Ndata:[],YpageTotal:new Number,Ypage:1,YpageSize:10,Ydata:[]}},methods:{getDataN:function(){var n=this;n.Nloading=!0;var e={params:{page:n.Npage,pageSize:n.NpageSize,workOrderStatus:\"10\",companyName:n.formInlineN.companyname,serviceName:n.formInlineN.servicename,departname:n.formInlineN.departname,serviceDept:\"\"+n.local_router_name}};n.$http.get(\"api/order/workOrderList?&sortField=UpdateDate\",e).then(function(e){n.$backToLogin(e),n.Ndata=e.data.data.rows,n.NpageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(null==n.Ndata[t].UpdateDate||\"\"==n.Ndata[t].UpdateDate||(n.Ndata[t].UpdateDate=n.Ndata[t].UpdateDate.slice(0,10)),null==n.Ndata[t].CreateDate||\"\"==n.Ndata[t].CreateDate||(n.Ndata[t].CreateDate=n.Ndata[t].CreateDate.slice(0,10)),n.Ndata[t].companyarea){for(var a=n.Ndata[t].companyarea.split(\"-\"),r=0;r<n.companyarea.length;r++)if(a[0]==n.companyarea[r].id)for(var o=0;o<n.companyarea[r].children.length;o++)a[1]==n.companyarea[r].children[o].id&&(n.Ndata[t].companyarea=n.companyarea[r].typename+\" - \"+n.companyarea[r].children[o].typename)}else n.Ndata[t].companyarea=\"\";n.Nloading=!1})},NpageChange:function(e){this.Npage=e,this.getDataN()},NpageSizeChange:function(e){this.NpageSize=e,this.getDataN()},searchN:function(){this.Npage=1,this.isSearhN=!0,this.getDataN()},resetN:function(){this.isSearhN=!1,this.Npage=1,this.formInlineN.companyname=\"\",this.formInlineN.servicename=\"\",this.formInlineN.departname=\"\",this.getDataN()},getDataY:function(){var n=this;n.Yloading=!0;var e={params:{page:n.Ypage,pageSize:n.YpageSize,nonWorkOrderStatus:\"10\",companyName:n.formInlineY.companyname,serviceName:n.formInlineY.servicename,departname:n.formInlineY.departname,serviceDept:\"\"+n.local_router_name,ballottime:Object(r.a)(n.formInlineY.allottime[0]),eallottime:Object(r.a)(n.formInlineY.allottime[1])}};n.$http.get(\"api/order/workOrderList?&sortField=UpdateDate\",e).then(function(e){n.$backToLogin(e),n.Ydata=e.data.data.rows,n.YpageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(null==n.Ydata[t].UpdateDate||\"\"==n.Ydata[t].UpdateDate||(n.Ydata[t].UpdateDate=n.Ydata[t].UpdateDate.slice(0,10)),null==n.Ydata[t].CreateDate||\"\"==n.Ydata[t].CreateDate||(n.Ydata[t].CreateDate=n.Ydata[t].CreateDate.slice(0,10)),null==n.Ydata[t].ServiceStart||\"\"==n.Ydata[t].ServiceStart||(n.Ydata[t].ServiceStart=n.Ydata[t].ServiceStart.slice(0,10)),null==n.Ydata[t].allotTime||\"\"==n.Ydata[t].allotTime||(n.Ydata[t].allotTime=n.Ydata[t].allotTime.slice(0,10)),null==n.Ydata[t].ServiceEnd||\"\"==n.Ydata[t].ServiceEnd||(n.Ydata[t].ServiceEnd=n.Ydata[t].ServiceEnd.slice(0,10)),n.Ydata[t].companyarea){for(var a=n.Ydata[t].companyarea.split(\"-\"),r=0;r<n.companyarea.length;r++)if(a[0]==n.companyarea[r].id)for(var o=0;o<n.companyarea[r].children.length;o++)a[1]==n.companyarea[r].children[o].id&&(n.Ydata[t].companyarea=n.companyarea[r].typename+\" - \"+n.companyarea[r].children[o].typename)}else n.Ydata[t].companyarea=\"\";n.Yloading=!1})},YpageChange:function(e){this.Ypage=e,this.getDataY()},YpageSizeChange:function(e){this.YpageSize=e,this.getDataY()},searchY:function(){this.Ypage=1,this.isSearhY=!0,this.getDataY()},resetY:function(){this.isSearhN=!1,this.Npage=1,this.formInlineY.companyname=\"\",this.formInlineY.servicename=\"\",this.formInlineY.departname=\"\",this.formInlineY.allottime=[],this.getDataY()},select_change:function(e){this.change_rowN=[],this.change_rowN=e},select_change2:function(e){this.change_rowY=[],this.change_rowY=e},Distribution_task:function(){var e=!1,t=this;if(\"\"!=t.change_rowN){for(var a=t.change_rowN[0].ServiceDeptID,r=0;r<t.change_rowN.length;r++)a==t.change_rowN[r].ServiceDeptID&&r==t.change_rowN.length-1&&(e=!0);if(1==e){for(var o=[],n=0;n<t.change_rowN.length;n++)o.push(t.change_rowN[n].id);var l=o.join(\",\");\"'ACCOUNT'\"==t.local_router_name?t.$bus.emit(\"global_allot_accountorder\",[t.change_rowN[0].ServiceDeptID,t.change_rowN[0].departname,l]):t.$bus.emit(\"global_allot_commonorder\",[t.change_rowN[0].ServiceDeptID,t.change_rowN[0].departname,l])}else t.$Message.warning(\"请选择相同的服务部门！\")}else t.$Message.warning(\"请选择需要分配的工单！\")},transfer_task:function(){var e=!1,t=this;if(\"\"!=t.change_rowY){for(var a=t.change_rowY[0].ServiceDeptID,r=0;r<t.change_rowY.length;r++)a==t.change_rowY[r].ServiceDeptID&&r==t.change_rowY.length-1&&(e=!0);if(1==e){for(var o=[],n=0;n<t.change_rowY.length;n++)o.push(t.change_rowY[n].id);var l=o.join(\",\");\"'ACCOUNT'\"==t.local_router_name?t.$bus.emit(\"global_allot_accountorder\",[t.change_rowY[0].ServiceDeptID,t.change_rowY[0].departname,l]):t.$bus.emit(\"global_allot_commonorder\",[t.change_rowY[0].ServiceDeptID,t.change_rowY[0].departname,l])}else t.$Message.warning(\"请选择相同的服务部门！\")}else t.$Message.warning(\"请选择需要分配的工单！\")},allot:function(){for(var t=this,e=[],a=0;a<t.change_rowN.length;a++)e.push(t.change_rowN[a].id);t.workOrderIds=e.join(\",\");var r={workOrderIds:t.workOrderIds,userId:t.userId};this.$http.post(\"api/order/batchUpdateServicer\",r).then(function(e){4e4==e.data.msgCode?(t.$Message.success(e.data.msg),t.Distribution=!1,t.getDataN(),t.getDataY(),t.userId=\"\"):t.$Message.error(e.data.msg)})},allot2:function(){for(var t=this,e=[],a=0;a<t.change_rowY.length;a++)e.push(t.change_rowY[a].id);t.workOrderIds=e.join(\",\");var r={workOrderIds:t.workOrderIds,userId:t.userId};this.$http.post(\"api/order/batchUpdateServicer\",r).then(function(e){4e4==e.data.msgCode?(t.$Message.success(e.data.msg),t.transfer=!1,t.getDataN(),t.getDataY(),t.userId=\"\"):t.$Message.error(e.data.msg)})},init:function(){this.local_router_name=\"'\"+this.$route.params.depart+\"'\",this.Npage=1,this.Ypage=1,this.getDataY(),this.getDataN(),this.change_rowN=[],this.change_rowY=[]},getDataCenter:function(){var t=this;this.$GetDataCenter(\"companyarea\",function(e){t.companyarea=e.data.data.companyarea})}},watch:{$route:\"init\"},mounted:function(){this.init()},created:function(){var t=this;t.getDataCenter(),t.$bus.on(\"update_allot_index\",function(e){t.init(),t.Ypage=1,t.Npage=1})}},h=Object(n.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticStyle:{\"min-width\":\"900px\"}},[a(\"Tabs\",{staticStyle:{\"padding-bottom\":\"150px\"},attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"待分配\",name:\"name1\"}},[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                            筛选\\n                            \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchN(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInlineN\",attrs:{model:t.formInlineN,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineN.companyname,callback:function(e){t.$set(t.formInlineN,\"companyname\",e)},expression:\"formInlineN.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineN.departname,callback:function(e){t.$set(t.formInlineN,\"departname\",e)},expression:\"formInlineN.departname\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.searchN}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.resetN}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"workorder.allot\"],expression:\"['workorder.allot']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.Distribution_task}},[t._v(\"一键分配\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.columns,data:t.Ndata,loading:t.Nloading},on:{\"on-selection-change\":t.select_change}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.NpageTotal,placement:\"top\",current:t.Npage,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.Npage=e},\"on-change\":t.NpageChange,\"on-page-size-change\":t.NpageSizeChange}})],1)],1)],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"已分配\",name:\"name2\"}},[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                            筛选\\n                            \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.searchY(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formInlineY\",attrs:{model:t.formInlineY,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineY.companyname,callback:function(e){t.$set(t.formInlineY,\"companyname\",e)},expression:\"formInlineY.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineY.servicename,callback:function(e){t.$set(t.formInlineY,\"servicename\",e)},expression:\"formInlineY.servicename\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineY.departname,callback:function(e){t.$set(t.formInlineY,\"departname\",e)},expression:\"formInlineY.departname\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"allottime\",label:\"分配时间：\"}},[a(\"DatePicker\",{attrs:{type:\"daterange\",placeholder:\"\",size:\"small\"},model:{value:t.formInlineY.allottime,callback:function(e){t.$set(t.formInlineY,\"allottime\",e)},expression:\"formInlineY.allottime\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.searchY}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.resetY}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.transfer_task}},[t._v(\"批量转移\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.Ycolumns,data:t.Ydata,loading:t.Yloading},on:{\"on-selection-change\":t.select_change2}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.YpageTotal,current:t.Ypage,placement:\"top\",\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.Ypage=e},\"on-change\":t.YpageChange,\"on-page-size-change\":t.YpageSizeChange}})],1)],1)],1)],1),t._v(\" \"),a(\"AllotDetail\"),t._v(\" \"),a(\"allot-account-service\"),t._v(\" \"),a(\"allot-service\")],1)},[],!1,null,null,null);h.options.__file=\"index.vue\";t.default=h.exports}}]);"}