{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{143:function(e,t,a){},144:function(e,t,a){},302:function(e,t,a){\"use strict\";var r=a(143);a.n(r).a},304:function(e,t,a){\"use strict\";var r=a(144);a.n(r).a},445:function(e,t,a){\"use strict\";a.r(t);function r(e){if(null==e||\"\"==e)return\"\";var t=new Date(e),a=\"\"+(t.getMonth()+1),r=\"\"+t.getDate(),n=t.getFullYear();return a.length<2&&(a=\"0\"+a),r.length<2&&(r=\"0\"+r),[n,a,r].join(\"-\")}var n={name:\"transactionRecord_index\",data:function(){var e=this;return{loading:!1,orderItem:[],openShowOrderDetail:!1,orderDetailListHeaderShow:[{title:\"序号\",type:\"index\",minWidth:60,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){var a=new RegExp(\"</br>\",\"g\");return e(\"div\",[e(\"Input\",{props:{value:t.row.memo.replace(a,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}],search_model:\"\",ishandleSubmit:!1,SearchValidate:{customername:\"\",customertel:\"\",date:[]},isEidt:!1,modal1:!1,modal2:!1,issendValue:[],orderItemList3:[],formValidate:{companyname:\"\",name:\"\",realnumber:\"\",tel:\"\",updatedate:\"\",createby:\"\"},columns:[{type:\"index\",width:60,align:\"center\"},{title:\"订单号码\",key:\"ordercode\",minWidth:150},{title:\"公司名称\",key:\"companyname\",render:function(t,a){return\"\"==a.row.companyname||null==a.row.companyname?\"\":t(\"Poptip\",{props:{trigger:\"hover\",title:\"公司名称\",placement:\"bottom\"}},[t(\"span\",e.data[a.index].companyname[0].name+\"\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"ul\",e.data[a.index].companyname.map(function(e){return[t(\"li\",{style:{padding:\"4px\"}},\"公司名：\"+e.name)]}))])])},ellipsis:!0,minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:100},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"已付款\",key:\"realnumber\",minWidth:120},{title:\"创建时间\",key:\"updatedate\",minWidth:150},{title:\"创建人\",key:\"crealname\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:70,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\",permission:\"['transactionR.cheek']\"},style:{marginRight:\"5px\"},on:{click:function(){e.detail(a.row)}}},\"详情\")])}}],columns1:[{title:\"产品名称\",key:\"product\"},{title:\"产品属性\",key:\"propertys\"},{title:\"产品数量\",key:\"productnumber\"},{title:\"销售价格\",key:\"paynumber\"}],data:[],pageTotal:0,page:1,pageSize:10,customerid:\"\",tableLoading:!1}},methods:{selectRow:function(){},handleReset:function(){this.SearchValidate.customername=\"\",this.SearchValidate.customertel=\"\",this.SearchValidate.date=\"\",this.getTableData()},Search:function(){0==this.ishandleSubmit&&(this.page=1),this.ishandleSubmit=!0,this.getTableData()},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",customername:this.SearchValidate.customername,customertel:this.SearchValidate.customertel,bcreatedate:r(this.SearchValidate.date[0]),bUpdatedate:r(this.SearchValidate.date[1]),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"ordercode\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"paynumber\",title:\"已付款\"},{field:\"base_createdate\",title:\"创建时间\"},{field:\"crealname\",title:\"创建人\"}]))},t=this.$MergeURL(\"api/order/queryListByChannel\",e);window.open(t)},getTableData:function(){var e=this;e.tableLoading=!0,e.data=[];var t={params:{sortField:\"id\",order:\"desc\",page:e.page,pageSize:e.pageSize,customername:e.SearchValidate.customername,customertel:e.SearchValidate.customertel,bcreatedate:r(e.SearchValidate.date[0]),bUpdatedate:r(e.SearchValidate.date[1])}};for(var a in e.SearchValidate)\"\"!=e.SearchValidate[a]&&null!=e.SearchValidate[a]||delete t.params[a],\"\"!=e.SearchValidate.date&&null!=e.SearchValidate.date||(delete t.params.eUpdatedate,delete t.params.eUpdatedate);e.$http.get(\"api/order/queryListByChannel\",t).then(function(t){e.$backToLogin(t),function(t){e.tableLoading=!1,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++){var r=[{name:t.data.data.rows[a].companyname}],n=\"\";null==t.data.data.rows[a].updatedate||\"\"==t.data.data.rows[a].updatedate||(n=t.data.data.rows[a].updatedate.substr(0,10)),e.data.push({ordercode:t.data.data.rows[a].ordercode,companyname:r,name:t.data.data.rows[a].name,tel:t.data.data.rows[a].tel,updatedate:n,crealname:t.data.data.rows[a].crealname,realnumber:t.data.data.rows[a].realnumber,id:t.data.data.rows[a].id})}}(t)})},pageChange:function(e){this.page=e,this.getTableData()},pageSizeChange:function(e){this.pageSize=e,this.getTableData()},detail:function(e){var t=this,a=\"api/order/detail/\"+e.id;t.loading=!0,t.modal2=!0,t.formValidate.companyname=e.companyname[0].name,t.formValidate.name=e.name,t.formValidate.tel=e.tel,t.formValidate.updatedate=e.updatedate,t.formValidate.createby=e.crealname,t.formValidate.realnumber=e.realnumber,this.$Get(a,{},function(e){var a=e.data.data;t.orderItem=a.items,t.loading=!1})}},mounted:function(){this.getTableData()}},l=(a(302),a(304),a(2)),i=Object(l.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                            筛选\\n                            \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.Search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"SearchValidate\",attrs:{model:e.SearchValidate,\"label-width\":80}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customername\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidate.customername,callback:function(t){e.$set(e.SearchValidate,\"customername\",t)},expression:\"SearchValidate.customername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系方式：\",prop:\"customertel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidate.customertel,callback:function(t){e.$set(e.SearchValidate,\"customertel\",t)},expression:\"SearchValidate.customertel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建时间：\",prop:\"date\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",size:\"small\",placement:\"bottom-end\"},model:{value:e.SearchValidate.date,callback:function(t){e.$set(e.SearchValidate,\"date\",t)},expression:\"SearchValidate.date\"}})],1)],1)],1),e._v(\" \"),a(\"center\",[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.Search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(t){e.handleReset(\"SearchValidate\")}}},[e._v(\"\\n                                                重置\\n                                            \")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"transactionR.export\"],expression:\"['transactionR.export']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{loading:e.tableLoading,\"highlight-row\":\"\",size:\"small\",columns:e.columns,data:e.data},on:{\"on-row-dblclick\":e.detail}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",current:e.page,\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"详情\",width:1300,\"class-name\":\"vertical-center-modal\"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:\"modal2\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,\"label-width\":70}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"公司名\",prop:\"companyname\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.companyname,callback:function(t){e.$set(e.formValidate,\"companyname\",t)},expression:\"formValidate.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户名\",prop:\"name\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,\"name\",t)},expression:\"formValidate.name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.realnumber,callback:function(t){e.$set(e.formValidate,\"realnumber\",t)},expression:\"formValidate.realnumber\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.tel,callback:function(t){e.$set(e.formValidate,\"tel\",t)},expression:\"formValidate.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"创建时间\",prop:\"updatedate\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.updatedate,callback:function(t){e.$set(e.formValidate,\"updatedate\",t)},expression:\"formValidate.updatedate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"创建人\",prop:\"createby\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.formValidate.createby,callback:function(t){e.$set(e.formValidate,\"createby\",t)},expression:\"formValidate.createby\"}})],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{columns:e.orderDetailListHeaderShow,data:e.orderItem,loading:e.loading,border:\"\",size:\"small\",id:\"show-order-item\"}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);i.options.__file=\"transactionRecord.vue\";t.default=i.exports}}]);"}