{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{405:function(e,t,a){\"use strict\";a.r(t);var s=a(9),r={components:{},data:function(){var e=this;return{NformInline:{companyname:\"\",name:\"\",tel:\"\",product:\"\",marketername:\"\",servicename:\"\"},search_model:\"\",isExamine:!1,modal:!1,pageTotal:new Number,page:1,pageSize:10,row:{},customerid:[],data:[],header:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"product\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:160},{title:\"服务人员\",key:\"servicer\",width:120},{title:\"市场人员\",key:\"marketer\",width:120},{title:\"结束时间\",key:\"enddate\",width:160},{title:\"服务开始时间\",key:\"servicebegindate\",width:160},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"CompanyName\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"enddate\",title:\"下线时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"servicebegindate\",title:\"服务开始时间\"},{field:\"servicer\",title:\"服务人员\"},{field:\"marketer\",title:\"市场人员\"},{field:\"reasonforcallback\",title:\"客户实际下线原因\"},{field:\"reasonformarketer\",title:\"市场通知下线原因\"}])),companyname:this.NformInline.companyname,customername:this.NformInline.name,customertel:this.NformInline.tel,productname:this.NformInline.product,marketer:this.NformInline.marketername,servicer:this.NformInline.servicename},t=this.$MergeURL(\"api/customer/customerEndList\",e);window.open(t)},cancel:function(){this.customerid=[],this.isExamine=!1},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.product=\"\",this.NformInline.marketername=\"\",this.NformInline.servicename=\"\",this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},add:function(){this.row.type=\"add\",this.$bus.emit(\"OPEN_OFFLINE_ADD\",!0)},edit:function(){null==this.row.id?this.$Message.warning(\"请选择要查看的项目\"):(this.row.type=\"edit\",this.$bus.emit(\"OPEN_OFFLINE_UPDATE\",this.row))},check:function(){null==this.row.id?this.$Message.warning(\"请选择要查看的项目\"):this.$bus.emit(\"OPEN_OFFLINE_SHOW\",this.row)},getData:function(){var e=this,t=\"/customer/customerEndList?sortField=id&page=\"+e.page+\"&status=N&pageSize=\"+e.pageSize+\"&companyname=\"+e.NformInline.companyname+\"&customername=\"+e.NformInline.name+\"&customertel=\"+e.NformInline.tel+\"&productname=\"+e.NformInline.product+\"&marketer=\"+e.NformInline.marketername+\"&servicer=\"+e.NformInline.servicename;e.row={},this.GetData(t,function(t){var a=t.data.data;e.pageTotal=a.total,e.data=a.rows;for(var s=0;s<e.data.length;s++)e.data[s].company_id=e.data[s].companyid,null==e.data[s].enddate||\"\"==e.data[s].enddate||(e.data[s].enddate=e.data[s].enddate.slice(0,10)),null==e.data[s].callbackdate||\"\"==e.data[s].callbackdate||(e.data[s].callbackdate=e.data[s].callbackdate.slice(0,10)),null==e.data[s].servicebegindate||\"\"==e.data[s].servicebegindate||(e.data[s].servicebegindate=e.data[s].servicebegindate.slice(0,10))})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},selectrow:function(e){this.row=e}},mounted:function(){this.getData()},created:function(){var e=this;s.a.$on(\"updateofflinecustomer\",function(t){e.getData()})}},n=a(2),o=Object(n.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:e.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.companyname,callback:function(t){e.$set(e.NformInline,\"companyname\",t)},expression:\"NformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.name,callback:function(t){e.$set(e.NformInline,\"name\",t)},expression:\"NformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.tel,callback:function(t){e.$set(e.NformInline,\"tel\",t)},expression:\"NformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.product,callback:function(t){e.$set(e.NformInline,\"product\",t)},expression:\"NformInline.product\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.marketername,callback:function(t){e.$set(e.NformInline,\"marketername\",t)},expression:\"NformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.servicename,callback:function(t){e.$set(e.NformInline,\"servicename\",t)},expression:\"NformInline.servicename\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"offlineCustomer-add\"],expression:\"['offlineCustomer-add']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.add}},[e._v(\"录入\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"offlineCustomer-edit\"],expression:\"['offlineCustomer-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.edit}},[e._v(\" 编辑\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.check}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data},on:{\"on-row-click\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",\"current.sync\":\"page\",placement:\"top\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);o.options.__file=\"untreated.vue\";var l=o.exports,i={components:{},data:function(){var e=this;return{YformInline:{companyname:\"\",name:\"\",tel:\"\",product:\"\",marketername:\"\",servicename:\"\"},search_model:\"\",isExamine:!1,modal:!1,pageTotal:new Number,page:1,pageSize:10,row:{},customerid:[],data:[],header:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"product\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:160},{title:\"服务人员\",key:\"servicer\",width:120},{title:\"市场人员\",key:\"marketer\",width:120},{title:\"结束时间\",key:\"enddate\",width:160},{title:\"服务开始时间\",key:\"servicebegindate\",width:160},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"CompanyName\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"enddate\",title:\"下线时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"servicebegindate\",title:\"服务开始时间\"},{field:\"servicer\",title:\"服务人员\"},{field:\"marketer\",title:\"市场人员\"},{field:\"reasonforcallback\",title:\"客户实际下线原因\"},{field:\"reasonformarketer\",title:\"市场通知下线原因\"}])),companyname:this.YformInline.companyname,customername:this.YformInline.name,customertel:this.YformInline.tel,productname:this.YformInline.product,marketer:this.YformInline.marketername,servicer:this.YformInline.servicename},t=this.$MergeURL(\"api/customer/customerEndList\",e);window.open(t)},cancel:function(){this.customerid=[],this.isExamine=!1},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.product=\"\",this.YformInline.marketername=\"\",this.YformInline.servicename=\"\",this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},check:function(){null==this.row.id?this.$Message.warning(\"请选择要查看的项目\"):this.$bus.emit(\"OPEN_OFFLINE_SHOW\",this.row)},getData:function(){var e=this,t=\"/customer/customerEndList?sortField=id&page=\"+e.page+\"&pageSize=\"+e.pageSize+\"&status=Y&companyname=\"+e.YformInline.companyname+\"&customername=\"+e.YformInline.name+\"&customertel=\"+e.YformInline.tel+\"&productname=\"+e.YformInline.product+\"&marketer=\"+e.YformInline.marketername+\"&servicer=\"+e.YformInline.servicename;e.row={},this.GetData(t,function(t){var a=t.data.data;e.pageTotal=a.total,e.data=a.rows;for(var s=0;s<e.data.length;s++)e.data[s].company_id=e.data[s].companyid,null==e.data[s].enddate||\"\"==e.data[s].enddate||(e.data[s].enddate=e.data[s].enddate.slice(0,10)),null==e.data[s].callbackdate||\"\"==e.data[s].callbackdate||(e.data[s].callbackdate=e.data[s].callbackdate.slice(0,10)),null==e.data[s].servicebegindate||\"\"==e.data[s].servicebegindate||(e.data[s].servicebegindate=e.data[s].servicebegindate.slice(0,10))})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},selectrow:function(e){this.row=e}},mounted:function(){this.getData()},created:function(){var e=this;s.a.$on(\"updateofflinecustomer\",function(t){e.getData()})}},c=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:e.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.companyname,callback:function(t){e.$set(e.YformInline,\"companyname\",t)},expression:\"YformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.name,callback:function(t){e.$set(e.YformInline,\"name\",t)},expression:\"YformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.tel,callback:function(t){e.$set(e.YformInline,\"tel\",t)},expression:\"YformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.product,callback:function(t){e.$set(e.YformInline,\"product\",t)},expression:\"YformInline.product\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.marketername,callback:function(t){e.$set(e.YformInline,\"marketername\",t)},expression:\"YformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.servicename,callback:function(t){e.$set(e.YformInline,\"servicename\",t)},expression:\"YformInline.servicename\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.check}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data},on:{\"on-row-click\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);c.options.__file=\"processed.vue\";var m=c.exports,d=a(25),p={data:function(){return{searchCompany:\"\",searchProduct:\"\",searchFollow:\"\",isOpenAdd:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"},task_message_rule:{taxperiod:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],company:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],product:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],enddate:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"date\"}],reasonformarketer:[{required:!0,message:\"必选项！\",trigger:\"blur\"}]},followbysTag:!1,fuwu:!1,title:\"\",isshow:!0,currentPage:new Number,isSearch:!1,data4:[],data33:[],data3:[],page3:1,page33:1,pagea:1,pageTotal3:new Number,pageTotal33:new Number,pageTotala:new Number,selectCompany:!1,selectProduct:!1,columns3:[{title:\"用户名\",key:\"username\"},{title:\"真实姓名\",key:\"realname\"},{title:\"电话\",key:\"mobilephone\"}],columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"},{title:\"钱包余额\",key:\"balance\"},{title:\"是否国地税报道\",key:\"gdsreport\"}],columns33:[{title:\"产品名称\",key:\"product\",width:300}]}},created:function(){var e=this;e.$bus.on(\"OPEN_OFFLINE_ADD\",function(t){e.isOpenAdd=!0,e.$refs.task_message.resetFields(),e.task_message.company=\"\",e.task_message.product=\"\",e.task_message.customer=\"\",e.task_message.id=\"\",e.task_message.servicebegindate=\"\",e.task_message.enddate=\"\",e.task_message.callbackdate=\"\",e.task_message.endreason=\"\",e.task_message.reasonformarketer=\"\",e.task_message.reasonforcallback=\"\",e.task_message.marketername=\"\",e.task_message.servicername=\"\",e.task_message.tel=\"\",e.task_message.taxperiod=\"\",e.task_message.followbusiness=\"\"})},methods:{cancel:function(){this.isshow=!1,this.$refs.task_message.resetFields(),this.task_message.companyid=\"\",this.task_message.id=\"\"},keydown3:function(e){\"Enter\"==e.key&&this.searchFollowdata()},searchFollowdata:function(){this.pagea=1,this.getUser()},keydown1:function(e){\"Enter\"==e.key&&this.searchCompanyData()},searchCompanyData:function(){this.page3=1,this.getCompany()},keydown2:function(e){\"Enter\"==e.key&&this.searchProductData()},searchProductData:function(){this.page33=1,this.getProduct()},getCompany:function(){var e=this;e.selectCompany=!0;var t;t=\"api/customer/company/list\";var a={params:{page:e.page3,pageSize:10,companyname:e.searchCompany}};this.$Get(t,a,function(t){var a=t.data.data;e.data4=[],e.pageTotal3=a.total;for(var s=0;s<a.rows.length;s++){var r=\"\";r=\"wbd\"==a.rows[s].gdsreport?\"未报道\":\"ybd\"==a.rows[s].gdsreport?\"已报道\":\"bybd\"==a.rows[s].gdsreport?\"不用报道\":\"\",e.data4.push({CompanyName:a.rows[s].companyname,TEL:a.rows[s].customerTel,NAME:a.rows[s].customerName,cpid:a.rows[s].id,balance:a.rows[s].balance,gdsreport:r,followby:a.rows[s].followby,followbyid:a.rows[s].followbyid})}})},close:function(){this.cancel(),this.add=!1,this.task_message.company=\"\",this.task_message.product=\"\",this.task_message.customer=\"\",this.task_message.id=\"\"},getProduct:function(){var e=this,t={params:{page:e.page33,pageSize:10,product:e.searchProduct}};e.selectProduct=!0,this.$Get(\"api/product/list\",t,function(t){var a=t.data.data;e.data33=[],e.pageTotal33=a.total;for(var s=0;s<a.rows.length;s++)e.data33.push(a.rows[s])})},rowSelect:function(e){this.selectCompany=!1,this.task_message.company=e.CompanyName,this.task_message.customer=e.NAME,this.task_message.tel=e.TEL,this.task_message.companyid=e.cpid,this.task_message.marketername=e.followby,this.task_message.marketer=e.followbyid},rowSelect33:function(e){this.selectProduct=!1,this.task_message.product=e.product,this.task_message.productid=e.id},getUser:function(){var e=this,t={params:{page:e.pagea,pageSize:10,realname:e.searchFollow}};e.followbysTag=!0,this.$Get(\"api/user/list\",t,function(t){var a=t.data.data;e.pageTotala=a.total,e.data3=[];for(var s=0;s<a.rows.length;s++)e.data3.push(a.rows[s])})},rowSelect3:function(e){this.followbysTag=!1,this.task_message.servicername=e.realname,this.task_message.servicer=e.id},pageChange3:function(e){this.page3=e,this.getCompany()},pageChange33:function(e){this.page33=e,this.getProduct()},pageChangea:function(e){this.pagea=e,this.getUser()},submit:function(){var e=this,t=this;this.$refs.task_message.validate(function(a){a?t.postData():e.$Message.error(\"请填写必选项！\")})},postData:function(){var e=this,t={companyid:e.task_message.companyid,productid:e.task_message.productid,servicer:e.task_message.servicer,marketer:e.task_message.marketer,enddate:Object(d.a)(e.task_message.enddate),callbackdate:Object(d.a)(e.task_message.callbackdate),servicebegindate:Object(d.a)(e.task_message.servicebegindate),reasonformarketer:e.task_message.reasonformarketer,reasonforcallback:e.task_message.reasonforcallback,endreason:e.task_message.endreason,taxperiod:e.task_message.taxperiod,followbusiness:e.task_message.followbusiness};this.$Post(\"api/customer/createCustomerEnd\",t,function(t){if(s.a.$emit(\"updateofflinecustomer\",!0),t.data.data.cycleid){var a={id:t.data.data.cycleid,serviceStatus:\"stop\",downlinePeriod:e.task_message.taxperiod};e.$Post(\"/api/order/cycle/service/record/update\",a,function(t){e.add=!1},function(e){})}else e.isOpenAdd=!1;e.cancel()},function(e){})}}},u=Object(n.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"录入\",width:\"800\"},model:{value:e.isOpenAdd,callback:function(t){e.isOpenAdd=t},expression:\"isOpenAdd\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:e.task_message,rules:e.task_message_rule,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getCompany},model:{value:e.task_message.company,callback:function(t){e.$set(e.task_message,\"company\",t)},expression:\"task_message.company\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getProduct},model:{value:e.task_message.product,callback:function(t){e.$set(e.task_message,\"product\",t)},expression:\"task_message.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getCompany},model:{value:e.task_message.customer,callback:function(t){e.$set(e.task_message,\"customer\",t)},expression:\"task_message.customer\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.task_message.tel,callback:function(t){e.$set(e.task_message,\"tel\",t)},expression:\"task_message.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getUser},model:{value:e.task_message.servicername,callback:function(t){e.$set(e.task_message,\"servicername\",t)},expression:\"task_message.servicername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.task_message.marketername,callback:function(t){e.$set(e.task_message,\"marketername\",t)},expression:\"task_message.marketername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"month\",size:\"small\"},model:{value:e.task_message.servicebegindate,callback:function(t){e.$set(e.task_message,\"servicebegindate\",t)},expression:\"task_message.servicebegindate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:e.task_message.enddate,callback:function(t){e.$set(e.task_message,\"enddate\",t)},expression:\"task_message.enddate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:e.task_message.callbackdate,callback:function(t){e.$set(e.task_message,\"callbackdate\",t)},expression:\"task_message.callbackdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\"},model:{value:e.task_message.endreason,callback:function(t){e.$set(e.task_message,\"endreason\",t)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[e._v(\"公司转让\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[e._v(\"企业升级\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[e._v(\"会计部\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[e._v(\"换同行\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\"},model:{value:e.task_message.taxperiod,callback:function(t){e.$set(e.task_message,\"taxperiod\",t)},expression:\"task_message.taxperiod\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.reasonformarketer,callback:function(t){e.$set(e.task_message,\"reasonformarketer\",t)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.reasonforcallback,callback:function(t){e.$set(e.task_message,\"reasonforcallback\",t)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.followbusiness,callback:function(t){e.$set(e.task_message,\"followbusiness\",t)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.submit}},[e._v(\"新增\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.close}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:e.selectCompany,callback:function(t){e.selectCompany=t},expression:\"selectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":e.keydown1},model:{value:e.searchCompany,callback:function(t){e.searchCompany=t},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchCompanyData},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.columns44,data:e.data4},on:{\"on-row-dblclick\":e.rowSelect}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal3,current:e.page3,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page3=t},\"on-change\":e.pageChange3}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择产品\",width:\"300\"},model:{value:e.selectProduct,callback:function(t){e.selectProduct=t},expression:\"selectProduct\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"20\"}},[a(\"Input\",{attrs:{placeholder:\"输入产品名称搜索\"},on:{\"on-keydown\":e.keydown2},model:{value:e.searchProduct,callback:function(t){e.searchProduct=t},expression:\"searchProduct\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchProductData},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.columns33,data:e.data33},on:{\"on-row-dblclick\":e.rowSelect33}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal33,current:e.page33,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page33=t},\"on-change\":e.pageChange33}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择服务人员\",width:\"500\"},model:{value:e.followbysTag,callback:function(t){e.followbysTag=t},expression:\"followbysTag\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{placeholder:\"输服务人员搜索\"},on:{\"on-keydown\":e.keydown3},model:{value:e.searchFollow,callback:function(t){e.searchFollow=t},expression:\"searchFollow\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchFollowdata},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:e.columns3,data:e.data3},on:{\"on-row-dblclick\":e.rowSelect3}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotala,\"show-total\":\"\",\"show-elevator\":\"\",current:e.pagea},on:{\"update:current\":function(t){e.pagea=t},\"on-change\":e.pageChangea}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);u.options.__file=\"add.vue\";var h=u.exports,f={data:function(){return{searchCompany:\"\",searchProduct:\"\",searchFollow:\"\",isOpenEdit:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"},task_message_rule:{taxperiod:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],company:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],product:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],enddate:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"date\"}],reasonformarketer:[{required:!0,message:\"必选项！\",trigger:\"blur\"}]},followbysTag:!1,fuwu:!1,title:\"\",isshow:!0,currentPage:new Number,isSearch:!1,data4:[],data33:[],data3:[],page3:1,page33:1,pagea:1,pageTotal3:new Number,pageTotal33:new Number,pageTotala:new Number,selectCompany:!1,selectProduct:!1,columns3:[{title:\"用户名\",key:\"username\"},{title:\"真实姓名\",key:\"realname\"},{title:\"电话\",key:\"mobilephone\"}],columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"},{title:\"钱包余额\",key:\"balance\"},{title:\"是否国地税报道\",key:\"gdsreport\"}],columns33:[{title:\"产品名称\",key:\"product\",width:300}]}},created:function(){var e=this;e.$bus.on(\"OPEN_OFFLINE_UPDATE\",function(t){e.$refs.task_message.resetFields(),e.isOpenEdit=!0,e.task_message.company=t.CompanyName,e.task_message.product=t.product,e.task_message.customer=t.name,e.task_message.id=t.id,e.task_message.servicebegindate=t.servicebegindate,e.task_message.enddate=t.enddate,e.task_message.callbackdate=t.callbackdate,e.task_message.endreason=t.endreason,e.task_message.reasonformarketer=t.reasonformarketer,e.task_message.reasonforcallback=t.reasonforcallback,e.task_message.marketername=t.marketer,e.task_message.servicername=t.servicer,e.task_message.tel=t.TEL,e.task_message.taxperiod=t.taxperiod,e.task_message.followbusiness=t.followbusiness})},methods:{cancel:function(){this.isshow=!1,this.$refs.task_message.resetFields(),this.task_message.companyid=\"\",this.task_message.id=\"\"},keydown3:function(e){\"Enter\"==e.key&&this.searchFollowdata()},searchFollowdata:function(){this.pagea=1,this.getUser()},keydown1:function(e){\"Enter\"==e.key&&this.searchCompanyData()},searchCompanyData:function(){this.page3=1,this.getCompany()},keydown2:function(e){\"Enter\"==e.key&&this.searchProductData()},searchProductData:function(){this.page33=1,this.getProduct()},getCompany:function(){var e=this;e.selectCompany=!0;var t;t=\"api/customer/company/list\";var a={params:{page:e.page3,pageSize:10,companyname:e.searchCompany}};this.$Get(t,a,function(t){var a=t.data.data;e.data4=[],e.pageTotal3=a.total;for(var s=0;s<a.rows.length;s++){var r=\"\";r=\"wbd\"==a.rows[s].gdsreport?\"未报道\":\"ybd\"==a.rows[s].gdsreport?\"已报道\":\"bybd\"==a.rows[s].gdsreport?\"不用报道\":\"\",e.data4.push({CompanyName:a.rows[s].companyname,TEL:a.rows[s].customerTel,NAME:a.rows[s].customerName,cpid:a.rows[s].id,balance:a.rows[s].balance,gdsreport:r,followby:a.rows[s].followby,followbyid:a.rows[s].followbyid})}})},close:function(){this.cancel(),this.add=!1,this.task_message.company=\"\",this.task_message.product=\"\",this.task_message.customer=\"\",this.task_message.id=\"\",this.$refs.task_message.resetFields()},getProduct:function(){var e=this,t={params:{page:e.page33,pageSize:10,product:e.searchProduct}};e.selectProduct=!0,this.$Get(\"api/product/list\",t,function(t){var a=t.data.data;e.data33=[],e.pageTotal33=a.total;for(var s=0;s<a.rows.length;s++)e.data33.push(a.rows[s])})},rowSelect:function(e){this.selectCompany=!1,this.task_message.company=e.CompanyName,this.task_message.customer=e.NAME,this.task_message.tel=e.TEL,this.task_message.companyid=e.cpid,this.task_message.marketername=e.followby,this.task_message.marketer=e.followbyid},rowSelect33:function(e){this.selectProduct=!1,this.task_message.product=e.product,this.task_message.productid=e.id},getUser:function(){var e=this,t={params:{page:e.pagea,pageSize:10,realname:e.searchFollow}};e.followbysTag=!0,this.$Get(\"api/user/list\",t,function(t){var a=t.data.data;e.pageTotala=a.total,e.data3=[];for(var s=0;s<a.rows.length;s++)e.data3.push(a.rows[s])})},rowSelect3:function(e){this.followbysTag=!1,this.task_message.servicername=e.realname,this.task_message.servicer=e.id},pageChange3:function(e){this.page3=e,this.getCompany()},pageChange33:function(e){this.page33=e,this.getProduct()},pageChangea:function(e){this.pagea=e,this.getUser()},submit:function(){var e=this,t=this;this.$refs.task_message.validate(function(a){a?t.postDataEdit():e.$Message.error(\"请填写必选项！\")})},postDataEdit:function(){var e=this,t={id:e.task_message.id,productid:e.task_message.productid,servicer:e.task_message.servicer,marketer:e.task_message.marketer,enddate:Object(d.a)(e.task_message.enddate),callbackdate:Object(d.a)(e.task_message.callbackdate),servicebegindate:Object(d.a)(e.task_message.servicebegindate),reasonformarketer:e.task_message.reasonformarketer,reasonforcallback:e.task_message.reasonforcallback,endreason:e.task_message.endreason,taxperiod:e.task_message.taxperiod,followbusiness:e.task_message.followbusiness};this.$Post(\"api/customer/updateCustomerEnd\",t,function(t){e.isOpenEdit=!1,s.a.$emit(\"updateofflinecustomer\",!0),e.cancel()},function(e){})}}},g=Object(n.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},model:{value:e.isOpenEdit,callback:function(t){e.isOpenEdit=t},expression:\"isOpenEdit\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:e.task_message,rules:e.task_message_rule,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getCompany},model:{value:e.task_message.company,callback:function(t){e.$set(e.task_message,\"company\",t)},expression:\"task_message.company\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getProduct},model:{value:e.task_message.product,callback:function(t){e.$set(e.task_message,\"product\",t)},expression:\"task_message.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getCompany},model:{value:e.task_message.customer,callback:function(t){e.$set(e.task_message,\"customer\",t)},expression:\"task_message.customer\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.task_message.tel,callback:function(t){e.$set(e.task_message,\"tel\",t)},expression:\"task_message.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":e.getUser},model:{value:e.task_message.servicername,callback:function(t){e.$set(e.task_message,\"servicername\",t)},expression:\"task_message.servicername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.task_message.marketername,callback:function(t){e.$set(e.task_message,\"marketername\",t)},expression:\"task_message.marketername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:e.task_message.servicebegindate,callback:function(t){e.$set(e.task_message,\"servicebegindate\",t)},expression:\"task_message.servicebegindate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:e.task_message.enddate,callback:function(t){e.$set(e.task_message,\"enddate\",t)},expression:\"task_message.enddate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:e.task_message.callbackdate,callback:function(t){e.$set(e.task_message,\"callbackdate\",t)},expression:\"task_message.callbackdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\"},model:{value:e.task_message.endreason,callback:function(t){e.$set(e.task_message,\"endreason\",t)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[e._v(\"公司转让\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[e._v(\"企业升级\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[e._v(\"会计部\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[e._v(\"换同行\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\"},model:{value:e.task_message.taxperiod,callback:function(t){e.$set(e.task_message,\"taxperiod\",t)},expression:\"task_message.taxperiod\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.reasonformarketer,callback:function(t){e.$set(e.task_message,\"reasonformarketer\",t)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.reasonforcallback,callback:function(t){e.$set(e.task_message,\"reasonforcallback\",t)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.followbusiness,callback:function(t){e.$set(e.task_message,\"followbusiness\",t)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.submit}},[e._v(\"修改\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.close}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:e.selectCompany,callback:function(t){e.selectCompany=t},expression:\"selectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":e.keydown1},model:{value:e.searchCompany,callback:function(t){e.searchCompany=t},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchCompanyData},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.columns44,data:e.data4},on:{\"on-row-dblclick\":e.rowSelect}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal3,current:e.page3,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page3=t},\"on-change\":e.pageChange3}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择产品\",width:\"300\"},model:{value:e.selectProduct,callback:function(t){e.selectProduct=t},expression:\"selectProduct\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"20\"}},[a(\"Input\",{attrs:{placeholder:\"输入产品名称搜索\"},on:{\"on-keydown\":e.keydown2},model:{value:e.searchProduct,callback:function(t){e.searchProduct=t},expression:\"searchProduct\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchProductData},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.columns33,data:e.data33},on:{\"on-row-dblclick\":e.rowSelect33}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal33,current:e.page33,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page33=t},\"on-change\":e.pageChange33}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择服务人员\",width:\"500\"},model:{value:e.followbysTag,callback:function(t){e.followbysTag=t},expression:\"followbysTag\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{placeholder:\"输服务人员搜索\"},on:{\"on-keydown\":e.keydown3},model:{value:e.searchFollow,callback:function(t){e.searchFollow=t},expression:\"searchFollow\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchFollowdata},slot:\"append\"},[e._v(\"搜索\")])],1)],1)],1),e._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:e.columns3,data:e.data3},on:{\"on-row-dblclick\":e.rowSelect3}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotala,\"show-total\":\"\",\"show-elevator\":\"\",current:e.pagea},on:{\"update:current\":function(t){e.pagea=t},\"on-change\":e.pageChangea}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);g.options.__file=\"update.vue\";var v=g.exports,y={data:function(){return{isOpenShow:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"}}},created:function(){var e=this;this.$bus.on(\"OPEN_OFFLINE_SHOW\",function(t){e.$refs.task_message.resetFields(),e.isOpenShow=!0,e.task_message.company=t.CompanyName,null==t.product||\"\"==t.product?e.task_message.product=\".\":e.task_message.product=t.product,e.task_message.customer=t.name,e.task_message.servicebegindate=t.servicebegindate,e.task_message.enddate=t.enddate,e.task_message.callbackdate=t.callbackdate,e.task_message.endreason=t.endreason,e.task_message.reasonformarketer=t.reasonformarketer,e.task_message.reasonforcallback=t.reasonforcallback,e.task_message.marketername=t.marketer,e.task_message.servicername=t.servicer,e.task_message.taxperiod=t.taxperiod,e.task_message.tel=t.TEL,e.task_message.followbusiness=t.followbusiness})}},k=Object(n.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},model:{value:e.isOpenShow,callback:function(t){e.isOpenShow=t},expression:\"isOpenShow\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:e.task_message,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.company,callback:function(t){e.$set(e.task_message,\"company\",t)},expression:\"task_message.company\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.product,callback:function(t){e.$set(e.task_message,\"product\",t)},expression:\"task_message.product\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.customer,callback:function(t){e.$set(e.task_message,\"customer\",t)},expression:\"task_message.customer\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.tel,callback:function(t){e.$set(e.task_message,\"tel\",t)},expression:\"task_message.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.servicername,callback:function(t){e.$set(e.task_message,\"servicername\",t)},expression:\"task_message.servicername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.task_message.marketername,callback:function(t){e.$set(e.task_message,\"marketername\",t)},expression:\"task_message.marketername\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:e.task_message.servicebegindate,callback:function(t){e.$set(e.task_message,\"servicebegindate\",t)},expression:\"task_message.servicebegindate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:e.task_message.enddate,callback:function(t){e.$set(e.task_message,\"enddate\",t)},expression:\"task_message.enddate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:e.task_message.callbackdate,callback:function(t){e.$set(e.task_message,\"callbackdate\",t)},expression:\"task_message.callbackdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",disabled:\"\"},model:{value:e.task_message.endreason,callback:function(t){e.$set(e.task_message,\"endreason\",t)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[e._v(\"公司转让\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[e._v(\"企业升级\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[e._v(\"会计部\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[e._v(\"换同行\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[e._v(\"注销\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\",readonly:\"\"},model:{value:e.task_message.taxperiod,callback:function(t){e.$set(e.task_message,\"taxperiod\",t)},expression:\"task_message.taxperiod\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5},readonly:\"\"},model:{value:e.task_message.reasonformarketer,callback:function(t){e.$set(e.task_message,\"reasonformarketer\",t)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5},readonly:\"\"},model:{value:e.task_message.reasonforcallback,callback:function(t){e.$set(e.task_message,\"reasonforcallback\",t)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:e.task_message.followbusiness,callback:function(t){e.$set(e.task_message,\"followbusiness\",t)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);k.options.__file=\"show.vue\";var _={name:\"offlineCustomer_index\",components:{Untreated:l,Processed:m,Add:h,show:k.exports,update:v},data:function(){return{isOpen:!1}},created:function(){}},b=Object(n.a)(_,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(\"Tabs\",{attrs:{value:\"name1\"}},[t(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[t(\"Untreated\")],1),this._v(\" \"),t(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[t(\"processed\")],1)],1),this._v(\" \"),t(\"Add\"),this._v(\" \"),t(\"update\"),this._v(\" \"),t(\"show\")],1)},[],!1,null,null,null);b.options.__file=\"offline_index.vue\";t.default=b.exports},406:function(e,t,a){\"use strict\";a.r(t);var s=a(85);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],components:{},data:function(){var e=this;return{selectRowArray:[],loading:!1,search_model:\"\",NformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"#\",type:\"selection\",width:60},{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:180},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\",format:\"departAlias\"},{field:\"serviceranks\",title:\"服务评分\"}])),sortField:\"callbackdate\",datatype:2,companyname:this.NformInline.companyname,name:this.NformInline.name,tel:this.NformInline.tel,servicename:this.NformInline.servicename,marketername:this.NformInline.marketername,depart:this.NformInline.depart,bcreatedate:Object(s.a)(this.NformInline.createdate[0]),ecreatedate:Object(s.a)(this.NformInline.createdate[1]),bcallbackdate:Object(s.a)(this.NformInline.updatedate[0]),ecallbackdate:Object(s.a)(this.NformInline.updatedate[1]),productname:this.NformInline.productname},t=this.$MergeURL(\"api/customer/customerCallbackList\",e);window.open(t)},search:function(){this.page=1,this.getDataN()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.servicename=\"\",this.NformInline.marketername=\"\",this.NformInline.depart=\"\",this.NformInline.createdate=[],this.NformInline.updatedate=[],this.NformInline.productname=\"\",this.getDataN()},pageChange:function(e){this.page=e,this.getDataN()},pageSizeChange:function(e){this.pageSize=e,this.getDataN()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getDataN:function(){var e,t=this;t.loading=!0;t.row=\"\";var a={params:(e={sortField:\"callbackdate\",page:t.page,pageSize:t.pageSize,status:\"N\",companyname:t.NformInline.companyname,name:t.NformInline.name,tel:t.NformInline.tel,servicename:t.NformInline.servicename,marketername:t.NformInline.marketername,depart:t.NformInline.depart,datatype:2,bcreatedate:Object(s.a)(t.NformInline.createdate[0]),ecreatedate:Object(s.a)(t.NformInline.createdate[1]),bcallbackdate:Object(s.a)(t.NformInline.updatedate[0]),ecallbackdate:Object(s.a)(t.NformInline.updatedate[1]),productname:t.NformInline.productname},r(e,\"sortField\",\"updatedate\"),r(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",a).then(function(e){t.$backToLogin(e),t.data=e.data.data.rows,t.pageTotal=e.data.data.total;for(var a=0;a<e.data.data.rows.length;a++)if(t.data[a].num=\"1\",t.data[a].company_id=t.data[a].companyid,null==t.data[a].createdate||\"\"==t.data[a].createdate||(t.data[a].createdate=t.data[a].createdate.slice(0,10)),null==t.data[a].callbackdate||\"\"==t.data[a].callbackdate||(t.data[a].callbackdate=t.data[a].callbackdate.slice(0,10)),t.data[a].calltypeNAME=t.hfwtlxMap.get(t.data[a].calltype),t.data[a].callbackstatusName=t.hfztMap.get(t.data[a].callbackstatus),null==t.data[a].depart||\"\"==t.data[a].depart)t.data[a].depart=\"\";else{for(var s=t.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=t.departAliasMap.get(s[r]);t.data[a].departNAME=s.join(\",\")}t.loading=!1})},select_change:function(e){this.selectRowArray=e},finish:function(){var e=this;if(0==this.selectRowArray.length)e.$Message.warning(\"请先勾选需要批量处理的行！\");else{for(var t=[],a=0;a<e.selectRowArray.length;a++)t.push(e.selectRowArray[a].id);var s={ids:t.join(\",\")};e.$Post(\"api/customer/callback/batch/finish\",s,function(t){e.$bus.emit(\"update_returnVisit_edit\")},function(e){})}}},created:function(){var e=this;this.getDataN(),e.$bus.on(\"update_returnVisit_edit\",function(t){e.getDataN()})}},o=a(2),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:e.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.companyname,callback:function(t){e.$set(e.NformInline,\"companyname\",t)},expression:\"NformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.name,callback:function(t){e.$set(e.NformInline,\"name\",t)},expression:\"NformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.tel,callback:function(t){e.$set(e.NformInline,\"tel\",t)},expression:\"NformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.servicename,callback:function(t){e.$set(e.NformInline,\"servicename\",t)},expression:\"NformInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.marketername,callback:function(t){e.$set(e.NformInline,\"marketername\",t)},expression:\"NformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.depart,callback:function(t){e.$set(e.NformInline,\"depart\",t)},expression:\"NformInline.depart\"}},e._l(e.departAlias,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.productname,callback:function(t){e.$set(e.NformInline,\"productname\",t)},expression:\"NformInline.productname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:e.NformInline.createdate,callback:function(t){e.$set(e.NformInline,\"createdate\",t)},expression:\"NformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.NformInline.updatedate,callback:function(t){e.$set(e.NformInline,\"updatedate\",t)},expression:\"NformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.show}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.finish}},[e._v(\"完结\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data},on:{\"on-selection-change\":e.select_change,\"on-current-change\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",current:e.page,\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);l.options.__file=\"untreated.vue\";var i=l.exports;function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],data:function(){var e=this;return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"公司名称\",key:\"companyname\",width:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"alisname\",width:150},{title:\"完结状态\",key:\"isfinish\",width:120},{title:\"问题类型\",key:\"calltypeNAME\",width:120},{title:\"创建时间\",key:\"createdate\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:120},{title:\"回访状态\",key:\"callbackstatusName\",width:120},{title:\"服务人员\",key:\"server_realname\",width:120},{title:\"市场人员\",key:\"followby_realname\",width:120},{title:\"责任部门\",key:\"departNAME\",width:120},{title:\"服务评分\",key:\"serviceranks\",width:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"servicename\",title:\"服务人员\"},{field:\"marketername\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\",format:\"departAlias\"},{field:\"serviceranks\",title:\"服务评分\"}])),companyname:this.YformInline.companyname,name:this.YformInline.name,tel:this.YformInline.tel,sortField:\"callbackdate\",datatype:2,servicename:this.YformInline.servicename,marketername:this.YformInline.marketername,depart:this.YformInline.depart,bcreatedate:Object(s.a)(this.YformInline.createdate[0]),ecreatedate:Object(s.a)(this.YformInline.createdate[1]),bcallbackdate:Object(s.a)(this.YformInline.updatedate[0]),ecallbackdate:Object(s.a)(this.YformInline.updatedate[1]),productname:this.YformInline.productname},t=this.$MergeURL(\"api/customer/customerCallbackList\",e);window.open(t)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.servicename=\"\",this.YformInline.marketername=\"\",this.YformInline.depart=\"\",this.YformInline.createdate=[],this.YformInline.updatedate=[],this.YformInline.productname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getData:function(){var e,t=this;t.loading=!0,t.row=\"\";var a={params:(e={sortField:\"callbackdate\",page:t.page,pageSize:t.pageSize,status:\"Y\",companyname:t.YformInline.companyname,name:t.YformInline.name,tel:t.YformInline.tel,servicename:t.YformInline.servicename,marketername:t.YformInline.marketername,depart:t.YformInline.depart,datatype:2,bcreatedate:Object(s.a)(t.YformInline.createdate[0]),ecreatedate:Object(s.a)(t.YformInline.createdate[1]),bcallbackdate:Object(s.a)(t.YformInline.updatedate[0]),ecallbackdate:Object(s.a)(t.YformInline.updatedate[1]),productname:t.YformInline.productname},c(e,\"sortField\",\"updatedate\"),c(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",a).then(function(e){t.data=e.data.data.rows,t.pageTotal=e.data.data.total;for(var a=0;a<e.data.data.rows.length;a++)if(t.data[a].num=\"1\",t.data[a].company_id=t.data[a].companyid,null==t.data[a].createdate||\"\"==t.data[a].createdate||(t.data[a].createdate=t.data[a].createdate.slice(0,10)),null==t.data[a].callbackdate||\"\"==t.data[a].callbackdate||(t.data[a].callbackdate=t.data[a].callbackdate.slice(0,10)),t.data[a].calltypeNAME=t.hfwtlxMap.get(t.data[a].calltype),t.data[a].callbackstatusName=t.hfztMap.get(t.data[a].callbackstatus),null==t.data[a].depart||\"\"==t.data[a].depart)t.data[a].depart=\"\";else{for(var s=t.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=t.departAliasMap.get(s[r]);t.data[a].departNAME=s.join(\",\")}t.loading=!1})}},created:function(){var e=this;this.getData(),e.$bus.on(\"update_returnVisit_edit\",function(t){e.getData()})}},d=Object(o.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:e.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.companyname,callback:function(t){e.$set(e.YformInline,\"companyname\",t)},expression:\"YformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.name,callback:function(t){e.$set(e.YformInline,\"name\",t)},expression:\"YformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.tel,callback:function(t){e.$set(e.YformInline,\"tel\",t)},expression:\"YformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.servicename,callback:function(t){e.$set(e.YformInline,\"servicename\",t)},expression:\"YformInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.marketername,callback:function(t){e.$set(e.YformInline,\"marketername\",t)},expression:\"YformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.depart,callback:function(t){e.$set(e.YformInline,\"depart\",t)},expression:\"YformInline.depart\"}},e._l(e.departAlias,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.productname,callback:function(t){e.$set(e.YformInline,\"productname\",t)},expression:\"YformInline.productname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:e.YformInline.createdate,callback:function(t){e.$set(e.YformInline,\"createdate\",t)},expression:\"YformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.YformInline.updatedate,callback:function(t){e.$set(e.YformInline,\"updatedate\",t)},expression:\"YformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.show}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitY-edit\"],expression:\"['returnVisitY-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data},on:{\"on-current-change\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);d.options.__file=\"processed.vue\";var p=d.exports,u=(a(9),a(25)),h={props:{companyname:{type:[String]},hfwtlx:{type:[Array,String]},hfzt:{type:[Array,String]},departAlias:{type:[Array,String]}},data:function(){return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],hfwtlx_map:new Map,hfzt_map:new Map,departAlias_map:new Map,header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:150},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120}]}},methods:{pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},show:function(e){},getData:function(){var e=this;e.loading=!0,e.row=\"\";var t={params:{sortField:\"callbackdate\",page:e.page,pageSize:e.pageSize,datatype:2,companyname:e.companyname}};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(t){e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)if(e.data[a].company_id=e.data[a].companyid,null==e.data[a].createdate||\"\"==e.data[a].createdate||(e.data[a].createdate=e.data[a].createdate.slice(0,10)),null==e.data[a].callbackdate||\"\"==e.data[a].callbackdate||(e.data[a].callbackdate=e.data[a].callbackdate.slice(0,10)),e.data[a].calltypeNAME=e.hfwtlx_map.get(e.data[a].calltype),e.data[a].callbackstatusName=e.hfzt_map.get(e.data[a].callbackstatus),null==e.data[a].depart||\"\"==e.data[a].depart)e.data[a].depart=\"\";else{for(var s=e.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=e.departAlias_map.get(s[r]);e.data[a].departNAME=s.join(\",\")}e.loading=!1})},getDataCenter:function(){this.hfwtlx_map=this.$array2map(this.hfwtlx),this.hfzt_map=this.$array2map(this.hfzt),this.departAlias_map=this.$array2map(this.departAlias),this.getData()}},watch:{companyname:\"getData\"},created:function(){this.getDataCenter()}},f=Object(o.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);f.options.__file=\"histroy_list_show.vue\";var g=f.exports,v={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{add_complaint_detail:function(){var e=this;e.loading=!0;var t={callbackdate:Object(u.a)(e.data.callbackdate),id:e.data.id,solutionbymarketer:e.data.solutionbymarketer,solutionbyservicer:e.data.solutionbyservicer,depart:e.data.depart.join(\",\"),serviceranks:e.data.serviceranks,calltype:e.data.calltype,callbackstatus:e.data.callbackstatus,reason:e.data.reason};this.$Post(\"api/customer/updateCustomerCallback\",t,function(t){e.loading=!1,e.$bus.emit(\"update_returnVisit_edit\",!0),e.close()},function(t){e.loading=!1})},close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"));var e=localStorage.getItem(\"Role\"),t=localStorage.getItem(\"id\");e=JSON.parse(e);for(var a=0;a<e.length;a++)\"salers\"!=e[a]&&10059!=t||(this.ismarket=!1),\"hfgl\"!=e[a]&&10059!=t||(this.isreturn=!1),\"kj\"!=e[a]&&\"servicer\"!=e[a]&&\"planner\"!=e[a]&&\"auditing\"!=e[a]&&\"ssbgd\"!=e[a]&&\"kjbgd\"!=e[a]&&\"qhbgd\"!=e[a]&&\"sjbgd\"!=e[a]&&10059!=t||(this.isservice=!1)}},y=Object(o.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},on:{\"on-cancel\":e.close},model:{value:e.isOpenEdit,callback:function(t){e.isOpenEdit=t},expression:\"isOpenEdit\"}},[a(\"Tabs\",{model:{value:e.showTab,callback:function(t){e.showTab=t},expression:\"showTab\"}},[a(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[a(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:e.data,\"label-width\":140}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.companyname,callback:function(t){e.$set(e.data,\"companyname\",t)},expression:\"data.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.name,callback:function(t){e.$set(e.data,\"name\",t)},expression:\"data.name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.TEL,callback:function(t){e.$set(e.data,\"TEL\",t)},expression:\"data.TEL\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.alisname,callback:function(t){e.$set(e.data,\"alisname\",t)},expression:\"data.alisname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.server_realname,callback:function(t){e.$set(e.data,\"server_realname\",t)},expression:\"data.server_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.followby_realname,callback:function(t){e.$set(e.data,\"followby_realname\",t)},expression:\"data.followby_realname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",disabled:e.isreturn},model:{value:e.data.serviceranks,callback:function(t){e.$set(e.data,\"serviceranks\",t)},expression:\"data.serviceranks\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:e.isreturn},model:{value:e.data.calltype,callback:function(t){e.$set(e.data,\"calltype\",t)},expression:\"data.calltype\"}},e._l(e.hfwtlx,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"CheckboxGroup\",{model:{value:e.data.depart,callback:function(t){e.$set(e.data,\"depart\",t)},expression:\"data.depart\"}},e._l(e.departAlias,function(t){return a(\"span\",{key:t.id},[a(\"Checkbox\",{attrs:{label:t.typecode,disabled:e.isreturn}},[a(\"span\",[e._v(e._s(t.typename))])])],1)}),0)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:e.isreturn},model:{value:e.data.callbackstatus,callback:function(t){e.$set(e.data,\"callbackstatus\",t)},expression:\"data.callbackstatus\"}},e._l(e.hfzt,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",disabled:e.isreturn},model:{value:e.data.callbackdate,callback:function(t){e.$set(e.data,\"callbackdate\",t)},expression:\"data.callbackdate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.isreturn},model:{value:e.data.reason,callback:function(t){e.$set(e.data,\"reason\",t)},expression:\"data.reason\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.ismarket},model:{value:e.data.solutionbymarketer,callback:function(t){e.$set(e.data,\"solutionbymarketer\",t)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.isservice},model:{value:e.data.solutionbyservicer,callback:function(t){e.$set(e.data,\"solutionbyservicer\",t)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[a(\"history-list\",{attrs:{companyname:e.data.companyname,hfwtlx:e.hfwtlx,hfzt:e.hfzt,departAlias:e.departAlias}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.add_complaint_detail}},[e._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);y.options.__file=\"edit.vue\";var k=y.exports,_={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"))}},b=Object(o.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},on:{\"on-cancel\":e.close},model:{value:e.isOpenEdit,callback:function(t){e.isOpenEdit=t},expression:\"isOpenEdit\"}},[a(\"Tabs\",{model:{value:e.showTab,callback:function(t){e.showTab=t},expression:\"showTab\"}},[a(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[a(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:e.data,\"label-width\":140}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.companyname,callback:function(t){e.$set(e.data,\"companyname\",t)},expression:\"data.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.name,callback:function(t){e.$set(e.data,\"name\",t)},expression:\"data.name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.TEL,callback:function(t){e.$set(e.data,\"TEL\",t)},expression:\"data.TEL\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.alisname,callback:function(t){e.$set(e.data,\"alisname\",t)},expression:\"data.alisname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.server_realname,callback:function(t){e.$set(e.data,\"server_realname\",t)},expression:\"data.server_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.followby_realname,callback:function(t){e.$set(e.data,\"followby_realname\",t)},expression:\"data.followby_realname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.serviceranks,callback:function(t){e.$set(e.data,\"serviceranks\",t)},expression:\"data.serviceranks\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:e.data.calltype,callback:function(t){e.$set(e.data,\"calltype\",t)},expression:\"data.calltype\"}},e._l(e.hfwtlx,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"CheckboxGroup\",{model:{value:e.data.depart,callback:function(t){e.$set(e.data,\"depart\",t)},expression:\"data.depart\"}},e._l(e.departAlias,function(t){return a(\"span\",{key:t.id},[a(\"Checkbox\",{attrs:{label:t.typecode,disabled:\"\"}},[a(\"span\",[e._v(e._s(t.typename))])])],1)}),0)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:e.data.callbackstatus,callback:function(t){e.$set(e.data,\"callbackstatus\",t)},expression:\"data.callbackstatus\"}},e._l(e.hfzt,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",readonly:\"\"},model:{value:e.data.callbackdate,callback:function(t){e.$set(e.data,\"callbackdate\",t)},expression:\"data.callbackdate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.reason,callback:function(t){e.$set(e.data,\"reason\",t)},expression:\"data.reason\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.solutionbymarketer,callback:function(t){e.$set(e.data,\"solutionbymarketer\",t)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.solutionbyservicer,callback:function(t){e.$set(e.data,\"solutionbyservicer\",t)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[a(\"history-list\",{attrs:{companyname:e.data.companyname,hfwtlx:e.hfwtlx,hfzt:e.hfzt,departAlias:e.departAlias,readonly:\"\"}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);b.options.__file=\"show.vue\";var w={name:\"returnWorkOrder_index\",components:{Untreated:i,Processed:p,edit:k,show:b.exports},data:function(){return{data:\"\",openEdit:!1,openShow:!1,hfwtlx:[],hfzt:[],return_visit_depart:[],hfwtlx_map:new Map,hfzt_map:new Map,return_visit_depart_map:new Map}},methods:{getDataCenter:function(){var e=this;this.$GetDataCenter(\"hfwtlx,hfzt,return_visit_depart\",function(t){e.hfwtlx=t.data.data.hfwtlx,e.hfzt=t.data.data.hfzt,e.return_visit_depart=t.data.data.return_visit_depart,e.hfwtlx_map=e.$array2map(e.hfwtlx),e.hfzt_map=e.$array2map(e.hfzt),e.return_visit_depart_map=e.$array2map(e.return_visit_depart)})},open_edit:function(e){this.data=e,this.openEdit=!0},open_show:function(e){this.data=e,this.openShow=!0}},created:function(){this.getDataCenter()}},I=Object(o.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[a(\"Untreated\",{attrs:{hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,hfztMap:e.hfzt_map,departAlias:e.return_visit_depart},on:{edit:e.open_edit,show:e.open_show}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"processed\",{attrs:{hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{edit:e.open_edit,show:e.open_show}})],1)],1),e._v(\" \"),e.openEdit?a(\"edit\",{attrs:{data:e.data,hfwtlx:e.hfwtlx,hfzt:e.hfzt,hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{close:function(t){e.openEdit=!1}}}):e._e(),e._v(\" \"),e.openShow?a(\"show\",{attrs:{data:e.data,hfwtlx:e.hfwtlx,hfzt:e.hfzt,hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{close:function(t){e.openShow=!1}}}):e._e()],1)},[],!1,null,null,null);I.options.__file=\"returnVisit_table.vue\";t.default=I.exports},412:function(e,t,a){\"use strict\";a.r(t);var s=a(85);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],components:{},data:function(){var e=this;return{selectRowArray:[],loading:!1,search_model:\"\",NformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"#\",type:\"selection\",width:60},{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:250},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"开始税期\",key:\"begin_period\",minWidth:120},{title:\"结束税期\",key:\"end_period\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\"},{field:\"serviceranks\",title:\"服务评分\"},{field:\"begin_period\",title:\"开始税期\"},{field:\"end_period\",title:\"结束税期\"}])),sortField:\"callbackdate\",datatype:1,companyname:this.NformInline.companyname,name:this.NformInline.name,tel:this.NformInline.tel,servicename:this.NformInline.servicename,marketername:this.NformInline.marketername,depart:this.NformInline.depart,bcreatedate:Object(s.a)(this.NformInline.createdate[0]),ecreatedate:Object(s.a)(this.NformInline.createdate[1]),bcallbackdate:Object(s.a)(this.NformInline.updatedate[0]),ecallbackdate:Object(s.a)(this.NformInline.updatedate[1]),productname:this.NformInline.productname},t=this.$MergeURL(\"api/customer/customerCallbackList\",e);window.open(t)},search:function(){this.page=1,this.getDataN()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.servicename=\"\",this.NformInline.marketername=\"\",this.NformInline.depart=\"\",this.NformInline.createdate=[],this.NformInline.updatedate=[],this.NformInline.productname=\"\",this.getDataN()},pageChange:function(e){this.page=e,this.getDataN()},pageSizeChange:function(e){this.pageSize=e,this.getDataN()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getDataN:function(){var e,t=this;t.loading=!0;t.row=\"\";var a={params:(e={sortField:\"callbackdate\",page:t.page,pageSize:t.pageSize,status:\"N\",companyname:t.NformInline.companyname,name:t.NformInline.name,tel:t.NformInline.tel,servicename:t.NformInline.servicename,marketername:t.NformInline.marketername,depart:t.NformInline.depart,datatype:1,bcreatedate:Object(s.a)(t.NformInline.createdate[0]),ecreatedate:Object(s.a)(t.NformInline.createdate[1]),bcallbackdate:Object(s.a)(t.NformInline.updatedate[0]),ecallbackdate:Object(s.a)(t.NformInline.updatedate[1]),productname:t.NformInline.productname},r(e,\"sortField\",\"updatedate\"),r(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",a).then(function(e){t.$backToLogin(e),t.data=e.data.data.rows,t.pageTotal=e.data.data.total;for(var a=0;a<e.data.data.rows.length;a++)if(t.data[a].num=\"1\",t.data[a].company_id=t.data[a].companyid,null==t.data[a].createdate||\"\"==t.data[a].createdate||(t.data[a].createdate=t.data[a].createdate.slice(0,10)),null==t.data[a].callbackdate||\"\"==t.data[a].callbackdate||(t.data[a].callbackdate=t.data[a].callbackdate.slice(0,10)),t.data[a].calltypeNAME=t.hfwtlxMap.get(t.data[a].calltype),t.data[a].callbackstatusName=t.hfztMap.get(t.data[a].callbackstatus),null==t.data[a].depart||\"\"==t.data[a].depart)t.data[a].depart=\"\";else{for(var s=t.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=t.departAliasMap.get(s[r]);t.data[a].departNAME=s.join(\",\")}t.loading=!1})},select_change:function(e){this.selectRowArray=e},finish:function(){var e=this;if(0==this.selectRowArray.length)e.$Message.warning(\"请先勾选需要批量处理的行！\");else{for(var t=[],a=0;a<e.selectRowArray.length;a++)t.push(e.selectRowArray[a].id);var s={ids:t.join(\",\")};e.$Post(\"api/customer/callback/batch/finish\",s,function(t){e.$bus.emit(\"update_returnVisit_edit\")},function(e){})}}},created:function(){var e=this;this.getDataN(),e.$bus.on(\"update_returnVisit_edit\",function(t){e.getDataN()})}},o=a(2),l=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:e.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.companyname,callback:function(t){e.$set(e.NformInline,\"companyname\",t)},expression:\"NformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.name,callback:function(t){e.$set(e.NformInline,\"name\",t)},expression:\"NformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.tel,callback:function(t){e.$set(e.NformInline,\"tel\",t)},expression:\"NformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.servicename,callback:function(t){e.$set(e.NformInline,\"servicename\",t)},expression:\"NformInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.marketername,callback:function(t){e.$set(e.NformInline,\"marketername\",t)},expression:\"NformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.depart,callback:function(t){e.$set(e.NformInline,\"depart\",t)},expression:\"NformInline.depart\"}},e._l(e.departAlias,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.NformInline.productname,callback:function(t){e.$set(e.NformInline,\"productname\",t)},expression:\"NformInline.productname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:e.NformInline.createdate,callback:function(t){e.$set(e.NformInline,\"createdate\",t)},expression:\"NformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.NformInline.updatedate,callback:function(t){e.$set(e.NformInline,\"updatedate\",t)},expression:\"NformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.show}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.finish}},[e._v(\"完结\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data},on:{\"on-selection-change\":e.select_change,\"on-current-change\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",current:e.page,\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);l.options.__file=\"untreated.vue\";var i=l.exports;function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],data:function(){var e=this;return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:250},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"开始税期\",key:\"begin_period\",minWidth:120},{title:\"结束税期\",key:\"end_period\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",width:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customerid})}}},\"[查看客户]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.$store.commit(\"open_gobal_company_detail_modal\",a.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\"},{field:\"serviceranks\",title:\"服务评分\"},{field:\"begin_period\",title:\"开始税期\"},{field:\"end_period\",title:\"结束税期\"}])),companyname:this.YformInline.companyname,name:this.YformInline.name,tel:this.YformInline.tel,sortField:\"callbackdate\",datatype:1,servicename:this.YformInline.servicename,marketername:this.YformInline.marketername,depart:this.YformInline.depart,bcreatedate:Object(s.a)(this.YformInline.createdate[0]),ecreatedate:Object(s.a)(this.YformInline.createdate[1]),bcallbackdate:Object(s.a)(this.YformInline.updatedate[0]),ecallbackdate:Object(s.a)(this.YformInline.updatedate[1]),productname:this.YformInline.productname},t=this.$MergeURL(\"api/customer/customerCallbackList\",e);window.open(t)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.servicename=\"\",this.YformInline.marketername=\"\",this.YformInline.depart=\"\",this.YformInline.createdate=[],this.YformInline.updatedate=[],this.YformInline.productname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getData:function(){var e,t=this;t.loading=!0,t.row=\"\";var a={params:(e={sortField:\"callbackdate\",page:t.page,pageSize:t.pageSize,status:\"Y\",companyname:t.YformInline.companyname,name:t.YformInline.name,tel:t.YformInline.tel,servicename:t.YformInline.servicename,marketername:t.YformInline.marketername,depart:t.YformInline.depart,datatype:1,bcreatedate:Object(s.a)(t.YformInline.createdate[0]),ecreatedate:Object(s.a)(t.YformInline.createdate[1]),bcallbackdate:Object(s.a)(t.YformInline.updatedate[0]),ecallbackdate:Object(s.a)(t.YformInline.updatedate[1]),productname:t.YformInline.productname},c(e,\"sortField\",\"updatedate\"),c(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",a).then(function(e){t.data=e.data.data.rows,t.pageTotal=e.data.data.total;for(var a=0;a<e.data.data.rows.length;a++)if(t.data[a].num=\"1\",t.data[a].company_id=t.data[a].companyid,null==t.data[a].createdate||\"\"==t.data[a].createdate||(t.data[a].createdate=t.data[a].createdate.slice(0,10)),null==t.data[a].callbackdate||\"\"==t.data[a].callbackdate||(t.data[a].callbackdate=t.data[a].callbackdate.slice(0,10)),t.data[a].calltypeNAME=t.hfwtlxMap.get(t.data[a].calltype),t.data[a].callbackstatusName=t.hfztMap.get(t.data[a].callbackstatus),null==t.data[a].depart||\"\"==t.data[a].depart)t.data[a].depart=\"\";else{for(var s=t.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=t.departAliasMap.get(s[r]);t.data[a].departNAME=s.join(\",\")}t.loading=!1})}},created:function(){var e=this;this.getData(),e.$bus.on(\"update_returnVisit_edit\",function(t){e.getData()})}},d=Object(o.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:e.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.companyname,callback:function(t){e.$set(e.YformInline,\"companyname\",t)},expression:\"YformInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.name,callback:function(t){e.$set(e.YformInline,\"name\",t)},expression:\"YformInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.tel,callback:function(t){e.$set(e.YformInline,\"tel\",t)},expression:\"YformInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.servicename,callback:function(t){e.$set(e.YformInline,\"servicename\",t)},expression:\"YformInline.servicename\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.marketername,callback:function(t){e.$set(e.YformInline,\"marketername\",t)},expression:\"YformInline.marketername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.depart,callback:function(t){e.$set(e.YformInline,\"depart\",t)},expression:\"YformInline.depart\"}},e._l(e.departAlias,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:e.YformInline.productname,callback:function(t){e.$set(e.YformInline,\"productname\",t)},expression:\"YformInline.productname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:e.YformInline.createdate,callback:function(t){e.$set(e.YformInline,\"createdate\",t)},expression:\"YformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.YformInline.updatedate,callback:function(t){e.$set(e.YformInline,\"updatedate\",t)},expression:\"YformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.show}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitY-edit\"],expression:\"['returnVisitY-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data},on:{\"on-current-change\":e.selectrow}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);d.options.__file=\"processed.vue\";var p=d.exports,u=(a(9),a(25)),h={props:{companyname:{type:[String]},hfwtlx:{type:[Array,String]},hfzt:{type:[Array,String]},departAlias:{type:[Array,String]}},data:function(){return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],hfwtlx_map:new Map,hfzt_map:new Map,departAlias_map:new Map,header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:150},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120}]}},methods:{pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},show:function(e){},getData:function(){var e=this;e.loading=!0,e.row=\"\";var t={params:{sortField:\"callbackdate\",page:e.page,pageSize:e.pageSize,companyname:e.companyname}};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(t){e.data=t.data.data.rows,e.pageTotal=t.data.data.total;for(var a=0;a<t.data.data.rows.length;a++)if(e.data[a].company_id=e.data[a].companyid,null==e.data[a].createdate||\"\"==e.data[a].createdate||(e.data[a].createdate=e.data[a].createdate.slice(0,10)),null==e.data[a].callbackdate||\"\"==e.data[a].callbackdate||(e.data[a].callbackdate=e.data[a].callbackdate.slice(0,10)),e.data[a].calltypeNAME=e.hfwtlx_map.get(e.data[a].calltype),e.data[a].callbackstatusName=e.hfzt_map.get(e.data[a].callbackstatus),null==e.data[a].depart||\"\"==e.data[a].depart)e.data[a].depart=\"\";else{for(var s=e.data[a].depart.split(\",\"),r=0;r<s.length;r++)s[r]=e.departAlias_map.get(s[r]);e.data[a].departNAME=s.join(\",\")}e.loading=!1})},getDataCenter:function(){this.hfwtlx_map=this.$array2map(this.hfwtlx),this.hfzt_map=this.$array2map(this.hfzt),this.departAlias_map=this.$array2map(this.departAlias),this.getData()}},watch:{companyname:\"getData\"},created:function(){this.getDataCenter()}},f=Object(o.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,current:e.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)},[],!1,null,null,null);f.options.__file=\"histroy_list_show.vue\";var g=f.exports,v={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{add_complaint_detail:function(){var e=this;e.loading=!0;var t={callbackdate:Object(u.a)(e.data.callbackdate),id:e.data.id,solutionbymarketer:e.data.solutionbymarketer,solutionbyservicer:e.data.solutionbyservicer,depart:e.data.depart.join(\",\"),serviceranks:e.data.serviceranks,calltype:e.data.calltype,callbackstatus:e.data.callbackstatus,reason:e.data.reason};this.$Post(\"api/customer/updateCustomerCallback\",t,function(t){e.loading=!1,e.$bus.emit(\"update_returnVisit_edit\",!0),e.close()},function(t){e.loading=!1})},close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"));var e=localStorage.getItem(\"Role\"),t=localStorage.getItem(\"id\");e=JSON.parse(e);for(var a=0;a<e.length;a++)\"salers\"!=e[a]&&10059!=t||(this.ismarket=!1),\"hfgl\"!=e[a]&&10059!=t||(this.isreturn=!1),\"kj\"!=e[a]&&\"servicer\"!=e[a]&&\"planner\"!=e[a]&&\"auditing\"!=e[a]&&\"ssbgd\"!=e[a]&&\"kjbgd\"!=e[a]&&\"qhbgd\"!=e[a]&&\"sjbgd\"!=e[a]&&10059!=t||(this.isservice=!1)}},y=Object(o.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},on:{\"on-cancel\":e.close},model:{value:e.isOpenEdit,callback:function(t){e.isOpenEdit=t},expression:\"isOpenEdit\"}},[a(\"Tabs\",{model:{value:e.showTab,callback:function(t){e.showTab=t},expression:\"showTab\"}},[a(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[a(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:e.data,\"label-width\":140}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.companyname,callback:function(t){e.$set(e.data,\"companyname\",t)},expression:\"data.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.name,callback:function(t){e.$set(e.data,\"name\",t)},expression:\"data.name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.TEL,callback:function(t){e.$set(e.data,\"TEL\",t)},expression:\"data.TEL\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.alisname,callback:function(t){e.$set(e.data,\"alisname\",t)},expression:\"data.alisname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.server_realname,callback:function(t){e.$set(e.data,\"server_realname\",t)},expression:\"data.server_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.followby_realname,callback:function(t){e.$set(e.data,\"followby_realname\",t)},expression:\"data.followby_realname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",disabled:e.isreturn},model:{value:e.data.serviceranks,callback:function(t){e.$set(e.data,\"serviceranks\",t)},expression:\"data.serviceranks\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:e.isreturn},model:{value:e.data.calltype,callback:function(t){e.$set(e.data,\"calltype\",t)},expression:\"data.calltype\"}},e._l(e.hfwtlx,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"CheckboxGroup\",{model:{value:e.data.depart,callback:function(t){e.$set(e.data,\"depart\",t)},expression:\"data.depart\"}},e._l(e.departAlias,function(t){return a(\"span\",{key:t.id},[a(\"Checkbox\",{attrs:{label:t.typecode,disabled:e.isreturn}},[a(\"span\",[e._v(e._s(t.typename))])])],1)}),0)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:e.isreturn},model:{value:e.data.callbackstatus,callback:function(t){e.$set(e.data,\"callbackstatus\",t)},expression:\"data.callbackstatus\"}},e._l(e.hfzt,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",disabled:e.isreturn},model:{value:e.data.callbackdate,callback:function(t){e.$set(e.data,\"callbackdate\",t)},expression:\"data.callbackdate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.isreturn},model:{value:e.data.reason,callback:function(t){e.$set(e.data,\"reason\",t)},expression:\"data.reason\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.ismarket},model:{value:e.data.solutionbymarketer,callback:function(t){e.$set(e.data,\"solutionbymarketer\",t)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:e.isservice},model:{value:e.data.solutionbyservicer,callback:function(t){e.$set(e.data,\"solutionbyservicer\",t)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[a(\"history-list\",{attrs:{companyname:e.data.companyname,hfwtlx:e.hfwtlx,hfzt:e.hfzt,departAlias:e.departAlias}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.add_complaint_detail}},[e._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);y.options.__file=\"edit.vue\";var k=y.exports,_={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"))}},b=Object(o.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},on:{\"on-cancel\":e.close},model:{value:e.isOpenEdit,callback:function(t){e.isOpenEdit=t},expression:\"isOpenEdit\"}},[a(\"Tabs\",{model:{value:e.showTab,callback:function(t){e.showTab=t},expression:\"showTab\"}},[a(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[a(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:e.data,\"label-width\":140}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.companyname,callback:function(t){e.$set(e.data,\"companyname\",t)},expression:\"data.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.name,callback:function(t){e.$set(e.data,\"name\",t)},expression:\"data.name\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.TEL,callback:function(t){e.$set(e.data,\"TEL\",t)},expression:\"data.TEL\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.alisname,callback:function(t){e.$set(e.data,\"alisname\",t)},expression:\"data.alisname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.server_realname,callback:function(t){e.$set(e.data,\"server_realname\",t)},expression:\"data.server_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.followby_realname,callback:function(t){e.$set(e.data,\"followby_realname\",t)},expression:\"data.followby_realname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",readonly:\"\"},model:{value:e.data.serviceranks,callback:function(t){e.$set(e.data,\"serviceranks\",t)},expression:\"data.serviceranks\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:e.data.calltype,callback:function(t){e.$set(e.data,\"calltype\",t)},expression:\"data.calltype\"}},e._l(e.hfwtlx,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[a(\"CheckboxGroup\",{model:{value:e.data.depart,callback:function(t){e.$set(e.data,\"depart\",t)},expression:\"data.depart\"}},e._l(e.departAlias,function(t){return a(\"span\",{key:t.id},[a(\"Checkbox\",{attrs:{label:t.typecode,disabled:\"\"}},[a(\"span\",[e._v(e._s(t.typename))])])],1)}),0)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:e.data.callbackstatus,callback:function(t){e.$set(e.data,\"callbackstatus\",t)},expression:\"data.callbackstatus\"}},e._l(e.hfzt,function(t,s){return a(\"Option\",{key:s,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",readonly:\"\"},model:{value:e.data.callbackdate,callback:function(t){e.$set(e.data,\"callbackdate\",t)},expression:\"data.callbackdate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.reason,callback:function(t){e.$set(e.data,\"reason\",t)},expression:\"data.reason\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.solutionbymarketer,callback:function(t){e.$set(e.data,\"solutionbymarketer\",t)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:e.data.solutionbyservicer,callback:function(t){e.$set(e.data,\"solutionbyservicer\",t)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[a(\"history-list\",{attrs:{companyname:e.data.companyname,hfwtlx:e.hfwtlx,hfzt:e.hfzt,departAlias:e.departAlias,readonly:\"\"}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);b.options.__file=\"show.vue\";var w={name:\"returnVisit_index\",components:{Untreated:i,Processed:p,edit:k,show:b.exports},data:function(){return{data:\"\",openEdit:!1,openShow:!1,hfwtlx:[],hfzt:[],return_visit_depart:[],hfwtlx_map:new Map,hfzt_map:new Map,return_visit_depart_map:new Map}},methods:{getDataCenter:function(){var e=this;this.$GetDataCenter(\"hfwtlx,hfzt,return_visit_depart\",function(t){e.hfwtlx=t.data.data.hfwtlx,e.hfzt=t.data.data.hfzt,e.return_visit_depart=t.data.data.return_visit_depart,e.hfwtlx_map=e.$array2map(e.hfwtlx),e.hfzt_map=e.$array2map(e.hfzt),e.return_visit_depart_map=e.$array2map(e.return_visit_depart)})},open_edit:function(e){this.data=e,this.openEdit=!0},open_show:function(e){this.data=e,this.openShow=!0}},created:function(){this.getDataCenter()}},I=Object(o.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[a(\"Untreated\",{attrs:{hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,hfztMap:e.hfzt_map,departAlias:e.return_visit_depart},on:{edit:e.open_edit,show:e.open_show}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"processed\",{attrs:{hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{edit:e.open_edit,show:e.open_show}})],1)],1),e._v(\" \"),e.openEdit?a(\"edit\",{attrs:{data:e.data,hfwtlx:e.hfwtlx,hfzt:e.hfzt,hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{close:function(t){e.openEdit=!1}}}):e._e(),e._v(\" \"),e.openShow?a(\"show\",{attrs:{data:e.data,hfwtlx:e.hfwtlx,hfzt:e.hfzt,hfwtlxMap:e.hfwtlx_map,departAliasMap:e.return_visit_depart_map,departAlias:e.return_visit_depart,hfztMap:e.hfzt_map},on:{close:function(t){e.openShow=!1}}}):e._e()],1)},[],!1,null,null,null);I.options.__file=\"returnVisit_table.vue\";t.default=I.exports},85:function(e,t,a){\"use strict\";function s(e){if(null==e||\"\"==e)return\"\";var t=new Date(e),a=\"\"+(t.getMonth()+1),s=\"\"+t.getDate(),r=t.getFullYear();return a.length<2&&(a=\"0\"+a),s.length<2&&(s=\"0\"+s),[r,a,s].join(\"-\")}a.d(t,\"a\",function(){return s})}}]);"}