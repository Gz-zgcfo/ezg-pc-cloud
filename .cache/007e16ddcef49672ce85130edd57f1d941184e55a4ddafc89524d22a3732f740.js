{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{405:function(e,t,a){\"use strict\";function r(e){if(null==e||\"\"==e)return\"\";var t=new Date(e),a=\"\"+(t.getMonth()+1),r=\"\"+t.getDate(),s=t.getFullYear();return a.length<2&&(a=\"0\"+a),r.length<2&&(r=\"0\"+r),[s,a,r].join(\"-\")}a.d(t,\"a\",function(){return r})},823:function(e,t,a){\"use strict\";a.r(t);var r=a(405);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],components:{},data:function(){var a=this;return{selectRowArray:[],loading:!1,search_model:\"\",NformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"#\",type:\"selection\",width:60},{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:250},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"开始税期\",key:\"begin_period\",minWidth:120},{title:\"结束税期\",key:\"end_period\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\"},{field:\"serviceranks\",title:\"服务评分\"},{field:\"begin_period\",title:\"开始税期\"},{field:\"end_period\",title:\"结束税期\"}])),sortField:\"callbackdate\",datatype:1,companyname:e.NformInline.companyname,name:e.NformInline.name,tel:e.NformInline.tel,servicename:e.NformInline.servicename,marketername:e.NformInline.marketername,depart:e.NformInline.depart,bcreatedate:Object(r.a)(e.NformInline.createdate[0]),ecreatedate:Object(r.a)(e.NformInline.createdate[1]),bcallbackdate:Object(r.a)(e.NformInline.updatedate[0]),ecallbackdate:Object(r.a)(e.NformInline.updatedate[1]),productname:e.NformInline.productname},a=this.$MergeURL(\"api/customer/customerCallbackList\",t);window.open(a)},search:function(){this.page=1,this.getDataN()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.servicename=\"\",this.NformInline.marketername=\"\",this.NformInline.depart=\"\",this.NformInline.createdate=[],this.NformInline.updatedate=[],this.NformInline.productname=\"\",this.getDataN()},pageChange:function(e){this.page=e,this.getDataN()},pageSizeChange:function(e){this.pageSize=e,this.getDataN()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getDataN:function(){var e,s=this;s.loading=!0;s.row=\"\";var t={params:(e={sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,status:\"N\",companyname:s.NformInline.companyname,name:s.NformInline.name,tel:s.NformInline.tel,servicename:s.NformInline.servicename,marketername:s.NformInline.marketername,depart:s.NformInline.depart,datatype:1,bcreatedate:Object(r.a)(s.NformInline.createdate[0]),ecreatedate:Object(r.a)(s.NformInline.createdate[1]),bcallbackdate:Object(r.a)(s.NformInline.updatedate[0]),ecallbackdate:Object(r.a)(s.NformInline.updatedate[1]),productname:s.NformInline.productname},n(e,\"sortField\",\"updatedate\"),n(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(e){s.$backToLogin(e),s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].num=\"1\",s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlxMap.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfztMap.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAliasMap.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})},select_change:function(e){this.selectRowArray=e},finish:function(){var t=this;if(0==this.selectRowArray.length)t.$Message.warning(\"请先勾选需要批量处理的行！\");else{for(var e=[],a=0;a<t.selectRowArray.length;a++)e.push(t.selectRowArray[a].id);var r={ids:e.join(\",\")};t.$Post(\"api/customer/callback/batch/finish\",r,function(e){t.$bus.emit(\"update_returnVisit_edit\")},function(e){})}}},created:function(){var t=this;this.getDataN(),t.$bus.on(\"update_returnVisit_edit\",function(e){t.getDataN()})}},o=a(4),l=Object(o.a)(s,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"Card\",[r(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[r(\"Collapse\",{model:{value:a.search_model,callback:function(e){a.search_model=e},expression:\"search_model\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[r(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),a._v(\"\\n                    筛选\\n                    \"),r(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),r(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.search(e):null}},slot:\"content\"},[r(\"Form\",{ref:\"NformInline\",attrs:{model:a.NformInline,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.companyname,callback:function(e){a.$set(a.NformInline,\"companyname\",e)},expression:\"NformInline.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.name,callback:function(e){a.$set(a.NformInline,\"name\",e)},expression:\"NformInline.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.tel,callback:function(e){a.$set(a.NformInline,\"tel\",e)},expression:\"NformInline.tel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.servicename,callback:function(e){a.$set(a.NformInline,\"servicename\",e)},expression:\"NformInline.servicename\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.marketername,callback:function(e){a.$set(a.NformInline,\"marketername\",e)},expression:\"NformInline.marketername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.depart,callback:function(e){a.$set(a.NformInline,\"depart\",e)},expression:\"NformInline.depart\"}},a._l(a.departAlias,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.productname,callback:function(e){a.$set(a.NformInline,\"productname\",e)},expression:\"NformInline.productname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:a.NformInline.createdate,callback:function(e){a.$set(a.NformInline,\"createdate\",e)},expression:\"NformInline.createdate\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:a.NformInline.updatedate,callback:function(e){a.$set(a.NformInline,\"updatedate\",e)},expression:\"NformInline.updatedate\"}})],1)],1)],1),a._v(\" \"),r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\"},on:{click:a.search}},[a._v(\"搜索\")]),a._v(\" \"),r(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:a.reset}},[a._v(\"重置\")])],1)],1)],1),a._v(\" \"),r(\"p\")],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"ButtonGroup\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.show}},[a._v(\"查看\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.edit}},[a._v(\"编辑\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.finish}},[a._v(\"完结\")]),a._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.downloadExcel}},[a._v(\"导出Excel\")])],1)],1),a._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.header,loading:a.loading,data:a.data},on:{\"on-selection-change\":a.select_change,\"on-current-change\":a.selectrow}}),a._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,\"show-total\":\"\",current:a.page,\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1)},[],!1,null,null,null);l.options.__file=\"untreated.vue\";var i=l.exports;function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],data:function(){var a=this;return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:250},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"开始税期\",key:\"begin_period\",minWidth:120},{title:\"结束税期\",key:\"end_period\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",width:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\"},{field:\"serviceranks\",title:\"服务评分\"},{field:\"begin_period\",title:\"开始税期\"},{field:\"end_period\",title:\"结束税期\"}])),companyname:e.YformInline.companyname,name:e.YformInline.name,tel:e.YformInline.tel,sortField:\"callbackdate\",datatype:1,servicename:e.YformInline.servicename,marketername:e.YformInline.marketername,depart:e.YformInline.depart,bcreatedate:Object(r.a)(e.YformInline.createdate[0]),ecreatedate:Object(r.a)(e.YformInline.createdate[1]),bcallbackdate:Object(r.a)(e.YformInline.updatedate[0]),ecallbackdate:Object(r.a)(e.YformInline.updatedate[1]),productname:e.YformInline.productname},a=this.$MergeURL(\"api/customer/customerCallbackList\",t);window.open(a)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.servicename=\"\",this.YformInline.marketername=\"\",this.YformInline.depart=\"\",this.YformInline.createdate=[],this.YformInline.updatedate=[],this.YformInline.productname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getData:function(){var e,s=this;s.loading=!0,s.row=\"\";var t={params:(e={sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,status:\"Y\",companyname:s.YformInline.companyname,name:s.YformInline.name,tel:s.YformInline.tel,servicename:s.YformInline.servicename,marketername:s.YformInline.marketername,depart:s.YformInline.depart,datatype:1,bcreatedate:Object(r.a)(s.YformInline.createdate[0]),ecreatedate:Object(r.a)(s.YformInline.createdate[1]),bcallbackdate:Object(r.a)(s.YformInline.updatedate[0]),ecallbackdate:Object(r.a)(s.YformInline.updatedate[1]),productname:s.YformInline.productname},c(e,\"sortField\",\"updatedate\"),c(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(e){s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].num=\"1\",s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlxMap.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfztMap.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAliasMap.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})}},created:function(){var t=this;this.getData(),t.$bus.on(\"update_returnVisit_edit\",function(e){t.getData()})}},d=Object(o.a)(m,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"Card\",[r(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[r(\"Collapse\",{model:{value:a.search_model,callback:function(e){a.search_model=e},expression:\"search_model\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[r(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),a._v(\"\\n                    筛选\\n                    \"),r(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),r(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.search(e):null}},slot:\"content\"},[r(\"Form\",{ref:\"YformInline\",attrs:{model:a.YformInline,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.companyname,callback:function(e){a.$set(a.YformInline,\"companyname\",e)},expression:\"YformInline.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.name,callback:function(e){a.$set(a.YformInline,\"name\",e)},expression:\"YformInline.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.tel,callback:function(e){a.$set(a.YformInline,\"tel\",e)},expression:\"YformInline.tel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.servicename,callback:function(e){a.$set(a.YformInline,\"servicename\",e)},expression:\"YformInline.servicename\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.marketername,callback:function(e){a.$set(a.YformInline,\"marketername\",e)},expression:\"YformInline.marketername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.depart,callback:function(e){a.$set(a.YformInline,\"depart\",e)},expression:\"YformInline.depart\"}},a._l(a.departAlias,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.productname,callback:function(e){a.$set(a.YformInline,\"productname\",e)},expression:\"YformInline.productname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:a.YformInline.createdate,callback:function(e){a.$set(a.YformInline,\"createdate\",e)},expression:\"YformInline.createdate\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:a.YformInline.updatedate,callback:function(e){a.$set(a.YformInline,\"updatedate\",e)},expression:\"YformInline.updatedate\"}})],1)],1)],1),a._v(\" \"),r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\"},on:{click:a.search}},[a._v(\"搜索\")]),a._v(\" \"),r(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:a.reset}},[a._v(\"重置\")])],1)],1)],1),a._v(\" \"),r(\"p\")],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"ButtonGroup\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.show}},[a._v(\"查看\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitY-edit\"],expression:\"['returnVisitY-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.edit}},[a._v(\"编辑\")]),a._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.downloadExcel}},[a._v(\"导出Excel\")])],1)],1),a._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.header,loading:a.loading,data:a.data},on:{\"on-current-change\":a.selectrow}}),a._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,current:a.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1)},[],!1,null,null,null);d.options.__file=\"processed.vue\";var p=d.exports,u=(a(53),a(114)),f={props:{companyname:{type:[String]},hfwtlx:{type:[Array,String]},hfzt:{type:[Array,String]},departAlias:{type:[Array,String]}},data:function(){return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],hfwtlx_map:new Map,hfzt_map:new Map,departAlias_map:new Map,header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:150},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120}]}},methods:{pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},show:function(e){},getData:function(){var s=this;s.loading=!0,s.row=\"\";var e={params:{sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,companyname:s.companyname}};this.$http.get(\"api/customer/customerCallbackList\",e).then(function(e){s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlx_map.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfzt_map.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAlias_map.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})},getDataCenter:function(){var e=this;e.hfwtlx_map=e.$array2map(e.hfwtlx),e.hfzt_map=e.$array2map(e.hfzt),e.departAlias_map=e.$array2map(e.departAlias),e.getData()}},watch:{companyname:\"getData\"},created:function(){this.getDataCenter()}},h=Object(o.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,loading:t.loading,data:t.data}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1)],1)},[],!1,null,null,null);h.options.__file=\"histroy_list_show.vue\";var g=h.exports,v={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{add_complaint_detail:function(){var t=this;t.loading=!0;var e={callbackdate:Object(u.a)(t.data.callbackdate),id:t.data.id,solutionbymarketer:t.data.solutionbymarketer,solutionbyservicer:t.data.solutionbyservicer,depart:t.data.depart.join(\",\"),serviceranks:t.data.serviceranks,calltype:t.data.calltype,callbackstatus:t.data.callbackstatus,reason:t.data.reason};this.$Post(\"api/customer/updateCustomerCallback\",e,function(e){t.loading=!1,t.$bus.emit(\"update_returnVisit_edit\",!0),t.close()},function(e){t.loading=!1})},close:function(){this.$emit(\"close\")}},created:function(){var e=this;0==Array.isArray(e.data.depart)&&(e.data.depart=e.data.depart.split(\",\"));var t=localStorage.getItem(\"Role\"),a=localStorage.getItem(\"id\");t=JSON.parse(t);for(var r=0;r<t.length;r++)\"salers\"!=t[r]&&10059!=a||(e.ismarket=!1),\"hfgl\"!=t[r]&&10059!=a||(e.isreturn=!1),\"kj\"!=t[r]&&\"servicer\"!=t[r]&&\"planner\"!=t[r]&&\"auditing\"!=t[r]&&\"ssbgd\"!=t[r]&&\"kjbgd\"!=t[r]&&\"qhbgd\"!=t[r]&&\"sjbgd\"!=t[r]&&10059!=a||(e.isservice=!1)}},y=Object(o.a)(v,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},on:{\"on-cancel\":a.close},model:{value:a.isOpenEdit,callback:function(e){a.isOpenEdit=e},expression:\"isOpenEdit\"}},[r(\"Tabs\",{model:{value:a.showTab,callback:function(e){a.showTab=e},expression:\"showTab\"}},[r(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[r(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:a.data,\"label-width\":140}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.companyname,callback:function(e){a.$set(a.data,\"companyname\",e)},expression:\"data.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.name,callback:function(e){a.$set(a.data,\"name\",e)},expression:\"data.name\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.TEL,callback:function(e){a.$set(a.data,\"TEL\",e)},expression:\"data.TEL\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.alisname,callback:function(e){a.$set(a.data,\"alisname\",e)},expression:\"data.alisname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.server_realname,callback:function(e){a.$set(a.data,\"server_realname\",e)},expression:\"data.server_realname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.followby_realname,callback:function(e){a.$set(a.data,\"followby_realname\",e)},expression:\"data.followby_realname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[r(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",disabled:a.isreturn},model:{value:a.data.serviceranks,callback:function(e){a.$set(a.data,\"serviceranks\",e)},expression:\"data.serviceranks\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:a.isreturn},model:{value:a.data.calltype,callback:function(e){a.$set(a.data,\"calltype\",e)},expression:\"data.calltype\"}},a._l(a.hfwtlx,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"CheckboxGroup\",{model:{value:a.data.depart,callback:function(e){a.$set(a.data,\"depart\",e)},expression:\"data.depart\"}},a._l(a.departAlias,function(e){return r(\"span\",{key:e.id},[r(\"Checkbox\",{attrs:{label:e.typecode,disabled:a.isreturn}},[r(\"span\",[a._v(a._s(e.typename))])])],1)}),0)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:a.isreturn},model:{value:a.data.callbackstatus,callback:function(e){a.$set(a.data,\"callbackstatus\",e)},expression:\"data.callbackstatus\"}},a._l(a.hfzt,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",disabled:a.isreturn},model:{value:a.data.callbackdate,callback:function(e){a.$set(a.data,\"callbackdate\",e)},expression:\"data.callbackdate\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.isreturn},model:{value:a.data.reason,callback:function(e){a.$set(a.data,\"reason\",e)},expression:\"data.reason\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.ismarket},model:{value:a.data.solutionbymarketer,callback:function(e){a.$set(a.data,\"solutionbymarketer\",e)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.isservice},model:{value:a.data.solutionbyservicer,callback:function(e){a.$set(a.data,\"solutionbyservicer\",e)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),a._v(\" \"),r(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[r(\"history-list\",{attrs:{companyname:a.data.companyname,hfwtlx:a.hfwtlx,hfzt:a.hfzt,departAlias:a.departAlias}})],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.add_complaint_detail}},[a._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);y.options.__file=\"edit.vue\";var k=y.exports,_={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"))}},b=Object(o.a)(_,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},on:{\"on-cancel\":a.close},model:{value:a.isOpenEdit,callback:function(e){a.isOpenEdit=e},expression:\"isOpenEdit\"}},[r(\"Tabs\",{model:{value:a.showTab,callback:function(e){a.showTab=e},expression:\"showTab\"}},[r(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[r(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:a.data,\"label-width\":140}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.companyname,callback:function(e){a.$set(a.data,\"companyname\",e)},expression:\"data.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.name,callback:function(e){a.$set(a.data,\"name\",e)},expression:\"data.name\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.TEL,callback:function(e){a.$set(a.data,\"TEL\",e)},expression:\"data.TEL\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.alisname,callback:function(e){a.$set(a.data,\"alisname\",e)},expression:\"data.alisname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.server_realname,callback:function(e){a.$set(a.data,\"server_realname\",e)},expression:\"data.server_realname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.followby_realname,callback:function(e){a.$set(a.data,\"followby_realname\",e)},expression:\"data.followby_realname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[r(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.serviceranks,callback:function(e){a.$set(a.data,\"serviceranks\",e)},expression:\"data.serviceranks\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:a.data.calltype,callback:function(e){a.$set(a.data,\"calltype\",e)},expression:\"data.calltype\"}},a._l(a.hfwtlx,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"CheckboxGroup\",{model:{value:a.data.depart,callback:function(e){a.$set(a.data,\"depart\",e)},expression:\"data.depart\"}},a._l(a.departAlias,function(e){return r(\"span\",{key:e.id},[r(\"Checkbox\",{attrs:{label:e.typecode,disabled:\"\"}},[r(\"span\",[a._v(a._s(e.typename))])])],1)}),0)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:a.data.callbackstatus,callback:function(e){a.$set(a.data,\"callbackstatus\",e)},expression:\"data.callbackstatus\"}},a._l(a.hfzt,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",readonly:\"\"},model:{value:a.data.callbackdate,callback:function(e){a.$set(a.data,\"callbackdate\",e)},expression:\"data.callbackdate\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.reason,callback:function(e){a.$set(a.data,\"reason\",e)},expression:\"data.reason\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.solutionbymarketer,callback:function(e){a.$set(a.data,\"solutionbymarketer\",e)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.solutionbyservicer,callback:function(e){a.$set(a.data,\"solutionbyservicer\",e)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),a._v(\" \"),r(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[r(\"history-list\",{attrs:{companyname:a.data.companyname,hfwtlx:a.hfwtlx,hfzt:a.hfzt,departAlias:a.departAlias,readonly:\"\"}})],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);b.options.__file=\"show.vue\";var w={name:\"returnVisit_index\",components:{Untreated:i,Processed:p,edit:k,show:b.exports},data:function(){return{data:\"\",openEdit:!1,openShow:!1,hfwtlx:[],hfzt:[],return_visit_depart:[],hfwtlx_map:new Map,hfzt_map:new Map,return_visit_depart_map:new Map}},methods:{getDataCenter:function(){var t=this;this.$GetDataCenter(\"hfwtlx,hfzt,return_visit_depart\",function(e){t.hfwtlx=e.data.data.hfwtlx,t.hfzt=e.data.data.hfzt,t.return_visit_depart=e.data.data.return_visit_depart,t.hfwtlx_map=t.$array2map(t.hfwtlx),t.hfzt_map=t.$array2map(t.hfzt),t.return_visit_depart_map=t.$array2map(t.return_visit_depart)})},open_edit:function(e){this.data=e,this.openEdit=!0},open_show:function(e){this.data=e,this.openShow=!0}},created:function(){this.getDataCenter()}},I=Object(o.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[a(\"Untreated\",{attrs:{hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,hfztMap:t.hfzt_map,departAlias:t.return_visit_depart},on:{edit:t.open_edit,show:t.open_show}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"processed\",{attrs:{hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{edit:t.open_edit,show:t.open_show}})],1)],1),t._v(\" \"),t.openEdit?a(\"edit\",{attrs:{data:t.data,hfwtlx:t.hfwtlx,hfzt:t.hfzt,hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{close:function(e){t.openEdit=!1}}}):t._e(),t._v(\" \"),t.openShow?a(\"show\",{attrs:{data:t.data,hfwtlx:t.hfwtlx,hfzt:t.hfzt,hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{close:function(e){t.openShow=!1}}}):t._e()],1)},[],!1,null,null,null);I.options.__file=\"returnVisit_table.vue\";t.default=I.exports},824:function(e,t,a){\"use strict\";a.r(t);var r=a(53),s={components:{},data:function(){var a=this;return{NformInline:{companyname:\"\",name:\"\",tel:\"\",product:\"\",marketername:\"\",servicename:\"\"},search_model:\"\",isExamine:!1,modal:!1,pageTotal:new Number,page:1,pageSize:10,row:{},customerid:[],data:[],header:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"product\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:160},{title:\"服务人员\",key:\"servicer\",width:120},{title:\"市场人员\",key:\"marketer\",width:120},{title:\"结束时间\",key:\"enddate\",width:160},{title:\"服务开始时间\",key:\"servicebegindate\",width:160},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"CompanyName\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"enddate\",title:\"下线时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"servicebegindate\",title:\"服务开始时间\"},{field:\"servicer\",title:\"服务人员\"},{field:\"marketer\",title:\"市场人员\"},{field:\"reasonforcallback\",title:\"客户实际下线原因\"},{field:\"reasonformarketer\",title:\"市场通知下线原因\"}])),companyname:e.NformInline.companyname,customername:e.NformInline.name,customertel:e.NformInline.tel,productname:e.NformInline.product,marketer:e.NformInline.marketername,servicer:e.NformInline.servicename},a=this.$MergeURL(\"api/customer/customerEndList\",t);window.open(a)},cancel:function(){this.customerid=[],this.isExamine=!1},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.product=\"\",this.NformInline.marketername=\"\",this.NformInline.servicename=\"\",this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},add:function(){this.row.type=\"add\",this.$bus.emit(\"OPEN_OFFLINE_ADD\",!0)},edit:function(){var e=this;null==e.row.id?e.$Message.warning(\"请选择要查看的项目\"):(e.row.type=\"edit\",e.$bus.emit(\"OPEN_OFFLINE_UPDATE\",e.row))},check:function(){null==this.row.id?this.$Message.warning(\"请选择要查看的项目\"):this.$bus.emit(\"OPEN_OFFLINE_SHOW\",this.row)},getData:function(){var r=this,e=\"/customer/customerEndList?sortField=id&page=\"+r.page+\"&status=N&pageSize=\"+r.pageSize+\"&companyname=\"+r.NformInline.companyname+\"&customername=\"+r.NformInline.name+\"&customertel=\"+r.NformInline.tel+\"&productname=\"+r.NformInline.product+\"&marketer=\"+r.NformInline.marketername+\"&servicer=\"+r.NformInline.servicename;r.row={},this.GetData(e,function(e){var t=e.data.data;r.pageTotal=t.total,r.data=t.rows;for(var a=0;a<r.data.length;a++)r.data[a].company_id=r.data[a].companyid,null==r.data[a].enddate||\"\"==r.data[a].enddate||(r.data[a].enddate=r.data[a].enddate.slice(0,10)),null==r.data[a].callbackdate||\"\"==r.data[a].callbackdate||(r.data[a].callbackdate=r.data[a].callbackdate.slice(0,10)),null==r.data[a].servicebegindate||\"\"==r.data[a].servicebegindate||(r.data[a].servicebegindate=r.data[a].servicebegindate.slice(0,10))})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},selectrow:function(e){this.row=e}},mounted:function(){this.getData()},created:function(){var t=this;r.a.$on(\"updateofflinecustomer\",function(e){t.getData()})}},n=a(4),o=Object(n.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:t.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.companyname,callback:function(e){t.$set(t.NformInline,\"companyname\",e)},expression:\"NformInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.name,callback:function(e){t.$set(t.NformInline,\"name\",e)},expression:\"NformInline.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.tel,callback:function(e){t.$set(t.NformInline,\"tel\",e)},expression:\"NformInline.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.product,callback:function(e){t.$set(t.NformInline,\"product\",e)},expression:\"NformInline.product\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.marketername,callback:function(e){t.$set(t.NformInline,\"marketername\",e)},expression:\"NformInline.marketername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.NformInline.servicename,callback:function(e){t.$set(t.NformInline,\"servicename\",e)},expression:\"NformInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1),t._v(\" \"),a(\"p\")],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"offlineCustomer-add\"],expression:\"['offlineCustomer-add']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.add}},[t._v(\"录入\")]),t._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"offlineCustomer-edit\"],expression:\"['offlineCustomer-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.edit}},[t._v(\" 编辑\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.check}},[t._v(\"查看\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-row-click\":t.selectrow}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",\"current.sync\":\"page\",placement:\"top\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1)],1)},[],!1,null,null,null);o.options.__file=\"untreated.vue\";var l=o.exports,i={components:{},data:function(){var a=this;return{YformInline:{companyname:\"\",name:\"\",tel:\"\",product:\"\",marketername:\"\",servicename:\"\"},search_model:\"\",isExamine:!1,modal:!1,pageTotal:new Number,page:1,pageSize:10,row:{},customerid:[],data:[],header:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"product\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:160},{title:\"服务人员\",key:\"servicer\",width:120},{title:\"市场人员\",key:\"marketer\",width:120},{title:\"结束时间\",key:\"enddate\",width:160},{title:\"服务开始时间\",key:\"servicebegindate\",width:160},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"CompanyName\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"enddate\",title:\"下线时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"servicebegindate\",title:\"服务开始时间\"},{field:\"servicer\",title:\"服务人员\"},{field:\"marketer\",title:\"市场人员\"},{field:\"reasonforcallback\",title:\"客户实际下线原因\"},{field:\"reasonformarketer\",title:\"市场通知下线原因\"}])),companyname:e.YformInline.companyname,customername:e.YformInline.name,customertel:e.YformInline.tel,productname:e.YformInline.product,marketer:e.YformInline.marketername,servicer:e.YformInline.servicename},a=this.$MergeURL(\"api/customer/customerEndList\",t);window.open(a)},cancel:function(){this.customerid=[],this.isExamine=!1},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.product=\"\",this.YformInline.marketername=\"\",this.YformInline.servicename=\"\",this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},check:function(){null==this.row.id?this.$Message.warning(\"请选择要查看的项目\"):this.$bus.emit(\"OPEN_OFFLINE_SHOW\",this.row)},getData:function(){var r=this,e=\"/customer/customerEndList?sortField=id&page=\"+r.page+\"&pageSize=\"+r.pageSize+\"&status=Y&companyname=\"+r.YformInline.companyname+\"&customername=\"+r.YformInline.name+\"&customertel=\"+r.YformInline.tel+\"&productname=\"+r.YformInline.product+\"&marketer=\"+r.YformInline.marketername+\"&servicer=\"+r.YformInline.servicename;r.row={},this.GetData(e,function(e){var t=e.data.data;r.pageTotal=t.total,r.data=t.rows;for(var a=0;a<r.data.length;a++)r.data[a].company_id=r.data[a].companyid,null==r.data[a].enddate||\"\"==r.data[a].enddate||(r.data[a].enddate=r.data[a].enddate.slice(0,10)),null==r.data[a].callbackdate||\"\"==r.data[a].callbackdate||(r.data[a].callbackdate=r.data[a].callbackdate.slice(0,10)),null==r.data[a].servicebegindate||\"\"==r.data[a].servicebegindate||(r.data[a].servicebegindate=r.data[a].servicebegindate.slice(0,10))})},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},selectrow:function(e){this.row=e}},mounted:function(){this.getData()},created:function(){var t=this;r.a.$on(\"updateofflinecustomer\",function(e){t.getData()})}},c=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:t.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.companyname,callback:function(e){t.$set(t.YformInline,\"companyname\",e)},expression:\"YformInline.companyname\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.name,callback:function(e){t.$set(t.YformInline,\"name\",e)},expression:\"YformInline.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.tel,callback:function(e){t.$set(t.YformInline,\"tel\",e)},expression:\"YformInline.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.product,callback:function(e){t.$set(t.YformInline,\"product\",e)},expression:\"YformInline.product\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.marketername,callback:function(e){t.$set(t.YformInline,\"marketername\",e)},expression:\"YformInline.marketername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:t.YformInline.servicename,callback:function(e){t.$set(t.YformInline,\"servicename\",e)},expression:\"YformInline.servicename\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1),t._v(\" \"),a(\"p\")],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.check}},[t._v(\"查看\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.downExcel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-row-click\":t.selectrow}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1)],1)},[],!1,null,null,null);c.options.__file=\"processed.vue\";var m=c.exports,d=a(114),p={data:function(){return{searchCompany:\"\",searchProduct:\"\",searchFollow:\"\",isOpenAdd:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"},task_message_rule:{taxperiod:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],company:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],product:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],enddate:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"date\"}],reasonformarketer:[{required:!0,message:\"必选项！\",trigger:\"blur\"}]},followbysTag:!1,fuwu:!1,title:\"\",isshow:!0,currentPage:new Number,isSearch:!1,data4:[],data33:[],data3:[],page3:1,page33:1,pagea:1,pageTotal3:new Number,pageTotal33:new Number,pageTotala:new Number,selectCompany:!1,selectProduct:!1,columns3:[{title:\"用户名\",key:\"username\"},{title:\"真实姓名\",key:\"realname\"},{title:\"电话\",key:\"mobilephone\"}],columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"},{title:\"钱包余额\",key:\"balance\"},{title:\"是否国地税报道\",key:\"gdsreport\"}],columns33:[{title:\"产品名称\",key:\"product\",width:300}]}},created:function(){var t=this;t.$bus.on(\"OPEN_OFFLINE_ADD\",function(e){t.isOpenAdd=!0,t.$refs.task_message.resetFields(),t.task_message.company=\"\",t.task_message.product=\"\",t.task_message.customer=\"\",t.task_message.id=\"\",t.task_message.servicebegindate=\"\",t.task_message.enddate=\"\",t.task_message.callbackdate=\"\",t.task_message.endreason=\"\",t.task_message.reasonformarketer=\"\",t.task_message.reasonforcallback=\"\",t.task_message.marketername=\"\",t.task_message.servicername=\"\",t.task_message.tel=\"\",t.task_message.taxperiod=\"\",t.task_message.followbusiness=\"\"})},methods:{cancel:function(){this.isshow=!1,this.$refs.task_message.resetFields(),this.task_message.companyid=\"\",this.task_message.id=\"\"},keydown3:function(e){\"Enter\"==e.key&&this.searchFollowdata()},searchFollowdata:function(){this.pagea=1,this.getUser()},keydown1:function(e){\"Enter\"==e.key&&this.searchCompanyData()},searchCompanyData:function(){this.page3=1,this.getCompany()},keydown2:function(e){\"Enter\"==e.key&&this.searchProductData()},searchProductData:function(){this.page33=1,this.getProduct()},getCompany:function(){var s=this;s.selectCompany=!0;var e={params:{page:s.page3,pageSize:10,companyname:s.searchCompany}};this.$Get(\"api/customer/company/list\",e,function(e){var t=e.data.data;s.data4=[],s.pageTotal3=t.total;for(var a=0;a<t.rows.length;a++){var r=\"\";r=\"wbd\"==t.rows[a].gdsreport?\"未报道\":\"ybd\"==t.rows[a].gdsreport?\"已报道\":\"bybd\"==t.rows[a].gdsreport?\"不用报道\":\"\",s.data4.push({CompanyName:t.rows[a].companyname,TEL:t.rows[a].customerTel,NAME:t.rows[a].customerName,cpid:t.rows[a].id,balance:t.rows[a].balance,gdsreport:r,followby:t.rows[a].followby,followbyid:t.rows[a].followbyid})}})},close:function(){this.cancel(),this.add=!1,this.task_message.company=\"\",this.task_message.product=\"\",this.task_message.customer=\"\",this.task_message.id=\"\"},getProduct:function(){var r=this,e={params:{page:r.page33,pageSize:10,product:r.searchProduct}};r.selectProduct=!0,this.$Get(\"api/product/list\",e,function(e){var t=e.data.data;r.data33=[],r.pageTotal33=t.total;for(var a=0;a<t.rows.length;a++)r.data33.push(t.rows[a])})},rowSelect:function(e){var t=this;t.selectCompany=!1,t.task_message.company=e.CompanyName,t.task_message.customer=e.NAME,t.task_message.tel=e.TEL,t.task_message.companyid=e.cpid,t.task_message.marketername=e.followby,t.task_message.marketer=e.followbyid},rowSelect33:function(e){this.selectProduct=!1,this.task_message.product=e.product,this.task_message.productid=e.id},getUser:function(){var r=this,e={params:{page:r.pagea,pageSize:10,realname:r.searchFollow}};r.followbysTag=!0,this.$Get(\"api/user/list\",e,function(e){var t=e.data.data;r.pageTotala=t.total,r.data3=[];for(var a=0;a<t.rows.length;a++)r.data3.push(t.rows[a])})},rowSelect3:function(e){this.followbysTag=!1,this.task_message.servicername=e.realname,this.task_message.servicer=e.id},pageChange3:function(e){this.page3=e,this.getCompany()},pageChange33:function(e){this.page33=e,this.getProduct()},pageChangea:function(e){this.pagea=e,this.getUser()},submit:function(){var t=this,a=this;this.$refs.task_message.validate(function(e){e?a.postData():t.$Message.error(\"请填写必选项！\")})},postData:function(){var a=this,e={companyid:a.task_message.companyid,productid:a.task_message.productid,servicer:a.task_message.servicer,marketer:a.task_message.marketer,enddate:Object(d.a)(a.task_message.enddate),callbackdate:Object(d.a)(a.task_message.callbackdate),servicebegindate:Object(d.a)(a.task_message.servicebegindate),reasonformarketer:a.task_message.reasonformarketer,reasonforcallback:a.task_message.reasonforcallback,endreason:a.task_message.endreason,taxperiod:a.task_message.taxperiod,followbusiness:a.task_message.followbusiness};this.$Post(\"api/customer/createCustomerEnd\",e,function(e){if(r.a.$emit(\"updateofflinecustomer\",!0),e.data.data.cycleid){var t={id:e.data.data.cycleid,serviceStatus:\"stop\",downlinePeriod:a.task_message.taxperiod};a.$Post(\"/api/order/cycle/service/record/update\",t,function(e){a.add=!1},function(e){})}else a.isOpenAdd=!1;a.cancel()},function(e){})}}},u=Object(n.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"录入\",width:\"800\"},model:{value:t.isOpenAdd,callback:function(e){t.isOpenAdd=e},expression:\"isOpenAdd\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:t.task_message,rules:t.task_message_rule,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getCompany},model:{value:t.task_message.company,callback:function(e){t.$set(t.task_message,\"company\",e)},expression:\"task_message.company\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getProduct},model:{value:t.task_message.product,callback:function(e){t.$set(t.task_message,\"product\",e)},expression:\"task_message.product\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getCompany},model:{value:t.task_message.customer,callback:function(e){t.$set(t.task_message,\"customer\",e)},expression:\"task_message.customer\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.task_message.tel,callback:function(e){t.$set(t.task_message,\"tel\",e)},expression:\"task_message.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getUser},model:{value:t.task_message.servicername,callback:function(e){t.$set(t.task_message,\"servicername\",e)},expression:\"task_message.servicername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.task_message.marketername,callback:function(e){t.$set(t.task_message,\"marketername\",e)},expression:\"task_message.marketername\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"month\",size:\"small\"},model:{value:t.task_message.servicebegindate,callback:function(e){t.$set(t.task_message,\"servicebegindate\",e)},expression:\"task_message.servicebegindate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:t.task_message.enddate,callback:function(e){t.$set(t.task_message,\"enddate\",e)},expression:\"task_message.enddate\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:t.task_message.callbackdate,callback:function(e){t.$set(t.task_message,\"callbackdate\",e)},expression:\"task_message.callbackdate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\"},model:{value:t.task_message.endreason,callback:function(e){t.$set(t.task_message,\"endreason\",e)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[t._v(\"公司转让\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[t._v(\"企业升级\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[t._v(\"会计部\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[t._v(\"换同行\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[t._v(\"注销\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[t._v(\"其他\")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\"},model:{value:t.task_message.taxperiod,callback:function(e){t.$set(t.task_message,\"taxperiod\",e)},expression:\"task_message.taxperiod\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.reasonformarketer,callback:function(e){t.$set(t.task_message,\"reasonformarketer\",e)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.reasonforcallback,callback:function(e){t.$set(t.task_message,\"reasonforcallback\",e)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.followbusiness,callback:function(e){t.$set(t.task_message,\"followbusiness\",e)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.submit}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close}},[t._v(\"关闭\")])],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:t.selectCompany,callback:function(e){t.selectCompany=e},expression:\"selectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":t.keydown1},model:{value:t.searchCompany,callback:function(e){t.searchCompany=e},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchCompanyData},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:t.columns44,data:t.data4},on:{\"on-row-dblclick\":t.rowSelect}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal3,current:t.page3,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page3=e},\"on-change\":t.pageChange3}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择产品\",width:\"300\"},model:{value:t.selectProduct,callback:function(e){t.selectProduct=e},expression:\"selectProduct\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"20\"}},[a(\"Input\",{attrs:{placeholder:\"输入产品名称搜索\"},on:{\"on-keydown\":t.keydown2},model:{value:t.searchProduct,callback:function(e){t.searchProduct=e},expression:\"searchProduct\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchProductData},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:t.columns33,data:t.data33},on:{\"on-row-dblclick\":t.rowSelect33}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal33,current:t.page33,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page33=e},\"on-change\":t.pageChange33}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择服务人员\",width:\"500\"},model:{value:t.followbysTag,callback:function(e){t.followbysTag=e},expression:\"followbysTag\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{placeholder:\"输服务人员搜索\"},on:{\"on-keydown\":t.keydown3},model:{value:t.searchFollow,callback:function(e){t.searchFollow=e},expression:\"searchFollow\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchFollowdata},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:t.columns3,data:t.data3},on:{\"on-row-dblclick\":t.rowSelect3}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotala,\"show-total\":\"\",\"show-elevator\":\"\",current:t.pagea},on:{\"update:current\":function(e){t.pagea=e},\"on-change\":t.pageChangea}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);u.options.__file=\"add.vue\";var f=u.exports,h={data:function(){return{searchCompany:\"\",searchProduct:\"\",searchFollow:\"\",isOpenEdit:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"},task_message_rule:{taxperiod:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],company:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],product:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],enddate:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"date\"}],reasonformarketer:[{required:!0,message:\"必选项！\",trigger:\"blur\"}]},followbysTag:!1,fuwu:!1,title:\"\",isshow:!0,currentPage:new Number,isSearch:!1,data4:[],data33:[],data3:[],page3:1,page33:1,pagea:1,pageTotal3:new Number,pageTotal33:new Number,pageTotala:new Number,selectCompany:!1,selectProduct:!1,columns3:[{title:\"用户名\",key:\"username\"},{title:\"真实姓名\",key:\"realname\"},{title:\"电话\",key:\"mobilephone\"}],columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"},{title:\"钱包余额\",key:\"balance\"},{title:\"是否国地税报道\",key:\"gdsreport\"}],columns33:[{title:\"产品名称\",key:\"product\",width:300}]}},created:function(){var t=this;t.$bus.on(\"OPEN_OFFLINE_UPDATE\",function(e){t.$refs.task_message.resetFields(),t.isOpenEdit=!0,t.task_message.company=e.CompanyName,t.task_message.product=e.product,t.task_message.customer=e.name,t.task_message.id=e.id,t.task_message.servicebegindate=e.servicebegindate,t.task_message.enddate=e.enddate,t.task_message.callbackdate=e.callbackdate,t.task_message.endreason=e.endreason,t.task_message.reasonformarketer=e.reasonformarketer,t.task_message.reasonforcallback=e.reasonforcallback,t.task_message.marketername=e.marketer,t.task_message.servicername=e.servicer,t.task_message.tel=e.TEL,t.task_message.taxperiod=e.taxperiod,t.task_message.followbusiness=e.followbusiness})},methods:{cancel:function(){this.isshow=!1,this.$refs.task_message.resetFields(),this.task_message.companyid=\"\",this.task_message.id=\"\"},keydown3:function(e){\"Enter\"==e.key&&this.searchFollowdata()},searchFollowdata:function(){this.pagea=1,this.getUser()},keydown1:function(e){\"Enter\"==e.key&&this.searchCompanyData()},searchCompanyData:function(){this.page3=1,this.getCompany()},keydown2:function(e){\"Enter\"==e.key&&this.searchProductData()},searchProductData:function(){this.page33=1,this.getProduct()},getCompany:function(){var s=this;s.selectCompany=!0;var e={params:{page:s.page3,pageSize:10,companyname:s.searchCompany}};this.$Get(\"api/customer/company/list\",e,function(e){var t=e.data.data;s.data4=[],s.pageTotal3=t.total;for(var a=0;a<t.rows.length;a++){var r=\"\";r=\"wbd\"==t.rows[a].gdsreport?\"未报道\":\"ybd\"==t.rows[a].gdsreport?\"已报道\":\"bybd\"==t.rows[a].gdsreport?\"不用报道\":\"\",s.data4.push({CompanyName:t.rows[a].companyname,TEL:t.rows[a].customerTel,NAME:t.rows[a].customerName,cpid:t.rows[a].id,balance:t.rows[a].balance,gdsreport:r,followby:t.rows[a].followby,followbyid:t.rows[a].followbyid})}})},close:function(){this.cancel(),this.add=!1,this.task_message.company=\"\",this.task_message.product=\"\",this.task_message.customer=\"\",this.task_message.id=\"\",this.$refs.task_message.resetFields()},getProduct:function(){var r=this,e={params:{page:r.page33,pageSize:10,product:r.searchProduct}};r.selectProduct=!0,this.$Get(\"api/product/list\",e,function(e){var t=e.data.data;r.data33=[],r.pageTotal33=t.total;for(var a=0;a<t.rows.length;a++)r.data33.push(t.rows[a])})},rowSelect:function(e){var t=this;t.selectCompany=!1,t.task_message.company=e.CompanyName,t.task_message.customer=e.NAME,t.task_message.tel=e.TEL,t.task_message.companyid=e.cpid,t.task_message.marketername=e.followby,t.task_message.marketer=e.followbyid},rowSelect33:function(e){this.selectProduct=!1,this.task_message.product=e.product,this.task_message.productid=e.id},getUser:function(){var r=this,e={params:{page:r.pagea,pageSize:10,realname:r.searchFollow}};r.followbysTag=!0,this.$Get(\"api/user/list\",e,function(e){var t=e.data.data;r.pageTotala=t.total,r.data3=[];for(var a=0;a<t.rows.length;a++)r.data3.push(t.rows[a])})},rowSelect3:function(e){this.followbysTag=!1,this.task_message.servicername=e.realname,this.task_message.servicer=e.id},pageChange3:function(e){this.page3=e,this.getCompany()},pageChange33:function(e){this.page33=e,this.getProduct()},pageChangea:function(e){this.pagea=e,this.getUser()},submit:function(){var t=this,a=this;this.$refs.task_message.validate(function(e){e?a.postDataEdit():t.$Message.error(\"请填写必选项！\")})},postDataEdit:function(){var t=this,e={id:t.task_message.id,productid:t.task_message.productid,servicer:t.task_message.servicer,marketer:t.task_message.marketer,enddate:Object(d.a)(t.task_message.enddate),callbackdate:Object(d.a)(t.task_message.callbackdate),servicebegindate:Object(d.a)(t.task_message.servicebegindate),reasonformarketer:t.task_message.reasonformarketer,reasonforcallback:t.task_message.reasonforcallback,endreason:t.task_message.endreason,taxperiod:t.task_message.taxperiod,followbusiness:t.task_message.followbusiness};this.$Post(\"api/customer/updateCustomerEnd\",e,function(e){t.isOpenEdit=!1,r.a.$emit(\"updateofflinecustomer\",!0),t.cancel()},function(e){})}}},g=Object(n.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},model:{value:t.isOpenEdit,callback:function(e){t.isOpenEdit=e},expression:\"isOpenEdit\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:t.task_message,rules:t.task_message_rule,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getCompany},model:{value:t.task_message.company,callback:function(e){t.$set(t.task_message,\"company\",e)},expression:\"task_message.company\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getProduct},model:{value:t.task_message.product,callback:function(e){t.$set(t.task_message,\"product\",e)},expression:\"task_message.product\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getCompany},model:{value:t.task_message.customer,callback:function(e){t.$set(t.task_message,\"customer\",e)},expression:\"task_message.customer\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.task_message.tel,callback:function(e){t.$set(t.task_message,\"tel\",e)},expression:\"task_message.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\"},on:{\"on-focus\":t.getUser},model:{value:t.task_message.servicername,callback:function(e){t.$set(t.task_message,\"servicername\",e)},expression:\"task_message.servicername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.task_message.marketername,callback:function(e){t.$set(t.task_message,\"marketername\",e)},expression:\"task_message.marketername\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:t.task_message.servicebegindate,callback:function(e){t.$set(t.task_message,\"servicebegindate\",e)},expression:\"task_message.servicebegindate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:t.task_message.enddate,callback:function(e){t.$set(t.task_message,\"enddate\",e)},expression:\"task_message.enddate\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\"},model:{value:t.task_message.callbackdate,callback:function(e){t.$set(t.task_message,\"callbackdate\",e)},expression:\"task_message.callbackdate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\"},model:{value:t.task_message.endreason,callback:function(e){t.$set(t.task_message,\"endreason\",e)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[t._v(\"公司转让\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[t._v(\"企业升级\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[t._v(\"会计部\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[t._v(\"换同行\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[t._v(\"注销\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[t._v(\"其他\")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\"},model:{value:t.task_message.taxperiod,callback:function(e){t.$set(t.task_message,\"taxperiod\",e)},expression:\"task_message.taxperiod\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.reasonformarketer,callback:function(e){t.$set(t.task_message,\"reasonformarketer\",e)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.reasonforcallback,callback:function(e){t.$set(t.task_message,\"reasonforcallback\",e)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.followbusiness,callback:function(e){t.$set(t.task_message,\"followbusiness\",e)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.submit}},[t._v(\"修改\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close}},[t._v(\"关闭\")])],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:t.selectCompany,callback:function(e){t.selectCompany=e},expression:\"selectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":t.keydown1},model:{value:t.searchCompany,callback:function(e){t.searchCompany=e},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchCompanyData},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:t.columns44,data:t.data4},on:{\"on-row-dblclick\":t.rowSelect}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal3,current:t.page3,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page3=e},\"on-change\":t.pageChange3}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择产品\",width:\"300\"},model:{value:t.selectProduct,callback:function(e){t.selectProduct=e},expression:\"selectProduct\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"20\"}},[a(\"Input\",{attrs:{placeholder:\"输入产品名称搜索\"},on:{\"on-keydown\":t.keydown2},model:{value:t.searchProduct,callback:function(e){t.searchProduct=e},expression:\"searchProduct\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchProductData},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:t.columns33,data:t.data33},on:{\"on-row-dblclick\":t.rowSelect33}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal33,current:t.page33,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page33=e},\"on-change\":t.pageChange33}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择服务人员\",width:\"500\"},model:{value:t.followbysTag,callback:function(e){t.followbysTag=e},expression:\"followbysTag\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{placeholder:\"输服务人员搜索\"},on:{\"on-keydown\":t.keydown3},model:{value:t.searchFollow,callback:function(e){t.searchFollow=e},expression:\"searchFollow\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.searchFollowdata},slot:\"append\"},[t._v(\"搜索\")])],1)],1)],1),t._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",columns:t.columns3,data:t.data3},on:{\"on-row-dblclick\":t.rowSelect3}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotala,\"show-total\":\"\",\"show-elevator\":\"\",current:t.pagea},on:{\"update:current\":function(e){t.pagea=e},\"on-change\":t.pageChangea}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);g.options.__file=\"update.vue\";var v=g.exports,y={data:function(){return{isOpenShow:!1,task_message:{companyid:\"\",taxperiod:\"\",marketername:\"\",marketer:\"\",company:\"\",product:\"\",customer:\"\",id:\"\",servicebegindate:\"\",enddate:\"\",callbackdate:\"\",endreason:\"\",reasonformarketer:\"\",reasonforcallback:\"\",tel:\"\",followbusiness:\"\"}}},created:function(){var t=this;this.$bus.on(\"OPEN_OFFLINE_SHOW\",function(e){t.$refs.task_message.resetFields(),t.isOpenShow=!0,t.task_message.company=e.CompanyName,null==e.product||\"\"==e.product?t.task_message.product=\".\":t.task_message.product=e.product,t.task_message.customer=e.name,t.task_message.servicebegindate=e.servicebegindate,t.task_message.enddate=e.enddate,t.task_message.callbackdate=e.callbackdate,t.task_message.endreason=e.endreason,t.task_message.reasonformarketer=e.reasonformarketer,t.task_message.reasonforcallback=e.reasonforcallback,t.task_message.marketername=e.marketer,t.task_message.servicername=e.servicer,t.task_message.taxperiod=e.taxperiod,t.task_message.tel=e.TEL,t.task_message.followbusiness=e.followbusiness})}},k=Object(n.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},model:{value:t.isOpenShow,callback:function(e){t.isOpenShow=e},expression:\"isOpenShow\"}},[a(\"Form\",{ref:\"task_message\",attrs:{model:t.task_message,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"company\",label:\"公司名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.company,callback:function(e){t.$set(t.task_message,\"company\",e)},expression:\"task_message.company\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"product\",label:\"产品名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.product,callback:function(e){t.$set(t.task_message,\"product\",e)},expression:\"task_message.product\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"customer\",label:\"客户名称\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.customer,callback:function(e){t.$set(t.task_message,\"customer\",e)},expression:\"task_message.customer\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户手机\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.tel,callback:function(e){t.$set(t.task_message,\"tel\",e)},expression:\"task_message.tel\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicername\",label:\"服务人员\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.servicername,callback:function(e){t.$set(t.task_message,\"servicername\",e)},expression:\"task_message.servicername\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:t.task_message.marketername,callback:function(e){t.$set(t.task_message,\"marketername\",e)},expression:\"task_message.marketername\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"servicebegindate\",label:\"服务开始时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:t.task_message.servicebegindate,callback:function(e){t.$set(t.task_message,\"servicebegindate\",e)},expression:\"task_message.servicebegindate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"enddate\",label:\"下线时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:t.task_message.enddate,callback:function(e){t.$set(t.task_message,\"enddate\",e)},expression:\"task_message.enddate\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"date\",size:\"small\",readonly:\"\"},model:{value:t.task_message.callbackdate,callback:function(e){t.$set(t.task_message,\"callbackdate\",e)},expression:\"task_message.callbackdate\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"endreason\",label:\"客户类别\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",disabled:\"\"},model:{value:t.task_message.endreason,callback:function(e){t.$set(t.task_message,\"endreason\",e)},expression:\"task_message.endreason\"}},[a(\"Option\",{attrs:{value:\"gszr\"}},[t._v(\"公司转让\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qysj\"}},[t._v(\"企业升级\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"kjb\"}},[t._v(\"会计部\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"hth\"}},[t._v(\"换同行\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"zx\"}},[t._v(\"注销\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[t._v(\"其他\")])],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"FormItem\",{attrs:{prop:\"taxperiod\",label:\"下线税期\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"格式：2018-06\",readonly:\"\"},model:{value:t.task_message.taxperiod,callback:function(e){t.$set(t.task_message,\"taxperiod\",e)},expression:\"task_message.taxperiod\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonformarketer\",label:\"市场通知下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5},readonly:\"\"},model:{value:t.task_message.reasonformarketer,callback:function(e){t.$set(t.task_message,\"reasonformarketer\",e)},expression:\"task_message.reasonformarketer\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"reasonforcallback\",label:\"客户实际下线原因\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5},readonly:\"\"},model:{value:t.task_message.reasonforcallback,callback:function(e){t.$set(t.task_message,\"reasonforcallback\",e)},expression:\"task_message.reasonforcallback\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[t._v(\"1\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"20\"}},[a(\"FormItem\",{attrs:{prop:\"followbusiness\",label:\"跟进中的业务\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\",autosize:{minRows:2,maxRows:5}},model:{value:t.task_message.followbusiness,callback:function(e){t.$set(t.task_message,\"followbusiness\",e)},expression:\"task_message.followbusiness\"}})],1)],1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);k.options.__file=\"show.vue\";var _={name:\"offlineCustomer_index\",components:{Untreated:l,Processed:m,Add:f,show:k.exports,update:v},data:function(){return{isOpen:!1}},created:function(){}},b=Object(n.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[a(\"Untreated\")],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"processed\")],1)],1),e._v(\" \"),a(\"Add\"),e._v(\" \"),a(\"update\"),e._v(\" \"),a(\"show\")],1)},[],!1,null,null,null);b.options.__file=\"offline_index.vue\";t.default=b.exports},829:function(e,t,a){\"use strict\";a.r(t);var r=a(405);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],components:{},data:function(){var a=this;return{selectRowArray:[],loading:!1,search_model:\"\",NformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"#\",type:\"selection\",width:60},{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:180},{title:\"完结状态\",key:\"isfinish\",minWidth:120},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"N\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"alisname\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"server_realname\",title:\"服务人员\"},{field:\"followby_realname\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\",format:\"departAlias\"},{field:\"serviceranks\",title:\"服务评分\"}])),sortField:\"callbackdate\",datatype:2,companyname:e.NformInline.companyname,name:e.NformInline.name,tel:e.NformInline.tel,servicename:e.NformInline.servicename,marketername:e.NformInline.marketername,depart:e.NformInline.depart,bcreatedate:Object(r.a)(e.NformInline.createdate[0]),ecreatedate:Object(r.a)(e.NformInline.createdate[1]),bcallbackdate:Object(r.a)(e.NformInline.updatedate[0]),ecallbackdate:Object(r.a)(e.NformInline.updatedate[1]),productname:e.NformInline.productname},a=this.$MergeURL(\"api/customer/customerCallbackList\",t);window.open(a)},search:function(){this.page=1,this.getDataN()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.name=\"\",this.NformInline.tel=\"\",this.NformInline.servicename=\"\",this.NformInline.marketername=\"\",this.NformInline.depart=\"\",this.NformInline.createdate=[],this.NformInline.updatedate=[],this.NformInline.productname=\"\",this.getDataN()},pageChange:function(e){this.page=e,this.getDataN()},pageSizeChange:function(e){this.pageSize=e,this.getDataN()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getDataN:function(){var e,s=this;s.loading=!0;s.row=\"\";var t={params:(e={sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,status:\"N\",companyname:s.NformInline.companyname,name:s.NformInline.name,tel:s.NformInline.tel,servicename:s.NformInline.servicename,marketername:s.NformInline.marketername,depart:s.NformInline.depart,datatype:2,bcreatedate:Object(r.a)(s.NformInline.createdate[0]),ecreatedate:Object(r.a)(s.NformInline.createdate[1]),bcallbackdate:Object(r.a)(s.NformInline.updatedate[0]),ecallbackdate:Object(r.a)(s.NformInline.updatedate[1]),productname:s.NformInline.productname},n(e,\"sortField\",\"updatedate\"),n(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(e){s.$backToLogin(e),s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].num=\"1\",s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlxMap.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfztMap.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAliasMap.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})},select_change:function(e){this.selectRowArray=e},finish:function(){var t=this;if(0==this.selectRowArray.length)t.$Message.warning(\"请先勾选需要批量处理的行！\");else{for(var e=[],a=0;a<t.selectRowArray.length;a++)e.push(t.selectRowArray[a].id);var r={ids:e.join(\",\")};t.$Post(\"api/customer/callback/batch/finish\",r,function(e){t.$bus.emit(\"update_returnVisit_edit\")},function(e){})}}},created:function(){var t=this;this.getDataN(),t.$bus.on(\"update_returnVisit_edit\",function(e){t.getDataN()})}},o=a(4),l=Object(o.a)(s,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"Card\",[r(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[r(\"Collapse\",{model:{value:a.search_model,callback:function(e){a.search_model=e},expression:\"search_model\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[r(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),a._v(\"\\n                    筛选\\n                    \"),r(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),r(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.search(e):null}},slot:\"content\"},[r(\"Form\",{ref:\"NformInline\",attrs:{model:a.NformInline,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.companyname,callback:function(e){a.$set(a.NformInline,\"companyname\",e)},expression:\"NformInline.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.name,callback:function(e){a.$set(a.NformInline,\"name\",e)},expression:\"NformInline.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.tel,callback:function(e){a.$set(a.NformInline,\"tel\",e)},expression:\"NformInline.tel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.servicename,callback:function(e){a.$set(a.NformInline,\"servicename\",e)},expression:\"NformInline.servicename\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.marketername,callback:function(e){a.$set(a.NformInline,\"marketername\",e)},expression:\"NformInline.marketername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.depart,callback:function(e){a.$set(a.NformInline,\"depart\",e)},expression:\"NformInline.depart\"}},a._l(a.departAlias,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.NformInline.productname,callback:function(e){a.$set(a.NformInline,\"productname\",e)},expression:\"NformInline.productname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:a.NformInline.createdate,callback:function(e){a.$set(a.NformInline,\"createdate\",e)},expression:\"NformInline.createdate\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:a.NformInline.updatedate,callback:function(e){a.$set(a.NformInline,\"updatedate\",e)},expression:\"NformInline.updatedate\"}})],1)],1)],1),a._v(\" \"),r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\"},on:{click:a.search}},[a._v(\"搜索\")]),a._v(\" \"),r(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:a.reset}},[a._v(\"重置\")])],1)],1)],1),a._v(\" \"),r(\"p\")],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"ButtonGroup\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.show}},[a._v(\"查看\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.edit}},[a._v(\"编辑\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitN-edit\"],expression:\"['returnVisitN-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.finish}},[a._v(\"完结\")]),a._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.downloadExcel}},[a._v(\"导出Excel\")])],1)],1),a._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.header,loading:a.loading,data:a.data},on:{\"on-selection-change\":a.select_change,\"on-current-change\":a.selectrow}}),a._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,\"show-total\":\"\",current:a.page,\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1)},[],!1,null,null,null);l.options.__file=\"untreated.vue\";var i=l.exports;function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={props:[\"hfwtlxMap\",\"departAliasMap\",\"departAlias\",\"hfztMap\"],data:function(){var a=this;return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],header:[{title:\"公司名称\",key:\"companyname\",width:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",width:120},{title:\"客户手机\",key:\"TEL\",width:120},{title:\"产品名称\",key:\"alisname\",width:150},{title:\"完结状态\",key:\"isfinish\",width:120},{title:\"问题类型\",key:\"calltypeNAME\",width:120},{title:\"创建时间\",key:\"createdate\",width:120},{title:\"回访时间\",key:\"callbackdate\",width:120},{title:\"回访状态\",key:\"callbackstatusName\",width:120},{title:\"服务人员\",key:\"server_realname\",width:120},{title:\"市场人员\",key:\"followby_realname\",width:120},{title:\"责任部门\",key:\"departNAME\",width:120},{title:\"服务评分\",key:\"serviceranks\",width:120},{title:\"操作\",key:\"action\",fixed:\"right\",width:200,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_customer_detail_modal\",{ID:t.row.customerid})}}},\"[查看客户]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){a.$store.commit(\"open_gobal_company_detail_modal\",t.row.companyid)}}},\"[查看企业]\")])}}]}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",status:\"Y\",export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"product\",title:\"产品名称\"},{field:\"calltype\",title:\"问题类型\",format:\"hfwtlx\"},{field:\"createdate\",title:\"创建时间\"},{field:\"callbackdate\",title:\"回访时间\"},{field:\"callbackstatus\",title:\"回访状态\",format:\"hfzt\"},{field:\"servicename\",title:\"服务人员\"},{field:\"marketername\",title:\"市场人员\"},{field:\"depart\",title:\"责任部门\",format:\"departAlias\"},{field:\"serviceranks\",title:\"服务评分\"}])),companyname:e.YformInline.companyname,name:e.YformInline.name,tel:e.YformInline.tel,sortField:\"callbackdate\",datatype:2,servicename:e.YformInline.servicename,marketername:e.YformInline.marketername,depart:e.YformInline.depart,bcreatedate:Object(r.a)(e.YformInline.createdate[0]),ecreatedate:Object(r.a)(e.YformInline.createdate[1]),bcallbackdate:Object(r.a)(e.YformInline.updatedate[0]),ecallbackdate:Object(r.a)(e.YformInline.updatedate[1]),productname:e.YformInline.productname},a=this.$MergeURL(\"api/customer/customerCallbackList\",t);window.open(a)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.name=\"\",this.YformInline.tel=\"\",this.YformInline.servicename=\"\",this.YformInline.marketername=\"\",this.YformInline.depart=\"\",this.YformInline.createdate=[],this.YformInline.updatedate=[],this.YformInline.productname=\"\",this.getData()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},cancel:function(){this.customerid=[],this.isExamine=!1},selectrow:function(e){this.row=e},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},edit:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"edit\",this.row)},show:function(){null==this.row||\"\"==this.row?this.$Message.warning(\"请选择一行进行编辑！\"):this.$emit(\"show\",this.row)},getData:function(){var e,s=this;s.loading=!0,s.row=\"\";var t={params:(e={sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,status:\"Y\",companyname:s.YformInline.companyname,name:s.YformInline.name,tel:s.YformInline.tel,servicename:s.YformInline.servicename,marketername:s.YformInline.marketername,depart:s.YformInline.depart,datatype:2,bcreatedate:Object(r.a)(s.YformInline.createdate[0]),ecreatedate:Object(r.a)(s.YformInline.createdate[1]),bcallbackdate:Object(r.a)(s.YformInline.updatedate[0]),ecallbackdate:Object(r.a)(s.YformInline.updatedate[1]),productname:s.YformInline.productname},c(e,\"sortField\",\"updatedate\"),c(e,\"order\",\"desc\"),e)};this.$http.get(\"api/customer/customerCallbackList\",t).then(function(e){s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].num=\"1\",s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlxMap.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfztMap.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAliasMap.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})}},created:function(){var t=this;this.getData(),t.$bus.on(\"update_returnVisit_edit\",function(e){t.getData()})}},d=Object(o.a)(m,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"Card\",[r(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[r(\"Collapse\",{model:{value:a.search_model,callback:function(e){a.search_model=e},expression:\"search_model\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[r(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),a._v(\"\\n                    筛选\\n                    \"),r(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),r(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!a._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?a.search(e):null}},slot:\"content\"},[r(\"Form\",{ref:\"YformInline\",attrs:{model:a.YformInline,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.companyname,callback:function(e){a.$set(a.YformInline,\"companyname\",e)},expression:\"YformInline.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.name,callback:function(e){a.$set(a.YformInline,\"name\",e)},expression:\"YformInline.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"tel\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.tel,callback:function(e){a.$set(a.YformInline,\"tel\",e)},expression:\"YformInline.tel\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.servicename,callback:function(e){a.$set(a.YformInline,\"servicename\",e)},expression:\"YformInline.servicename\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.marketername,callback:function(e){a.$set(a.YformInline,\"marketername\",e)},expression:\"YformInline.marketername\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.depart,callback:function(e){a.$set(a.YformInline,\"depart\",e)},expression:\"YformInline.depart\"}},a._l(a.departAlias,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"productname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",placeholder:\"\",size:\"small\"},model:{value:a.YformInline.productname,callback:function(e){a.$set(a.YformInline,\"productname\",e)},expression:\"YformInline.productname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\",size:\"small\"},model:{value:a.YformInline.createdate,callback:function(e){a.$set(a.YformInline,\"createdate\",e)},expression:\"YformInline.createdate\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:a.YformInline.updatedate,callback:function(e){a.$set(a.YformInline,\"updatedate\",e)},expression:\"YformInline.updatedate\"}})],1)],1)],1),a._v(\" \"),r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\"},on:{click:a.search}},[a._v(\"搜索\")]),a._v(\" \"),r(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:a.reset}},[a._v(\"重置\")])],1)],1)],1),a._v(\" \"),r(\"p\")],1)],1)],1),a._v(\" \"),r(\"Row\",[r(\"ButtonGroup\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.show}},[a._v(\"查看\")]),a._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"returnVisitY-edit\"],expression:\"['returnVisitY-edit']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.edit}},[a._v(\"编辑\")]),a._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:a.downloadExcel}},[a._v(\"导出Excel\")])],1)],1),a._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:a.header,loading:a.loading,data:a.data},on:{\"on-current-change\":a.selectrow}}),a._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:a.pageTotal,current:a.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){a.page=e},\"on-change\":a.pageChange,\"on-page-size-change\":a.pageSizeChange}})],1)],1)},[],!1,null,null,null);d.options.__file=\"processed.vue\";var p=d.exports,u=(a(53),a(114)),f={props:{companyname:{type:[String]},hfwtlx:{type:[Array,String]},hfzt:{type:[Array,String]},departAlias:{type:[Array,String]}},data:function(){return{loading:!1,search_model:\"\",YformInline:{productname:\"\",companyname:\"\",name:\"\",tel:\"\",servicename:\"\",marketername:\"\",depart:\"\",createdate:[],updatedate:[]},page:1,pageSize:10,isExamine:!1,modal:!1,pageTotal:new Number,row:\"\",customerid:[],data:[{aaa:111}],hfwtlx_map:new Map,hfzt_map:new Map,departAlias_map:new Map,header:[{title:\"公司名称\",key:\"companyname\",minWidth:260,render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":16<t.row.companyname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户手机\",key:\"TEL\",minWidth:120},{title:\"产品名称\",key:\"alisname\",minWidth:150},{title:\"问题类型\",key:\"calltypeNAME\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120},{title:\"回访时间\",key:\"callbackdate\",minWidth:120},{title:\"回访状态\",key:\"callbackstatusName\",minWidth:120},{title:\"服务人员\",key:\"server_realname\",minWidth:120},{title:\"市场人员\",key:\"followby_realname\",minWidth:120},{title:\"责任部门\",key:\"departNAME\",minWidth:120},{title:\"服务评分\",key:\"serviceranks\",minWidth:120}]}},methods:{pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},customerDetail:function(e){this.customerid[0]=e.row.customerid,this.isExamine=!0,this.modal=!0},show:function(e){},getData:function(){var s=this;s.loading=!0,s.row=\"\";var e={params:{sortField:\"callbackdate\",page:s.page,pageSize:s.pageSize,datatype:2,companyname:s.companyname}};this.$http.get(\"api/customer/customerCallbackList\",e).then(function(e){s.data=e.data.data.rows,s.pageTotal=e.data.data.total;for(var t=0;t<e.data.data.rows.length;t++)if(s.data[t].company_id=s.data[t].companyid,null==s.data[t].createdate||\"\"==s.data[t].createdate||(s.data[t].createdate=s.data[t].createdate.slice(0,10)),null==s.data[t].callbackdate||\"\"==s.data[t].callbackdate||(s.data[t].callbackdate=s.data[t].callbackdate.slice(0,10)),s.data[t].calltypeNAME=s.hfwtlx_map.get(s.data[t].calltype),s.data[t].callbackstatusName=s.hfzt_map.get(s.data[t].callbackstatus),null==s.data[t].depart||\"\"==s.data[t].depart)s.data[t].depart=\"\";else{for(var a=s.data[t].depart.split(\",\"),r=0;r<a.length;r++)a[r]=s.departAlias_map.get(a[r]);s.data[t].departNAME=a.join(\",\")}s.loading=!1})},getDataCenter:function(){var e=this;e.hfwtlx_map=e.$array2map(e.hfwtlx),e.hfzt_map=e.$array2map(e.hfzt),e.departAlias_map=e.$array2map(e.departAlias),e.getData()}},watch:{companyname:\"getData\"},created:function(){this.getDataCenter()}},h=Object(o.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,loading:t.loading,data:t.data}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange,\"on-page-size-change\":t.pageSizeChange}})],1)],1)},[],!1,null,null,null);h.options.__file=\"histroy_list_show.vue\";var g=h.exports,v={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{add_complaint_detail:function(){var t=this;t.loading=!0;var e={callbackdate:Object(u.a)(t.data.callbackdate),id:t.data.id,solutionbymarketer:t.data.solutionbymarketer,solutionbyservicer:t.data.solutionbyservicer,depart:t.data.depart.join(\",\"),serviceranks:t.data.serviceranks,calltype:t.data.calltype,callbackstatus:t.data.callbackstatus,reason:t.data.reason};this.$Post(\"api/customer/updateCustomerCallback\",e,function(e){t.loading=!1,t.$bus.emit(\"update_returnVisit_edit\",!0),t.close()},function(e){t.loading=!1})},close:function(){this.$emit(\"close\")}},created:function(){var e=this;0==Array.isArray(e.data.depart)&&(e.data.depart=e.data.depart.split(\",\"));var t=localStorage.getItem(\"Role\"),a=localStorage.getItem(\"id\");t=JSON.parse(t);for(var r=0;r<t.length;r++)\"salers\"!=t[r]&&10059!=a||(e.ismarket=!1),\"hfgl\"!=t[r]&&10059!=a||(e.isreturn=!1),\"kj\"!=t[r]&&\"servicer\"!=t[r]&&\"planner\"!=t[r]&&\"auditing\"!=t[r]&&\"ssbgd\"!=t[r]&&\"kjbgd\"!=t[r]&&\"qhbgd\"!=t[r]&&\"sjbgd\"!=t[r]&&10059!=a||(e.isservice=!1)}},y=Object(o.a)(v,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"编辑\",width:\"800\"},on:{\"on-cancel\":a.close},model:{value:a.isOpenEdit,callback:function(e){a.isOpenEdit=e},expression:\"isOpenEdit\"}},[r(\"Tabs\",{model:{value:a.showTab,callback:function(e){a.showTab=e},expression:\"showTab\"}},[r(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[r(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:a.data,\"label-width\":140}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.companyname,callback:function(e){a.$set(a.data,\"companyname\",e)},expression:\"data.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.name,callback:function(e){a.$set(a.data,\"name\",e)},expression:\"data.name\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.TEL,callback:function(e){a.$set(a.data,\"TEL\",e)},expression:\"data.TEL\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.alisname,callback:function(e){a.$set(a.data,\"alisname\",e)},expression:\"data.alisname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.server_realname,callback:function(e){a.$set(a.data,\"server_realname\",e)},expression:\"data.server_realname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.followby_realname,callback:function(e){a.$set(a.data,\"followby_realname\",e)},expression:\"data.followby_realname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[r(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",disabled:a.isreturn},model:{value:a.data.serviceranks,callback:function(e){a.$set(a.data,\"serviceranks\",e)},expression:\"data.serviceranks\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:a.isreturn},model:{value:a.data.calltype,callback:function(e){a.$set(a.data,\"calltype\",e)},expression:\"data.calltype\"}},a._l(a.hfwtlx,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"CheckboxGroup\",{model:{value:a.data.depart,callback:function(e){a.$set(a.data,\"depart\",e)},expression:\"data.depart\"}},a._l(a.departAlias,function(e){return r(\"span\",{key:e.id},[r(\"Checkbox\",{attrs:{label:e.typecode,disabled:a.isreturn}},[r(\"span\",[a._v(a._s(e.typename))])])],1)}),0)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:a.isreturn},model:{value:a.data.callbackstatus,callback:function(e){a.$set(a.data,\"callbackstatus\",e)},expression:\"data.callbackstatus\"}},a._l(a.hfzt,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",disabled:a.isreturn},model:{value:a.data.callbackdate,callback:function(e){a.$set(a.data,\"callbackdate\",e)},expression:\"data.callbackdate\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.isreturn},model:{value:a.data.reason,callback:function(e){a.$set(a.data,\"reason\",e)},expression:\"data.reason\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.ismarket},model:{value:a.data.solutionbymarketer,callback:function(e){a.$set(a.data,\"solutionbymarketer\",e)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,disabled:a.isservice},model:{value:a.data.solutionbyservicer,callback:function(e){a.$set(a.data,\"solutionbyservicer\",e)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),a._v(\" \"),r(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[r(\"history-list\",{attrs:{companyname:a.data.companyname,hfwtlx:a.hfwtlx,hfzt:a.hfzt,departAlias:a.departAlias}})],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.add_complaint_detail}},[a._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);y.options.__file=\"edit.vue\";var k=y.exports,_={components:{HistoryList:g},props:{hfwtlx:{type:[String,Array,Object]},hfzt:{type:[String,Array,Object]},data:{type:[String,Array,Object]},departAlias:{type:[String,Array,Object]}},data:function(){return{loading:!1,showTab:\"1\",companyname:\"\",isservice:!0,ismarket:!0,isreturn:!0,isOpenEdit:!0}},methods:{close:function(){this.$emit(\"close\")}},created:function(){0==Array.isArray(this.data.depart)&&(this.data.depart=this.data.depart.split(\",\"))}},b=Object(o.a)(_,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"查看\",width:\"800\"},on:{\"on-cancel\":a.close},model:{value:a.isOpenEdit,callback:function(e){a.isOpenEdit=e},expression:\"isOpenEdit\"}},[r(\"Tabs\",{model:{value:a.showTab,callback:function(e){a.showTab=e},expression:\"showTab\"}},[r(\"TabPane\",{attrs:{label:\"当前回访记录\",name:\"1\"}},[r(\"Form\",{ref:\"data\",staticStyle:{margin:\"auto\"},attrs:{model:a.data,\"label-width\":140}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.companyname,callback:function(e){a.$set(a.data,\"companyname\",e)},expression:\"data.companyname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.name,callback:function(e){a.$set(a.data,\"name\",e)},expression:\"data.name\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"TEL\",label:\"客户电话：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.TEL,callback:function(e){a.$set(a.data,\"TEL\",e)},expression:\"data.TEL\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"alisname\",label:\"产品名称：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.alisname,callback:function(e){a.$set(a.data,\"alisname\",e)},expression:\"data.alisname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"server_realname\",label:\"服务人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.server_realname,callback:function(e){a.$set(a.data,\"server_realname\",e)},expression:\"data.server_realname\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"marketername\",label:\"市场人员：\"}},[r(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.followby_realname,callback:function(e){a.$set(a.data,\"followby_realname\",e)},expression:\"data.followby_realname\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"serviceranks\",label:\"服务评分：\"}},[r(\"Input\",{staticStyle:{width:\"100%\"},attrs:{type:\"text\",readonly:\"\"},model:{value:a.data.serviceranks,callback:function(e){a.$set(a.data,\"serviceranks\",e)},expression:\"data.serviceranks\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"calltype\",label:\"问题类型：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:a.data.calltype,callback:function(e){a.$set(a.data,\"calltype\",e)},expression:\"data.calltype\"}},a._l(a.hfwtlx,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"depart\",label:\"责任部门：\"}},[r(\"CheckboxGroup\",{model:{value:a.data.depart,callback:function(e){a.$set(a.data,\"depart\",e)},expression:\"data.depart\"}},a._l(a.departAlias,function(e){return r(\"span\",{key:e.id},[r(\"Checkbox\",{attrs:{label:e.typecode,disabled:\"\"}},[r(\"span\",[a._v(a._s(e.typename))])])],1)}),0)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackstatus\",label:\"回访状态：\"}},[r(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:a.data.callbackstatus,callback:function(e){a.$set(a.data,\"callbackstatus\",e)},expression:\"data.callbackstatus\"}},a._l(a.hfzt,function(e,t){return r(\"Option\",{key:t,attrs:{value:e.typecode}},[a._v(a._s(e.typename))])}),1)],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"FormItem\",{attrs:{prop:\"callbackdate\",label:\"回访时间：\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"date\",placeholder:\"选择日期\",readonly:\"\"},model:{value:a.data.callbackdate,callback:function(e){a.$set(a.data,\"callbackdate\",e)},expression:\"data.callbackdate\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"reason\",label:\"问题反馈或建议：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.reason,callback:function(e){a.$set(a.data,\"reason\",e)},expression:\"data.reason\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbymarketer\",label:\"市场反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.solutionbymarketer,callback:function(e){a.$set(a.data,\"solutionbymarketer\",e)},expression:\"data.solutionbymarketer\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{prop:\"solutionbyservicer\",label:\"服务部门反馈：\"}},[r(\"Input\",{attrs:{type:\"textarea\",row:3,readonly:\"\"},model:{value:a.data.solutionbyservicer,callback:function(e){a.$set(a.data,\"solutionbyservicer\",e)},expression:\"data.solutionbyservicer\"}})],1)],1)],1)],1)],1),a._v(\" \"),r(\"TabPane\",{attrs:{label:\"历史回访记录\",name:\"2\"}},[r(\"history-list\",{attrs:{companyname:a.data.companyname,hfwtlx:a.hfwtlx,hfzt:a.hfzt,departAlias:a.departAlias,readonly:\"\"}})],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);b.options.__file=\"show.vue\";var w={name:\"returnWorkOrder_index\",components:{Untreated:i,Processed:p,edit:k,show:b.exports},data:function(){return{data:\"\",openEdit:!1,openShow:!1,hfwtlx:[],hfzt:[],return_visit_depart:[],hfwtlx_map:new Map,hfzt_map:new Map,return_visit_depart_map:new Map}},methods:{getDataCenter:function(){var t=this;this.$GetDataCenter(\"hfwtlx,hfzt,return_visit_depart\",function(e){t.hfwtlx=e.data.data.hfwtlx,t.hfzt=e.data.data.hfzt,t.return_visit_depart=e.data.data.return_visit_depart,t.hfwtlx_map=t.$array2map(t.hfwtlx),t.hfzt_map=t.$array2map(t.hfzt),t.return_visit_depart_map=t.$array2map(t.return_visit_depart)})},open_edit:function(e){this.data=e,this.openEdit=!0},open_show:function(e){this.data=e,this.openShow=!0}},created:function(){this.getDataCenter()}},I=Object(o.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"name1\"}},[a(\"Untreated\",{attrs:{hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,hfztMap:t.hfzt_map,departAlias:t.return_visit_depart},on:{edit:t.open_edit,show:t.open_show}})],1),t._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"processed\",{attrs:{hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{edit:t.open_edit,show:t.open_show}})],1)],1),t._v(\" \"),t.openEdit?a(\"edit\",{attrs:{data:t.data,hfwtlx:t.hfwtlx,hfzt:t.hfzt,hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{close:function(e){t.openEdit=!1}}}):t._e(),t._v(\" \"),t.openShow?a(\"show\",{attrs:{data:t.data,hfwtlx:t.hfwtlx,hfzt:t.hfzt,hfwtlxMap:t.hfwtlx_map,departAliasMap:t.return_visit_depart_map,departAlias:t.return_visit_depart,hfztMap:t.hfzt_map},on:{close:function(e){t.openShow=!1}}}):t._e()],1)},[],!1,null,null,null);I.options.__file=\"returnVisit_table.vue\";t.default=I.exports}}]);"}