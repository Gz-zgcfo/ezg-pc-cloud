{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{846:function(e,t,a){\"use strict\";a.r(t);var r={data:function(){return{isshow:!0,openCreateTemplate:!1,loading:!1,file:[],resumeTemplate:{name:\"\",age:\"\",sex:\"0\",post:\"\",memo:\"\",tel:\"\",city:\"广州\"},create_rule:{name:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],post:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],sex:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],tel:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"number\"}]}}},methods:{cancel:function(){this.file=[]},fileRemove:function(e){this.file.splice(this.file.indexOf(e),1)},handleUpload:function(e){return this.file.push(e),!1},valid_create:function(){var t=this;this.$refs.resumeTemplate.validate(function(e){e&&t.create_templ()})},create_templ:function(){var t=this;t.loading=!0;var e=new FormData;if(null==t.file[0])return t.$Message.error(\"请选择文件\"),void(t.loading=!1);e.append(\"name\",t.resumeTemplate.name),e.append(\"age\",t.resumeTemplate.age),e.append(\"sex\",t.resumeTemplate.sex),e.append(\"post\",t.resumeTemplate.post),e.append(\"city\",t.resumeTemplate.city),e.append(\"memo\",t.resumeTemplate.memo),e.append(\"tel\",t.resumeTemplate.tel),e.append(\"file\",t.file[0]),this.$http.post(\"api/zuul/system/resource/resume/create\",e).then(function(e){\"40000\"==e.data.msgCode?(t.$Message.success(e.data.msg),t.cancel(),t.loading=!1,t.$emit(\"update\",!0),t.loading=!1,t.$refs.resumeTemplate.resetFields(),t.openCreateTemplate=!1,t.$emit(\"update\",!0),t.$bus.emit(\"UPDATE_RESUME_LIST\",!0)):(t.$Message.error(e.data.msg),t.loading=!1)}).catch(function(e){t.$Message.error(e),t.loading=!1})}},created:function(){var t=this;this.$bus.on(\"OPEN_CREATE_RESUME_TEMPLATE\",function(e){t.openCreateTemplate=!0})}},l=a(4),s=Object(l.a)(r,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{width:\"40%\",title:\"创建简历\"},model:{value:a.openCreateTemplate,callback:function(e){a.openCreateTemplate=e},expression:\"openCreateTemplate\"}},[r(\"Form\",{ref:\"resumeTemplate\",attrs:{model:a.resumeTemplate,rules:a.create_rule,\"label-width\":120}},[r(\"FormItem\",{attrs:{label:\"姓名\",prop:\"name\"}},[r(\"Input\",{attrs:{placeholder:\"\"},model:{value:a.resumeTemplate.name,callback:function(e){a.$set(a.resumeTemplate,\"name\",e)},expression:\"resumeTemplate.name\"}})],1),a._v(\" \"),r(\"FormItem\",{attrs:{label:\"年龄\",prop:\"age\"}},[r(\"Input\",{attrs:{placeholder:\"\"},model:{value:a.resumeTemplate.age,callback:function(e){a.$set(a.resumeTemplate,\"age\",e)},expression:\"resumeTemplate.age\"}})],1),a._v(\" \"),r(\"FormItem\",{attrs:{prop:\"sex\",label:\"性别\"}},[r(\"RadioGroup\",{model:{value:a.resumeTemplate.sex,callback:function(e){a.$set(a.resumeTemplate,\"sex\",e)},expression:\"resumeTemplate.sex\"}},[r(\"Radio\",{attrs:{label:\"0\"}},[a._v(\"男\")]),a._v(\" \"),r(\"Radio\",{attrs:{label:\"1\"}},[a._v(\"女\")])],1)],1),a._v(\" \"),r(\"FormItem\",{attrs:{label:\"岗位\",prop:\"post\"}},[r(\"Input\",{attrs:{placeholder:\"\"},model:{value:a.resumeTemplate.post,callback:function(e){a.$set(a.resumeTemplate,\"post\",e)},expression:\"resumeTemplate.post\"}})],1),a._v(\" \"),r(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[r(\"Input\",{attrs:{placeholder:\"\",number:\"\"},model:{value:a.resumeTemplate.tel,callback:function(e){a.$set(a.resumeTemplate,\"tel\",e)},expression:\"resumeTemplate.tel\"}})],1),a._v(\" \"),r(\"FormItem\",{attrs:{label:\"城市\",prop:\"city\"}},[r(\"Input\",{attrs:{placeholder:\"\"},model:{value:a.resumeTemplate.city,callback:function(e){a.$set(a.resumeTemplate,\"city\",e)},expression:\"resumeTemplate.city\"}})],1),a._v(\" \"),r(\"FormItem\",{attrs:{label:\"备注\",prop:\"memo\"}},[r(\"Input\",{attrs:{placeholder:\"\",type:\"textarea\",rows:5},model:{value:a.resumeTemplate.memo,callback:function(e){a.$set(a.resumeTemplate,\"memo\",e)},expression:\"resumeTemplate.memo\"}})],1),a._v(\" \"),r(\"Row\",[a.isshow?r(\"center\",[r(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":a.handleUpload,action:\"\"}},[r(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[a._v(\"选择文件\")])],1),a._v(\" \"),a._l(a.file,function(t,e){return r(\"div\",{key:e},[a._v(a._s(t.name)+\"\\n                    \"),r(\"Button\",{attrs:{type:\"text\"},on:{click:function(e){a.fileRemove(t)}}},[a._v(\"移除\")])],1)})],2):a._e()],1)],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",loading:a.loading},on:{click:a.valid_create}},[a._v(\"新增\")])],1)],1)],1)},[],!1,null,null,null);s.options.__file=\"create.vue\";var n=s.exports,o={data:function(){return{openUpdateTemplate:!1,loading:!1,resumeTemplate:{id:\"\",name:\"\",age:\"\",sex:\"\",post:\"\",memo:\"\",tel:\"\",city:\"\"},create_rule:{name:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],post:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],sex:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"string\"}],tel:[{required:!0,message:\"必选项！\",trigger:\"change\",type:\"number\"}]}}},methods:{valid_create:function(){var t=this;this.$refs.resumeTemplate.validate(function(e){e&&t.update_templ()})},update_templ:function(){var t=this;t.loading=!0;var e={name:t.resumeTemplate.name,age:t.resumeTemplate.age,sex:t.resumeTemplate.sex,post:t.resumeTemplate.post,memo:t.resumeTemplate.memo,tel:t.resumeTemplate.tel,city:t.resumeTemplate.city,id:t.resumeTemplate.id};this.$Post(\"api/system/resource/resume/update\",e,function(e){t.loading=!1,t.$refs.resumeTemplate.resetFields(),t.openUpdateTemplate=!1,t.$bus.emit(\"UPDATE_RESUME_LIST\",!0)},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.on(\"OPEN_EDIT_RESUME_TEMPLATE\",function(e){t.resumeTemplate.id=e.id,t.resumeTemplate.name=e.name,t.resumeTemplate.age=e.age,t.resumeTemplate.sex=e.sex.toString(),t.resumeTemplate.post=e.post,t.resumeTemplate.memo=e.memo,t.resumeTemplate.tel=parseInt(e.tel),t.resumeTemplate.city=e.city,t.openUpdateTemplate=!0})}},m=Object(l.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"50%\",title:\"修改简历\"},model:{value:t.openUpdateTemplate,callback:function(e){t.openUpdateTemplate=e},expression:\"openUpdateTemplate\"}},[a(\"Form\",{ref:\"resumeTemplate\",attrs:{model:t.resumeTemplate,\"label-width\":120,rules:t.create_rule}},[a(\"FormItem\",{attrs:{label:\"姓名\",prop:\"name\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.resumeTemplate.name,callback:function(e){t.$set(t.resumeTemplate,\"name\",e)},expression:\"resumeTemplate.name\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"年龄\",prop:\"age\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.resumeTemplate.age,callback:function(e){t.$set(t.resumeTemplate,\"age\",e)},expression:\"resumeTemplate.age\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{prop:\"sex\",label:\"性别\"}},[a(\"RadioGroup\",{model:{value:t.resumeTemplate.sex,callback:function(e){t.$set(t.resumeTemplate,\"sex\",e)},expression:\"resumeTemplate.sex\"}},[a(\"Radio\",{attrs:{label:\"0\"}},[t._v(\"男\")]),t._v(\" \"),a(\"Radio\",{attrs:{label:\"1\"}},[t._v(\"女\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"岗位\",prop:\"post\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.resumeTemplate.post,callback:function(e){t.$set(t.resumeTemplate,\"post\",e)},expression:\"resumeTemplate.post\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"电话\",prop:\"tel\"}},[a(\"Input\",{attrs:{placeholder:\"\",number:\"\"},model:{value:t.resumeTemplate.tel,callback:function(e){t.$set(t.resumeTemplate,\"tel\",e)},expression:\"resumeTemplate.tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"城市\",prop:\"city\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.resumeTemplate.city,callback:function(e){t.$set(t.resumeTemplate,\"city\",e)},expression:\"resumeTemplate.city\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"memo\"}},[a(\"Input\",{attrs:{placeholder:\"\",type:\"textarea\",rows:5},model:{value:t.resumeTemplate.memo,callback:function(e){t.$set(t.resumeTemplate,\"memo\",e)},expression:\"resumeTemplate.memo\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.update_templ}},[t._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);m.options.__file=\"update.vue\";var i=m.exports,p=a(114);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={components:{createTemplate:n,updateTemplate:i},name:\"resumelist_index\",data:function(){var e;return c(e={selectRow:[],logoutLoading:!1,logoutReason:\"\",openLogout:!1},\"selectRow\",{}),c(e,\"current_row\",\"\"),c(e,\"search_model\",\"\"),c(e,\"loading\",!1),c(e,\"openDetail\",!1),c(e,\"seacrhFormInline\",{name:\"\",sex:\"\",tel:\"\",createdate:[],post:\"\"}),c(e,\"page\",1),c(e,\"pageSize\",10),c(e,\"total\",0),c(e,\"data\",[]),c(e,\"header\",[{title:\"姓名\",key:\"name\",minWidth:100},{title:\"电话\",key:\"tel\",minWidth:150},{title:\"性别\",key:\"sex\",minWidth:50,render:function(e,t){return e(\"div\",{},0==t.row.sex?\"男\":\"女\")}},{title:\"年龄\",key:\"age\",minWidth:80},{title:\"城市\",key:\"city\",minWidth:80},{title:\"岗位\",key:\"post\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:120,render:function(e,t){var a=t.row.createdate;return a&&(a=a.slice(0,10)),e(\"div\",{},a)}},{title:\"备注\",key:\"memo\",minWidth:150},{title:\"操作\",width:100,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){var e=\"api/system/resource/download?id=\"+t.row.id;window.open(e)}}},\"下载\")])}}]),e},methods:{save_current_row:function(e){this.current_row=e},create_template:function(){this.$bus.emit(\"OPEN_CREATE_RESUME_TEMPLATE\",!0)},upload_file:function(e){},update_template:function(e){\"\"!=this.current_row?this.$bus.emit(\"OPEN_EDIT_RESUME_TEMPLATE\",this.current_row):this.$Message.warning(\"请选择一行进行编辑！\")},del_template:function(){if(\"\"!=this.current_row){var t=this;t.loading=!0;var e={id:this.current_row.id};this.$Post(\"api/system/resource/resume/del\",e,function(e){t.loading=!1,t.get_data()},function(e){t.loading=!1})}else this.$Message.warning(\"请选择一行进行删除！\")},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,sortField:\"id\",post:this.seacrhFormInline.post,name:this.seacrhFormInline.name,sex:this.seacrhFormInline.sex,tel:this.seacrhFormInline.tel,bcreatedate:Object(p.a)(this.seacrhFormInline.createdate[0]),ecreatedate:Object(p.a)(this.seacrhFormInline.createdate[1])}};this.$Get(\"api/system/resource/resume/list\",e,function(e){t.total=e.data.data.total,t.data=e.data.data.rows,t.loading=!1}),this.current_row=\"\"},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.page=1,this.get_data()},reset:function(){this.$refs.seacrhFormInline.resetFields(),this.get_data()}},created:function(){this.get_data();var t=this;this.$bus.on(\"UPDATE_RESUME_LIST\",function(e){t.get_data()})}},d=Object(l.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                  筛选\\n                      \"),t._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:t.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"姓名：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.name,callback:function(e){t.$set(t.seacrhFormInline,\"name\",e)},expression:\"seacrhFormInline.name\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"电话：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.tel,callback:function(e){t.$set(t.seacrhFormInline,\"tel\",e)},expression:\"seacrhFormInline.tel\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"post\",label:\"岗位：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.post,callback:function(e){t.$set(t.seacrhFormInline,\"post\",e)},expression:\"seacrhFormInline.post\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"sex\",label:\"性别：\"}},[a(\"Select\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.sex,callback:function(e){t.$set(t.seacrhFormInline,\"sex\",e)},expression:\"seacrhFormInline.sex\"}},[a(\"Option\",{attrs:{value:\"0\"}},[t._v(\"男\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"1\"}},[t._v(\"女\")])],1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.createdate,callback:function(e){t.$set(t.seacrhFormInline,\"createdate\",e)},expression:\"seacrhFormInline.createdate\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.create_template}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.update_template}},[t._v(\"修改\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.del_template}},[t._v(\"删除\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:t.loading,columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange}})],1)],1),t._v(\" \"),a(\"create-template\",{on:{update:t.get_data}}),t._v(\" \"),a(\"update-template\",{on:{update:t.get_data}})],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";t.default=d.exports}}]);"}