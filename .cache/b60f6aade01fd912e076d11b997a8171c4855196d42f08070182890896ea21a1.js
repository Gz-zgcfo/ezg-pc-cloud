{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{446:function(t,e,i){\"use strict\";i.r(e);var l=i(25),a={name:\"clockin_index\",data:function(){return{loading:!1,header:[{title:\"姓名\",key:\"user_alias_name\",width:120},{title:\"年月\",key:\"yearmonth\",width:120},{title:\"1号\",key:\"01\",width:80},{title:\"2号\",key:\"02\",width:80},{title:\"3号\",key:\"03\",width:80},{title:\"4号\",key:\"04\",width:80},{title:\"5号\",key:\"05\",width:80},{title:\"6号\",key:\"06\",width:80},{title:\"7号\",key:\"07\",width:80},{title:\"8号\",key:\"08\",width:80},{title:\"9号\",key:\"09\",width:80},{title:\"10号\",key:\"10\",width:80},{title:\"11号\",key:\"11\",width:80},{title:\"12号\",key:\"12\",width:80},{title:\"13号\",key:\"13\",width:80},{title:\"14号\",key:\"14\",width:80},{title:\"15号\",key:\"15\",width:80},{title:\"16号\",key:\"16\",width:80},{title:\"17号\",key:\"17\",width:80},{title:\"18号\",key:\"18\",width:80},{title:\"19号\",key:\"19\",width:80},{title:\"20号\",key:\"20\",width:80},{title:\"21号\",key:\"21\",width:80},{title:\"22号\",key:\"22\",width:80},{title:\"23号\",key:\"23\",width:80},{title:\"24号\",key:\"24\",width:80},{title:\"25号\",key:\"25\",width:80},{title:\"26号\",key:\"26\",width:80},{title:\"27号\",key:\"27\",width:80},{title:\"28号\",key:\"28\",width:80},{title:\"29号\",key:\"29\",width:80},{title:\"30号\",key:\"30\",width:80},{title:\"31号\",key:\"31\",width:80}],data:[],page:1,pageSize:10,pageTotal:new Number,file:[],yearmonth:\"\",submit_loading:!1,formValidate:{},userAliasName:\"\"}},methods:{handleUpload:function(t){return this.file.push(t),!1},fileRemove:function(t){this.file.splice(this.file.indexOf(t),1)},submit:function(){this.yearmonth?this.upload():this.$Message.error(\"请输入考勤日期！\")},upload:function(){var t=this;t.submit_loading=!0;for(var e=new FormData,i=0;i<this.file.length;i++)e.append(\"file\",this.file[i]);e.append(\"yearmonth\",Object(l.c)(this.yearmonth)),this.$Post(\"api/legwork/importLegworkMsg\",e,function(e){t.submit_loading=!1,t.file=[]},function(e){t.submit_loading=!1})},download:function(){var t={page:\"1\",pageSize:\"1000\",yearmonth:Object(l.c)(this.yearmonth),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"userId\",title:\"工号\"},{field:\"user_alias_name\",title:\"姓名\"},{field:\"yearmonth\",title:\"考勤月份\"},{field:\"01\",title:\"1\"},{field:\"02\",title:\"2\"},{field:\"03\",title:\"3\"},{field:\"04\",title:\"4\"},{field:\"05\",title:\"5\"},{field:\"06\",title:\"6\"},{field:\"07\",title:\"7\"},{field:\"08\",title:\"8\"},{field:\"09\",title:\"9\"},{field:\"10\",title:\"10\"},{field:\"11\",title:\"11\"},{field:\"12\",title:\"12\"},{field:\"13\",title:\"13\"},{field:\"14\",title:\"14\"},{field:\"15\",title:\"15\"},{field:\"16\",title:\"16\"},{field:\"17\",title:\"17\"},{field:\"18\",title:\"18\"},{field:\"19\",title:\"19\"},{field:\"20\",title:\"20\"},{field:\"21\",title:\"21\"},{field:\"22\",title:\"22\"},{field:\"23\",title:\"23\"},{field:\"24\",title:\"24\"},{field:\"25\",title:\"25\"},{field:\"26\",title:\"26\"},{field:\"27\",title:\"27\"},{field:\"28\",title:\"28\"},{field:\"29\",title:\"29\"},{field:\"30\",title:\"30\"},{field:\"31\",title:\"31\"}]))},e=this.$MergeURL(\"api/legwork/exportLegworkMsg\",t);window.open(e)},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:10,yearmonth:Object(l.c)(t.yearmonth),userAliasName:t.userAliasName}};this.$Get(\"api/legwork/exportLegworkMsg\",e,function(e){t.data=e.data.data.rows,t.pageTotal=e.data.data.total,t.loading=!1})},pageChange:function(t){this.page=t,this.get_data()}}},o=i(2),d=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",[i(\"Row\",[i(\"Col\",{attrs:{span:\"12\"}},[i(\"Card\",{attrs:{title:\"上传考勤表\"}},[i(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\",height:\"200px\"}},[i(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,\"label-width\":120}},[i(\"FormItem\",{attrs:{prop:\"companyId\"}},[i(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[t._v(\"考勤月份：\")]),t._v(\" \"),i(\"DatePicker\",{staticStyle:{width:\"150px\"},attrs:{type:\"month\",placeholder:\"请选择月份\",size:\"small\"},model:{value:t.yearmonth,callback:function(e){t.yearmonth=e},expression:\"yearmonth\"}})],1),t._v(\" \"),i(\"FormItem\",{staticStyle:{\"margin-bottom\":\"20px\"}},[i(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[t._v(\"考勤表：\")]),t._v(\" \"),i(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":t.handleUpload,action:\"\"}},[i(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[t._v(\"选择文件\")])],1),t._v(\" \"),t._l(t.file,function(e,l){return i(\"div\",{key:l},[t._v(t._s(e.name)+\"\\n                                \"),i(\"Button\",{attrs:{type:\"text\"},on:{click:function(i){t.fileRemove(e)}}},[t._v(\"移除\")])],1)})],2),t._v(\" \"),i(\"FormItem\",[i(\"Button\",{attrs:{type:\"primary\",loading:t.submit_loading},on:{click:t.submit}},[t._v(\"上传\")])],1)],1)],1)],1)],1),t._v(\" \"),i(\"Col\",{attrs:{span:\"12\"}},[i(\"Card\",{attrs:{title:\"下载考勤统计表\"}},[i(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\",height:\"200px\"}},[i(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,\"label-width\":120}},[i(\"FormItem\",{attrs:{prop:\"companyId\"}},[i(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[t._v(\"考勤月份：\")]),t._v(\" \"),i(\"DatePicker\",{staticStyle:{width:\"150px\"},attrs:{type:\"month\",placeholder:\"请选择月份\",size:\"small\"},model:{value:t.yearmonth,callback:function(e){t.yearmonth=e},expression:\"yearmonth\"}})],1),t._v(\" \"),i(\"FormItem\",[i(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[t._v(\"姓名：\")]),t._v(\" \"),i(\"Input\",{staticStyle:{width:\"150px\"},attrs:{type:\"text\",size:\"small\"},model:{value:t.userAliasName,callback:function(e){t.userAliasName=e},expression:\"userAliasName\"}})],1),t._v(\" \"),i(\"FormItem\",[i(\"Button\",{staticStyle:{\"margin-right\":\"8px\"},attrs:{type:\"primary\"},on:{click:t.get_data}},[t._v(\"查询\")]),t._v(\" \"),i(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.download}},[t._v(\"下载\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),i(\"Row\",[i(\"Card\",{attrs:{title:\"考勤统计\"}},[i(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,loading:t.loading,data:t.data}}),t._v(\" \"),i(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.pageTotal,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\",placement:\"top\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}})],1)],1)],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";e.default=d.exports}}]);"}