{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{430:function(e,t,a){\"use strict\";a.r(t);var r={props:{departAlias:{type:Array}},data:function(){return{openResoureType:!1,formValidate:{fileTypeName:\"\",plural:\"Y\",useDeparts:[],showCustomer:\"Y\"},loading:!1}},methods:{create_type:function(){var e=this;e.loading=!0;var t={fileTypeName:e.formValidate.fileTypeName,plural:e.formValidate.plural,useDeparts:e.formValidate.useDeparts.join(\",\"),showCustomer:e.formValidate.showCustomer};this.$Post(\"api/customer/file/type/create\",t,function(t){e.openResoureType=!1,e.loading=!1,e.$emit(\"update\",!0),e.reset_type()},function(t){e.loading=!1})},reset_type:function(){this.formValidate.fileTypeName=\"\",this.formValidate.plural=\"Y\",this.formValidate.useDeparts=[],this.formValidate.showCustomer=\"Y\"}},created:function(){var e=this;this.$bus.off(\"OPEN_CREATE_RESOURE_TYPE\"),this.$bus.on(\"OPEN_CREATE_RESOURE_TYPE\",function(t){e.openResoureType=!0})}},o=a(2),l=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增资料类型\",width:\"500\"},model:{value:e.openResoureType,callback:function(t){e.openResoureType=t},expression:\"openResoureType\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"资料类型：\",prop:\"fileTypeName\"}},[a(\"Input\",{attrs:{placeholder:\"请输入资料类型\"},model:{value:e.formValidate.fileTypeName,callback:function(t){e.$set(e.formValidate,\"fileTypeName\",t)},expression:\"formValidate.fileTypeName\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"数量：\",prop:\"plural\"}},[a(\"RadioGroup\",{model:{value:e.formValidate.plural,callback:function(t){e.$set(e.formValidate,\"plural\",t)},expression:\"formValidate.plural\"}},[a(\"Radio\",{attrs:{label:\"Y\"}},[e._v(\"复数\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"N\"}},[e._v(\"唯一\")])],1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"部门：\",prop:\"useDeparts\"}},[a(\"Select\",{attrs:{placeholder:\"选择使用部门\",multiple:\"\"},model:{value:e.formValidate.useDeparts,callback:function(t){e.$set(e.formValidate,\"useDeparts\",t)},expression:\"formValidate.useDeparts\"}},e._l(e.departAlias,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"客户显示：\",prop:\"showCustomer\"}},[a(\"RadioGroup\",{model:{value:e.formValidate.showCustomer,callback:function(t){e.$set(e.formValidate,\"showCustomer\",t)},expression:\"formValidate.showCustomer\"}},[a(\"Radio\",{attrs:{label:\"Y\"}},[e._v(\"可见\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"N\"}},[e._v(\"不可见\")])],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.create_type}},[e._v(\"新增\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:e.reset_type}},[e._v(\"重置\")])],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);l.options.__file=\"create_name.vue\";var s=l.exports,i={props:{departAlias:{type:Array}},data:function(){return{updateResoureType:!1,formValidate:{id:\"\",file_type_name:\"\",plural:\"Y\",use_departs:[],show_customer:\"Y\"},loading:!1}},methods:{update_type:function(){var e=this;e.loading=!0;var t={id:e.formValidate.id,fileTypeName:e.formValidate.file_type_name,plural:e.formValidate.plural,useDeparts:e.formValidate.use_departs.join(\",\"),showCustomer:e.formValidate.show_customer};this.$Post(\"api/customer/file/type/update\",t,function(t){e.updateResoureType=!1,e.loading=!1,e.$emit(\"update\",!0),e.reset_type()},function(t){e.loading=!1})},reset_type:function(){this.formValidate.id=\"\",this.formValidate.fileTypeName=\"\",this.formValidate.plural=\"Y\",this.formValidate.useDeparts=[],this.formValidate.showCustomer=\"Y\"}},created:function(){var e=this;this.$bus.off(\"OPEN_UPDATE_RESOURE_TYPE\"),this.$bus.on(\"OPEN_UPDATE_RESOURE_TYPE\",function(t){e.updateResoureType=!0,e.formValidate=t})}},n=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"修改资料类型\",width:\"500\"},model:{value:e.updateResoureType,callback:function(t){e.updateResoureType=t},expression:\"updateResoureType\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"资料类型：\",prop:\"file_type_name\"}},[a(\"Input\",{attrs:{placeholder:\"请输入资料类型\"},model:{value:e.formValidate.file_type_name,callback:function(t){e.$set(e.formValidate,\"file_type_name\",t)},expression:\"formValidate.file_type_name\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"数量：\",prop:\"plural\"}},[a(\"RadioGroup\",{model:{value:e.formValidate.plural,callback:function(t){e.$set(e.formValidate,\"plural\",t)},expression:\"formValidate.plural\"}},[a(\"Radio\",{attrs:{label:\"Y\"}},[e._v(\"复数\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"N\"}},[e._v(\"唯一\")])],1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"部门：\",prop:\"use_departs\"}},[a(\"Select\",{attrs:{placeholder:\"选择使用部门\",multiple:\"\"},model:{value:e.formValidate.use_departs,callback:function(t){e.$set(e.formValidate,\"use_departs\",t)},expression:\"formValidate.use_departs\"}},e._l(e.departAlias,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"客户显示：\",prop:\"show_customer\"}},[a(\"RadioGroup\",{model:{value:e.formValidate.show_customer,callback:function(t){e.$set(e.formValidate,\"show_customer\",t)},expression:\"formValidate.show_customer\"}},[a(\"Radio\",{attrs:{label:\"Y\"}},[e._v(\"可见\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"N\"}},[e._v(\"不可见\")])],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.update_type}},[e._v(\"修改\")])],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);n.options.__file=\"update_name.vue\";var p={name:\"resourelist_index\",components:{createResoureType:s,updateResoureType:n.exports},data:function(){var e=this;return{search_model:\"\",loading:!1,openDetail:!1,selectRow:{},seacrhFormInline:{companyname:\"\",name:\"\",tel:\"\"},page:1,pageSize:10,total:0,data:[],departAlias:[],departAlias_map:new Map,header:[{title:\"资料名称\",key:\"file_type_name\",minWidth:120},{title:\"数量\",key:\"plural_name\",minWidth:120},{title:\"部门\",key:\"use_departs_name\",minWidth:200},{title:\"客户展示\",key:\"show_customer_name\",minWidth:150},{title:\"操作\",key:\"action\",minWidth:250,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.update_type(a.row)}}},\"[ 编辑 ]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.delete_type(a.row.id)}}},\"[ 删除 ]\")])}}]}},methods:{update_type:function(e){this.$bus.emit(\"OPEN_UPDATE_RESOURE_TYPE\",e)},delete_type:function(e){var t=this,a={id:e};this.$Post(\"api/customer/file/type/del\",a,function(e){t.get_data()},function(e){})},open_flow:function(e){},create_resoure:function(){this.$bus.emit(\"OPEN_CREATE_RESOURE_TYPE\",!0)},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,sortField:\"id\"}};this.$Get(\"api/customer/file/type/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows;for(var a=0;a<e.data.length;a++)if(\"Y\"==e.data[a].plural?e.data[a].plural_name=\"多项\":e.data[a].plural_name=\"唯一\",\"Y\"==e.data[a].show_customer?e.data[a].show_customer_name=\"可见\":e.data[a].show_customer_name=\"不可见\",e.data[a].use_departs){var r=e.data[a].use_departs.split(\",\");e.data[a].use_departs=r;for(var o=[],l=0;l<r.length;l++)o.push(e.departAlias_map.get(r[l]));e.data[a].use_departs_name=o.join(\",\")}e.loading=!1})},get_data_center:function(){var e=this;return new Promise(function(t,a){e.$GetDataCenter(\"departAlias\",function(a){e.departAlias=a.data.data.departAlias,e.departAlias_map=e.$array2map(e.departAlias),t()})})},pageChange:function(e){this.page=e,this.get_data()},search:function(){},reset:function(){}},created:function(){var e=this;this.get_data_center().then(function(){e.get_data()})}},d=Object(o.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.companyname,callback:function(t){e.$set(e.seacrhFormInline,\"companyname\",t)},expression:\"seacrhFormInline.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.name,callback:function(t){e.$set(e.seacrhFormInline,\"name\",t)},expression:\"seacrhFormInline.name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"tel\",label:\"联系方式：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.tel,callback:function(t){e.$set(e.seacrhFormInline,\"tel\",t)},expression:\"seacrhFormInline.tel\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_resoure}},[e._v(\"新增\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"create-resoure-type\",{attrs:{departAlias:e.departAlias},on:{update:e.get_data}}),e._v(\" \"),a(\"update-resoure-type\",{attrs:{departAlias:e.departAlias},on:{update:e.get_data}})],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";t.default=d.exports}}]);"}