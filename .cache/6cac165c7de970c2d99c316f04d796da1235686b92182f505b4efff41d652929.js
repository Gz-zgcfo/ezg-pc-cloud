{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{465:function(e,t,r){},466:function(e,t,r){},467:function(e,t,r){},468:function(e,t,r){},469:function(e,t,r){},744:function(e,t,r){\"use strict\";var a=r(465);r.n(a).a},746:function(e,t,r){\"use strict\";var a=r(466);r.n(a).a},748:function(e,t,r){\"use strict\";var a=r(467);r.n(a).a},750:function(e,t,r){\"use strict\";var a=r(468);r.n(a).a},752:function(e,t,r){\"use strict\";var a=r(469);r.n(a).a},811:function(e,t,r){\"use strict\";r.r(t);r(413),r(404);var a=r(414),o={components:{elTree:r.n(a).a},props:{id:{type:[String,Number]},readonly:{type:[String,Boolean],default:!0}},data:function(){return{openServiceItem:!0,selectItems:[],treeData:[],defaultProps:{children:\"children\",label:\"serviceitemname\"},loading:!1}},methods:{get_service_item:function(){var t=this,e={params:{templateCode:\"kjdafwxy\",objectId:this.id}};this.$Get(\"api/system/serviceContract/template/queryTreegridByCode\",e,function(e){e.data.data.selectItems?t.selectItems=e.data.data.selectItems.split(\",\"):t.selectItems=[],t.treeData=e.data.data.treeData})},close:function(){this.$emit(\"close\")},save:function(){for(var e=this.$refs.itemsTree.getCheckedNodes(),t=[],r=0;r<e.length;r++)t.push(e[r].id);var a=this;a.loading=!0;var o={templateCode:\"kjdafwxy\",itemIds:t.join(\",\"),objectId:a.id};this.$Post(\"api/system/serviceContract/template/item/target/save\",o,function(e){a.loading=!1,a.close()},function(e){a.loading=!1})}},created:function(){this.get_service_item()}},i=r(4),n=Object(i.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"会计到家服务项\",width:\"400\"},on:{\"on-cancel\":t.close},model:{value:t.openServiceItem,callback:function(e){t.openServiceItem=e},expression:\"openServiceItem\"}},[r(\"el-tree\",{ref:\"itemsTree\",attrs:{data:t.treeData,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":t.selectItems,props:t.defaultProps}}),t._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t.readonly?r(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.save}},[t._v(\"保存\")]):t._e()],1)],1)],1)},[],!1,null,null,null);n.options.__file=\"accountHomeTree.vue\";var s=n.exports,l={props:{payDirs:{type:Array}},data:function(){var o=this;return{showAccountHomeItem:!1,loading:!1,orderDetail:{customerid:\"\",id:\"\",companyid:\"\",isornotkp:\"N\",CompanyName:\"\",tel:\"\",name:\"\",payTime:\"\",payamount:\"\",neednumber:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\",performanceMoney:\"\"},orderDetailRule:{isornotkp:[{required:!0,message:\"请补全！\",trigger:\"change\"}],CompanyName:[{required:!0,message:\"请补全！\",trigger:\"change\"}],name:[{required:!0,message:\"请补全！\",trigger:\"change\"}],payTime:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"date\"}],paynumber:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"number\"}],realnumber:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"number\"}],paydir:[{required:!0,message:\"请补全！\",trigger:\"change\"}]},orderItem:[],orderItemHeader:[{title:\"删除\",key:\"action\",minWidth:60,render:function(e,t){return e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){\"会计到家\"==t.row.product&&(o.showAccountHomeItem=!1),o.orderItem.splice(t.index,1),o.computer_paynumber()}}},\"x\")}},{title:\"序号\",type:\"index\",minWidth:80,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150,render:function(e,t){var r=o;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:o.orderItem[t.index].productnumber,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(e){r.orderItem[t.index].productnumber=e.target.value,r.orderItem[t.index].paynumber=r.orderItem[t.index].productnumber*r.orderItem[t.index].oaprice,r.computer_paynumber()},\"on-enter\":function(e){r.orderItem[t.index].productnumber=e.target.value,r.orderItem[t.index].paynumber=r.orderItem[t.index].productnumber*r.orderItem[t.index].oaprice,r.computer_paynumber()}},style:{width:\"100%\"}})])}},{title:\"销售价格\",key:\"paynumber\",minWidth:100,render:function(e,t){var r=o;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:o.orderItem[t.index].paynumber,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(e){r.orderItem[t.index].paynumber=e.target.value,r.computer_paynumber()},\"on-enter\":function(e){r.orderItem[t.index].paynumber=e.target.value,r.computer_paynumber()}},style:{width:\"100%\"}})])}},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100,render:function(e,t){var r=o;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:o.orderItem[t.index].givethenumber,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(e){r.orderItem[t.index].givethenumber=e.target.value},\"on-enter\":function(e){r.orderItem[t.index].givethenumber=e.target.value}},style:{width:\"100%\"}})])}},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:140,render:function(e,r){var a=o;return e(\"div\",[e(\"DatePicker\",{props:{value:o.orderItem[r.index].servicestartdate,type:\"month\",transfer:!1,size:\"small\",disabled:!o.orderItem[r.index].hasOwnProperty(\"servicestartdate\"),readonly:!o.orderItem[r.index].hasOwnProperty(\"servicestartdate\")},on:{\"on-change\":function(e){var t=e.split(\"-\").join(\"\");a.orderItem[r.index].servicestartdate=t}},style:{width:\"100%\"}})])}},{title:\"服务部门\",key:\"departname\",minWidth:140,render:function(t,r){var a=o;return t(\"div\",[t(\"Select\",{props:{value:o.orderItem[r.index].departid.toString(),transfer:!1,size:\"small\",labelInValue:!0},on:{\"on-change\":function(e){a.orderItem[r.index].departname=e.label,a.orderItem[r.index].departid=e.value}},style:{width:\"100%\"}},JSON.parse(a.orderItem[r.index].servicedeparts).map(function(e){return[t(\"Option\",{props:{value:e.type,label:e.text}})]}))])}},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){var r=o,a=new RegExp(\"</br>\",\"g\");return o.orderItem[t.index].memo=o.orderItem[t.index].memo.replace(a,\"\\n\"),e(\"div\",[e(\"Input\",{props:{value:o.orderItem[t.index].memo,autosize:!0,type:\"textarea\",size:\"small\"},on:{\"on-blur\":function(e){r.orderItem[t.index].memo=e.target.value}},style:{width:\"100%\"}})])}}]}},methods:{get_data:function(e){var r=this,t=\"api/order/detail/\"+e;r.showAccountHomeItem=!1,r.loading=!0;this.$Get(t,{},function(e){r.orderDetail=e.data.data,r.orderItem=e.data.data.items;for(var t=0;t<r.orderItem.length;t++)if(\"会计到家\"==r.orderItem[t].product){r.showAccountHomeItem=!0;break}r.loading=!1})},show_contarct:function(e){this.$bus.emit(\"ORDER_LIST_CONTARCT_PIC_OPEN\",{id:this.orderDetail.id,type:e})},computer_paynumber:function(){for(var e=0,t=0;t<this.orderItem.length;t++)e=parseInt(e)+parseInt(this.orderItem[t].paynumber);this.orderDetail.paynumber=parseInt(e),this.orderDetail.realnumber=parseInt(e)},modal_status_change:function(e){e||(this.$refs.orderDetail.resetFields(),this.orderItem=[])},check_date:function(){if(0==this.orderItem.length)return this.$Message.warning(\"请选择产品！\"),!1;for(var e=0;e<this.orderItem.length;e++){if(this.orderItem[e].hasOwnProperty(\"servicestartdate\")){if(!this.orderItem[e].servicestartdate)return this.$Message.error(\"请输入服务开始税期！\"),!1}else;if(e==this.orderItem.length-1)return!0}},open_isornotkp:function(e){this.$bus.emit(\"OPEN_ORDER_INVOICE\",{customerId:this.orderDetail.customerid,companyId:this.orderDetail.companyid,orderId:this.orderDetail.id,type:e})}},created:function(){var t=this;this.$bus.off(\"ADD_PRODUCT\",!0),this.$bus.on(\"ADD_PRODUCT\",function(e){\"会计到家\"==e.product&&(t.showAccountHomeItem=!0),t.orderItem.push(e),t.computer_paynumber()})}},d={mixins:[l],components:{serviceItem:s},data:function(){var r=this;return{orderId:\"\",openServiceItem:!1,openShowOrderDetail:!1,orderDetailListHeaderShow:[{title:\"序号\",type:\"index\",minWidth:80,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){var r=new RegExp(\"</br>\",\"g\");return e(\"div\",[e(\"Input\",{props:{value:t.row.memo.replace(r,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}],dangerOperation:{title:\"撤回\",minWidth:80,align:\"center\",render:function(e,t){return e(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginLeft:\"5px\"}},[e(\"Poptip\",{props:{transfer:!0,confirm:!0,title:\"您确定要撤回此订单项吗！\"},on:{\"on-ok\":function(){r.cancel_order(r.orderId,t.row.itemid)}}},\"撤回\")])}}}},methods:{open_service_item:function(){this.openServiceItem=!0},close_item:function(){this.openServiceItem=!1},cancel_order:function(t,e){var r=this,a={params:{orderId:t,orderItemId:e}};this.$Get(\"api/order/cancelOrder\",a,function(e){r.$Message.success(e.data.msg),r.get_data(t)},function(e){r.$Message.fail(\"撤回失败！\"),r.get_data(t)})}},created:function(){var t=this;this.$bus.off(\"OPEN_ORDERLIST_DETAIL\",!0),this.$bus.on(\"OPEN_ORDERLIST_DETAIL\",function(e){10059==localStorage.getItem(\"id\")&&t.orderDetailListHeaderShow.unshift(t.dangerOperation),t.get_data(e),t.orderId=e,t.openShowOrderDetail=!0})}},c=(r(744),Object(i.a)(d,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看订单\",\"mask-closable\":!1,width:\"100\"},model:{value:r.openShowOrderDetail,callback:function(e){r.openShowOrderDetail=e},expression:\"openShowOrderDetail\"}},[a(\"Form\",{ref:\"orderDetail\",attrs:{model:r.orderDetail,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.CompanyName,callback:function(e){r.$set(r.orderDetail,\"CompanyName\",e)},expression:\"orderDetail.CompanyName\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.name,callback:function(e){r.$set(r.orderDetail,\"name\",e)},expression:\"orderDetail.name\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.payTime,callback:function(e){r.$set(r.orderDetail,\"payTime\",e)},expression:\"orderDetail.payTime\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.paynumber,callback:function(e){r.$set(r.orderDetail,\"paynumber\",e)},expression:\"orderDetail.paynumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.realnumber,callback:function(e){r.$set(r.orderDetail,\"realnumber\",e)},expression:\"orderDetail.realnumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:r.orderDetail.paydir,callback:function(e){r.$set(r.orderDetail,\"paydir\",e)},expression:\"orderDetail.paydir\"}},r._l(r.payDirs,function(e,t){return a(\"Option\",{key:t,attrs:{value:e.typecode}},[r._v(r._s(e.typename))])}),1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:r.orderDetail.gdsreport,callback:function(e){r.$set(r.orderDetail,\"gdsreport\",e)},expression:\"orderDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[r._v(\"已报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[r._v(\"未报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[r._v(\"不用报道\")])],1)],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:r.orderDetail.isornotkp,callback:function(e){r.$set(r.orderDetail,\"isornotkp\",e)},expression:\"orderDetail.isornotkp\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[r._v(\"是\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[r._v(\"否\")])],1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(e){r.show_contarct(\"edit\")}}},[r._v(\"查看合同\")]),r._v(\" \"),r.showAccountHomeItem?a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(e){r.openServiceItem=!0}}},[r._v(\"查看会计到家服务项\")]):r._e()],1)],1),r._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{columns:r.orderDetailListHeaderShow,data:r.orderItem,loading:r.loading,border:\"\",size:\"small\",id:\"show-order-item\"}})],1)],1),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{on:{click:function(e){r.openShowOrderDetail=!1}}},[r._v(\"关闭\")])],1)],1),r._v(\" \"),r.openServiceItem?a(\"service-item\",{attrs:{id:r.orderDetail.companyid,readonly:!1},on:{close:r.close_item}}):r._e()],1)},[],!1,null,null,null));c.options.__file=\"showOrder.vue\";var p=c.exports,m={name:\"selectName\",data:function(){return{openSelectCompany:!1,searchCompany:\"\",header:[{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"归属客户\",key:\"customerName\",minWidth:150},{title:\"客户电话\",key:\"customerTel\",minWidth:150},{title:\"钱包余额\",key:\"balance\",minWidth:100},{title:\"是否国地税报道\",key:\"gdsStatus\",minWidth:130}],data:[],total:0,page:1,pageSize:10,loading:!1,gds_map:new Map([[\"wbd\",\"未报道\"],[\"ybd\",\"已报道\"],[\"bybd\",\"不用报道\"]])}},methods:{get_data:function(){var r=this;r.loading=!0;var e={params:{page:r.page,pageSize:10,companyname:r.searchCompany}};this.$Get(\"api/customer/company/list\",e,function(e){r.data=e.data.data.rows,r.total=e.data.data.total;for(var t=0;t<r.data.length;t++)r.data[t].gdsStatus=r.gds_map.get(r.data[t].gdsreport);r.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},row_select:function(e){this.$emit(\"company-change\",e),this.openSelectCompany=!1}},created:function(){var t=this;this.$bus.off(\"ORDER_OPEN_SELECT_COMPANY\",!0),this.$bus.on(\"ORDER_OPEN_SELECT_COMPANY\",function(e){t.get_data(),t.openSelectCompany=!0})}},u=Object(i.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",[r(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:t.openSelectCompany,callback:function(e){t.openSelectCompany=e},expression:\"openSelectCompany\"}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-enter\":t.get_data},model:{value:t.searchCompany,callback:function(e){t.searchCompany=e},expression:\"searchCompany\"}},[r(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:t.get_data},slot:\"append\"})],1)],1)],1),t._v(\" \"),r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",loading:t.loading,size:\"small\",columns:t.header,data:t.data},on:{\"on-row-dblclick\":t.row_select}}),t._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.pageChange}}),t._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);u.options.__file=\"companySelect.vue\";var h=u.exports,_=r(114),y={mixins:[l],components:{companySelect:h,serviceItem:s},data:function(){return{openServiceItem:!1,show_file:[],openCreateOrderDetail:!1,loading:!1}},methods:{open_service_item:function(){this.orderDetail.companyid&&(this.openServiceItem=!0)},open_company:function(){this.$bus.emit(\"ORDER_OPEN_SELECT_COMPANY\",!0)},setting_company:function(e){this.orderDetail.CompanyName=e.companyname,this.orderDetail.name=e.customerName,this.orderDetail.tel=e.customerTel,this.orderDetail.gdsreport=e.gdsreport,this.orderDetail.companyid=e.id},handleUpload:function(e){return this.show_file.push(e),!1},fileRemove:function(e){this.show_file.splice(e,1)},upload_img:function(e){var t=this,r=new FormData;r.append(\"orderId\",e);for(var a=0;a<t.show_file.length;a++)r.append(\"files\",t.show_file[a]);this.$Post(\"api/order/contract/upload\",r,function(e){t.show_file=[]},function(e){})},open_product_list:function(){this.orderDetail.companyid?this.$bus.emit(\"OPEN_ORDER_PRODUCT_LIST\",this.orderDetail.companyid):this.$Message.warning(\"请先选择公司！\")},create:function(){var t=this,r=this;this.loading=!0,this.$refs.orderDetail.validate(function(e){e&&t.check_date()?r.create_order():t.loading=!1})},create_order:function(){var t=this,e={companyId:t.orderDetail.companyid,payDir:t.orderDetail.paydir,orderPayNumber:t.orderDetail.realnumber,serviceStartDate:\"\",GDSreport:t.orderDetail.gdsreport,payTime:Object(_.a)(t.orderDetail.payTime),isornotkp:t.orderDetail.isornotkp,orderitems:JSON.stringify(t.orderItem)};this.$Post(\"api/order/create\",e,function(e){0!=t.show_file.length?t.upload_img(e.data.data):t.$Message.warning(\"订单创建成功！请及时上传合同！\"),setTimeout(function(){t.loading=!1,t.$bus.emit(\"UPDATE_ORDER_LIST\",!0),t.openCreateOrderDetail=!1},200)},function(e){t.loading=!1})},close_item:function(){this.openServiceItem=!1}},created:function(){var t=this;this.$bus.off(\"OPEN_ORDERLIST_ADD\",!0),this.$bus.on(\"OPEN_ORDERLIST_ADD\",function(e){t.orderItem=[],t.openCreateOrderDetail=!0})}},v=Object(i.a)(y,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新建订单\",width:\"100\",\"mask-closable\":!1},on:{\"on-visible-change\":r.modal_status_change},model:{value:r.openCreateOrderDetail,callback:function(e){r.openCreateOrderDetail=e},expression:\"openCreateOrderDetail\"}},[a(\"Form\",{ref:\"orderDetail\",attrs:{model:r.orderDetail,\"label-width\":100,rules:r.orderDetailRule}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":r.open_company},model:{value:r.orderDetail.CompanyName,callback:function(e){r.$set(r.orderDetail,\"CompanyName\",e)},expression:\"orderDetail.CompanyName\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":r.open_company},model:{value:r.orderDetail.name,callback:function(e){r.$set(r.orderDetail,\"name\",e)},expression:\"orderDetail.name\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:r.orderDetail.payTime,callback:function(e){r.$set(r.orderDetail,\"payTime\",e)},expression:\"orderDetail.payTime\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:r.orderDetail.paynumber,callback:function(e){r.$set(r.orderDetail,\"paynumber\",e)},expression:\"orderDetail.paynumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",number:\"\"},model:{value:r.orderDetail.realnumber,callback:function(e){r.$set(r.orderDetail,\"realnumber\",e)},expression:\"orderDetail.realnumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.paydir,callback:function(e){r.$set(r.orderDetail,\"paydir\",e)},expression:\"orderDetail.paydir\"}},r._l(r.payDirs,function(e,t){return a(\"Option\",{key:t,attrs:{value:e.typecode}},[r._v(r._s(e.typename))])}),1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.gdsreport,callback:function(e){r.$set(r.orderDetail,\"gdsreport\",e)},expression:\"orderDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[r._v(\"已报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[r._v(\"未报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[r._v(\"不用报道\")])],1)],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.isornotkp,callback:function(e){r.$set(r.orderDetail,\"isornotkp\",e)},expression:\"orderDetail.isornotkp\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[r._v(\"是\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[r._v(\"否\")])],1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[r._v(\"合同\")]),r._v(\" \"),a(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",\"before-upload\":r.handleUpload,action:\"\"}},[a(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[r._v(\"选择文件\")])],1),r._v(\" \"),r._l(r.show_file,function(e,t){return a(\"span\",{key:t},[r._v(r._s(e.name)+\"\\n                            \"),a(\"Button\",{attrs:{type:\"text\"},on:{click:function(e){r.fileRemove(t)}}},[r._v(\"移除\")])],1)})],2)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{label:\"选择产品\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:r.open_product_list}},[r._v(\"新增\")]),r._v(\" \"),r.showAccountHomeItem?a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:r.open_service_item}},[r._v(\"查看会计到家服务项\")]):r._e()],1)],1)],1)],1),r._v(\" \"),r.orderItem.length?a(\"Row\",[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:r.orderItemHeader,data:r.orderItem}})],1):r._e(),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:r.loading},on:{click:r.create}},[r._v(\"创建\")]),r._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){r.openCreateOrderDetail=!1}}},[r._v(\"关闭\")])],1)],1),r._v(\" \"),a(\"company-select\",{on:{\"company-change\":r.setting_company}}),r._v(\" \"),r.openServiceItem?a(\"service-item\",{attrs:{id:r.orderDetail.companyid},on:{close:r.close_item}}):r._e()],1)},[],!1,null,null,null);v.options.__file=\"createOrder.vue\";var f=v.exports,g={mixins:[l],data:function(){return{openamendOrderDetail:!1,loading:!1}},methods:{xiugai:function(){var r=this;r.loading=!0,this.$refs.orderDetail.validate(function(e){if(e){var t={id:r.orderDetail.id,paydir:r.orderDetail.paydir,paytime:Object(_.a)(r.orderDetail.payTime),items:JSON.stringify(r.orderItem)};r.$Post(\"api/order/finishedUpdate\",t,function(e){r.loading=!1,r.openamendOrderDetail=!1,r.$refs.orderDetail.resetFields(),r.orderItem=[],r.$bus.emit(\"UPDATE_ORDER_LIST\",!0)},function(e){r.loading=!0})}else r.loading=!1})}},created:function(){var t=this;this.$bus.off(\"OPEN_ORDERLIST_AMEND\",!0),this.$bus.on(\"OPEN_ORDERLIST_AMEND\",function(e){t.get_data(e),t.openamendOrderDetail=!0})}},b=(r(746),Object(i.a)(g,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"修改订单\",width:\"100\"},model:{value:r.openamendOrderDetail,callback:function(e){r.openamendOrderDetail=e},expression:\"openamendOrderDetail\"}},[a(\"Form\",{ref:\"orderDetail\",attrs:{model:r.orderDetail,\"label-width\":100,rules:r.orderDetailRule}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.CompanyName,callback:function(e){r.$set(r.orderDetail,\"CompanyName\",e)},expression:\"orderDetail.CompanyName\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.name,callback:function(e){r.$set(r.orderDetail,\"name\",e)},expression:\"orderDetail.name\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:r.orderDetail.payTime,callback:function(e){r.$set(r.orderDetail,\"payTime\",e)},expression:\"orderDetail.payTime\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.paynumber,callback:function(e){r.$set(r.orderDetail,\"paynumber\",e)},expression:\"orderDetail.paynumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.realnumber,callback:function(e){r.$set(r.orderDetail,\"realnumber\",e)},expression:\"orderDetail.realnumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.paydir,callback:function(e){r.$set(r.orderDetail,\"paydir\",e)},expression:\"orderDetail.paydir\"}},r._l(r.payDirs,function(e,t){return a(\"Option\",{key:t,attrs:{value:e.typecode}},[r._v(r._s(e.typename))])}),1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:r.orderDetail.gdsreport,callback:function(e){r.$set(r.orderDetail,\"gdsreport\",e)},expression:\"orderDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[r._v(\"已报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[r._v(\"未报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[r._v(\"不用报道\")])],1)],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:r.orderDetail.isornotkp,callback:function(e){r.$set(r.orderDetail,\"isornotkp\",e)},expression:\"orderDetail.isornotkp\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[r._v(\"是\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[r._v(\"否\")])],1)],1)],1)],1)],1),r._v(\" \"),a(\"Row\",[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:r.orderItemHeader,data:r.orderItem}})],1),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:r.loading},on:{click:r.xiugai}},[r._v(\"修改\")]),r._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){r.openamendOrderDetail=!1}}},[r._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null));b.options.__file=\"amendOrder.vue\";var D=b.exports,I={mixins:[l],components:{serviceItem:s},data:function(){return{openEditOrderDetail:!1,loading:!1,openServiceItem:!1}},methods:{open_service_item:function(){this.openServiceItem=!0},close_item:function(){this.openServiceItem=!1},edit:function(){var r=this;r.$ButtonCollect(\"order_edit\"),r.loading=!0,this.$refs.orderDetail.validate(function(e){if(e){var t={id:r.orderDetail.id,payDir:r.orderDetail.paydir,payTime:Object(_.a)(r.orderDetail.payTime),GDSreport:r.orderDetail.gdsreport,companyId:r.orderDetail.companyid,isornotkp:r.orderDetail.isornotkp,orderPayNumber:r.orderDetail.realnumber,orderitems:JSON.stringify(r.orderItem),serviceStartDate:\"\"};r.$Post(\"api/order/update\",t,function(e){setTimeout(function(){r.loading=!1,r.openEditOrderDetail=!1,r.$bus.emit(\"UPDATE_ORDER_LIST\",!0)},500)},function(e){r.loading=!0})}else r.loading=!1})},open_product_list:function(){this.orderDetail.companyid?this.$bus.emit(\"OPEN_ORDER_PRODUCT_LIST\",this.orderDetail.companyid):this.$Message.warning(\"请先选择公司！\")}},created:function(){var t=this;this.$bus.off(\"OPEN_ORDERLIST_EDIT\",!0),this.$bus.on(\"OPEN_ORDERLIST_EDIT\",function(e){t.get_data(e),t.openEditOrderDetail=!0})}},w=(r(748),Object(i.a)(I,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑订单\",width:\"100\"},on:{\"on-visible-change\":r.modal_status_change},model:{value:r.openEditOrderDetail,callback:function(e){r.openEditOrderDetail=e},expression:\"openEditOrderDetail\"}},[a(\"Form\",{ref:\"orderDetail\",attrs:{model:r.orderDetail,\"label-width\":100,rules:r.orderDetailRule}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.CompanyName,callback:function(e){r.$set(r.orderDetail,\"CompanyName\",e)},expression:\"orderDetail.CompanyName\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:r.orderDetail.name,callback:function(e){r.$set(r.orderDetail,\"name\",e)},expression:\"orderDetail.name\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:r.orderDetail.payTime,callback:function(e){r.$set(r.orderDetail,\"payTime\",e)},expression:\"orderDetail.payTime\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[a(\"Input\",{attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:r.orderDetail.paynumber,callback:function(e){r.$set(r.orderDetail,\"paynumber\",e)},expression:\"orderDetail.paynumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[a(\"Input\",{attrs:{size:\"small\",number:\"\"},model:{value:r.orderDetail.realnumber,callback:function(e){r.$set(r.orderDetail,\"realnumber\",e)},expression:\"orderDetail.realnumber\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.paydir,callback:function(e){r.$set(r.orderDetail,\"paydir\",e)},expression:\"orderDetail.paydir\"}},r._l(r.payDirs,function(e,t){return a(\"Option\",{key:t,attrs:{value:e.typecode}},[r._v(r._s(e.typename))])}),1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.gdsreport,callback:function(e){r.$set(r.orderDetail,\"gdsreport\",e)},expression:\"orderDetail.gdsreport\"}},[a(\"Option\",{attrs:{value:\"ybd\"}},[r._v(\"已报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"wbd\"}},[r._v(\"未报道\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"bybd\"}},[r._v(\"不用报道\")])],1)],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:r.orderDetail.isornotkp,callback:function(e){r.$set(r.orderDetail,\"isornotkp\",e)},expression:\"orderDetail.isornotkp\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[r._v(\"是\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[r._v(\"否\")])],1)],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:r.open_product_list}},[r._v(\"新增产品\")]),r._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(e){r.show_contarct(\"edit\")}}},[r._v(\"查看合同\")]),r._v(\" \"),r.showAccountHomeItem?a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(e){r.openServiceItem=!0}}},[r._v(\"查看会计到家服务项\")]):r._e()],1)],1)],1),r._v(\" \"),a(\"Row\",[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:r.orderItemHeader,data:r.orderItem}})],1),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",name:\"order_edit\",loading:r.loading},on:{click:r.edit}},[r._v(\"编辑\")]),r._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){r.openEditOrderDetail=!1}}},[r._v(\"关闭\")])],1)],1),r._v(\" \"),r.openServiceItem?a(\"service-item\",{attrs:{id:r.orderDetail.companyid},on:{close:r.close_item}}):r._e()],1)},[],!1,null,null,null));w.options.__file=\"editOrderDetail.vue\";var k=w.exports,S={data:function(){return{orderId:\"\",openContract:!1,imgArray:[],type:\"onlyShow\",contractFlag:\"\",loading:!1}},methods:{get_contarct_data:function(){var t=this,e={params:{customerId:t.orderId,bType:\"OrderConctract\"}};this.$Get(\"/api/customer/findCustomerFilesById\",e,function(e){t.imgArray=e.data.data,t.openContract=!0})},submit_contract:function(){},img_remove:function(e){var t=this,r=\"/api/customer/customerFileRemove/\"+e;this.$Get(r,{},function(e){t.$Message.success(\"删除成功！\"),t.get_contarct_data()})},handleUpload:function(e){var t=this,r=new FormData;r.append(\"orderId\",t.orderId),r.append(\"files\",e),this.$Post(\"api/order/contract/upload\",r,function(e){t.get_contarct_data()},function(e){})},confirm:function(){var t=this;t.$ButtonCollect(\"order_contract\"),t.loading=!0;var e={id:t.orderId,contractFlag:t.contractFlag};this.$Post(\"api/order/contract/flag/update\",e,function(e){t.loading=!1,t.openContract=!1},function(e){t.loading=!1})}},computed:{isNull:function(){return!this.imgArray.length},isOperation:function(){return\"onlyShow\"!=this.type}},created:function(){var t=this;t.$bus.on(\"ORDER_LIST_CONTARCT_PIC_OPEN\",function(e){t.orderId=e.id,t.type=e.type,t.get_contarct_data()})}},x=Object(i.a)(S,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"合同\"},model:{value:r.openContract,callback:function(e){r.openContract=e},expression:\"openContract\"}},[r.isNull?a(\"Row\",[a(\"span\",[r._v(\"\\n                该订单未上传合同文件！\\n            \")])]):r._e(),r._v(\" \"),a(\"Row\",{attrs:{gutter:20}},[r._l(r.imgArray,function(t,e){return a(\"Col\",{key:e,attrs:{span:\"6\"}},[a(\"a\",{attrs:{target:\"_blank\",href:\"/api/assets/\"+t.realpath}},[\"xls\"==t.extend||\"xlsx\"==t.extend?a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/excel.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"doc\"==t.extend||\"docx\"==t.extend?a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/word.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"ppt\"==t.extend||\"pptx\"==t.extend?a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/ppt.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"txt\"==t.extend?a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/txt.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"pdf\"==t.extend?a(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/pdf.jpg\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):a(\"img\",{attrs:{src:\"/api/assets/\"+t.realpath,alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}})]),r._v(\" \"),r.isOperation?a(\"Button\",{attrs:{type:\"text\"},on:{click:function(e){r.img_remove(t.id)}}},[r._v(\"删除\")]):r._e()],1)}),r._v(\" \"),r.isOperation?a(\"Col\",{staticStyle:{height:\"100px\"},attrs:{span:\"6\"}},[a(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":r.handleUpload,action:\"\"}},[a(\"Button\",{staticStyle:{\"margin-top\":\"40px\"},attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[r._v(\"选择文件\")])],1)],1):r._e()],2),r._v(\" \"),a(\"Row\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.contract\"],expression:\"['orderL.contract']\"}]},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Select\",{staticStyle:{width:\"180px\"},model:{value:r.contractFlag,callback:function(e){r.contractFlag=e},expression:\"contractFlag\"}},[a(\"Option\",{attrs:{value:\"wsc\"}},[r._v(\"未上传\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"ysc\"}},[r._v(\"已上传(部分|全部)\")]),r._v(\" \"),a(\"Option\",{attrs:{value:\"ybq\"}},[r._v(\"已补全\")])],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Button\",{attrs:{type:\"primary\",loading:r.loading},on:{click:r.confirm}},[r._v(\"修改\")])],1)],1),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){r.openContract=!1}}},[r._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);x.options.__file=\"show_contarct.vue\";var C=x.exports,O={data:function(){return{changeArea:!1,companyId:\"\",loading:!1,sideLoading:!1,productPrice:0,areaCode:[\"440000\",\"440100\",\"440103\"],SKU:\"\",orderAddProduct:!1,searchProduct:\"\",productColumns:[{type:\"index\",width:60,align:\"center\"},{title:\"产品名称\",key:\"product\"}],productData:[],total:0,page:1,pageSize:10,selectProduct:\"\",queryProperty:[],producSku:[],selectProperty:[]}},computed:{disabled:function(){return!this.SKU},isAdmin:function(){return\"10059\"==localStorage.getItem(\"id\")}},methods:{search_product_1:function(){this.page=1,this.search_product()},search_product:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,product:t.searchProduct}};this.$Get(\"api/product/list\",e,function(e){t.productData=e.data.data.rows,t.total=e.data.data.total,t.loading=!1})},pageChange:function(e){this.page=e,this.search_product()},select_product:function(e){if(\"14\"==e.id)return this.$Message.error(\"对不起，该产品已经不允许操作！\"),!1;this.SKU=\"\",this.sideLoading=!0,this.selectProduct=e,this.productPrice=0,this.queryProperty=[],this.selectProperty=[],this.get_queryProperty(e.id),this.get_product_sku(e.id)},get_queryProperty:function(a){var o=this,e={params:{productId:a}};this.$Get(\"api/product/queryPropertyByProductId\",e,function(e){if(o.queryProperty=e.data.data,100==a){for(var t=[],r=0;r<o.queryProperty.length;r++)95==o.queryProperty[r].propertyId&&(t[0]=o.queryProperty[r]),23==o.queryProperty[r].propertyId&&(t[1]=o.queryProperty[r]),16==o.queryProperty[r].propertyId&&(t[2]=o.queryProperty[r]);o.queryProperty=t,o.changeArea=!0}else o.changeArea=!1})},get_product_sku:function(e){var r=this,t={params:{productId:e}};this.$Get(\"api/product/getSKUListByProductId\",t,function(e){r.producSku=e.data.data;var t=r.producSku[0].linkPropertys.split(\",\");1==t.length&&(r.selectProperty.push(parseInt(t[0])),r.property_change()),r.property_change(),setTimeout(function(){r.sideLoading=!1},200)})},find_sku:function(){var n=this;return new Promise(function(e,t){n.SKU=\"\";var r=n.producSku[0].linkPropertys.split(\",\").length;if(n.selectProperty.length==r)for(var a=[],o=n.selectProperty.join(\",\"),i=0;i<n.producSku.length;i++){a=n.producSku[i].linkPropertys.split(\",\"),n.find_array(a,o)&&(n.SKU=n.producSku[i].id,e())}})},find_array:function(e,t){if(t=t.split(\",\"),e.length!=t.length)return!1;var r=e.length,a=0;e=e.sort(),t=t.sort();for(var o=0;o<r;o++){if(e[o]!=t[o])return!1;a++}return a==r||void 0},get_product_price_by_sku:function(){var t=this,e={params:{skuId:t.SKU,areaId:t.areaCode[2]}};this.$Get(\"api/product/getPriceByAreaAndSKU\",e,function(e){t.productPrice=e.data.data[0].oaprice})},area_change:function(e){this.property_change()},property_change:function(e){var t=this;this.productPrice=0,this.selectProperty.length&&this.find_sku().then(function(){t.get_product_price_by_sku()}).catch(function(e){})},add_product:function(){var r=this,e={params:{productSkuIds:r.SKU,areaId:r.areaCode[2]}};this.$Get(\"/api/order/queryItemDetail\",e,function(e){if(r.detail=e.data.data[0],\"Y\"==e.data.data[0].iscycle){var t={params:{productId:r.selectProduct.id,companyId:r.companyId}};r.$Get(\"api/order/cycle/service/record/budget/period\",t,function(e){r.detail.servicestartdate=e.data.data,r.$bus.emit(\"ADD_PRODUCT\",r.detail),r.productListShow=!1})}else r.$bus.emit(\"ADD_PRODUCT\",r.detail),r.productListShow=!1})},open_flow_img:function(){window.open(\"/api/dataCenter/activiti/getInputStreamBySkuId?skuId=\"+this.SKU)},rowClassName:function(e,t){if(\"14\"==e.id)return\"disabled-row\"}},watch:{},created:function(){var t=this;this.$bus.off(\"OPEN_ORDER_PRODUCT_LIST\",!0),this.$bus.on(\"OPEN_ORDER_PRODUCT_LIST\",function(e){t.productPrice=0,t.selectProduct=\"\",t.searchProduct=\"\",t.companyId=e,t.search_product(),t.orderAddProduct=!0})}},P=(r(750),Object(i.a)(O,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"产品名称\",width:\"1000\"},model:{value:r.orderAddProduct,callback:function(e){r.orderAddProduct=e},expression:\"orderAddProduct\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Col\",{attrs:{span:\"4\"}},[a(\"Input\",{attrs:{placeholder:\"输入产品搜索\"},on:{\"on-enter\":r.search_product_1},model:{value:r.searchProduct,callback:function(e){r.searchProduct=e},expression:\"searchProduct\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:r.search_product_1},slot:\"append\"})],1)],1)],1),r._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Card\",[a(\"Col\",{attrs:{span:\"16\"}},[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[r._v(\"产品列表\")])]),r._v(\" \"),a(\"Table\",{attrs:{loading:r.loading,\"highlight-row\":\"\",\"row-class-name\":r.rowClassName,columns:r.productColumns,data:r.productData},on:{\"on-row-click\":r.select_product}}),r._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:r.total,current:r.page,\"show-total\":\"\",\"show-elevator\":\"\",simple:\"\"},on:{\"update:current\":function(e){r.page=e},\"on-change\":r.pageChange}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"15\",offset:\"1\"}},[r.sideLoading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):r._e(),r._v(\" \"),r.selectProduct?a(\"Card\",{attrs:{\"dis-hover\":\"\"}},[a(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[r._v(\"产品详情\")]),r._v(\" \"),a(\"Row\",{staticClass:\"productDetail-title\",staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"p\",{attrs:{id:\"product_name\"}},[r._v(r._s(r.selectProduct.product))]),r._v(\" \"),a(\"p\",{staticClass:\"productDetail-title-price\"},[a(\"span\",[r._v(\"￥\"),a(\"strong\",{attrs:{id:\"product_price\"}},[r._v(r._s(r.productPrice))])])]),r._v(\" \"),a(\"div\",{staticClass:\"productDetail-title-content\"})]),r._v(\" \"),100==r.selectProduct.id&&r.changeArea?a(\"Row\",{staticClass:\"type-select\"},[a(\"p\",[r._v(r._s(r.queryProperty[0].name))]),r._v(\" \"),a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(e){r.property_change,r.selectProperty[1]=\"\",r.productPrice=0,r.SKU=\"\"}},model:{value:r.selectProperty[0],callback:function(e){r.$set(r.selectProperty,0,e)},expression:\"selectProperty[0]\"}},r._l(r.queryProperty[0].children,function(e,t){return a(\"Radio\",{key:t,attrs:{label:e.pvId}},[r._v(r._s(e.propertyValue))])}),1),r._v(\" \"),310==r.selectProperty[0]?a(\"p\",[r._v(r._s(r.queryProperty[2].name))]):r._e(),r._v(\" \"),310==r.selectProperty[0]?a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":r.property_change},model:{value:r.selectProperty[1],callback:function(e){r.$set(r.selectProperty,1,e)},expression:\"selectProperty[1]\"}},r._l(r.queryProperty[2].children,function(e,t){return a(\"Radio\",{key:t,attrs:{label:e.pvId}},[r._v(r._s(e.propertyValue))])}),1):r._e(),r._v(\" \"),310!=r.selectProperty[0]?a(\"p\",[r._v(r._s(r.queryProperty[1].name))]):r._e(),r._v(\" \"),310!=r.selectProperty[0]?a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":r.property_change},model:{value:r.selectProperty[1],callback:function(e){r.$set(r.selectProperty,1,e)},expression:\"selectProperty[1]\"}},r._l(r.queryProperty[1].children,function(e,t){return a(\"Radio\",{key:t,attrs:{label:e.pvId}},[r._v(r._s(e.propertyValue))])}),1):r._e()],1):r._e(),r._v(\" \"),r._l(r.queryProperty,function(e,t){return 100!=r.selectProduct.id?a(\"Row\",{key:t,staticClass:\"type-select\"},[a(\"p\",[r._v(r._s(e.name))]),r._v(\" \"),a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":r.property_change},model:{value:r.selectProperty[t],callback:function(e){r.$set(r.selectProperty,t,e)},expression:\"selectProperty[index]\"}},r._l(e.children,function(e,t){return a(\"Radio\",{key:t,attrs:{label:e.pvId}},[r._v(r._s(e.propertyValue))])}),1)],1):r._e()}),r._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"20px\"}},[a(\"p\",{staticStyle:{\"font-size\":\"16px\",\"padding-bottom\":\"16px\"}},[r._v(\"地区\")]),r._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"al-cascader\",{attrs:{\"data-type\":\"code\",level:\"2\"},on:{\"on-change\":r.area_change},model:{value:r.areaCode,callback:function(e){r.areaCode=e},expression:\"areaCode\"}})],1)],1),r._v(\" \"),a(\"Row\",[a(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\",disabled:r.disabled},on:{click:r.add_product}},[r._v(\"立即购买\")]),r._v(\" \"),r.isAdmin?a(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\",disabled:r.disabled},on:{click:r.open_flow_img}},[r._v(\"查看流程图\")]):r._e()],1)],2):r._e()],1)],1),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));P.options.__file=\"productSelect.vue\";var $={name:\"orderList_index\",components:{showOrder:p,createOrder:f,amendOrder:D,editOrder:k,showContarct:C,productSelect:P.exports},data:function(){var a=this;return{imgLoading:!0,flowImgOpen:!1,flowChartImg:\"\",payDirType:[],search_model:\"0\",selectRow:\"\",formValidateSearch:{ordercode:\"\",companyname:\"\",customername:\"\",customertel:\"\",payDir:\"\",date:[],crealname:\"\",frealname:\"\"},total:0,page:1,pageSize:10,loading:!1,order:\"desc\",sortField:\"id\",header:[{title:\"订单号码\",key:\"ordercode\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"产品名称\",key:\"productname\",minWidth:180,render:function(e,t){return\"\"==t.row.productname||null==t.row.productname?\"\":10<t.row.productname.length?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.productname.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.productname)])]):e(\"span\",t.row.productname)}},{title:\"流程状态\",key:\"ProcessType\",minWidth:120,sortable:\"custom\"},{title:\"缴费渠道\",key:\"base_paydir\",minWidth:140,sortable:\"custom\"},{title:\"订单价格\",key:\"paynumber\",minWidth:120,sortable:\"custom\"},{title:\"已付款\",key:\"realnumber\",minWidth:100,sortable:\"custom\"},{title:\"创建时间\",key:\"base_createdate\",minWidth:120,sortable:\"custom\"},{title:\"缴费日期\",key:\"payTime\",minWidth:120,sortable:\"custom\"},{title:\"余款\",key:\"neednumber\",minWidth:100,sortable:\"custom\"},{title:\"客户来源\",key:\"customersource\",minWidth:120},{title:\"创建人\",key:\"crealname\",minWidth:100},{title:\"跟进人\",key:\"frealname\",minWidth:100},{title:\"上传合同\",key:\"contract_flag\",minWidth:120,sortable:\"custom\"},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:120,render:function(e,t){var r=a;if(t.index!=a.pageSize)return e(\"div\",[e(\"Button\",{props:{type:\"warning\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.record\"}],on:{click:function(){r.$bus.emit(\"ORDER_APPROVELIST_LOG\",t.row.id)}}},\"审批记录\")])}},{title:\"撤回\",key:\"action\",minWidth:75,render:function(e,t){var r=a;if(t.index!=a.pageSize)return e(\"Button\",{props:{type:\"error\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.cancelOrder\"}]},[e(\"Poptip\",{props:{transfer:!0,confirm:!0,title:\"您确定要撤回此订单项吗！\"},on:{\"on-ok\":function(){var e={params:{orderId:t.row.id}};a.$Get(\"api/order/cancelOrder\",e,function(e){r.$Message.success(e.data.msg),r.get_data()})}}},\"撤回\")])}}],amdinOpertionCol:{title:\"订单操作\",key:\"action\",minWidth:180,render:function(e,t){var r=a;if(t.index!=a.pageSize)return e(\"div\",[e(\"Button\",{props:{type:\"warning\",size:\"small\"},on:{click:function(){r.$ButtonCollect(\"order_rebuild_orderflow\");var e={params:{orderId:t.row.id}};r.$Get(\"api/order/resetOrderProcess\",e,function(e){r.$Message.success(e.data.msg),r.get_data()})}}},\"重置流程\"),e(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginLeft:\"10px\"},on:{click:function(){r.$ButtonCollect(\"order_rebuild_worderorder\");var e={params:{orderId:t.row.id}};r.$Get(\"api/order/orderApprovalFinish\",e,function(e){r.$Message.success(e.data.msg)})}}},\"生成工单\")])}},data:[],payDirs:[],cluesources:[],order_contract_flag:[],payDirs_map:new Map,cluesources_map:new Map,order_contract_flag_map:new Map}},methods:{downloadExcel:function(){var e=this,t={page:\"1\",pageSize:\"1000000\",ordercode:e.formValidateSearch.ordercode,companyname:e.formValidateSearch.companyname,customername:e.formValidateSearch.customername,customertel:e.formValidateSearch.customertel,crealname:e.formValidateSearch.crealname,frealname:e.formValidateSearch.frealname,payDir:e.formValidateSearch.payDir,bcreatedate:Object(_.a)(e.formValidateSearch.date[0]),ecreatedate:Object(_.a)(e.formValidateSearch.date[1]),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"ordercode\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"productname\",title:\"产品名称\"},{field:\"ProcessType\",title:\"流程状态\"},{field:\"base_paydir\",title:\"缴费渠道\",format:\"payDirs\"},{field:\"paynumber\",title:\"订单价格\"},{field:\"realnumber\",title:\"已付款\"},{field:\"neednumber\",title:\"余款\"},{field:\"base_createdate\",title:\"创建时间\"},{field:\"crealname\",title:\"创建人\"},{field:\"frealname\",title:\"跟进人\"}]))},r=this.$MergeURL(\"api/order/list\",t);window.open(r)},Search:function(){this.page=1,this.get_data()},handleReset:function(){this.$refs.formValidateSearch.resetFields(),this.formValidateSearch.date=[],this.get_data()},sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"id\"):this.order=e.order,this.get_data()},get_data:function(){var r=this;r.loading=!0;var e={params:{sortField:r.sortField,order:r.order,page:r.page,pageSize:r.pageSize,ordercode:r.formValidateSearch.ordercode,companyname:r.formValidateSearch.companyname,customername:r.formValidateSearch.customername,customertel:r.formValidateSearch.customertel,crealname:r.formValidateSearch.crealname,frealname:r.formValidateSearch.frealname,payDir:r.formValidateSearch.payDir,sumField:\"paynumber,realnumber,neednumber\",bcreatedate:Object(_.a)(r.formValidateSearch.date[0]),ecreatedate:Object(_.a)(r.formValidateSearch.date[1])}};this.$Get(\"api/order/list\",e,function(e){r.data=e.data.data.rows,r.total=e.data.data.total;for(var t=0;t<r.data.length;t++)r.data[t].base_paydir=r.payDirs_map.get(r.data[t].base_paydir),r.data[t].customersource=r.cluesources_map.get(r.data[t].customersource),r.data[t].contract_flag=r.order_contract_flag_map.get(r.data[t].contract_flag),r.data[t].base_createdate&&(r.data[t].base_createdate=r.data[t].base_createdate.slice(0,10));r.data.push({base_paydir:\"合计\",paynumber:e.data.data.sum.paynumber,realnumber:e.data.data.sum.realnumber,neednumber:e.data.data.sum.neednumber}),r.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},pageSizeChange:function(e){this.pageSize=e,this.get_data()},rowClassName:function(e,t){if(\"调整订单\"==e.ProcessType&&e.id!=this.selectRow.id)return\"demo-table-error-row\"},select_row:function(e){e.id?this.selectRow=e:this.selectRow=\"\"},get_data_center:function(){var r=this,a=this;return new Promise(function(t,e){r.$GetDataCenter(\"payDirs,cluesources,order_contract_flag\",function(e){a.payDirs=e.data.data.payDirs,a.cluesources=e.data.data.cluesources,a.order_contract_flag=e.data.data.order_contract_flag,a.payDirs_map=a.$array2map(a.payDirs),a.cluesources_map=a.$array2map(a.cluesources),a.order_contract_flag_map=a.$array2map(a.order_contract_flag),t()})})},open_order_detail:function(e){this.$bus.emit(\"OPEN_ORDERLIST_DETAIL\",e.id)},order_show:function(){this.selectRow?this.open_order_detail(this.selectRow):this.$Message.warning(\"请选择一行进行操作！\")},open_flowChart:function(){var e=this;this.selectRow?(this.imgLoading=!0,this.flowImgOpen=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+this.selectRow.id,setTimeout(function(){e.imgLoading=!1},1e3)):this.$Message.warning(\"请选择一行进行操作！\")},reapply_process:function(){var t=this;this.selectRow?t.selectRow.CurrentProcess?t.$Modal.confirm({loading:!0,title:\"重新提交审批\",content:\"<p>是否重新提交审批</p>\",onOk:function(){var e={params:{orderId:t.selectRow.id,auditFlag:1}};t.$Get(\"api/activiti/reApplyProcessByOrderId\",e,function(e){t.$Modal.remove(),t.$Message.success(\"重新提交成功\"),setTimeout(function(){t.get_data()},1e3)},function(e){t.$Modal.remove(),t.$Message.error(\"提交失败！\"),setTimeout(function(){t.get_data()},1e3)})}}):t.$Message.warning(\"该订单状态不允许重新提交\"):this.$Message.warning(\"请选择一行进行操作！\")},del_order:function(){var t=this;if(this.selectRow){t.$ButtonCollect(\"order_rebuild_orderflow\");t.$ButtonCollect(\"order_del\");var e={params:{orderId:t.selectRow.id}};t.$Get(\"api/order/abolishOrder\",e,function(e){t.$Message.success(e.data.msg),setTimeout(function(){t.get_data()},500)})}else this.$Message.warning(\"请选择一行进行操作！\")},xiugai_open:function(){this.selectRow?\"Finished\"!=this.selectRow.CurrentProcess?this.$Message.warning(\"未完结订单不予许进行修改！\"):this.$bus.emit(\"OPEN_ORDERLIST_AMEND\",this.selectRow.id):this.$Message.warning(\"请选择一行进行操作！\")},open_edit:function(){this.selectRow?\"Ready\"!=this.selectRow.CurrentProcess&&\"Returned\"!=this.selectRow.CurrentProcess&&\"ReturnedToReady\"!=this.selectRow.CurrentProcess?this.$Message.warning(\"当前订单状态不允许编辑！\"):this.$bus.emit(\"OPEN_ORDERLIST_EDIT\",this.selectRow.id):this.$Message.warning(\"请选择一行进行操作！\")},open_add:function(){this.$bus.emit(\"OPEN_ORDERLIST_ADD\",!0)},order_cancelOrder:function(){}},created:function(){var t=this;this.loading=!0,this.get_data_center().then(this.get_data()),localStorage.getItem(\"id\"),this.$bus.on(\"UPDATE_ORDER_LIST\",function(e){t.get_data()})}},R=(r(752),Object(i.a)($,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a(\"div\",[a(\"Card\",{staticStyle:{\"min-width\":\"800px\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:r.search_model,callback:function(e){r.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),r._v(\"\\n                            筛选\\n                        \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!r._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?r.Search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidateSearch\",attrs:{model:r.formValidateSearch,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"订单号码：\",prop:\"ordercode\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.ordercode,callback:function(e){r.$set(r.formValidateSearch,\"ordercode\",e)},expression:\"formValidateSearch.ordercode\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"公司名称：\",prop:\"companyname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.companyname,callback:function(e){r.$set(r.formValidateSearch,\"companyname\",e)},expression:\"formValidateSearch.companyname\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customername\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.customername,callback:function(e){r.$set(r.formValidateSearch,\"customername\",e)},expression:\"formValidateSearch.customername\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户电话：\",prop:\"customertel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.customertel,callback:function(e){r.$set(r.formValidateSearch,\"customertel\",e)},expression:\"formValidateSearch.customertel\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"缴费渠道：\",prop:\"customername\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:r.formValidateSearch.payDir,callback:function(e){r.$set(r.formValidateSearch,\"payDir\",e)},expression:\"formValidateSearch.payDir\"}},r._l(r.payDirs,function(e,t){return a(\"Option\",{key:t,attrs:{value:e.typecode}},[r._v(r._s(e.typename))])}),1)],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建时间：\",prop:\"date\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:r.formValidateSearch.date,callback:function(e){r.$set(r.formValidateSearch,\"date\",e)},expression:\"formValidateSearch.date\"}})],1)],1)],1),r._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"创建人：\",prop:\"crealname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.crealname,callback:function(e){r.$set(r.formValidateSearch,\"crealname\",e)},expression:\"formValidateSearch.crealname\"}})],1)],1),r._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"跟进人：\",prop:\"frealname\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:r.formValidateSearch.frealname,callback:function(e){r.$set(r.formValidateSearch,\"frealname\",e)},expression:\"formValidateSearch.frealname\"}})],1)],1)],1),r._v(\" \"),a(\"center\",[a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:r.Search}},[r._v(\"搜索\")]),r._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:r.handleReset}},[r._v(\"重置\")])],1)],1)],1)],1)],1)],1)],1),r._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.add\"],expression:\"['orderL.add']\"}],attrs:{type:\"primary\",icon:\"plus\",name:\"order_add\"},on:{click:r.open_add}},[r._v(\"录入\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.edit\"],expression:\"['orderL.edit']\"}],attrs:{type:\"primary\",icon:\"edit\",name:\"order_edit\"},on:{click:r.open_edit}},[r._v(\"编辑\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.detail\"],expression:\"['orderL.detail']\"}],attrs:{type:\"primary\",icon:\"information-circled\",name:\"order_show\"},on:{click:r.order_show}},[r._v(\"查看\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.flowChart\"],expression:\"['orderL.flowChart']\"}],attrs:{type:\"primary\",icon:\"ios-crop\"},on:{click:r.open_flowChart}},[r._v(\"查看流程图\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.resubmit\"],expression:\"['orderL.resubmit']\"}],attrs:{type:\"primary\",icon:\"refresh\",name:\"order_re_submit\"},on:{click:r.reapply_process}},[r._v(\"重新提交\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.amend\"],expression:\"['orderL.amend']\"}],attrs:{type:\"primary\",icon:\"edit\",name:\"order_amend\"},on:{click:r.xiugai_open}},[r._v(\"修改\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.delOrder\"],expression:\"['orderL.delOrder']\"}],attrs:{type:\"primary\",icon:\"trash-b\",name:\"order_amend\"},on:{click:r.del_order}},[r._v(\"作废\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.amend\"],expression:\"['orderL.amend']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:r.get_data}},[r._v(\"刷新\")]),r._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.export\"],expression:\"['orderL.export']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:r.downloadExcel}},[r._v(\"导出Excel\")])],1)],1),r._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{loading:r.loading,\"highlight-row\":\"\",size:\"small\",border:\"\",\"row-class-name\":r.rowClassName,columns:r.header,data:r.data},on:{\"on-row-click\":r.select_row,\"on-row-dblclick\":r.open_order_detail,\"on-sort-change\":r.sort}}),r._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:r.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:r.page},on:{\"update:current\":function(e){r.page=e},\"on-change\":r.pageChange,\"on-page-size-change\":r.pageSizeChange}})],1)],1),r._v(\" \"),a(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:r.flowImgOpen,callback:function(e){r.flowImgOpen=e},expression:\"flowImgOpen\"}},[r.imgLoading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):r._e(),r._v(\" \"),a(\"center\",[a(\"img\",{attrs:{src:r.flowChartImg,width:\"100%\"}})]),r._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),r._v(\" \"),a(\"show-order\",{attrs:{payDirs:r.payDirs}}),r._v(\" \"),a(\"create-order\",{attrs:{payDirs:r.payDirs}}),r._v(\" \"),a(\"amend-order\",{attrs:{payDirs:r.payDirs}}),r._v(\" \"),a(\"edit-order\",{attrs:{payDirs:r.payDirs}}),r._v(\" \"),a(\"show-contarct\"),r._v(\" \"),a(\"product-select\")],1)},[],!1,null,null,null));R.options.__file=\"orderListIndex.vue\";t.default=R.exports}}]);"}