{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{403:function(t,e,o){\"use strict\";o.r(e);var r={props:{id:{type:[String,Number],default:\"\"}},data:function(){return{formValidate:{amount:\"\"},submitLoading:!1,pause:!0,header:[{title:\"序号\",type:\"index\",minWidth:90},{title:\"收款金额\",key:\"amount\",minWidth:120},{title:\"收款人\",key:\"realname\",minWidth:90},{title:\"创建时间\",key:\"createdate\",minWidth:150}],data:[],loading:!1}},methods:{close:function(){this.$emit(\"close\")},get_data:function(){var t=this;t.loading=!0;var e={params:{workOrderId:t.id}};this.$Get(\"api/order/work/order/plan/receipt/item/list\",e,function(e){t.data=e.data.data,t.loading=!1})},click_current_row:function(t){},submit:function(){if(this.formValidate.amount){var t=this;t.submitLoading=!0;var e={amount:t.formValidate.amount,workOrderId:t.id};this.$Post(\"api/order/work/order/plan/receipt/item/create\",e,function(e){t.submitLoading=!1,t.get_data()},function(e){t.submitLoading=!1})}else this.$Message.warning(\"请输入收款金额！\")}},mounted:function(){var t=this;this.id?this.get_data():(this.$Message.error(\"工单信息错误！\"),setTimeout(function(){t.close()},1500))}},n=o(2),a=Object(n.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",[o(\"Modal\",{attrs:{title:\"收款明细\",width:\"600\"},on:{\"on-cancel\":t.close},model:{value:t.pause,callback:function(e){t.pause=e},expression:\"pause\"}},[o(\"Row\",{attrs:{gutter:20}},[o(\"Col\",{attrs:{span:\"12\"}},[o(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,\"label-width\":80}},[o(\"FormItem\",{attrs:{label:\"收款金额\",prop:\"amount\"}},[o(\"Input\",{attrs:{placeholder:\"输入收款金额\"},model:{value:t.formValidate.amount,callback:function(e){t.$set(t.formValidate,\"amount\",e)},expression:\"formValidate.amount\"}},[o(\"Button\",{attrs:{slot:\"append\",icon:\"plus\",disabled:t.submitLoading},on:{click:t.submit},slot:\"append\"})],1)],1)],1)],1)],1),t._v(\" \"),o(\"Row\",{attrs:{gutter:20}},[o(\"Col\",{attrs:{span:\"24\"}},[o(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.loading},on:{\"on-current-change\":t.click_current_row}})],1)],1),t._v(\" \"),o(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.close}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);a.options.__file=\"incomeDetail.vue\";var i=a.exports,s={data:function(){return{sortField:\"updatedate\",order:\"desc\",search_model:\"\",formInline:{companyname:\"\",servicename:\"\"},loading:!1,currentRow:\"\",total:0,page:1,pageSize:10,data:[],isAdmin:!1}},methods:{sort:function(t){this.sortField=t.key,\"normal\"==t.order?(this.order=\"desc\",this.sortField=\"updatedate\"):this.order=t.order,this.get_data()},download_excel:function(){var t={page:\"1\",pageSize:\"1000000\",companyName:this.formInline.companyname,serviceName:this.formInline.servicename,serviceDept:\"'PLAN'\",export:\"Y\",workOrderStatus:this.workStatusId,exportField:encodeURI(JSON.stringify([{field:\"workOrderStatus\",title:\"工单状态\",format:\"workOrderStatus\"},{field:\"companyname\",title:\"公司名称\"},{field:\"baseorderid\",title:\"提示\"},{field:\"departname\",title:\"服务部门\"},{field:\"product\",title:\"产品全称\"},{field:\"CurrentProcess\",title:\"目前进度\"},{field:\"nextprocess\",title:\"下个进度\"},{field:\"ServiceStart\",title:\"服务开始时间\"},{field:\"CreateDate\",title:\"创建时间\"},{field:\"ServiceEnd\",title:\"实际完成时间\"},{field:\"servername\",title:\"服务人员\"},{field:\"followname\",title:\"跟进人\"}]))},e=this.$MergeURL(\"api/order/workOrderList\",t);window.open(e)},get_data:function(){var t=this;t.loading=!0;var e={params:{workOrderStatus:t.workStatusId,sortField:t.sortField,order:t.order,page:t.page,pageSize:t.pageSize,companyName:t.formInline.companyname,serviceName:t.formInline.servicename,serviceDept:\"'PLAN'\"}};this.$Get(\"api/order/workOrderList\",e,function(e){t.total=e.data.data.total,t.data=e.data.data.rows.map(function(t){return t.CreateDate&&(t.CreateDate=t.CreateDate.slice(0,10)),t.ServiceStart&&(t.ServiceStart=t.ServiceStart.slice(0,10)),t.UpdateDate&&(t.UpdateDate=t.UpdateDate.slice(0,10)),t}),t.loading=!1})},page_change:function(t){this.page=t,this.get_data()},page_size_change:function(t){this.page=1,this.pageSize=t,this.get_data()},search:function(){this.page=1,this.get_data()},reset:function(){this.page=1,this.$refs.formInline.resetFields(),this.get_data()},save_current_row:function(t){this.currentRow=t},show_detail:function(){this.currentRow?this.$store.commit(\"open_gobal_work_order_detail_modal\",this.currentRow.id):this.$Message.warning(\"请选择一行查看详情！\")},next_step:function(){this.currentRow?this.$bus.emit(\"myflow\",this.currentRow):this.$Message.warning(\"请选择一行进行流转！\")},open_flow_chart:function(t){this.$emit(\"open-flow-chart\",t.row.id)},company:function(){this.currentRow?this.$store.commit(\"open_gobal_company_detail_modal\",this.currentRow.company_id):this.$Message.warning(\"请选择一行查看！\")},re_create:function(){var t=this;if(this.currentRow){var e={params:{workOrderId:t.currentRow.id}};t.$Get(\"api/order/resetWorkOrderProcess\",e,function(e){t.$Message.success(e.data.msg),t.$bus.emit(\"FLOW_NEXT\")})}else this.$Message.warning(\"请选择一行！\")},finish_workerOrder:function(){var t=this;if(this.currentRow){var e={params:{workOrderId:t.currentRow.id}};t.$Get(\"api/order/goFinshWorkOrderProcess\",e,function(e){t.$Message.success(e.data.msg),t.$bus.emit(\"FLOW_NEXT\")})}else this.$Message.warning(\"请选择一行！\")},pass_workOrder:function(){var t=this;if(this.currentRow){var e={workOrderId:t.currentRow.id};t.$Post(\"api/order/work/order/plan/pass\",e,function(e){t.get_data()},function(t){})}else this.$Message.warning(\"请选择一行！\")},income_detail:function(){this.currentRow?this.$bus.emit(\"PLAN_WORKORDER_INCOME_DETAIL\",this.currentRow.id):this.$Message.warning(\"请选择一行！\")}},created:function(){var t=this;10059==localStorage.getItem(\"id\")?t.isAdmin=!0:t.isAdmin=!1,t.$bus.on(\"FLOW_NEXT\",function(e){t.get_data()})},mounted:function(){}},l={mixins:[s],data:function(){var t=this;return{workStatusId:\"\",workOrderStatus:[],workOrderStatus_map:new Map,header:[{title:\"工单状态\",key:\"workOrderStatus\",minWidth:140,sortable:!0,render:function(e,o){return e(\"div\",t.workOrderStatus_map.get(o.row.workOrderStatus))}},{title:\"归属公司\",key:\"companyname\",minWidth:220,sortable:!0,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":e.row.companyname.length>12?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,12)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"提示\",key:\"baseorderid\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:120,sortable:!0},{title:\"产品全称\",key:\"product\",minWidth:200,sortable:!0,render:function(t,e){return\"\"==e.row.product||null==e.row.product?\"\":e.row.product.length>10?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.product.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.product)])]):t(\"span\",e.row.product)}},{title:\"产品数量\",key:\"productnumber\",minWidth:120},{title:\"目前进度\",key:\"CurrentProcess\",minWidth:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",minWidth:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",minWidth:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",minWidth:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",minWidth:140,sortable:!0},{title:\"服务人员\",key:\"servername\",minWidth:120,sortable:!0},{title:\"跟进人\",key:\"followname\",minWidth:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,o){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.open_flow_chart(o)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var e=t,r=\"\";if(null==o.row.resumeFlag||3==o.row.resumeFlag)r={params:{workOrderId:o.row.id,resumeFlag:3}};else if(2==o.row.resumeFlag){r={params:{workOrderId:o.row.id,resumeFlag:2}}}r&&t.$Get(\"api/order/serviceResume\",r,function(t){e.$Message.success(t.data.msg),e.$bus.emit(\"FLOW_NEXT\")})}}},\"[暂停/解锁]\")])}}]}},methods:{getDataCenter:function(){var t=this;this.$GetDataCenter(\"workOrderStatus\",function(e){return t.workOrderStatus=e.data.data.workOrderStatus,t.workOrderStatus_map=t.$array2map(t.workOrderStatus),new Promise(function(t){t()}).then(function(){t.get_data()})})}},created:function(){this.getDataCenter(),10059==localStorage.getItem(\"id\")?this.isAdmin=!0:this.isAdmin=!1}},c=Object(n.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"Card\",[o(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[o(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[o(\"Panel\",{attrs:{name:\"1\"}},[o(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                \"),o(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[o(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),o(\"FormItem\",[o(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),o(\"Row\",[o(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[o(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.show_detail}},[t._v(\"查询详情\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.download_excel}},[t._v(\"导出Excel\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.pass_workOrder}},[t._v(\"通过\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.income_detail}},[t._v(\"收款明细\")]),t._v(\" \"),t.isAdmin?o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.re_create}},[t._v(\"重新生成流程\")]):t._e(),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.finish_workerOrder}},[t._v(\"一键完结\")])],1)],1),t._v(\" \"),o(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[o(\"Table\",{ref:\"selection\",attrs:{loading:t.loading,\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.show_detail,\"on-sort-change\":t.sort}}),t._v(\" \"),o(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change,\"update:current\":function(e){t.page=e}}})],1)],1)},[],!1,null,null,null);c.options.__file=\"all.vue\";var m=c.exports,p={mixins:[s],data:function(){var t=this;return{workStatusId:60,workOrderStatus:[],workOrderStatus_map:new Map,header:[{title:\"归属公司\",key:\"companyname\",minWidth:220,sortable:!0,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":e.row.companyname.length>12?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,12)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"服务部门\",key:\"departname\",minWidth:120,sortable:!0},{title:\"产品全称\",key:\"product\",minWidth:200,sortable:!0,render:function(t,e){return\"\"==e.row.product||null==e.row.product?\"\":e.row.product.length>10?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.product.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.product)])]):t(\"span\",e.row.product)}},{title:\"产品数量\",key:\"productnumber\",minWidth:120},{title:\"目前进度\",key:\"CurrentProcess\",minWidth:120,sortable:!0},{title:\"下个进度\",key:\"nextprocess\",minWidth:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",minWidth:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",minWidth:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",minWidth:140,sortable:!0},{title:\"服务人员\",key:\"servername\",minWidth:120,sortable:!0},{title:\"跟进人\",key:\"followname\",minWidth:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,o){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.open_flow_chart(o)}}},\"[流程图]\")])}}]}},methods:{},created:function(){this.get_data(),10059==localStorage.getItem(\"id\")?this.isAdmin=!0:this.isAdmin=!1}},d=Object(n.a)(p,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"Card\",[o(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[o(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[o(\"Panel\",{attrs:{name:\"1\"}},[o(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                \"),o(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[o(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),o(\"FormItem\",[o(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),o(\"Row\",[o(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[o(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.show_detail}},[t._v(\"查询详情\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.download_excel}},[t._v(\"导出Excel\")])],1)],1),t._v(\" \"),o(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[o(\"Table\",{ref:\"selection\",attrs:{loading:t.loading,\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.show_detail,\"on-sort-change\":t.sort}}),t._v(\" \"),o(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change,\"update:current\":function(e){t.page=e}}})],1)],1)},[],!1,null,null,null);d.options.__file=\"finished.vue\";var u=d.exports,h={mixins:[s],data:function(){var t=this;return{workStatusId:30,workOrderStatus:[],workOrderStatus_map:new Map,header:[{title:\"归属公司\",key:\"companyname\",minWidth:220,sortable:!0,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":e.row.companyname.length>12?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,12)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"提示\",key:\"baseorderid\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:120,sortable:!0},{title:\"产品全称\",key:\"product\",minWidth:200,sortable:!0,render:function(t,e){return\"\"==e.row.product||null==e.row.product?\"\":e.row.product.length>10?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.product.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.product)])]):t(\"span\",e.row.product)}},{title:\"产品数量\",key:\"productnumber\",minWidth:120},{title:\"目前进度\",key:\"CurrentProcess\",minWidth:120},{title:\"下个进度\",key:\"nextprocess\",minWidth:120,sortable:!0},{title:\"服务开始时间\",key:\"ServiceStart\",minWidth:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",minWidth:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",minWidth:140,sortable:!0},{title:\"服务人员\",key:\"servername\",minWidth:120,sortable:!0},{title:\"跟进人\",key:\"followname\",minWidth:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,o){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.open_flow_chart(o)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var e=t,r=\"\";if(null==o.row.resumeFlag||3==o.row.resumeFlag)r={params:{workOrderId:o.row.id,resumeFlag:3}};else if(2==o.row.resumeFlag){r={params:{workOrderId:o.row.id,resumeFlag:2}}}r&&t.$Get(\"api/order/serviceResume\",r,function(t){e.$Message.success(t.data.msg),e.$bus.emit(\"FLOW_NEXT\")})}}},\"[暂停/解锁]\")])}}]}},methods:{},created:function(){this.get_data(),10059==localStorage.getItem(\"id\")?this.isAdmin=!0:this.isAdmin=!1}},w=Object(n.a)(h,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"Card\",[o(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[o(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[o(\"Panel\",{attrs:{name:\"1\"}},[o(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                \"),o(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[o(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),o(\"FormItem\",[o(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),o(\"Row\",[o(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.next_step}},[t._v(\"流转\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.show_detail}},[t._v(\"查询详情\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.download_excel}},[t._v(\"导出Excel\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.pass_workOrder}},[t._v(\"通过\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.income_detail}},[t._v(\"收款明细\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.finish_workerOrder}},[t._v(\"一键完结\")])],1)],1),t._v(\" \"),o(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[o(\"Table\",{ref:\"selection\",attrs:{loading:t.loading,\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.show_detail,\"on-sort-change\":t.sort}}),t._v(\" \"),o(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change,\"update:current\":function(e){t.page=e}}})],1)],1)},[],!1,null,null,null);w.options.__file=\"servicing.vue\";var f=w.exports,g={mixins:[s],data:function(){var t=this;return{workStatusId:20,workOrderStatus:[],workOrderStatus_map:new Map,header:[{title:\"归属公司\",key:\"companyname\",minWidth:220,sortable:!0,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":e.row.companyname.length>12?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,12)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"服务部门\",key:\"departname\",minWidth:120},{title:\"产品全称\",key:\"product\",minWidth:200,sortable:!0,render:function(t,e){return\"\"==e.row.product||null==e.row.product?\"\":e.row.product.length>10?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.product.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.product)])]):t(\"span\",e.row.product)}},{title:\"产品数量\",key:\"productnumber\",minWidth:120},{title:\"目前进度\",key:\"CurrentProcess\",minWidth:120},{title:\"下个进度\",key:\"nextprocess\",minWidth:120},{title:\"服务开始时间\",key:\"ServiceStart\",minWidth:140,sortable:!0},{title:\"创建时间\",key:\"CreateDate\",minWidth:120,sortable:!0},{title:\"实际完成时间\",key:\"UpdateDate\",minWidth:140,sortable:!0},{title:\"服务人员\",key:\"servername\",minWidth:120,sortable:!0},{title:\"跟进人\",key:\"followname\",minWidth:120,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:180,align:\"center\",render:function(e,o){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){t.open_flow_chart(o)}}},\"[流程图]\"),e(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){var e=t,r=\"\";if(null==o.row.resumeFlag||3==o.row.resumeFlag)r={params:{workOrderId:o.row.id,resumeFlag:3}};else if(2==o.row.resumeFlag){r={params:{workOrderId:o.row.id,resumeFlag:2}}}r&&t.$Get(\"api/order/serviceResume\",r,function(t){e.$Message.success(t.data.msg),e.$bus.emit(\"FLOW_NEXT\")})}}},\"[暂停/解锁]\")])}}]}},methods:{},created:function(){this.get_data(),10059==localStorage.getItem(\"id\")?this.isAdmin=!0:this.isAdmin=!1}},_=Object(n.a)(g,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"Card\",[o(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[o(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[o(\"Panel\",{attrs:{name:\"1\"}},[o(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                筛选\\n                \"),o(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[o(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":100}},[o(\"Row\",{attrs:{gutter:16}},[o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.companyname,callback:function(e){t.$set(t.formInline,\"companyname\",e)},expression:\"formInline.companyname\"}})],1)],1),t._v(\" \"),o(\"Col\",{attrs:{span:\"8\"}},[o(\"FormItem\",{attrs:{prop:\"servicename\",label:\"服务人员名称：\"}},[o(\"Input\",{attrs:{size:\"small\",type:\"text\",placeholder:\"\"},model:{value:t.formInline.servicename,callback:function(e){t.$set(t.formInline,\"servicename\",e)},expression:\"formInline.servicename\"}})],1)],1)],1),t._v(\" \"),o(\"FormItem\",[o(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),o(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),o(\"Row\",[o(\"ButtonGroup\",{staticStyle:{float:\"left\"}},[o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.next_step}},[t._v(\"流转\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"information-circled\"},on:{click:t.show_detail}},[t._v(\"查询详情\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.company}},[t._v(\"查看公司\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.download_excel}},[t._v(\"导出Excel\")]),t._v(\" \"),o(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:t.finish_workerOrder}},[t._v(\"一键完结\")])],1)],1),t._v(\" \"),o(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[o(\"Table\",{ref:\"selection\",attrs:{loading:t.loading,\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row,\"on-row-dblclick\":t.show_detail,\"on-sort-change\":t.sort}}),t._v(\" \"),o(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change,\"update:current\":function(e){t.page=e}}})],1)],1)},[],!1,null,null,null);_.options.__file=\"notbegin.vue\";var y={name:\"plantaskmanagement\",components:{incomeDetail:i,all:m,finished:u,serving:f,notbegin:_.exports},data:function(){return{managestatus:[],id:\"\",openIncomeDetail:!1,flowChartShow:!1,flowChartImg:\"\"}},methods:{close:function(t){this.openIncomeDetail=!1},open_flow_chart:function(t){this.flowChartShow=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+t+\"&bussinessType=20&time=\"+new Date}},created:function(){var t=this;this.$bus.on(\"PLAN_WORKORDER_INCOME_DETAIL\",function(e){t.id=e,t.openIncomeDetail=!0})}},v=Object(n.a)(y,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",[o(\"Tabs\",{attrs:{value:\"name1\"}},[o(\"TabPane\",{attrs:{label:\"未开始\",name:\"name1\"}},[o(\"notbegin\",{on:{\"open-flow-chart\":t.open_flow_chart}})],1),t._v(\" \"),o(\"TabPane\",{attrs:{label:\"服务中\",name:\"name2\"}},[o(\"serving\",{on:{\"open-flow-chart\":t.open_flow_chart}})],1),t._v(\" \"),o(\"TabPane\",{attrs:{label:\"已完结\",name:\"name3\"}},[o(\"finished\",{on:{\"open-flow-chart\":t.open_flow_chart}})],1),t._v(\" \"),o(\"TabPane\",{attrs:{label:\"全部\",name:\"name4\"}},[o(\"all\",{on:{\"open-flow-chart\":t.open_flow_chart}})],1)],1),t._v(\" \"),t.openIncomeDetail?o(\"income-detail\",{attrs:{id:t.id},on:{close:t.close}}):t._e(),t._v(\" \"),o(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:t.flowChartShow,callback:function(e){t.flowChartShow=e},expression:\"flowChartShow\"}},[o(\"center\",[o(\"img\",{attrs:{src:t.flowChartImg,witdh:\"100%\"}})]),t._v(\" \"),o(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);v.options.__file=\"myCommonTask_table.vue\";e.default=v.exports}}]);"}