{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{121:function(t,e,a){},122:function(t,e,a){},147:function(t,e,a){\"use strict\";a.d(e,\"a\",function(){return o}),a.d(e,\"b\",function(){return n});var r=a(79);function o(t,e,a){return new Promise(function(o,n){o(Object(r.b)(\"product/productSkuFlowDiagramList\",t,e,a))}).catch(function(t){return t})}function n(t,e,a){return new Promise(function(o,n){o(Object(r.c)(\"product/createSkuFlowDiagram\",t,e,a))}).catch(function(t){return t})}},148:function(t,e,a){},149:function(t,e,a){},150:function(t,e,a){},151:function(t,e,a){},152:function(t,e,a){},251:function(t,e,a){\"use strict\";var r=a(121);a.n(r).a},253:function(t,e,a){\"use strict\";var r=a(122);a.n(r).a},310:function(t,e,a){\"use strict\";var r=a(148);a.n(r).a},312:function(t,e,a){\"use strict\";var r=a(149);a.n(r).a},314:function(t,e,a){\"use strict\";var r=a(150);a.n(r).a},316:function(t,e,a){\"use strict\";var r=a(151);a.n(r).a},318:function(t,e,a){\"use strict\";var r=a(152);a.n(r).a},419:function(t,e,a){\"use strict\";a.r(e);a(115),a(84);var r=a(116),o=a.n(r),n=(a(119),a(120)),i=a.n(n),s=a(1);function l(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];return Array.from(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,\"_expanded\",e);var n=1;if(void 0!==r&&null!==r&&(n=r+1),s.default.set(t,\"_level\",n),a&&s.default.set(t,\"parent\",a),o.push(t),t.children&&t.children.length>0){var i=l(t.children,e,t,n);o=o.concat(i)}}),o}var c={components:{elTable:i.a,elTableColumn:o.a},name:\"TreeTable\",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},selection:{type:Boolean,default:!1}},computed:{formatData:function(){var t;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||l,a=this.evalArgs?Array.concat([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,a)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?\"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;\":\"display:none;\"},toggleExpanded:function(t){var e=this.formatData[t];e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.children&&e.children.length>0},handleSelectionChange:function(t,e){if(e.children)for(var a=0;a<e.children.length;a++)this.$refs.multipleTable.toggleRowSelection(e.children[a]),this.handleSelectionChange(\"\",e.children[a])},get_current_click:function(t){this.$emit(\"current-change\",t)},get_all_change:function(t){this.$emit(\"get-all-selection\",t)},edit:function(t){this.$emit(\"edit\",t)},del:function(t){this.$emit(\"delete\",t)},create:function(t){this.$emit(\"create\",t)}}},p=(a(312),a(314),a(2)),d=Object(p.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-table\",t._b({ref:\"multipleTable\",attrs:{data:t.formatData,\"row-style\":t.showRow,size:\"small\"},on:{select:t.handleSelectionChange,\"selection-change\":t.get_all_change,\"current-change\":t.get_current_click}},\"el-table\",t.$attrs,!1),[a(\"el-table-column\",{attrs:{type:\"index\",label:\"序号\",width:\"60\"}}),t._v(\" \"),t.selection?a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\"}}):t._e(),t._v(\" \"),0===t.columns.length?a(\"el-table-column\",{attrs:{width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._l(e.row._level,function(t){return a(\"span\",{key:t,staticClass:\"ms-tree-space\"})}),t._v(\" \"),t.iconShow(0,e.row)?a(\"span\",{staticClass:\"tree-ctrl\",on:{click:function(a){t.toggleExpanded(e.$index)}}},[e.row._expanded?a(\"i\",{staticClass:\"el-icon-minus\"}):a(\"i\",{staticClass:\"el-icon-plus\"})]):t._e(),t._v(\"\\n      \"+t._s(e.$index)+\"\\n    \")]}}])}):t._l(t.columns,function(e,r){return a(\"el-table-column\",{key:e.value,attrs:{label:e.text,width:e.width},scopedSlots:t._u([{key:\"default\",fn:function(o){return[t._l(o.row._level,function(e){return 0===r?a(\"span\",{key:e,staticClass:\"ms-tree-space\"}):t._e()}),t._v(\" \"),t.iconShow(r,o.row)?a(\"span\",{staticClass:\"tree-ctrl\",on:{click:function(e){t.toggleExpanded(o.$index)}}},[o.row._expanded?a(\"i\",{staticClass:\"el-icon-minus\"}):a(\"i\",{staticClass:\"el-icon-plus\"})]):t._e(),t._v(\"\\n      \"+t._s(o.row[e.value])+\"\\n    \")]}}])})}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"Button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){t.create(e.row)}}},[t._v(\"新增下级属性\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){t.edit(e.row)}}},[t._v(\"编辑\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"error\",size:\"small\"},on:{click:function(a){t.del(e.row)}}},[t._v(\"删除\")])]}}])}),t._v(\" \"),t._t(\"default\")],2)},[],!1,null,\"b7b77026\",null);d.options.__file=\"index.vue\";var u=d.exports,m={props:{pid:{type:[Number,String],default:\"\"},pname:{type:[String],default:\"一级类型\"}},data:function(){return{show:!0,formValidate:{typename:\"\",sortid:\"\",pid:\"\"},ruleValidate:{typename:[{required:!0,message:\"必填项\",trigger:\"blur\"}],sortid:[{required:!0,message:\"必填项，任填一个数字\",trigger:\"blur\"}]},loading:!1}},methods:{close:function(){this.$emit(\"close\")},create_product_type:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&t.submit()})},submit:function(){var t=this;this.loading=!0;var e={typename:t.formValidate.typename,sortid:t.formValidate.sortid,pid:t.pid};this.$Post(\"api/product/type/create\",e,function(e){t.loading=!1,t.close()},function(t){})}}},h=Object(p.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"创建产品类型\",width:\"600\"},on:{\"on-cancel\":t.close},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":80}},[a(\"FormItem\",{attrs:{label:\"类型名\",prop:\"typename\"}},[a(\"Input\",{model:{value:t.formValidate.typename,callback:function(e){t.$set(t.formValidate,\"typename\",e)},expression:\"formValidate.typename\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"排序\",prop:\"sortid\"}},[a(\"Input\",{model:{value:t.formValidate.sortid,callback:function(e){t.$set(t.formValidate,\"sortid\",e)},expression:\"formValidate.sortid\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"父节点名称\",prop:\"pname\"}},[a(\"Input\",{attrs:{value:t.pname,readonly:\"\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.create_product_type}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);h.options.__file=\"create.vue\";var f=h.exports,y={props:{data:{type:[String,Object],default:function(){return{id:\"\",pId:\"\",typeName:\"\",sortId:\"\",parent:{typeName:\"\"}}}}},data:function(){return{show:!0,ruleValidate:{typename:[{required:!0,message:\"必填项\",trigger:\"blur\"}],sortid:[{required:!0,message:\"必填项，任填一个数字\",trigger:\"blur\"}]},loading:!1}},methods:{close:function(){this.$emit(\"close\")},create_product_type:function(){var t=this;this.$refs.data.validate(function(e){e&&t.submit()})},submit:function(){var t=this;this.loading=!0;var e={id:t.data.id,typename:t.data.typeName,sortid:t.data.sortId,pid:t.data.pId};this.$Post(\"api/product/type/update\",e,function(e){t.loading=!1,t.close()},function(t){})}}},_=Object(p.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"编辑产品类型\",width:\"600\"},on:{\"on-cancel\":t.close},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"Form\",{ref:\"data\",attrs:{model:t.data,rules:t.ruleValidate,\"label-width\":80}},[a(\"FormItem\",{attrs:{label:\"类型名\",prop:\"typeName\"}},[a(\"Input\",{model:{value:t.data.typeName,callback:function(e){t.$set(t.data,\"typeName\",e)},expression:\"data.typeName\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"排序\",prop:\"sortId\"}},[a(\"Input\",{model:{value:t.data.sortId,callback:function(e){t.$set(t.data,\"sortId\",e)},expression:\"data.sortId\"}})],1),t._v(\" \"),t.data.parent?a(\"FormItem\",{attrs:{label:\"父节点名称\",prop:\"parent\"}},[a(\"Input\",{attrs:{value:t.data.parent.typeName,readonly:\"\"}})],1):t._e()],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.create_product_type}},[t._v(\"修改\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:t.close}},[t._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);_.options.__file=\"update.vue\";var g={name:\"productType_index\",components:{treeTable:u,createType:f,updateType:_.exports},data:function(){return{columns:[{text:\"类型名称\",value:\"typeName\",width:350},{text:\"类型排序\",value:\"typeLevel\",width:120}],data:[],openCreateType:!1,openUpdateType:!1,pname:\"\",pid:\"\",currentData:\"\",loading:!1}},methods:{get_data:function(){var t=this;t.loading=!0;this.$Get(\"api/product/type/tree\",{},function(e){t.data=e.data.data,t.loading=!1})},edit:function(t){this.currentData=t,this.openUpdateType=!0},delete_type:function(t){var e=this,a={id:t.id};this.$Post(\"api/product/type/del\",a,function(t){e.close()},function(t){e.close()})},create_type:function(t){this.pname=t.typeName,this.pid=t.id,this.openCreateType=!0},close:function(){var t=this;this.openCreateType=!1,this.openUpdateType=!1,setTimeout(function(){t.get_data()},300)}},mounted:function(){this.get_data()},computed:{}},v=Object(p.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{gutter:20}},[a(\"Col\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.pid=\"\",t.pname=\"\",t.openCreateType=!0}}},[t._v(\"新增\")])],1)],1),t._v(\" \"),a(\"Row\",{attrs:{gutter:20}},[t.loading?a(\"Spin\",{staticStyle:{\"margin-left\":\"50%\",\"margin-top\":\"5%\"},attrs:{size:\"large\"}}):a(\"tree-table\",{attrs:{data:t.data,columns:t.columns,border:\"\",expandAll:\"\"},on:{edit:t.edit,delete:t.delete_type,create:t.create_type}})],1)],1),t._v(\" \"),t.openCreateType?a(\"create-type\",{attrs:{pname:t.pname,pid:t.pid},on:{close:t.close}}):t._e(),t._v(\" \"),t.openUpdateType?a(\"update-type\",{attrs:{data:t.currentData},on:{close:t.close}}):t._e()],1)},[],!1,null,null,null);v.options.__file=\"index.vue\";e.default=v.exports},426:function(t,e,a){\"use strict\";a.r(e);var r=a(78),o=a.n(r),n=a(79);function i(t,e,a){return new Promise(function(r,o){r(Object(n.c)(\"product/modifyProductSkuFlowDiagram\",t,e,a))}).catch(function(t){return t})}var s=a(147);function l(t,e,a,r,o,n,i){try{var s=t[n](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function c(t){return function(){var e=this,a=arguments;return new Promise(function(r,o){var n=t.apply(e,a);function i(t){l(n,r,o,i,s,\"next\",t)}function s(t){l(n,r,o,i,s,\"throw\",t)}i(void 0)})}}var p={props:{skuId:{type:[String,Number]},product:{type:[Object,String]}},data:function(){return{total:0,header:[{title:\"id\",key:\"id\",width:90},{title:\"shortname\",key:\"shortname\",minWidth:120},{title:\"processKey\",key:\"processKey\",minWidth:150},{title:\"processType\",key:\"processType\",minWidth:120},{title:\"processArea\",key:\"processArea\",minWidth:120},{title:\"memo\",key:\"memo\",minWidth:200}],data:[],page:1,submitLoading:!1,formValidate:{productid:\"\",skuid:\"\",processid:\"\"},openProcessList:!1}},methods:{submit:function(){var t=c(o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.formValidate.productid){t.next=3;break}return this.$Message.warning(\"请补全processId！\"),t.abrupt(\"return\",!1);case 3:return this.submitLoading=!0,this,t.next=7,i(this.formValidate);case 7:e=t.sent,a=e.status,e.data,a&&this.close(),this.submitLoading=!1;case 12:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),close:function(){this.$emit(\"update\")},get_data:function(){var t=c(o.a.mark(function t(){var e,a,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,this.loading=!0,e={params:{page:this.page,pageSize:10}},t.prev=3,t.next=6,s.a(e);case 6:a=t.sent,r=a.rows,n=a.total,this.data=r,this.total=n,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3);case 16:this.loading=!1;case 17:case\"end\":return t.stop()}},t,this,[[3,13]])}));return function(){return t.apply(this,arguments)}}(),page_change:function(t){this.page=t,this.get_data()},select:function(t){this.formValidate.processid=t.id,this.openProcessList=!1}},mounted:function(){if(!this.skuId)return this.$Message.warning(\"无效的skuId\"),this.close(),!1;this.formValidate.skuid=this.skuId,this.formValidate.productid=this.product.id,this.get_data()}},d=a(2),u=Object(d.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"修改产品流程对应关系\",value:!0,width:\"600\"},on:{\"on-cancel\":t.close}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"产品名称\",prop:\"product\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:t.product.product,callback:function(e){t.$set(t.product,\"product\",e)},expression:\"product.product\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"产品Id\",prop:\"productid\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:t.formValidate.productid,callback:function(e){t.$set(t.formValidate,\"productid\",e)},expression:\"formValidate.productid\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"skuid\",prop:\"skuid\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:t.formValidate.skuid,callback:function(e){t.$set(t.formValidate,\"skuid\",e)},expression:\"formValidate.skuid\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"processid\",prop:\"processid\"}},[a(\"Input\",{on:{\"on-focus\":function(e){t.openProcessList=!0}},model:{value:t.formValidate.processid,callback:function(e){t.$set(t.formValidate,\"processid\",e)},expression:\"formValidate.processid\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.submitLoading},on:{click:t.submit}},[t._v(\"修改\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:t.close}},[t._v(\"取消\")])],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{width:\"900\",title:\"选择流程图\"},model:{value:t.openProcessList,callback:function(e){t.openProcessList=e},expression:\"openProcessList\"}},[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.loading},on:{\"on-row-dblclick\":t.select}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);u.options.__file=\"updateLink.vue\";var m=u.exports,h={props:{product:{type:[Object,String]}},components:{updateLink:m},data:function(){return{openUpdateLink:!1,changeArea:!1,sideLoading:!1,productPrice:0,areaCode:[\"440000\",\"440100\",\"440103\"],SKU:\"\",orderAddProduct:!1,selectProduct:\"\",queryProperty:[],producSku:[],selectProperty:[],newPrice:0}},watch:{product:{handler:function(){this.select_product()},deep:!0}},methods:{select_product:function(){if(\"14\"==this.product.id)return this.$Message.error(\"对不起，该产品已经不允许操作！\"),!1;this.SKU=\"\",this.sideLoading=!0,this.selectProduct=this.product,this.productPrice=0,this.queryProperty=[],this.selectProperty=[],this.get_queryProperty(),this.get_product_sku()},get_queryProperty:function(){var t=this,e={params:{productId:this.product.id}};this.$Get(\"api/product/queryPropertyByProductId\",e,function(e){if(t.queryProperty=e.data.data,100==t.product.id){for(var a=[],r=0;r<t.queryProperty.length;r++)95==t.queryProperty[r].propertyId&&(a[0]=t.queryProperty[r]),23==t.queryProperty[r].propertyId&&(a[1]=t.queryProperty[r]),16==t.queryProperty[r].propertyId&&(a[2]=t.queryProperty[r]);t.queryProperty=a,t.changeArea=!0}else t.changeArea=!1})},get_product_sku:function(){var t=this,e={params:{productId:this.product.id}};this.$Get(\"api/product/getSKUListByProductId\",e,function(e){t.producSku=e.data.data;try{var a=t.producSku[0].linkPropertys.split(\",\");1==a.length&&(t.selectProperty.push(parseInt(a[0])),t.property_change()),setTimeout(function(){t.sideLoading=!1},200)}catch(e){setTimeout(function(){t.sideLoading=!1},200)}})},find_sku:function(){var t=this;return new Promise(function(e,a){t.SKU=\"\";var r=t.producSku[0].linkPropertys.split(\",\").length;if(t.selectProperty.length==r)for(var o=[],n=t.selectProperty.join(\",\"),i=0;i<t.producSku.length;i++){o=t.producSku[i].linkPropertys.split(\",\"),t.find_array(o,n)&&(t.SKU=t.producSku[i].id,e())}})},find_array:function(t,e){if(e=e.split(\",\"),t.length!=e.length)return!1;var a=t.length,r=0;t=t.sort(),e=e.sort();for(var o=0;o<a;o++){if(t[o]!=e[o])return!1;r++}return r==a||void 0},get_product_price_by_sku:function(){var t=this,e={params:{skuId:t.SKU,areaId:t.areaCode[2]}};this.$Get(\"api/product/getPriceByAreaAndSKU\",e,function(e){t.productPrice=e.data.data[0].oaprice})},area_change:function(t){this.property_change()},property_change:function(t){var e=this;this.productPrice=0,this.selectProperty.length&&this.find_sku().then(function(){e.get_product_price_by_sku()}).catch(function(t){})},add_product:function(){var t=this,e={params:{productSkuIds:t.SKU,areaId:t.areaCode[2]}};this.$Get(\"/api/order/queryItemDetail\",e,function(e){if(t.detail=e.data.data[0],\"Y\"==e.data.data[0].iscycle){var a={params:{productId:t.selectProduct.id,companyId:t.companyId}};t.$Get(\"api/order/cycle/service/record/budget/period\",a,function(e){t.detail.servicestartdate=e.data.data,t.$bus.emit(\"ADD_PRODUCT\",t.detail),t.productListShow=!1})}else t.$bus.emit(\"ADD_PRODUCT\",t.detail),t.productListShow=!1})},open_flow_img:function(){window.open(\"/api/dataCenter/activiti/getInputStreamBySkuId?skuId=\"+this.SKU)},rowClassName:function(t,e){if(\"14\"==t.id)return\"disabled-row\"},edit_product_price:function(){this.$router.push({name:\"updateProductPrice\",params:{skuId:this.SKU}})}},computed:{isAdmin:function(){return\"10059\"==localStorage.getItem(\"id\")},disabled:function(){return!this.SKU}}},f=(a(310),Object(d.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[t.sideLoading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):t._e(),t._v(\" \"),a(\"Card\",{attrs:{\"dis-hover\":\"\"}},[a(\"div\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"span\",{staticStyle:{\"padding-right\":\"10px\"}},[t._v(\"产品详情\")]),t._v(\" \"),a(\"Tag\",{attrs:{color:\"yellow\",type:\"border\"}},[t._v(\"点击左侧产品即可查看价格！\")])],1),t._v(\" \"),a(\"Row\",{staticClass:\"productDetail-title\",staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"p\",{attrs:{id:\"product_name\"}},[t._v(t._s(t.product.product))]),t._v(\" \"),a(\"p\",{staticClass:\"productDetail-title-price\"},[a(\"span\",[t._v(\"￥\\n          \"),a(\"strong\",{attrs:{id:\"product_price\"}},[t._v(t._s(t.productPrice))])])]),t._v(\" \"),a(\"div\",{staticClass:\"productDetail-title-content\"})]),t._v(\" \"),100==t.selectProduct.id&&t.changeArea?a(\"Row\",{staticClass:\"type-select\"},[a(\"p\",[t._v(t._s(t.queryProperty[0].name))]),t._v(\" \"),a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(e){t.property_change,t.selectProperty[1]=\"\",t.productPrice=0,t.SKU=\"\"}},model:{value:t.selectProperty[0],callback:function(e){t.$set(t.selectProperty,0,e)},expression:\"selectProperty[0]\"}},t._l(t.queryProperty[0].children,function(e,r){return a(\"Radio\",{key:r,attrs:{label:e.pvId}},[t._v(t._s(e.propertyValue))])}),1),t._v(\" \"),310==t.selectProperty[0]?a(\"p\",[t._v(t._s(t.queryProperty[2].name))]):t._e(),t._v(\" \"),310==t.selectProperty[0]?a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":t.property_change},model:{value:t.selectProperty[1],callback:function(e){t.$set(t.selectProperty,1,e)},expression:\"selectProperty[1]\"}},t._l(t.queryProperty[2].children,function(e,r){return a(\"Radio\",{key:r,attrs:{label:e.pvId}},[t._v(t._s(e.propertyValue))])}),1):t._e(),t._v(\" \"),310!=t.selectProperty[0]?a(\"p\",[t._v(t._s(t.queryProperty[1].name))]):t._e(),t._v(\" \"),310!=t.selectProperty[0]?a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":t.property_change},model:{value:t.selectProperty[1],callback:function(e){t.$set(t.selectProperty,1,e)},expression:\"selectProperty[1]\"}},t._l(t.queryProperty[1].children,function(e,r){return a(\"Radio\",{key:r,attrs:{label:e.pvId}},[t._v(t._s(e.propertyValue))])}),1):t._e()],1):t._e(),t._v(\" \"),t._l(t.queryProperty,function(e,r){return 100!=t.selectProduct.id?a(\"Row\",{key:r,staticClass:\"type-select\"},[a(\"p\",[t._v(t._s(e.name))]),t._v(\" \"),a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":t.property_change},model:{value:t.selectProperty[r],callback:function(e){t.$set(t.selectProperty,r,e)},expression:\"selectProperty[index]\"}},t._l(e.children,function(e,r){return a(\"Radio\",{key:r,attrs:{label:e.pvId}},[t._v(t._s(e.propertyValue))])}),1)],1):t._e()}),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"20px\"}},[a(\"p\",{staticStyle:{\"font-size\":\"16px\",\"padding-bottom\":\"16px\"}},[t._v(\"地区\")]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"al-cascader\",{attrs:{\"data-type\":\"code\",level:\"2\"},on:{\"on-change\":t.area_change},model:{value:t.areaCode,callback:function(e){t.areaCode=e},expression:\"areaCode\"}})],1)],1),t._v(\" \"),a(\"Row\",[a(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\"},on:{click:t.open_flow_img}},[t._v(\"查看流程图\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\"},on:{click:function(e){t.openUpdateLink=!0}}},[t._v(\"修改流程图\")])],1)],2),t._v(\" \"),t.openUpdateLink?a(\"update-link\",{attrs:{skuId:t.SKU,product:t.product},on:{update:function(e){t.openUpdateLink=!1}}}):t._e()],1)},[],!1,null,null,null));f.options.__file=\"productAttr.vue\";var y={name:\"productList_index\",components:{productAttr:f.exports},data:function(){var t=this;return{search_model:\"\",loading:!1,header:[{title:\"产品名称\",key:\"product\",minWidth:180},{title:\"状态\",key:\"statusText\",minWidth:90},{title:\"产品编码\",key:\"productCode\",minWidth:150},{title:\"操作\",key:\"action\",width:220,render:function(e,a){var r=t;return e(\"div\",[e(\"Button\",{props:{type:\"primary\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(t){r.$router.push({path:\"/productDetail?id=\"+a.row.id}),t.stopPropagation()}}},\"编辑\"),e(\"Button\",{props:{type:\"info\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(t){r.edit_product_price(a.row.id),t.stopPropagation()}}},\"修改价格\"),e(\"Button\",{props:{type:\"warning\",size:\"small\",icon:\"trash-a\",disabled:!0}},\"删除\")])}}],data:[],page:1,pageSize:10,total:0,selectRow:\"\",formValidate:{product:\"\",productCode:\"\"}}},methods:{get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,product:t.formValidate.product,productCode:t.formValidate.productCode}};this.$Get(\"api/product/list\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total;for(var a=0;a<t.data.length;a++)0==t.data[a].status?t.data[a].statusText=\"下架\":t.data[a].statusText=\"在售\";t.loading=!1})},page_change:function(t){this.page=t,this.get_data()},page_size_change:function(t){this.page=1,this.pageSize=t,this.get_data()},search:function(){this.page=1,this.get_data()},handleReset:function(){this.page=1,this.$refs.formValidate.resetFields(),this.get_data()},select_row:function(t){this.selectRow=t},edit_product_price:function(t){this.$router.push({name:\"updateProductPrice\",params:{id:t}})},create:function(){this.$router.push({path:\"/productDetail?id=\"})}},watch:{},created:function(){var t=this;this.get_data(),this.$bus.off(\"UPDATE_PRODUCT_LIST\"),this.$bus.on(\"UPDATE_PRODUCT_LIST\",function(){t.get_data()})}},_=Object(d.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidate\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:t.formValidate,\"label-width\":120}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"产品名称：\",prop:\"product\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.product,callback:function(e){t.$set(t.formValidate,\"product\",e)},expression:\"formValidate.product\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"产品编码：\",prop:\"productCode\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.productCode,callback:function(e){t.$set(t.formValidate,\"productCode\",e)},expression:\"formValidate.productCode\"}})],1)],1)],1),t._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_search\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\",name:\"marketingManagement_index_edit_reset\"},on:{click:t.handleReset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.create}},[t._v(\"新增产品\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Table\",{attrs:{loading:t.loading,\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.select_row}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change}})],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"product-attr\",{staticStyle:{\"margin-left\":\"5px\"},attrs:{product:t.selectRow}})],1)],1)],1)],1)},[],!1,null,null,null);_.options.__file=\"index.vue\";e.default=_.exports},428:function(t,e,a){\"use strict\";a.r(e);a(91),a(84);var r=a(92),o={components:{elTree:a.n(r).a},props:{productAttr:{type:[Object,String]}},watch:{productAttr:{handler:function(){this.get_data()},deep:!0}},data:function(){var t=this;return{defaultProps:{children:\"children\",label:\"typeName\"},sideLoading:!1,loading:!1,property:[{id:\"\",typeId:\"\",typeName:\"\",name:\"\"}],propertyV:[],header:[{title:\"序号\",type:\"index\",minWidth:80},{title:\"属性值\",key:\"propertyValue\",minWidth:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:t.propertyV[a.index].propertyValue,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(t){r.propertyV[a.index].propertyValue=t.target.value},\"on-enter\":function(t){r.propertyV[a.index].propertyValue=t.target.value}},style:{width:\"100%\"}})])}},{title:\"属性编码\",key:\"propertyVCode\",minWidth:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:t.propertyV[a.index].propertyVCode,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(t){r.propertyV[a.index].propertyVCode=t.target.value},\"on-enter\":function(t){r.propertyV[a.index].propertyVCode=t.target.value}},style:{width:\"100%\"}})])}},{title:\"操作\",key:\"action\",width:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Button\",{props:{type:\"error\",size:\"small\",icon:\"trash-a\"},style:{marginLeft:\"5px\"},on:{click:function(){r.propertyV.splice(a.index,1)}}},\"移除\")])}}],productType:[],openTypeTree:!1,open:!0,checkedId:[]}},methods:{get_data:function(){var t=this;t.sideLoading=!0,t.loading=!0;var e=\"api/product/property/findPropertyById/\"+t.productAttr.id;this.$Get(e,{},function(e){t.property=e.data.data.property,t.propertyV=e.data.data.propertyV,t.sideLoading=!1,t.loading=!1})},deleted:function(t){},edit_property:function(t){},create_property:function(){this.propertyV.push({id:\"\",propertyId:\"\",propertyVCode:\"\",propertyValue:\"\",sortId:\"\",status:\"\"})},update_attr_type:function(){var t=this,e={id:t.property[0].id,name:t.property[0].name,typeId:t.property[0].typeId,propertyValues:JSON.stringify(t.propertyV)};this.$Post(\"api/product/property/updateProperty\",e,function(e){t.$emit(\"update\")},function(e){t.$emit(\"update\")})},get_product_type_tree:function(){var t=this;this.$Get(\"api/product/type/tree\",{},function(e){t.productType=e.data.data})},create_type:function(){var t=this.$refs.tree.getCheckedNodes();this.property[0].typeId=t[0].id,this.property[0].typeName=t[0].typeName,this.checkedId=[],this.openTypeTree=!1},open_type_tree:function(){this.get_product_type_tree(),this.openTypeTree=!0,this.checkedId=[this.property[0].typeId]}}},n=(a(316),a(2)),i=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[t.sideLoading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):t._e(),t._v(\" \"),a(\"Card\",{attrs:{\"dis-hover\":\"\"}},[a(\"div\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"span\",{staticStyle:{\"padding-right\":\"10px\"}},[t._v(\"属性详情\")]),a(\"Tag\",{attrs:{color:\"yellow\",type:\"border\"}},[t._v(\"点击左侧属性即可查看详情！\")])],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"span\",[t._v(\"分类：\")])]),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":t.open_type_tree},model:{value:t.property[0].typeName,callback:function(e){t.$set(t.property[0],\"typeName\",e)},expression:\"property[0].typeName\"}})],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"span\",[t._v(\"属性名称：\")])]),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.property[0].name,callback:function(e){t.$set(t.property[0],\"name\",e)},expression:\"property[0].name\"}})],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{gutter:20}},[a(\"Col\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"edit\"},on:{click:t.update_attr_type}},[t._v(\"保存\")])],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"Table\",{attrs:{id:\"orderItem\",loading:t.loading,\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.propertyV}},[a(\"Button\",{attrs:{slot:\"footer\",type:\"text\",icon:\"plus\",long:\"\"},on:{click:t.create_property},slot:\"footer\"},[t._v(\"新增属性值\")])],1)],1)],1)],1),t._v(\" \"),t.openTypeTree?a(\"div\",[a(\"Modal\",{attrs:{width:\"400\",title:\"产品类型\"},on:{\"on-cancel\":function(e){t.openTypeTree=!1}},model:{value:t.open,callback:function(e){t.open=e},expression:\"open\"}},[a(\"el-tree\",{ref:\"tree\",attrs:{props:t.defaultProps,\"node-key\":\"id\",data:t.productType,\"show-checkbox\":\"\",\"default-checked-keys\":t.checkedId}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.create_type}},[t._v(\"确认\")])],1)],1)],1):t._e()],1)},[],!1,null,null,null);i.options.__file=\"editProductAttr.vue\";var s=i.exports,l={data:function(){var t=this;return{openProductAttr:!0,formInline:{name:\"\"},propertyV:[],header:[{title:\"序号\",type:\"index\",minWidth:80},{title:\"属性值\",key:\"propertyValue\",minWidth:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:t.propertyV[a.index].propertyValue,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(t){r.propertyV[a.index].propertyValue=t.target.value},\"on-enter\":function(t){r.propertyV[a.index].propertyValue=t.target.value}},style:{width:\"100%\"}})])}},{title:\"属性编码\",key:\"propertyVCode\",minWidth:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Input\",{domProps:{},props:{value:t.propertyV[a.index].propertyVCode,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(t){r.propertyV[a.index].propertyVCode=t.target.value},\"on-enter\":function(t){r.propertyV[a.index].propertyVCode=t.target.value}},style:{width:\"100%\"}})])}},{title:\"操作\",key:\"action\",width:120,render:function(e,a){var r=t;return e(\"div\",[e(\"Button\",{props:{type:\"error\",size:\"small\",icon:\"trash-a\"},style:{marginLeft:\"5px\"},on:{click:function(){r.propertyV.splice(a.index,1)}}},\"移除\")])}}],productType:[],openTypeTree:!1,currentType:\"\",currentTypeName:\"\"}},methods:{close:function(){this.$emit(\"close\",!1)},create_attr:function(){var t=this,e={name:t.formInline.name,typeId:t.currentType,propertyValues:JSON.stringify(t.propertyV)};this.$Post(\"api/product/property/createProperty\",e,function(e){t.$emit(\"close\",!0)},function(t){})},create_property:function(){this.propertyV.push({propertyVCode:\"\",propertyValue:\"\"})},open_type_tree:function(){this.openTypeTree=!0},get_product_type_tree:function(){var t=this;this.$Get(\"api/product/type/tree\",{},function(e){t.productType=e.data.data,function t(e){for(var a=0;a<e.length;a++)e[a].title=e[a].text,e[a].children&&t(e[a].children)}(t.productType)})},create_type:function(){var t=this.$refs.tree.getCheckedNodes();this.currentType=t[t.length-1].id,this.currentTypeName=t[t.length-1].title,this.openTypeTree=!1}},created:function(){this.get_product_type_tree()}},c=(a(318),Object(n.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"创建属性\",width:\"500\"},on:{\"on-cancel\":t.close},model:{value:t.openProductAttr,callback:function(e){t.openProductAttr=e},expression:\"openProductAttr\"}},[a(\"Form\",{ref:\"formInline\",attrs:{model:t.formInline,\"label-width\":80}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"name\",label:\"属性名：\"}},[a(\"Input\",{attrs:{type:\"text\"},model:{value:t.formInline.name,callback:function(e){t.$set(t.formInline,\"name\",e)},expression:\"formInline.name\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"FormItem\",{attrs:{prop:\"typeId\",label:\"产品类型:\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},on:{\"on-focus\":t.open_type_tree},model:{value:t.currentTypeName,callback:function(e){t.currentTypeName=e},expression:\"currentTypeName\"}})],1)],1)],1),t._v(\" \"),a(\"Table\",{attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.propertyV}},[a(\"Button\",{attrs:{slot:\"footer\",type:\"text\",icon:\"plus\",long:\"\"},on:{click:t.create_property},slot:\"footer\"},[t._v(\"新增属性值\")])],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.create_attr}},[t._v(\"创建\")])],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{width:\"400\",title:\"产品类型\"},model:{value:t.openTypeTree,callback:function(e){t.openTypeTree=e},expression:\"openTypeTree\"}},[a(\"Tree\",{ref:\"tree\",attrs:{data:t.productType,\"show-checkbox\":\"\"}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.create_type}},[t._v(\"确认\")])],1)],1)],1)},[],!1,null,null,null));c.options.__file=\"createAttr.vue\";var p={name:\"productAttrList_index\",components:{productAttrList:s,createAttr:c.exports},data:function(){var t=this;return{openCreateAttr:!1,search_model:\"\",loading:!1,header:[{title:\"分类\",key:\"typeName\",minWidth:150},{title:\"属性名称\",key:\"name\",minWidth:150},{title:\"操作\",key:\"action\",width:90,render:function(e,a){return e(\"div\",[e(\"Button\",{props:{type:\"warning\",size:\"small\"},style:{marginLeft:\"5px\"}},[e(\"Poptip\",{props:{transfer:!0,confirm:!0,title:\"您确定要删除此属性吗！\"},on:{\"on-ok\":function(){t.deleteProductAttr(a.row.id)}}},\"删除\")])])}}],data:[],page:1,pageSize:10,total:0,selectRow:\"\",formValidate:{typeName:\"\",name:\"\"}}},methods:{get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,typeName:t.formValidate.typeName,name:t.formValidate.name}};this.$Get(\"api/product/property/list\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total,t.loading=!1})},page_change:function(t){this.page=t,this.get_data()},page_size_change:function(t){this.page=1,this.pageSize=t,this.get_data()},search:function(){this.page=1,this.get_data()},handleReset:function(){this.page=1,this.$refs.formValidate.resetFields(),this.get_data()},select_row:function(t){this.selectRow=t},deleteProductAttr:function(t){var e=this,a={id:t};this.$Post(\"api/product/property/delProperty\",a,function(t){e.$Message.success(\"删除成功！\"),e.get_data()},function(t){e.$Message.error(\"删除失败！\")})},close_create_attr:function(t){this.openCreateAttr=!1,t&&this.get_data()}},watch:{},created:function(){this.get_data()}},d=Object(n.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                    筛选\\n                    \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"formValidate\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:t.formValidate,\"label-width\":120}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"分类名称：\",prop:\"typeName\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.typeName,callback:function(e){t.$set(t.formValidate,\"typeName\",e)},expression:\"formValidate.typeName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"属性名称：\",prop:\"name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1)],1)],1),t._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\",name:\"marketingManagement_index_edit_search\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\",name:\"marketingManagement_index_edit_reset\"},on:{click:t.handleReset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{gutter:20}},[a(\"Col\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.openCreateAttr=!0}}},[t._v(\"新增属性\")])],1)],1),t._v(\" \"),a(\"Table\",{attrs:{loading:t.loading,\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.data},on:{\"on-current-change\":t.select_row}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change}})],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"product-attr-list\",{staticStyle:{\"margin-left\":\"5px\"},attrs:{productAttr:t.selectRow},on:{update:t.get_data}})],1)],1)],1),t._v(\" \"),t.openCreateAttr?a(\"create-attr\",{on:{close:t.close_create_attr}}):t._e()],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";e.default=d.exports},431:function(t,e,a){\"use strict\";a.r(e);a(91),a(84);var r=a(92),o={components:{elTree:a.n(r).a},props:{id:{type:[String,Number],default:0}},computed:{checkedId:function(){return[this.id]}},data:function(){return{open:!0,defaultProps:{label:\"typeName\"},productType:[]}},methods:{create_type:function(){var t=this.$refs.tree.getCheckedNodes();t.length?this.$emit(\"close\",{typeName:t[0].typeName,id:t[0].id}):this.$emit(\"close\",{typeName:\"\",id:\"\"})},close:function(){this.$emit(\"close\")},get_data:function(){var t=this;this.$Get(\"api/product/type/tree\",{},function(e){t.productType=e.data.data})}},created:function(){this.get_data()}},n=a(2),i=Object(n.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"400\",title:\"产品类型\"},on:{\"on-cancel\":t.close},model:{value:t.open,callback:function(e){t.open=e},expression:\"open\"}},[a(\"el-tree\",{ref:\"tree\",attrs:{props:t.defaultProps,\"node-key\":\"id\",data:t.productType,\"show-checkbox\":\"\",\"default-checked-keys\":t.checkedId}}),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.create_type}},[t._v(\"确认\")])],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"typeTree.vue\";var s=i.exports,l={data:function(){var t=this;return{page:1,pageSize:10,total:0,header:[{title:\"分类\",key:\"typeName\",minWidth:150},{title:\"属性名称\",key:\"name\",minWidth:150},{title:\"操作\",key:\"\",minWidth:120,render:function(e,a){return e(\"Button\",{props:{size:\"small\",type:\"info\"},on:{click:function(){t.$emit(\"add-attr\",a.row.id)}}},\"添加\")}}],data:[],openTypeList:!0,formValidate:{name:\"\",typeName:\"\"}}},methods:{close:function(){this.$emit(\"close\")},page_change:function(t){this.page=t,this.get_data()},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,name:t.formValidate.name,typeName:t.formValidate.typeName}};this.$Get(\"api/product/property/list\",e,function(e){t.data=e.data.data.rows,t.total=e.data.data.total,t.loading=!1})}},created:function(){this.get_data()}},c=Object(n.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"选择产品属性\",width:\"500\"},on:{\"on-cancel\":t.close},model:{value:t.openTypeList,callback:function(e){t.openTypeList=e},expression:\"openTypeList\"}},[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,inline:\"\"}},[a(\"FormItem\",{attrs:{prop:\"typeName\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"属性分类\"},model:{value:t.formValidate.typeName,callback:function(e){t.$set(t.formValidate,\"typeName\",e)},expression:\"formValidate.typeName\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{prop:\"name\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"属性名称\"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,\"name\",e)},expression:\"formValidate.name\"}})],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.get_data}},[t._v(\"查询\")])],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Table\",{attrs:{loading:t.loading,\"highlight-row\":\"\",border:\"\",size:\"small\",columns:t.header,data:t.data}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{simple:\"\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\",current:t.page},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}})],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);c.options.__file=\"typeAttrList.vue\";var p={name:\"productDetail\",components:{typeTree:s,attrList:c.exports},computed:{readonly:function(){return!!this.$route.query.id}},data:function(){return{openAttrList:!1,openTypeTree:!1,data:{iscycle:\"N\"},propertys:[],departAlias:[],ruleValidate:{product:[{required:!0,message:\"产品名称不能为空！\",trigger:\"blur\"}],productTypeName:[{required:!0,message:\"产品类型不能为空！\",trigger:\"change\"}],iscycle:[{required:!0,message:\"周期性属性不能为空！\",trigger:\"blur\"}],defaultdepartalias:[{required:!0,message:\"默认服务部门不能为空！\",trigger:\"blur\"}],departalias:[{required:!0,message:\"服务部门不能为空！\",trigger:\"change\",type:\"array\",min:1}],productCode:[{required:!0,message:\"产品编码不能为空！\",trigger:\"change\"}]},checkTypeArray:[]}},methods:{get_product_detail:function(t){if(t.query.id){var e=this,a={params:{id:e.$route.query.id}};this.$Get(\"api/product/productDetail\",a,function(t){e.data=t.data.data,e.propertys=t.data.data.propertys,e.checkTypeArray=[];for(var a=function(t){for(var a=[],r=0;r<e.propertys[t].children.length;r++)e.propertys[t].children[r].selected&&a.push(e.propertys[t].children[r].pvId);e.$nextTick(function(){e.checkTypeArray.push(a)})},r=0;r<e.propertys.length;r++)a(r);e.data.departalias=e.data.departalias.split(\",\")})}},get_data_center:function(){var t=this;this.$GetDataCenter(\"departAlias\",function(e){t.departAlias=e.data.data.departAlias})},open_type_tree:function(){this.openTypeTree=!0},close_type_tree:function(t){t&&(this.data.productTypeName=t.typeName,this.data.productTypeID=t.id),this.openTypeTree=!1},open_product_attr:function(){this.openAttrList=!0},add_attr:function(t){for(var e=0;e<this.propertys.length;e++)if(this.propertys[e].propertyId==t)return this.$Message.warning(\"此属性已添加！请勿重复添加！\"),!1;var a=this;a.sideLoading=!0,a.loading=!0;var r=\"api/product/property/findPropertyById/\"+t;this.$Get(r,{},function(t){var e=t.data.data,r={};r.name=e.property[0].name,r.propertyId=e.property[0].id,r.children=[];for(var o=[],n=0;n<e.propertyV.length;n++){var i={};i.pvId=e.propertyV[n].id,i.propertyValue=e.propertyV[n].propertyValue,i.selected=1,r.children.push(i),o.push(e.propertyV[n].id)}a.propertys.push(r),a.checkTypeArray.push(o)})},delete_product_type:function(t){var e=this;this.propertys.splice(t,1),this.$nextTick(function(){e.checkTypeArray.splice(t,1)})},before_update_product:function(){var t=this,e=this;this.$refs.data.validate(function(a){a?e.$route.query.id?e.update_product():e.create_product():t.$Message.error(\"请补全信息！\")})},cancel:function(){this.$refs.data.resetFields(),this.data.productTypeID=\"\",this.propertys=[],this.checkTypeArray=[]},create_product:function(){var t=this,e=this.tranform(),a={productcode:t.data.productCode,product:t.data.product,iscycle:t.data.iscycle,defaultdepartalias:t.data.defaultdepartalias,departalias:t.data.departalias.join(\",\"),producttypeid:t.data.productTypeID,propertys:JSON.stringify(e),sortid:t.data.ordernumber,status:t.data.status,ordernumber:t.data.ordernumber};this.$Post(\"api/product/create\",a,function(e){t.$store.commit(\"closePage\",\"productDetail\"),t.$store.commit(\"removeTag\",\"productDetail\"),t.$bus.emit(\"UPDATE_PRODUCT_LIST\"),t.$router.push({name:\"productList_index\"})},function(t){})},update_product:function(){var t=this,e=this.tranform(),a={id:t.$route.query.id,product:t.data.product,iscycle:t.data.iscycle,defaultdepartalias:t.data.defaultdepartalias,departalias:t.data.departalias.join(\",\"),productTypeId:t.data.productTypeID,propertyIds:JSON.stringify(e)};this.$Post(\"api/product/update\",a,function(e){t.$store.commit(\"closePage\",\"productDetail\"),t.$store.commit(\"removeTag\",\"productDetail\"),t.$bus.emit(\"UPDATE_PRODUCT_LIST\"),t.$router.push({name:\"productList_index\"})},function(t){})},tranform:function(){for(var t=[],e=0;e<this.propertys.length;e++){var a={};a.id=this.propertys[e].propertyId,a.cId=this.checkTypeArray[e],t.push(a)}return t}},watch:{$route:function(t,e){t&&this.get_product_detail(t)}},created:function(){this.get_data_center(),this.get_product_detail(this.$route)}},d=Object(n.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",{staticStyle:{\"min-width\":\"1000px\"},attrs:{title:\"产品详情\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Form\",{ref:\"data\",attrs:{model:t.data,rules:t.ruleValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"产品名称：\",prop:\"product\"}},[a(\"Input\",{model:{value:t.data.product,callback:function(e){t.$set(t.data,\"product\",e)},expression:\"data.product\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"产品类型：\",prop:\"productTypeName\"}},[a(\"Input\",{on:{\"on-focus\":t.open_type_tree},model:{value:t.data.productTypeName,callback:function(e){t.$set(t.data,\"productTypeName\",e)},expression:\"data.productTypeName\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"周期性产品：\",prop:\"iscycle\"}},[a(\"Select\",{model:{value:t.data.iscycle,callback:function(e){t.$set(t.data,\"iscycle\",e)},expression:\"data.iscycle\"}},[a(\"Option\",{attrs:{value:\"Y\"}},[t._v(\"是\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[t._v(\"否\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"默认服务部门：\",prop:\"defaultdepartalias\"}},[a(\"Select\",{model:{value:t.data.defaultdepartalias,callback:function(e){t.$set(t.data,\"defaultdepartalias\",e)},expression:\"data.defaultdepartalias\"}},[t._l(t.departAlias,function(e,r){return a(\"Option\",{key:r,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),t._v(\" \"),a(\"Option\",{attrs:{value:\"N\"}},[t._v(\"否\")])],2)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"服务部门：\",prop:\"departalias\"}},[a(\"CheckboxGroup\",{attrs:{size:\"large\"},model:{value:t.data.departalias,callback:function(e){t.$set(t.data,\"departalias\",e)},expression:\"data.departalias\"}},[a(\"Row\",t._l(t.departAlias,function(e,r){return a(\"Col\",{key:r,attrs:{span:8}},[a(\"Checkbox\",{attrs:{label:e.typecode,size:\"large\"}},[t._v(t._s(e.typename))])],1)}),1)],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"产品编码：\",prop:\"productCode\"}},[a(\"Input\",{attrs:{readonly:t.readonly},model:{value:t.data.productCode,callback:function(e){t.$set(t.data,\"productCode\",e)},expression:\"data.productCode\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"产品状态：\",prop:\"status\"}},[a(\"Select\",{staticStyle:{width:\"100%\"},attrs:{disabled:t.readonly},model:{value:t.data.status,callback:function(e){t.$set(t.data,\"status\",e)},expression:\"data.status\"}},[a(\"Option\",{attrs:{value:0}},[t._v(\"未上架\")]),t._v(\" \"),a(\"Option\",{attrs:{value:1}},[t._v(\"销售中\")])],1)],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"产品排序：\",prop:\"ordernumber\"}},[a(\"Input\",{attrs:{readonly:t.readonly},model:{value:t.data.ordernumber,callback:function(e){t.$set(t.data,\"ordernumber\",e)},expression:\"data.ordernumber\"}})],1),t._v(\" \"),t.$route.query.id?a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.before_update_product}},[t._v(\"修改\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:t.cancel}},[t._v(\"重置\")])],1):a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.before_update_product}},[t._v(\"创建\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:t.cancel}},[t._v(\"重置\")])],1)],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Row\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.open_product_attr}},[t._v(\"添加产品属性\")])],1),t._v(\" \"),t._l(t.propertys,function(e,r){return a(\"Row\",{key:r,staticStyle:{\"margin-top\":\"10px\"}},[a(\"Row\",[a(\"h3\",{staticStyle:{display:\"inline-block\",float:\"left\"}},[t._v(\"属性值 - \"+t._s(r+1)+\"：\"+t._s(e.name))]),a(\"Button\",{staticStyle:{display:\"inline-block\",float:\"right\"},attrs:{type:\"warning\",size:\"small\"},on:{click:function(e){t.delete_product_type(r)}}},[t._v(\"删除\")])],1),t._v(\" \"),a(\"CheckboxGroup\",{attrs:{size:\"large\"},model:{value:t.checkTypeArray[r],callback:function(e){t.$set(t.checkTypeArray,r,e)},expression:\"checkTypeArray[index]\"}},[a(\"Row\",{staticStyle:{\"margin-top\":\"5px\"}},t._l(e.children,function(e,r){return a(\"Col\",{key:r,attrs:{span:\"8\"}},[a(\"Checkbox\",{attrs:{label:e.pvId,size:\"large\"}},[t._v(t._s(e.propertyValue))])],1)}),1)],1)],1)})],2)],1)],1),t._v(\" \"),t.openTypeTree?a(\"type-tree\",{attrs:{id:t.data.productTypeID},on:{close:t.close_type_tree}}):t._e(),t._v(\" \"),t.openAttrList?a(\"attr-list\",{on:{close:function(e){t.openAttrList=!1},\"add-attr\":t.add_attr}}):t._e()],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";e.default=d.exports},434:function(t,e,a){\"use strict\";a.r(e);a(115),a(84);var r=a(116),o=a.n(r),n=(a(119),a(120)),i=a.n(n),s=a(1);function l(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];return Array.from(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,\"_expanded\",e);var n=1;if(void 0!==r&&null!==r&&(n=r+1),s.default.set(t,\"_level\",n),a&&s.default.set(t,\"parent\",a),o.push(t),t.children&&t.children.length>0){var i=l(t.children,e,t,n);o=o.concat(i)}}),o}var c={components:{elTable:i.a,elTableColumn:o.a},name:\"TreeTable\",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1},selection:{type:Boolean,default:!1}},computed:{formatData:function(){var t;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||l,a=this.evalArgs?Array.concat([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,a)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?\"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;\":\"display:none;\"},toggleExpanded:function(t){var e=this.formatData[t];e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.children&&e.children.length>0},handleSelectionChange:function(t,e){if(e.children)for(var a=0;a<e.children.length;a++)this.$refs.multipleTable.toggleRowSelection(e.children[a]),this.handleSelectionChange(\"\",e.children[a])},get_current_click:function(t){this.$emit(\"current-change\",t)},get_all_change:function(t){this.$emit(\"get-all-selection\",t)},edit:function(t){this.$emit(\"edit\",t)},del:function(t){this.$emit(\"delete\",t)},create:function(t){this.$emit(\"create\",t)}}},p=(a(251),a(253),a(2)),d=Object(p.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-table\",t._b({ref:\"multipleTable\",attrs:{data:t.formatData,\"row-style\":t.showRow,size:\"small\"},on:{select:t.handleSelectionChange,\"selection-change\":t.get_all_change,\"current-change\":t.get_current_click}},\"el-table\",t.$attrs,!1),[t.selection?a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\"}}):t._e(),t._v(\" \"),0===t.columns.length?a(\"el-table-column\",{attrs:{width:\"150\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[t._l(e.row._level,function(t){return a(\"span\",{key:t,staticClass:\"ms-tree-space\"})}),t._v(\" \"),t.iconShow(0,e.row)?a(\"span\",{staticClass:\"tree-ctrl\",on:{click:function(a){t.toggleExpanded(e.$index)}}},[e.row._expanded?a(\"i\",{staticClass:\"el-icon-minus\"}):a(\"i\",{staticClass:\"el-icon-plus\"})]):t._e(),t._v(\"\\n      \"+t._s(e.$index)+\"\\n    \")]}}])}):t._l(t.columns,function(e,r){return a(\"el-table-column\",{key:e.value,attrs:{label:e.text,minWidth:e.width},scopedSlots:t._u([{key:\"default\",fn:function(o){return[t._l(o.row._level,function(e){return 0===r?a(\"span\",{key:e,staticClass:\"ms-tree-space\"}):t._e()}),t._v(\" \"),t.iconShow(r,o.row)?a(\"span\",{staticClass:\"tree-ctrl\",on:{click:function(e){t.toggleExpanded(o.$index)}}},[o.row._expanded?a(\"i\",{staticClass:\"el-icon-minus\"}):a(\"i\",{staticClass:\"el-icon-plus\"})]):t._e(),t._v(\"\\n      \"+t._s(o.row[e.value])+\"\\n    \")]}}])})}),t._v(\" \"),t._t(\"default\")],2)},[],!1,null,\"895c21b6\",null);d.options.__file=\"index.vue\";var u={name:\"updateProductPrice\",components:{treeTable:d.exports},data:function(){return{showUpdatePrice:!1,loading:!1,queryProperty:[],typeArray:[],title:\"\",columns:[{text:\"地区全称\",value:\"areafullname\",width:200},{text:\"地区名称\",value:\"realname\",width:150},{text:\"地区编码\",value:\"dispid\",width:120},{text:\"基础价格\",value:\"baseprice\",width:120},{text:\"系统价格\",value:\"oaprice\",width:120},{text:\"状态\",value:\"statusName\",width:120}],data:[],selectRow:[],dbaseprice:\"\",doaprice:\"\",status:\"1\",alisname:\"\"}},methods:{get_product_attr:function(t){var e=this,a={params:{productId:t}};this.$Get(\"api/product/queryPropertyByProductId\",a,function(t){e.queryProperty=t.data.data,e.title=t.data.data[0].product})},get_price:function(){var t=this;this.loading=!0;var e={params:{propertys:t.typeArray.join(\",\"),productId:t.$route.params.id}};this.$Get(\"api/product/area/findTreeSkuArea\",e,function(e){t.data=e.data.data.data,t.alisname=e.data.data.alisname,function t(e){for(var a=0;a<e.length;a++)1==e[a].status?e[a].statusName=\"销售中\":e[a].statusName=\"未上架\",e[a].children&&t(e[a].children)}(t.data),t.loading=!1})},get_all_selection:function(t){this.selectRow=t},update_product_price:function(){for(var t=this,e=[],a=0;a<t.selectRow.length;a++){var r={};r.areaid=t.selectRow[a].dispid,r.skuareaid=t.selectRow[a].skuAreaId,r.status=t.status,r.baseprice=t.dbaseprice,r.oaprice=t.doaprice,e.push(r)}var o={productId:t.$route.params.id,propertys:t.typeArray.join(\",\"),doaprice:t.doaprice,dbaseprice:t.dbaseprice,areaPrices:JSON.stringify(e),alisname:t.alisname};this.$Post(\"api/product/area/saveProductSku\",o,function(e){t.get_price()},function(t){})}},watch:{$route:function(t,e){t.params.id&&this.get_product_attr(t.params.id)}},created:function(){this.get_product_attr(this.$route.params.id)}},m=Object(p.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",{staticStyle:{\"min-width\":\"1400px\"}},[a(\"span\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"h3\",[t._v(t._s(t.title))])]),t._v(\" \"),t._l(t.queryProperty,function(e,r){return a(\"div\",{key:r,staticStyle:{\"margin-top\":\"10px\"}},[a(\"Row\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-start\"}},[a(\"div\",{staticStyle:{\"padding-right\":\"20px\",\"padding-left\":\"10px\",width:\"120px\",display:\"inline-block\",\"text-align\":\"right\",\"line-height\":\"32px\"}},[t._v(t._s(e.name)+\" :\")]),t._v(\" \"),a(\"RadioGroup\",{attrs:{type:\"button\"},model:{value:t.typeArray[r],callback:function(e){t.$set(t.typeArray,r,e)},expression:\"typeArray[index]\"}},t._l(e.children,function(e,r){return a(\"Radio\",{key:r,attrs:{label:e.pvId}},[t._v(t._s(e.propertyValue))])}),1)],1)],1)}),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\",\"margin-left\":\"10px\"}},[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.get_price}},[t._v(\"查询\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.showUpdatePrice=!0,t.dbaseprice=\"\",t.doaprice=\"\"}}},[t._v(\"修改价格\")])],1)],1),t._v(\" \"),t.showUpdatePrice?a(\"Row\",{staticStyle:{\"margin-top\":\"10px\",\"margin-left\":\"10px\"}},[a(\"div\",{staticStyle:{display:\"flex\",\"justify-content\":\"flex-start\",\"align-items\":\"center\"}},[a(\"span\",[t._v(\"基础价格：\")]),a(\"Input\",{staticStyle:{width:\"150px\",\"margin-right\":\"40px\"},model:{value:t.dbaseprice,callback:function(e){t.dbaseprice=e},expression:\"dbaseprice\"}}),t._v(\" \"),a(\"span\",[t._v(\"系统价格：\")]),a(\"Input\",{staticStyle:{width:\"150px\",\"margin-right\":\"40px\"},model:{value:t.doaprice,callback:function(e){t.doaprice=e},expression:\"doaprice\"}}),t._v(\" \"),a(\"span\",[t._v(\"状态：\")]),t._v(\" \"),a(\"Select\",{staticStyle:{width:\"150px\",\"margin-right\":\"40px\"},model:{value:t.status,callback:function(e){t.status=e},expression:\"status\"}},[a(\"Option\",{attrs:{value:\"0\"}},[t._v(\"未上架\")]),t._v(\" \"),a(\"Option\",{attrs:{value:\"1\"}},[t._v(\"销售中\")])],1),t._v(\" \"),a(\"span\",[t._v(\"SKU别名：\")]),a(\"Input\",{staticStyle:{width:\"150px\",\"margin-right\":\"40px\"},model:{value:t.alisname,callback:function(e){t.alisname=e},expression:\"alisname\"}}),t._v(\" \"),a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"warning\"},on:{click:t.update_product_price}},[t._v(\"确认修改\")]),t._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(e){t.showUpdatePrice=!1}}},[t._v(\"关闭\")])],1)],1)]):t._e(),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[t.loading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):a(\"Col\",{attrs:{span:\"24\"}},[a(\"tree-table\",{attrs:{selection:\"\",data:t.data,columns:t.columns,border:\"\"},on:{\"get-all-selection\":t.get_all_selection}})],1)],1)],2)],1)},[],!1,null,null,null);m.options.__file=\"index.vue\";e.default=m.exports},441:function(t,e,a){\"use strict\";a.r(e);var r=a(78),o=a.n(r),n=a(147);function i(t,e,a,r,o,n,i){try{var s=t[n](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}var s={data:function(){return{loading:!1,formValidate:{pId:\"\",shortname:\"\",processKey:\"\",processType:\"1\",processArea:\"ALL\",memo:\"\",seq:\"\",rootOrgCode:\"\"},ruleValidate:{shortname:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}],processKey:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}],processType:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}],processArea:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}],memo:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}],seq:[{required:!0,message:\"请补全信息！\",trigger:\"blur\"}]}}},methods:{handleSubmit:function(t){var e=this;this.loading=!0,this.$refs[t].validate(function(t){t?e.submit():(e.$Message.error(\"请补全信息!\"),e.loading=!1)})},handleReset:function(t){this.$refs[t].resetFields(),this.$emit(\"close\")},submit:function(){var t,e=(t=o.a.mark(function t(){var e,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,t.prev=1,t.next=4,n.b(this.formValidate);case 4:e=t.sent,a=e.status,e.data,a&&this.handleReset(\"formValidate\"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1);case 13:this.loading=!1;case 14:case\"end\":return t.stop()}},t,this,[[1,10]])}),function(){var e=this,a=arguments;return new Promise(function(r,o){var n=t.apply(e,a);function s(t){i(n,r,o,s,l,\"next\",t)}function l(t){i(n,r,o,s,l,\"throw\",t)}s(void 0)})});return function(){return e.apply(this,arguments)}}()},created:function(){}},l=a(2),c=Object(l.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{title:\"新增流程图\",value:!0,width:\"600\"},on:{\"on-cancel\":function(e){t.handleReset(\"formValidate\")}}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:t.formValidate,rules:t.ruleValidate,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"pId\",prop:\"pId\"}},[a(\"Input\",{model:{value:t.formValidate.pId,callback:function(e){t.$set(t.formValidate,\"pId\",e)},expression:\"formValidate.pId\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"shortname\",prop:\"shortname\"}},[a(\"Input\",{model:{value:t.formValidate.shortname,callback:function(e){t.$set(t.formValidate,\"shortname\",e)},expression:\"formValidate.shortname\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"processKey\",prop:\"processKey\"}},[a(\"Input\",{model:{value:t.formValidate.processKey,callback:function(e){t.$set(t.formValidate,\"processKey\",e)},expression:\"formValidate.processKey\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"processType\",prop:\"processType\"}},[a(\"Input\",{model:{value:t.formValidate.processType,callback:function(e){t.$set(t.formValidate,\"processType\",e)},expression:\"formValidate.processType\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"processArea\",prop:\"processArea\"}},[a(\"Input\",{model:{value:t.formValidate.processArea,callback:function(e){t.$set(t.formValidate,\"processArea\",e)},expression:\"formValidate.processArea\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"memo\",prop:\"memo\"}},[a(\"Input\",{model:{value:t.formValidate.memo,callback:function(e){t.$set(t.formValidate,\"memo\",e)},expression:\"formValidate.memo\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"seq\",prop:\"seq\"}},[a(\"Input\",{model:{value:t.formValidate.seq,callback:function(e){t.$set(t.formValidate,\"seq\",e)},expression:\"formValidate.seq\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"rootOrgCode\",prop:\"rootOrgCode\"}},[a(\"Input\",{model:{value:t.formValidate.rootOrgCode,callback:function(e){t.$set(t.formValidate,\"rootOrgCode\",e)},expression:\"formValidate.rootOrgCode\"}})],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:function(e){t.handleSubmit(\"formValidate\")}}},[t._v(\"新增\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},on:{click:function(e){t.handleReset(\"formValidate\")}}},[t._v(\"取消\")])],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"createFlowChart.vue\";var p=c.exports;function d(t,e,a,r,o,n,i){try{var s=t[n](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function u(t){return function(){var e=this,a=arguments;return new Promise(function(r,o){var n=t.apply(e,a);function i(t){d(n,r,o,i,s,\"next\",t)}function s(t){d(n,r,o,i,s,\"throw\",t)}i(void 0)})}}var m={name:\"flowChart_index\",components:{searchModel:a(80).a,createFlowChart:p},data:function(){return{openFlowChart:!1,loading:!1,page:1,pageSize:10,total:0,header:[{title:\"shortname\",key:\"shortname\",minWidth:120},{title:\"processKey\",key:\"processKey\",minWidth:150},{title:\"processType\",key:\"processType\",minWidth:120},{title:\"processArea\",key:\"processArea\",minWidth:120},{title:\"memo\",key:\"memo\",minWidth:200}],data:[],searchData:[{label:\"说明\",key:\"memo\",type:\"input\"},{label:\"流程编码\",key:\"processKey\",type:\"input\"}],formInline:{}}},methods:{get_data:function(){var t=u(o.a.mark(function t(){var e,a,r,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,this.loading=!0,e={params:{page:this.page,pageSize:this.pageSize}},Object.assign(e.params,this.formInline),t.prev=4,t.next=7,n.a(e);case 7:a=t.sent,r=a.rows,i=a.total,this.data=r,this.total=i,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4);case 17:this.loading=!1;case 18:case\"end\":return t.stop()}},t,this,[[4,14]])}));return function(){return t.apply(this,arguments)}}(),search:function(t){Object.assign(this.formInline,t),this.page=1,this.get_data()},page_change:function(t){this.page=t,this.get_data()},close:function(){this.get_data(),this.openFlowChart=!1}},created:function(){var t=u(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.get_data();case 1:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},h=Object(l.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"search-model\",{attrs:{data:t.searchData},on:{search:t.search}}),t._v(\" \"),a(\"ButtonGroup\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.openFlowChart=!0}}},[t._v(\"新增流程图定义\")])],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change}})],1)],1),t._v(\" \"),t.openFlowChart?a(\"create-flow-chart\",{on:{close:t.close}}):t._e()],1)},[],!1,null,null,null);h.options.__file=\"index.vue\";e.default=h.exports},443:function(t,e,a){\"use strict\";a.r(e);var r=a(78),o=a.n(r),n=a(79);function i(t,e,a){return new Promise(function(r,o){r(Object(n.b)(\"activiti/taskProcdefList\",t,e,a))}).catch(function(t){return t})}function s(t,e,a,r,o,n,i){try{var s=t[n](i),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function l(t){return function(){var e=this,a=arguments;return new Promise(function(r,o){var n=t.apply(e,a);function i(t){s(n,r,o,i,l,\"next\",t)}function l(t){s(n,r,o,i,l,\"throw\",t)}i(void 0)})}}var c={name:\"productProcess_index\",components:{searchModel:a(80).a},data:function(){return{searchData:[{label:\"key：\",key:\"key\",type:\"input\"}],openUpload:!1,page:1,pageSize:10,total:0,loading:!1,data:[],header:[{title:\"序号\",type:\"index\",width:90},{title:\"REV\",key:\"REV_\",width:90},{title:\"CATEGORY\",key:\"CATEGORY_\",minWidth:180},{title:\"name\",key:\"NAME_\",minWidth:120},{title:\"key\",key:\"KEY_\",minWidth:180},{title:\"version\",key:\"VERSION_\",width:120},{title:\"deploymentId\",key:\"DEPLOYMENT_ID_\",minWidth:150},{title:\"resourceName\",key:\"RESOURCE_NAME_\",minWidth:180},{title:\"dgrmResourceName\",key:\"DGRM_RESOURCE_NAME_\",minWidth:180}],formInline:{}}},methods:{search:function(t){Object.assign(this.formInline,t),this.page=1,this.get_data()},handleUpload:function(){var t=l(o.a.mark(function t(e,a,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:4e4==e.msgCode?(this.$Message.success(e.msg),this.openUpload=!1):this.$Message.error(e.msg);case 1:case\"end\":return t.stop()}},t,this)}));return function(e,a,r){return t.apply(this,arguments)}}(),get_data:function(){var t=l(o.a.mark(function t(){var e,a,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this,this.loading=!0,e={params:{page:this.page,pageSize:this.pageSize}},Object.assign(e.params,this.formInline),t.next=6,i(e);case 6:a=t.sent,r=a.rows,n=a.total,this.total=n,this.data=r,this.loading=!1;case 12:case\"end\":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),page_change:function(t){this.page=t,this.get_data()},page_size_change:function(t){this.pageSize=t,this.get_data()}},created:function(){this.get_data()}},p=a(2),d=Object(p.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"search-model\",{attrs:{data:t.searchData},on:{search:t.search}}),t._v(\" \"),a(\"ButtonGroup\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){t.openUpload=!0}}},[t._v(\"上传流程图\")])],1),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:t.header,data:t.data,loading:t.loading}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:t.total,current:t.page,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(e){t.page=e},\"on-change\":t.page_change,\"on-page-size-change\":t.page_size_change}})],1)],1),t._v(\" \"),a(\"Modal\",{attrs:{width:\"300\",title:\"上传流程压缩文件\"},model:{value:t.openUpload,callback:function(e){t.openUpload=e},expression:\"openUpload\"}},[a(\"Upload\",{ref:\"upload\",attrs:{name:\"files\",action:\"api/activiti/uploadBpmnInputStream\",\"show-upload-list\":!1,\"on-success\":t.handleUpload}},[a(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[t._v(\"选择文件\")])],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";e.default=d.exports},79:function(t,e,a){\"use strict\";a.d(e,\"b\",function(){return l}),a.d(e,\"a\",function(){return p}),a.d(e,\"c\",function(){return c});var r=a(6),o=a.n(r),n=a(7),i=a.n(n);function s(t){200==t.status?i.a.Message.error(t.data.msg):i.a.Message.error(\"服务器异常！\"+t.message)}function l(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,n=\"api/\"+t;return new Promise(function(t,a){o.a.get(n,e).then(function(e){200==e.status&&4e4==e.data.msgCode?t(e.data.data):r(e)}).catch(function(t){a(r(t))})})}function c(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,n=\"api/\"+t;return new Promise(function(t,a){o.a.post(n,e).then(function(e){200==e.status&&4e4==e.data.msgCode?(i.a.Message.success(e.data.msg||\"执行成功！\"),t({status:!0,data:e.data})):(i.a.Message.error(e.data.msg),t({status:!1,data:e.data}))}).catch(function(t){a(r(t))})})}function p(t){var e={params:{groupCodes:t}};return new Promise(function(t,a){o.a.get(\"api/system/tsType/queryTsTypeByGroupCodes\",e).then(function(e){200==e.status&&4e4==e.data.msgCode?t(e.data.data):fail(e)}).catch(function(t){a(s(t))})})}},80:function(t,e,a){\"use strict\";var r={name:\"searchModel\",props:{data:{type:[Array],default:function(){return[]}}},data:function(){return{form:{},search_model:!1}},methods:{search:function(){for(var t in this.form)Array.isArray(this.form[t])&&(this.form[\"b\"+t]=this.form[t][0],this.form[\"e\"+t]=this.form[t][1]);this.$emit(\"search\",this.form)},handle_reset:function(){for(var t in this.$refs.form.resetFields(),this.form)Array.isArray(this.form[t])&&(this.form[\"b\"+t]=this.form[t][0],this.form[\"e\"+t]=this.form[t][1]);this.$emit(\"search\",this.form)},date_change:function(t,e){this.form[e]=t}},created:function(){for(var t={},e=0;e<this.data.length;e++){var a={};\"datePicker\"==this.data[e].key?a[this.data[e].key]=[]:a[this.data[e].key]=\"\",Object.assign(t,a)}this.form=t}},o=a(2),n=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n            筛选\\n            \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"form\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:t.form,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16,type:\"flex\"}},[t._l(t.data,function(e,r){return a(\"Col\",{key:r,attrs:{span:\"8\"}},[\"input\"==e.type?a(\"FormItem\",{attrs:{label:e.label,prop:e.key}},[a(\"Input\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\"},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:\"form[item.key]\"}})],1):\"select\"==e.type?a(\"FormItem\",{attrs:{label:e.label,prop:e.key}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":t.search},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:\"form[item.key]\"}},t._l(e.data,function(e,r){return a(\"Option\",{key:r,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1):\"datePicker\"==e.type?a(\"FormItem\",{attrs:{label:e.label,prop:e.key}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{type:\"daterange\",transfer:\"\",placement:\"bottom-end\",size:\"small\"},on:{\"on-change\":function(a){t.date_change(a,e.key)}},model:{value:t.form[e.key],callback:function(a){t.$set(t.form,e.key,a)},expression:\"form[item.key]\"}})],1):a(\"FormItem\")],1)}),t._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"center\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:t.handle_reset}},[t._v(\"重置\")])],1)],1)],2)],1)],1)],1)],1)],1)},[],!1,null,null,null);n.options.__file=\"index.vue\";e.a=n.exports},95:function(t,e,a){t.exports=a(10)(22)}}]);"}