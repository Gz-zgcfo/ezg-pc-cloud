{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{167:function(e,t,a){},348:function(e,t,a){\"use strict\";var n=a(167);a.n(n).a},385:function(e,t,a){\"use strict\";a.r(t);var n={data:function(){return{openDetail:!1,fileHeader:[{title:\"序号\",type:\"index\",minWidth:90},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120},{title:\"存放部门\",key:\"departname\",minWidth:120},{title:\"存放地点\",key:\"storage\",minWidth:120},{title:\"存放位置\",key:\"storage_code\",minWidth:120}],fileData:[],detailApplicantRealname:\"\",detailReceiverRealname:\"\",customer_f_s_a:\"\",customer_f_s_a_map:new Map}},methods:{get_data:function(e){var t=this,a={params:{id:e}};this.$Get(\"api/customer/file/connect/request/detail\",a,function(e){t.detailApplicantRealname=e.data.data.applicant_name,t.detailReceiverRealname=e.data.data.receiver_name,t.fileData=e.data.data.files;for(var a=0;a<t.fileData.length;a++)t.fileData[a].storage=t.customer_f_s_a_map.get(t.fileData[a].storage);t.openDetail=!0})},get_center:function(){var e=this;e.$GetDataCenter(\"customer_f_s_a\",function(t){e.customer_f_s_a=t.data.data.customer_f_s_a,e.customer_f_s_a_map=e.$array2map(e.customer_f_s_a)})}},created:function(){var e=this;this.get_center(),this.$bus.on(\"OPEN_HANDOVER_DETAIL\",function(t){e.get_data(t)})}},i=a(2),o=Object(i.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"交接详情\",width:\"80%\"},model:{value:e.openDetail,callback:function(t){e.openDetail=t},expression:\"openDetail\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"span\",[a(\"h3\",[e._v(\"申请人：\"+e._s(e.detailApplicantRealname))])])]),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"span\",[a(\"h3\",[e._v(\"接收人：\"+e._s(e.detailReceiverRealname))])])])],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.fileHeader,data:e.fileData}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);o.options.__file=\"hand_overdetail.vue\";var l=o.exports,r={name:\"TablesEdit\",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},computed:{isEditting:function(){return this.edittingCellId===\"editting-\".concat(this.params.index,\"-\").concat(this.params.column.key)}},methods:{handleInput:function(e){this.$emit(\"input\",e)},startEdit:function(){this.$emit(\"on-start-edit\",this.params)},saveEdit:function(){this.$emit(\"on-save-edit\",this.params)},canceltEdit:function(){this.$emit(\"on-cancel-edit\",this.params)}},watch:{isEditting:function(e){}}},s=(a(348),Object(i.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"tables-edit-outer\"},[e.isEditting?a(\"div\",{staticClass:\"tables-editting-con\"},[a(\"Input\",{staticClass:\"tables-edit-input\",attrs:{value:e.value},on:{input:e.handleInput}}),e._v(\" \"),a(\"Button\",{staticStyle:{padding:\"6px 4px\"},attrs:{type:\"text\"},on:{click:e.saveEdit}},[a(\"Icon\",{attrs:{type:\"checkmark-round\"}})],1),e._v(\" \"),a(\"Button\",{staticStyle:{padding:\"6px 4px\"},attrs:{type:\"text\"},on:{click:e.canceltEdit}},[a(\"Icon\",{attrs:{type:\"close-round\"}})],1)],1):a(\"div\",{staticClass:\"tables-edit-con\"},[a(\"span\",{staticClass:\"value-con\"},[e._v(e._s(e.value))]),e._v(\" \"),e.editable?a(\"Button\",{staticClass:\"tables-edit-btn\",staticStyle:{padding:\"2px 4px\"},attrs:{type:\"text\"},on:{click:e.startEdit}},[a(\"Icon\",{attrs:{type:\"edit\"}})],1):e._e()],1)])},[],!1,null,null,null));s.options.__file=\"edit.vue\";var c=s.exports,m={delete:function(e,t,a){return e(\"Poptip\",{props:{confirm:!0,title:\"你确定要删除吗?\"},on:{\"on-ok\":function(){a.$emit(\"on-delete\",t),a.$emit(\"input\",t.tableData.filter(function(e,a){return a!==t.row.initRowIndex}))}}},[e(\"Button\",{props:{type:\"text\"}},[e(\"Icon\",{props:{type:\"trash-b\",size:18}})])])}},d={name:\"Tables\",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return\"\"}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:\"top\"}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:\"\",edittingText:\"\",searchValue:\"\",searchKey:\"\"}},methods:{suportEdit:function(e,t){var a=this;return e.render=function(e,t){return\"\"==a.insideTableData[t.index][t.column.key]&&(a.insideTableData[t.index][t.column.key]=0),e(c,{props:{params:t,value:a.insideTableData[t.index][t.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(e){a.edittingText=e},\"on-start-edit\":function(e){a.edittingCellId=\"editting-\".concat(e.index,\"-\").concat(e.column.key),a.$emit(\"on-start-edit\",e)},\"on-cancel-edit\":function(e){a.edittingCellId=\"\",a.$emit(\"on-cancel-edit\",e)},\"on-save-edit\":function(e){a.value[e.index][e.column.key]=a.edittingText,a.$emit(\"input\",a.value),a.$emit(\"on-save-edit\",Object.assign(e,{value:a.edittingText})),a.edittingCellId=\"\"}}})},e},surportHandle:function(e){var t=this,a=[];(e.options||[]).forEach(function(e){m[e]&&a.push(m[e])});var n=e.button?[].concat(a,e.button):a;return e.render=function(e,a){return a.tableData=t.value,e(\"div\",n.map(function(n){return n(e,a,t)}))},e},handleColumns:function(e){var t=this;this.insideColumns=e.map(function(e,a){var n=e;return n.editable&&(n=t.suportEdit(n,a)),\"handle\"===n.key&&(n=t.surportHandle(n)),n})},setDefaultSearchKey:function(){this.searchKey=\"handle\"!==this.columns[0].key?this.columns[0].key:this.columns.length>1?this.columns[1].key:\"\"},handleClear:function(e){\"\"===e.target.value&&(this.insideTableData=this.value)},handleSearch:function(){var e=this;this.insideTableData=this.value.filter(function(t){return t[e.searchKey].indexOf(e.searchValue)>-1})},handleTableData:function(){this.insideTableData=this.value.map(function(e,t){var a=e;return a.initRowIndex=t,a})},exportCsv:function(e){this.$refs.tablesMain.exportCsv(e)},clearCurrentRow:function(){this.$refs.talbesMain.clearCurrentRow()},onCurrentChange:function(e,t){this.$emit(\"on-current-change\",e,t)},onSelect:function(e,t){this.$emit(\"on-select\",e,t)},onSelectCancel:function(e,t){this.$emit(\"on-select-cancel\",e,t)},onSelectAll:function(e){this.$emit(\"on-select-all\",e)},onSelectionChange:function(e){this.$emit(\"on-selection-change\",e)},onSortChange:function(e,t,a){this.$emit(\"on-sort-change\",e,t,a)},onFilterChange:function(e){this.$emit(\"on-filter-change\",e)},onRowClick:function(e,t){this.$emit(\"on-row-click\",e,t)},onRowDblclick:function(e,t){this.$emit(\"on-row-dblclick\",e,t)},onExpand:function(e,t){this.$emit(\"on-expand\",e,t)}},watch:{columns:function(e){this.handleColumns(e),this.setDefaultSearchKey()},value:function(e){this.handleTableData(),this.handleSearch()}},mounted:function(){this.handleColumns(this.columns),this.setDefaultSearchKey(),this.handleTableData()}},u=Object(i.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.searchable&&\"top\"===e.searchPlace?a(\"div\",{staticClass:\"search-con search-con-top\"},[a(\"Select\",{staticClass:\"search-col\",model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:\"searchKey\"}},e._l(e.columns,function(t){return\"handle\"!==t.key?a(\"Option\",{key:\"search-col-\"+t.key,attrs:{value:t.key}},[e._v(e._s(t.title))]):e._e()}),1),e._v(\" \"),a(\"Input\",{staticClass:\"search-input\",attrs:{clearable:\"\",placeholder:\"输入关键字搜索\"},on:{\"on-change\":e.handleClear},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:\"searchValue\"}}),e._v(\" \"),a(\"Button\",{staticClass:\"search-btn\",attrs:{type:\"primary\"},on:{click:e.handleSearch}},[a(\"Icon\",{attrs:{type:\"search\"}}),e._v(\"  搜索\")],1)],1):e._e(),e._v(\" \"),a(\"Table\",{ref:\"tablesMain\",attrs:{data:e.insideTableData,columns:e.insideColumns,stripe:e.stripe,border:e.border,\"show-header\":e.showHeader,width:e.width,height:e.height,loading:e.loading,\"disabled-hover\":e.disabledHover,\"highlight-row\":e.highlightRow,\"row-class-name\":e.rowClassName,size:e.size,\"no-data-text\":e.noDataText,\"no-filtered-data-text\":e.noFilteredDataText},on:{\"on-current-change\":e.onCurrentChange,\"on-select\":e.onSelect,\"on-select-cancel\":e.onSelectCancel,\"on-select-all\":e.onSelectAll,\"on-selection-change\":e.onSelectionChange,\"on-sort-change\":e.onSortChange,\"on-filter-change\":e.onFilterChange,\"on-row-click\":e.onRowClick,\"on-row-dblclick\":e.onRowDblclick,\"on-expand\":e.onExpand}},[e._t(\"header\",null,{slot:\"header\"}),e._v(\" \"),e._t(\"footer\",null,{slot:\"footer\"}),e._v(\" \"),e._t(\"loading\",null,{slot:\"loading\"})],2),e._v(\" \"),e.searchable&&\"bottom\"===e.searchPlace?a(\"div\",{staticClass:\"search-con search-con-top\"},[a(\"Select\",{staticClass:\"search-col\",model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:\"searchKey\"}},e._l(e.columns,function(t){return\"handle\"!==t.key?a(\"Option\",{key:\"search-col-\"+t.key,attrs:{value:t.key}},[e._v(e._s(t.title))]):e._e()}),1),e._v(\" \"),a(\"Input\",{staticClass:\"search-input\",attrs:{placeholder:\"输入关键字搜索\"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:\"searchValue\"}}),e._v(\" \"),a(\"Button\",{staticClass:\"search-btn\",attrs:{type:\"primary\"}},[a(\"Icon\",{attrs:{type:\"search\"}}),e._v(\"  搜索\")],1)],1):e._e(),e._v(\" \"),a(\"a\",{staticStyle:{display:\"none\",width:\"0px\",height:\"0px\"},attrs:{id:\"hrefToExportTable\"}})],1)},[],!1,null,null,null);u.options.__file=\"tables.vue\";var p=u.exports,_={components:{tables:p},data:function(){var e=this;return{companyLoading:!1,companyList:[],companyName:\"\",header:[{title:\"公司名称\",key:\"companyname\",minWidth:200},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"可交接数量\",key:\"max_allow_connect_num\",minWidth:120},{title:\"操作\",minWidth:120,render:function(t,a){return t(\"Button\",{props:{size:\"small\",type:\"primary\"},on:{click:function(){a.row.num=a.row.max_allow_connect_num,e.fileList.push(a.row)}}},\"新增\")}}],data:[],total:0,page:1,pageSize:10,loading:!1,userLoading:!1,userList:[],submit_loading:!1,openRequest:!1,receiverId:\"\",applicationMemo:\"\",fileList:[],columns:[{title:\"移除\",key:\"handle\",minWidth:90,button:[function(e,t,a){return e(\"Icon\",{props:{type:\"close\"},on:{click:function(){a.$emit(\"on-delete\",t),a.$emit(\"input\",t.tableData.filter(function(e,a){return a!==t.row.initRowIndex}))}}})}]},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"可交接数量\",key:\"max_allow_connect_num\",minWidth:120},{title:\"请求数量\",key:\"num\",minWidth:120,editable:!0}]}},methods:{get_user:function(e){var t=this;t.userLoading=!0;var a={params:{page:1,pageSize:5,realname:e}};this.$Get(\"api/user/list\",a,function(e){t.userLoading=!1,t.userList=e.data.data.rows})},submit_request:function(){var e=this;if(this.receiverId){e.submit_loading=!0;for(var t={},a=0;a<e.fileList.length;a++)e.fileList[a].num=parseInt(e.fileList[a].num),t[e.fileList[a].id]=e.fileList[a].num;var n={receiverId:e.receiverId,applicationMemo:e.applicationMemo,customerFileJson:JSON.stringify(t)};this.$Post(\"api/customer/file/connect/request/create\",n,function(t){e.submit_loading=!1,e.openRequest=!1,e.fileList=[],e.$bus.emit(\"OPEN_INNER_QCODER\",!0),e.$bus.emit(\"HANDOVER_FILE_UPDATE\",!0)},function(t){e.submit_loading=!1})}else e.$Message.warning(\"请选择接收人！\")},get_company:function(e){var t=this;t.page=1,t.companyLoading=!0;var a={params:{page:1,pageSize:10,companyname:e}};this.$Get(\"api/customer/company/list\",a,function(e){t.companyLoading=!1,t.companyList=e.data.data.rows})},pageChange:function(e){this.page=e,this.get_data()},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,companyname:e.companyName,file_status:\"'normal'\",keeper_flag:1}};this.$Get(\"api/customer/file/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1})},check_data:function(e){e.row.max_allow_connect_num<e.value&&(this.$Message.warning(\"当前输入数量超过最大可交接数，请重新输入！\"),this.fileList[e.index].num=e.row.max_allow_connect_num)}},created:function(){var e=this;this.$bus.on(\"OPEN_CREATE_REQUEST_FILE\",function(t){e.get_data(),e.userList=[],e.receiverId=\"\",e.openRequest=!0})}},h=Object(i.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"申请交接\",width:\"95%\",\"mask-closable\":!1},model:{value:e.openRequest,callback:function(t){e.openRequest=t},expression:\"openRequest\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",{attrs:{title:\"创建请求\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Select\",{attrs:{placeholder:\"接收人\",filterable:\"\",remote:\"\",\"remote-method\":e.get_user,loading:e.userLoading},model:{value:e.receiverId,callback:function(t){e.receiverId=t},expression:\"receiverId\"}},e._l(e.userList,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.id,label:t.realname}},[a(\"span\",[e._v(e._s(t.realname))]),e._v(\" \"),a(\"span\",{staticStyle:{float:\"right\",color:\"#ccc\"}},[e._v(e._s(t.departname))])])}),1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Input\",{attrs:{type:\"textarea\",placeholder:\"备注\",rows:1},model:{value:e.applicationMemo,callback:function(t){e.applicationMemo=t},expression:\"applicationMemo\"}})],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[a(\"tables\",{ref:\"tables\",attrs:{editable:\"\",columns:e.columns},on:{\"on-save-edit\":e.check_data},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:\"fileList\"}})],1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",{attrs:{title:\"选择资料\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Select\",{attrs:{placeholder:\"输入公司名称搜索\",filterable:\"\",remote:\"\",\"remote-method\":e.get_company,loading:e.companyLoading},on:{\"on-change\":e.get_data},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:\"companyName\"}},e._l(e.companyList,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.companyname}},[e._v(e._s(t.companyname))])}),1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\",current:e.page},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.submit_loading},on:{click:e.submit_request}},[e._v(\"提交申请\")])],1)],1)],1)},[],!1,null,null,null);h.options.__file=\"create_request.vue\";var f=h.exports,g={props:{},data:function(){var e=this;return{formValidateRule:{companyId:[{required:!0,message:\"必填项！\",trigger:\"change\",type:\"number\"}],fileSource:[{required:!0,message:\"必填项！\",trigger:\"change\"}]},fileItemRule:{customerFileName:[{required:!0,message:\"必填项！\",trigger:\"change\"}],customerFileTypeId:[{required:!0,message:\"必填项！\",trigger:\"change\",type:\"number\"}],saveDepartId:[{required:!0,message:\"必填项！\",trigger:\"change\",type:\"number\"}],storage:[{required:!0,message:\"必填项！\",trigger:\"change\"}],fileNum:[{required:!0,message:\"必填项！\",trigger:\"change\"}]},openAddFileItem:!1,isCanInput:!0,openResoureFile:!1,formValidate:{companyId:\"\",customerName:\"\",fileSource:\"\",dataJson:[]},fileItem:{customerFileName:\"\",customerFileTypeId:\"\",saveDepartId:\"\",storage:\"\",fileNum:\"1\",storageCode:\"\"},loading:!1,fileList:[],departAlias:[],companyList:[],companyLoading:!1,departLoading:!1,customer_f_s_a:[],customer_resource_from:[],header:[{title:\"文件名\",key:\"customerFileName\",minWidth:150},{title:\"保存部门\",key:\"saveDepartId\",minWidth:150,render:function(t,a){for(var n=\"\",i=0;i<e.departAlias.length;i++)a.row.saveDepartId==e.departAlias[i].departid&&(n=e.departAlias[i].departname);return t(\"div\",{},n)}},{title:\"保存位置\",key:\"storage\",minWidth:150,render:function(t,a){return t(\"div\",{},e.customer_f_s_a_map.get(a.row.storage))}},{title:\"文件数量\",key:\"fileNum\",minWidth:150},{title:\"操作\",key:\"action\",minWidth:120,render:function(t,a){return t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.formValidate.dataJson.splice(a.index,1)}}},\"[ 删除 ]\")}}],departAlias_map:new Map,fileType_map:new Map,customer_f_s_a_map:new Map}},computed:{customerName:function(){return\"customer\"==this.formValidate.fileSource}},methods:{create_type:function(){var e=this;e.loading=!0;var t={companyId:e.formValidate.companyId,fileSource:e.formValidate.fileSource,customerName:e.formValidate.customerName,dataJson:JSON.stringify(e.formValidate.dataJson)};this.$Post(\"api/customer/file/create\",t,function(t){e.openResoureFile=!1,e.loading=!1,e.reset_type(),e.formValidate.dataJson=[]},function(t){e.loading=!1})},reset_type:function(){this.formValidate.customerFileTypeId=\"\",this.formValidate.saveDepartId=\"\",this.formValidate.storage=\"\",this.formValidate.companyId=\"\",this.formValidate.storageCode=\"\",this.formValidate.fileNum=\"1\",this.formValidate.customerFileName=\"\"},get_all_file_type:function(){var e=this;this.$Get(\"api/customer/file/type/list\",{},function(t){e.fileList=t.data.data,e.fileType_map=new Map;for(var a=0;a<e.fileList.length;a++)e.fileType_map.set(e.fileList[a].id.toString(),e.fileList[a].file_type_name)})},get_data_center:function(){var e=this;e.departLoading=!0;this.$Get(\"api/system/depart/queryDepartsByUserId\",{params:{}},function(t){e.departAlias=t.data.data})},get_company:function(e){var t=this;t.companyLoading=!0;var a={params:{page:1,pageSize:10,companyname:e}};this.$Get(\"api/customer/company/list\",a,function(e){t.companyLoading=!1,t.companyList=e.data.data.rows})},change:function(e){this.fileItem.customerFileName=this.fileType_map.get(e.toString());for(var t=0;t<this.fileList.length;t++)this.fileList[t].id==e&&(\"Y\"==this.fileList[t].plural?this.isCanInput=!0:(this.fileItem.fileNum=\"1\",this.isCanInput=!1))},get_center:function(){var e=this;e.$GetDataCenter(\"customer_f_s_a,customer_resource_from\",function(t){e.customer_f_s_a=t.data.data.customer_f_s_a,e.customer_resource_from=t.data.data.customer_resource_from,e.customer_f_s_a_map=e.$array2map(e.customer_f_s_a)})},add_file_item:function(){var e=this,t=this;this.$refs.fileItem.validate(function(a){if(a){var n=JSON.stringify(t.fileItem),i=JSON.parse(n);e.formValidate.dataJson.push(i),i=null}})}},created:function(){var e=this;this.get_center(),this.$bus.off(\"OPEN_CREATE_RESOURE_FILE\"),this.$bus.on(\"OPEN_CREATE_RESOURE_FILE\",function(t){e.formValidate.dataJson=[],e.$refs.formValidate.resetFields(),e.$refs.fileItem.resetFields(),e.get_all_file_type(),e.get_data_center(),e.openResoureFile=!0})}},v=Object(i.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"创建资料\",width:\"95\"},model:{value:e.openResoureFile,callback:function(t){e.openResoureFile=t},expression:\"openResoureFile\"}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"16\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,\"label-width\":120,rules:e.formValidateRule}},[a(\"FormItem\",{attrs:{label:\"所属公司：\",prop:\"companyId\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"输入公司名称搜索\",filterable:\"\",remote:\"\",\"remote-method\":e.get_company,loading:e.companyLoading},model:{value:e.formValidate.companyId,callback:function(t){e.$set(e.formValidate,\"companyId\",t)},expression:\"formValidate.companyId\"}},e._l(e.companyList,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.companyname))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"资料来源：\",prop:\"fileSource\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"选择资料来源\"},model:{value:e.formValidate.fileSource,callback:function(t){e.$set(e.formValidate,\"fileSource\",t)},expression:\"formValidate.fileSource\"}},e._l(e.customer_resource_from,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1),e._v(\" \"),e.customerName?a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customerName\"}},[a(\"Input\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请输入客户名称\"},model:{value:e.formValidate.customerName,callback:function(t){e.$set(e.formValidate,\"customerName\",t)},expression:\"formValidate.customerName\"}})],1):e._e()],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"20px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.formValidate.dataJson}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Form\",{ref:\"fileItem\",attrs:{model:e.fileItem,\"label-width\":120,rules:e.fileItemRule}},[a(\"FormItem\",{attrs:{label:\"文件类型：\",prop:\"customerFileTypeId\"}},[a(\"Select\",{attrs:{placeholder:\"选择文件类型\",filterable:\"\"},on:{\"on-change\":e.change},model:{value:e.fileItem.customerFileTypeId,callback:function(t){e.$set(e.fileItem,\"customerFileTypeId\",t)},expression:\"fileItem.customerFileTypeId\"}},e._l(e.fileList,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.file_type_name))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"文件名称：\",prop:\"customerFileName\"}},[a(\"Input\",{attrs:{placeholder:\"输入文件名称\"},model:{value:e.fileItem.customerFileName,callback:function(t){e.$set(e.fileItem,\"customerFileName\",t)},expression:\"fileItem.customerFileName\"}})],1),e._v(\" \"),e.isCanInput?a(\"FormItem\",{attrs:{label:\"文件数量：\",prop:\"fileNum\"}},[a(\"Input\",{attrs:{placeholder:\"请输入文件数量\"},model:{value:e.fileItem.fileNum,callback:function(t){e.$set(e.fileItem,\"fileNum\",t)},expression:\"fileItem.fileNum\"}})],1):e._e(),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"存放部门：\",prop:\"saveDepartId\"}},[a(\"Select\",{attrs:{placeholder:\"选择存放部门\"},model:{value:e.fileItem.saveDepartId,callback:function(t){e.$set(e.fileItem,\"saveDepartId\",t)},expression:\"fileItem.saveDepartId\"}},e._l(e.departAlias,function(t){return a(\"Option\",{key:t.departid,attrs:{value:t.departid}},[e._v(e._s(t.departname))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"存放地点：\",prop:\"storage\"}},[a(\"Select\",{attrs:{placeholder:\"选择存放地点\"},model:{value:e.fileItem.storage,callback:function(t){e.$set(e.fileItem,\"storage\",t)},expression:\"fileItem.storage\"}},e._l(e.customer_f_s_a,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"存放位置：\",prop:\"storageCode\"}},[a(\"Input\",{attrs:{placeholder:\"请输入存放具体位置\"},model:{value:e.fileItem.storageCode,callback:function(t){e.$set(e.fileItem,\"storageCode\",t)},expression:\"fileItem.storageCode\"}})],1)],1),e._v(\" \"),a(\"center\",[a(\"Button\",{staticStyle:{width:\"60%\"},attrs:{type:\"primary\"},on:{click:e.add_file_item}},[e._v(\"新增资料项\")])],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.create_type}},[e._v(\"新增\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"新增文件项\",width:\"700\"},model:{value:e.openAddFileItem,callback:function(t){e.openAddFileItem=t},expression:\"openAddFileItem\"}})],1)},[],!1,null,null,null);v.options.__file=\"create_file.vue\";var y=v.exports,b={data:function(){return{loading:!1,openConfirm:!1,currentRow:\"\",departAlias:[],connectRequestId:\"\",formValidate:{status:\"Y\",departId:\"\",memo:\"\",storage:\"\",storageCode:\"\"},receiverRealname:\"\",applicantRealname:\"\",ruleInline:{departId:[{required:!0,trigger:\"change\",message:\"存放部门必选！\",type:\"number\"}],storage:[{required:!0,trigger:\"change\",message:\"存放地点必选！\"}],storageCode:[{required:!0,trigger:\"change\",message:\"存放位置必选！\"}]},customer_f_s_a:[]}},computed:{show:function(){return\"Y\"==this.formValidate.status}},methods:{get_data_center:function(){var e=this;e.departLoading=!0,this.$Get(\"api/system/depart/queryDepartsByUserId\",{params:{}},function(t){e.departAlias=t.data.data})},submit:function(){var e=this,t=this,a=\"api/customer/file/connect/request/dispose\";function n(e){t.loading=!1,t.openConfirm=!1,t.$bus.emit(\"HANDOVER_FILE_UPDATE\",!0)}function i(e){t.loading=!1}if(t.loading=!0,this.show)this.$refs.formValidate.validate(function(o){if(o){var l={status:\"Y\",connectRequestId:t.connectRequestId,departId:t.formValidate.departId,memo:t.formValidate.memo,storage:t.formValidate.storage,storageCode:t.formValidate.storageCode};t.$Post(a,l,n,i)}else e.$Message.error(\"请补全信息!\"),t.loading=!1});else{var o={status:\"N\",connectRequestId:t.connectRequestId,memo:t.formValidate.memo};t.$Post(a,o,n,i)}},get_center:function(){var e=this;e.$GetDataCenter(\"customer_f_s_a\",function(t){e.customer_f_s_a=t.data.data.customer_f_s_a})}},created:function(){var e=this;e.get_center(),e.$bus.on(\"OPEN_CONFIRM_FILE\",function(t){e.get_data_center(),e.connectRequestId=t.id,e.currentRow=t,e.openConfirm=!0,e.receiverRealname=t.receiver_name,e.applicantRealname=t.applicant_name})}},k=Object(i.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"交接处理\",width:\"600\"},model:{value:e.openConfirm,callback:function(t){e.openConfirm=t},expression:\"openConfirm\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{model:e.formValidate,\"label-width\":120,rules:e.ruleInline}},[a(\"FormItem\",{attrs:{label:\"接收人：\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.receiverRealname,callback:function(t){e.receiverRealname=t},expression:\"receiverRealname\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"申请人：\"}},[a(\"Input\",{attrs:{readonly:\"\"},model:{value:e.applicantRealname,callback:function(t){e.applicantRealname=t},expression:\"applicantRealname\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"状态：\",prop:\"status\"}},[a(\"RadioGroup\",{model:{value:e.formValidate.status,callback:function(t){e.$set(e.formValidate,\"status\",t)},expression:\"formValidate.status\"}},[a(\"Radio\",{attrs:{label:\"Y\"}},[e._v(\"接收\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"N\"}},[e._v(\"拒收\")])],1)],1),e._v(\" \"),e.show?a(\"FormItem\",{attrs:{label:\"存放部门：\",prop:\"departId\"}},[a(\"Select\",{attrs:{placeholder:\"选择存放部门\"},model:{value:e.formValidate.departId,callback:function(t){e.$set(e.formValidate,\"departId\",t)},expression:\"formValidate.departId\"}},e._l(e.departAlias,function(t){return a(\"Option\",{key:t.departid,attrs:{value:t.departid}},[e._v(e._s(t.departname))])}),1)],1):e._e(),e._v(\" \"),e.show?a(\"FormItem\",{attrs:{label:\"存放地点：\",prop:\"storage\"}},[a(\"Select\",{attrs:{placeholder:\"选择存放位置\"},model:{value:e.formValidate.storage,callback:function(t){e.$set(e.formValidate,\"storage\",t)},expression:\"formValidate.storage\"}},e._l(e.customer_f_s_a,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1):e._e(),e._v(\" \"),e.show?a(\"FormItem\",{attrs:{label:\"存放位置：\",prop:\"storageCode\"}},[a(\"Input\",{attrs:{placeholder:\"请输入存放具体位置\"},model:{value:e.formValidate.storageCode,callback:function(t){e.$set(e.formValidate,\"storageCode\",t)},expression:\"formValidate.storageCode\"}})],1):e._e(),e._v(\" \"),e.show?a(\"FormItem\",{attrs:{label:\"备注：\",prop:\"memo\"}},[a(\"Input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:5},placeholder:\"请输入备注\"},model:{value:e.formValidate.memo,callback:function(t){e.$set(e.formValidate,\"memo\",t)},expression:\"formValidate.memo\"}})],1):e._e()],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.submit}},[e._v(\"提交\")])],1)],1)],1)},[],!1,null,null,null);k.options.__file=\"comfirm_request.vue\";var I=k.exports,w={components:{tables:p},computed:{disabled:function(){return!!(this.connectPlan&&this.trackingNumber&&this.fileList)&&void 0}},data:function(){var e=this;return{connectPlan:\"f_to_f\",trackingNumber:\"\",outType:\"customer\",otherName:\"\",connect_plan:[],companyLoading:!1,companyList:[],companyName:\"\",header:[{title:\"公司名称\",key:\"companyname\",minWidth:200},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"可交接数量\",key:\"max_allow_connect_num\",minWidth:120},{title:\"操作\",minWidth:120,render:function(t,a){return t(\"Button\",{props:{size:\"small\",type:\"primary\"},on:{click:function(){a.row.num=a.row.max_allow_connect_num,e.fileList.push(a.row)}}},\"新增\")}}],data:[],total:0,page:1,pageSize:10,loading:!1,submit_loading:!1,openCustomerOut:!1,fileList:[],columns:[{title:\"移除\",key:\"handle\",minWidth:90,button:[function(e,t,a){return e(\"Icon\",{props:{type:\"close\"},on:{click:function(){a.$emit(\"on-delete\",t),a.$emit(\"input\",t.tableData.filter(function(e,a){return a!==t.row.initRowIndex}))}}})}]},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"可交接数量\",key:\"max_allow_connect_num\",minWidth:120},{title:\"请求数量\",key:\"num\",minWidth:120,editable:!0}]}},methods:{submit_request:function(){var e=this;if(e.submit_loading=!0,\"other\"!=this.outType||this.otherName){if(\"express\"!=this.connectPlan||this.trackingNumber){for(var t={},a=0;a<e.fileList.length;a++)e.fileList[a].num=parseInt(e.fileList[a].num),t[e.fileList[a].id]=e.fileList[a].num;var n={connectPlan:e.connectPlan,trackingNumber:e.trackingNumber,customerFileJson:JSON.stringify(t),outType:e.outType,otherName:e.otherName};this.$Post(\"api/customer/file/connect/request/customer/create\",n,function(t){e.submit_loading=!1,e.openCustomerOut=!1,e.fileList=[],e.trackingNumber=\"\",\"customer\"==e.outType&&(e.send_customer_msg(t.data.data.id),e.otherName=\"\"),e.$bus.emit(\"HANDOVER_FILE_UPDATE\",!0)},function(t){e.submit_loading=!1})}else e.$Message.warning(\"请输入快递单号！\");e.submit_loading=!1}else e.$Message.warning(\"请输入文件去向！\")},send_customer_msg:function(e){var t={connectRequestId:e};this.$Post(\"api/customer/file/connect/request/customer/send\",t,function(e){},function(e){})},get_company:function(e){var t=this;t.companyLoading=!0;var a={params:{page:1,pageSize:10,companyname:e}};this.$Get(\"api/customer/company/list\",a,function(e){t.companyLoading=!1,t.companyList=e.data.data.rows})},pageChange:function(e){this.page=e,this.get_data()},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,companyname:e.companyName,file_status:\"'normal'\",keeper_flag:1}};this.$Get(\"api/customer/file/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1})},check_data:function(e){e.row.max_allow_connect_num<e.value&&(this.$Message.warning(\"当前输入数量超过最大可交接数，请重新输入！\"),this.fileList[e.index].num=e.row.max_allow_connect_num)},get_data_center:function(){var e=this;this.$GetDataCenter(\"connect_plan\",function(t){e.connect_plan=t.data.data.connect_plan})}},created:function(){var e=this;this.get_data_center(),this.$bus.on(\"OPEN_CREATE_OUT_FILE\",function(t){e.get_data(),e.userList=[],e.receiverId=\"\",e.openCustomerOut=!0})}},R=Object(i.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"申请出库\",width:\"95%\",\"mask-closable\":!1},model:{value:e.openCustomerOut,callback:function(t){e.openCustomerOut=t},expression:\"openCustomerOut\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",{attrs:{title:\"创建请求\"}},[a(\"Row\",{staticStyle:{height:\"40px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"RadioGroup\",{model:{value:e.connectPlan,callback:function(t){e.connectPlan=t},expression:\"connectPlan\"}},e._l(e.connect_plan,function(t){return a(\"Radio\",{key:t.id,attrs:{label:t.typecode}},[e._v(e._s(t.typename))])}),1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[\"express\"==e.connectPlan?a(\"Input\",{attrs:{placeholder:\"快递单号\"},model:{value:e.trackingNumber,callback:function(t){e.trackingNumber=t},expression:\"trackingNumber\"}}):e._e()],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{height:\"40px\"},attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"RadioGroup\",{model:{value:e.outType,callback:function(t){e.outType=t},expression:\"outType\"}},[a(\"Radio\",{attrs:{label:\"customer\"}},[e._v(\"客户\")]),e._v(\" \"),a(\"Radio\",{attrs:{label:\"other\"}},[e._v(\"其他\")])],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[\"other\"==e.outType?a(\"Input\",{attrs:{placeholder:\"文件去向\"},model:{value:e.otherName,callback:function(t){e.otherName=t},expression:\"otherName\"}}):e._e()],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[a(\"tables\",{ref:\"tables\",attrs:{editable:\"\",columns:e.columns},on:{\"on-save-edit\":e.check_data},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:\"fileList\"}})],1)],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"Card\",{attrs:{title:\"选择资料\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Select\",{attrs:{placeholder:\"输入公司名称搜索\",filterable:\"\",remote:\"\",\"remote-method\":e.get_company,loading:e.companyLoading},on:{\"on-change\":e.get_data},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:\"companyName\"}},e._l(e.companyList,function(t){return a(\"Option\",{key:t.id,attrs:{value:t.companyname}},[e._v(e._s(t.companyname))])}),1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.submit_loading,disabled:e.disabled},on:{click:e.submit_request}},[e._v(\"提交申请\")])],1)],1)],1)},[],!1,null,null,null);R.options.__file=\"create_out.vue\";var F=R.exports,x={components:{tables:p},data:function(){var e=this;return{submitLoading:!1,confirm_add_loading:!1,applicationMemo:\"\",openAddFiles:!1,update_request:!1,id:\"\",data:{applicant_name:\"\",receiver_name:\"\",application_memo:\"\"},loading:!1,header:[{title:\"移除\",key:\"handle\",minWidth:90,button:[function(t,a,n){return t(\"Icon\",{props:{type:\"close\"},on:{click:function(){var t={id:a.row.id};e.$Post(\"api/customer/file/connect/request/file/del\",t,function(e){this.get_data()}),n.$emit(\"on-delete\",a),n.$emit(\"input\",a.tableData.filter(function(e,t){return t!==a.row.initRowIndex}))}}})}]},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120}],files:[],allFilesHeader:[{title:\"公司名称\",key:\"companyname\",minWidth:200},{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"数量\",key:\"file_num\",minWidth:90},{title:\"可交接数量\",key:\"max_allow_connect_num\",minWidth:120},{title:\"操作\",key:\"action\",minWidth:120,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.add_request_files(a.row)}}},\"[ 添加 ]\")])}}],allFiles:[],total:0,page:1,selectRowFiles:{id:\"\",companyname:\"\",name:\"\",max_allow_connect_num:\"\",customer_file_name:\"\",connect_num:\"\",file_num:\"\"},add_request_file:!1}},methods:{get_data:function(e){var t=this,a={params:{id:e}};this.$Get(\"api/customer/file/connect/request/detail\",a,function(e){t.data=e.data.data,t.files=e.data.data.files})},add_file:function(){this.openAddFiles=!0,this.get_file_data()},submit:function(){var e=this;e.submitLoading=!0;var t={connectRequestId:e.id,applicationMemo:e.applicationMemo};this.$Post(\"api/customer/file/connect/request/re/commit\",t,function(t){e.submitLoading=!1,e.update_request=!1,e.$bus.emit(\"HANDOVER_FILE_UPDATE\",!0)},function(t){e.submitLoading=!1})},pageChange:function(e){this.page=e,this.get_file_data()},get_file_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:10}};this.$Get(\"api/customer/file/list\",t,function(t){e.allFiles=t.data.data.rows,e.total=t.data.data.total,e.loading=!1})},add_request_files:function(e){this.selectRowFiles=e,this.selectRowFiles.connect_num=this.selectRowFiles.max_allow_connect_num,this.add_request_file=!0},confirm_add:function(){var e=this;e.confirm_add_loading=!0;var t={connectRequestId:e.id,customerFileId:e.selectRowFiles.id,num:e.selectRowFiles.connect_num};this.$Post(\"api/customer/file/connect/request/file/add\",t,function(t){e.confirm_add_loading=!1,e.add_request_file=!1,e.selectRowFiles={},e.selectRowFiles.id=\"\",e.selectRowFiles.companyname=\"\",e.selectRowFiles.name=\"\",e.selectRowFiles.max_allow_connect_num=\"\",e.selectRowFiles.customer_file_name=\"\",e.selectRowFiles.connect_num=\"\",e.selectRowFiles.file_num=\"\",e.get_data(e.id)},function(t){e.confirm_add_loading=!1})}},created:function(){var e=this;this.$bus.on(\"OPEN_UPDATE_RESOURE_FILE\",function(t){e.id=t.id,e.update_request=!0,e.get_data(t.id)})}},$=Object(i.a)(x,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"修改申请\",width:\"70%\"},model:{value:e.update_request,callback:function(t){e.update_request=t},expression:\"update_request\"}},[a(\"Row\",[a(\"span\",[e._v(\"申请人：\")]),a(\"span\",{staticStyle:{\"padding-right\":\"100px\"}},[e._v(e._s(e.data.applicant_name))]),e._v(\" \"),a(\"span\",[e._v(\"接收人：\")]),a(\"span\",[e._v(e._s(e.data.receiver_name))])]),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.add_file}},[e._v(\"添加文件\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"tables\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header},model:{value:e.files,callback:function(t){e.files=t},expression:\"files\"}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submit}},[e._v(\"提交\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"添加文件\",width:\"800\"},model:{value:e.openAddFiles,callback:function(t){e.openAddFiles=t},expression:\"openAddFiles\"}},[a(\"Row\",{staticStyle:{margin:\"10px\"},attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.allFilesHeader,data:e.allFiles}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"添加交接资料\",width:\"300\"},model:{value:e.add_request_file,callback:function(t){e.add_request_file=t},expression:\"add_request_file\"}},[a(\"Form\",{attrs:{model:e.selectRowFiles,\"label-width\":120}},[a(\"FormItem\",{attrs:{label:\"公司名称：\"}},[a(\"Input\",{attrs:{disabled:\"\"},model:{value:e.selectRowFiles.companyname,callback:function(t){e.$set(e.selectRowFiles,\"companyname\",t)},expression:\"selectRowFiles.companyname\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"资料名称：\"}},[a(\"Input\",{attrs:{disabled:\"\"},model:{value:e.selectRowFiles.customer_file_name,callback:function(t){e.$set(e.selectRowFiles,\"customer_file_name\",t)},expression:\"selectRowFiles.customer_file_name\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"最大交接数量:\"}},[a(\"Input\",{attrs:{disabled:\"\"},model:{value:e.selectRowFiles.max_allow_connect_num,callback:function(t){e.$set(e.selectRowFiles,\"max_allow_connect_num\",t)},expression:\"selectRowFiles.max_allow_connect_num\"}})],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"交接数量:\"}},[a(\"Input\",{model:{value:e.selectRowFiles.connect_num,callback:function(t){e.$set(e.selectRowFiles,\"connect_num\",t)},expression:\"selectRowFiles.connect_num\"}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.confirm_add_loading},on:{click:e.confirm_add}},[e._v(\"确认添加\")])],1)],1)],1)},[],!1,null,null,null);$.options.__file=\"update_request.vue\";var C=$.exports,E={data:function(){var e=this;return{customer_file_s:[],customer_file_s_map:new Map,handover_status:[],handover_status_map:new Map,file_connect_type:[],file_connect_type_map:new Map,connect_plan:[],connect_plan_map:new Map,openRequest:!1,requestHeader:[{title:\"状态\",key:\"status\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:150},{title:\"操作人\",key:\"operator_name\",minWidth:150},{title:\"备注\",key:\"memo\",minWidth:200}],requestData:[],detailApplicantRealname:\"\",detailReceiverRealname:\"\",fileHeader:[{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120},{title:\"存放部门\",key:\"departname\",minWidth:120},{title:\"存放地点\",key:\"storage\",minWidth:120},{title:\"存放位置\",key:\"storage_code\",minWidth:120}],fileData:[],openDetail:!1,search_model:\"\",loading:!1,selectRow:\"\",seacrhFormInline:{receiver_realname:\"\",applicant_realname:\"\",companyname:\"\"},page:1,pageSize:10,total:0,data:[],header:[{title:\"申请人\",key:\"applicant_name\",minWidth:120},{title:\"接收人\",key:\"receiver_name\",minWidth:120},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"申请备注\",key:\"application_memo\",minWidth:120},{title:\"申请时间\",key:\"createdate\",minWidth:200},{title:\"交接方式\",key:\"connect_plan\",minWidth:90},{title:\"交接类型\",key:\"connect_type\",minWidth:90},{title:\"快递单号\",key:\"tracking_number\",minWidth:120},{title:\"申请状态\",key:\"status\",minWidth:90},{title:\"操作\",key:\"action\",minWidth:200,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_detail(a.row)}}},\"[查看详情]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_request(a.row.id)}}},\"[协商记录]\")])}}]}},methods:{open_detail:function(e){this.$bus.emit(\"OPEN_HANDOVER_DETAIL\",e.id)},open_request:function(e){var t=this,a={params:{connect_request_id:e,sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/course/list\",a,function(e){t.requestData=e.data.data,t.openRequest=!0;for(var a=0;a<t.requestData.length;a++)\"Y\"==t.requestData[a].status?t.requestData[a].status=\"通过\":t.requestData[a].status=\"拒绝\"})},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,applicant_realname:e.seacrhFormInline.applicant_realname,receiver_realname:e.seacrhFormInline.receiver_realname,companyname:e.seacrhFormInline.companyname,application_status:\"\",sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1;for(var a=0;a<e.data.length;a++)e.data[a].createdate=e.data[a].createdate.slice(0,10),e.data[a].status=e.handover_status_map.get(e.data[a].application_status),e.data[a].connect_plan=e.connect_plan_map.get(e.data[a].connect_plan),e.data[a].connect_type=e.file_connect_type_map.get(e.data[a].connect_type)})},get_data_center:function(){var e=this;return new Promise(function(t,a){e.$GetDataCenter(\"customer_file_s,handover_status,file_connect_type,connect_plan\",function(a){e.customer_file_s=a.data.data.customer_file_s,e.customer_file_s_map=e.$array2map(e.customer_file_s),e.handover_status=a.data.data.handover_status,e.handover_status_map=e.$array2map(e.handover_status),e.file_connect_type=a.data.data.file_connect_type,e.file_connect_type_map=e.$array2map(e.file_connect_type),e.connect_plan=a.data.data.connect_plan,e.connect_plan_map=e.$array2map(e.connect_plan),t()})})},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.get_data()},reset:function(){this.page=1,this.seacrhFormInline.receiver_realname=\"\",this.seacrhFormInline.applicant_realname=\"\",this.seacrhFormInline.companyname=\"\",this.seacrhFormInline.companyname=\"\",this.get_data()},create_request:function(){this.$bus.emit(\"OPEN_CREATE_REQUEST_FILE\",!0)},create_file:function(){this.$bus.emit(\"OPEN_CREATE_RESOURE_FILE\",!0)},create_out:function(){this.$bus.emit(\"OPEN_CREATE_OUT_FILE\",!0)},confirm_request:function(){this.selectRow?this.$bus.emit(\"OPEN_CONFIRM_FILE\",this.selectRow):this.$Message.warning(\"请选择一行进行处理！\")},select_row:function(e){this.selectRow=e}},created:function(){var e=this;this.get_data_center().then(function(){e.get_data()}),this.$bus.on(\"HANDOVER_FILE_UPDATE\",function(t){e.get_data()})}},q=Object(i.a)(E,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"applicant_realname\",label:\"申请人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.applicant_realname,callback:function(t){e.$set(e.seacrhFormInline,\"applicant_realname\",t)},expression:\"seacrhFormInline.applicant_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"receiver_realname\",label:\"接收人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.receiver_realname,callback:function(t){e.$set(e.seacrhFormInline,\"receiver_realname\",t)},expression:\"seacrhFormInline.receiver_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.companyname,callback:function(t){e.$set(e.seacrhFormInline,\"companyname\",t)},expression:\"seacrhFormInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_file}},[e._v(\"交接入库\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_request}},[e._v(\"内部交接\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_out}},[e._v(\"交接客户\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.confirm_request}},[e._v(\"交接处理\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.open_detail,\"on-current-change\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"协商明细\",width:\"800\"},model:{value:e.openRequest,callback:function(t){e.openRequest=t},expression:\"openRequest\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.requestHeader,data:e.requestData}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);q.options.__file=\"all.vue\";var S=q.exports,W={data:function(){var e=this;return{customer_file_s:[],customer_file_s_map:new Map,handover_status:[],handover_status_map:new Map,file_connect_type:[],file_connect_type_map:new Map,connect_plan:[],connect_plan_map:new Map,openRequest:!1,requestHeader:[{title:\"状态\",key:\"status\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:150},{title:\"操作人\",key:\"operator_name\",minWidth:150},{title:\"备注\",key:\"memo\",minWidth:200}],requestData:[],detailApplicantRealname:\"\",detailReceiverRealname:\"\",fileHeader:[{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120},{title:\"存放部门\",key:\"departname\",minWidth:120},{title:\"存放地点\",key:\"storage\",minWidth:120},{title:\"存放位置\",key:\"storage_code\",minWidth:120}],fileData:[],openDetail:!1,search_model:\"\",loading:!1,selectRow:\"\",seacrhFormInline:{receiver_realname:\"\",applicant_realname:\"\",companyname:\"\"},page:1,pageSize:10,total:0,data:[],header:[{title:\"申请人\",key:\"applicant_name\",minWidth:120},{title:\"接收人\",key:\"receiver_name\",minWidth:120},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"申请备注\",key:\"application_memo\",minWidth:120},{title:\"申请时间\",key:\"createdate\",minWidth:200},{title:\"交接方式\",key:\"connect_plan\",minWidth:90},{title:\"交接类型\",key:\"connect_type\",minWidth:90},{title:\"申请状态\",key:\"status\",minWidth:120},{title:\"操作\",key:\"action\",minWidth:120,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_detail(a.row)}}},\"[查看详情]\")])}}]}},methods:{open_detail:function(e){this.$bus.emit(\"OPEN_HANDOVER_DETAIL\",e.id)},open_request:function(e){var t=this,a={params:{connect_request_id:e,sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/course/list\",a,function(e){t.requestData=e.data.data,t.openRequest=!0;for(var a=0;a<t.requestData.length;a++);})},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,applicant_realname:e.seacrhFormInline.applicant_realname,receiver_realname:e.seacrhFormInline.receiver_realname,companyname:e.seacrhFormInline.companyname,application_status:\"finish\",sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1;for(var a=0;a<e.data.length;a++)e.data[a].createdate=e.data[a].createdate.slice(0,10),e.data[a].status=e.handover_status_map.get(e.data[a].application_status),e.data[a].connect_plan=e.connect_plan_map.get(e.data[a].connect_plan),e.data[a].connect_type=e.file_connect_type_map.get(e.data[a].connect_type)})},get_data_center:function(){var e=this;return new Promise(function(t,a){e.$GetDataCenter(\"customer_file_s,handover_status,file_connect_type,connect_plan\",function(a){e.customer_file_s=a.data.data.customer_file_s,e.customer_file_s_map=e.$array2map(e.customer_file_s),e.handover_status=a.data.data.handover_status,e.handover_status_map=e.$array2map(e.handover_status),e.file_connect_type=a.data.data.file_connect_type,e.file_connect_type_map=e.$array2map(e.file_connect_type),e.connect_plan=a.data.data.connect_plan,e.connect_plan_map=e.$array2map(e.connect_plan),t()})})},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.get_data()},reset:function(){this.page=1,this.seacrhFormInline.receiver_realname=\"\",this.seacrhFormInline.applicant_realname=\"\",this.seacrhFormInline.companyname=\"\",this.get_data()},create_request:function(){this.$bus.emit(\"OPEN_CREATE_REQUEST_FILE\",!0)},create_file:function(){this.$bus.emit(\"OPEN_CREATE_RESOURE_FILE\",!0)},confirm_request:function(){this.selectRow?this.$bus.emit(\"OPEN_CONFIRM_FILE\",this.selectRow):this.$Message.warning(\"请选择一行进行处理！\")},select_row:function(e){this.selectRow=e}},created:function(){var e=this;this.get_data_center().then(function(){e.get_data()}),this.$bus.on(\"HANDOVER_FILE_UPDATE\",function(t){e.get_data()})}},D=Object(i.a)(W,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"applicant_realname\",label:\"申请人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.applicant_realname,callback:function(t){e.$set(e.seacrhFormInline,\"applicant_realname\",t)},expression:\"seacrhFormInline.applicant_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"receiver_realname\",label:\"接收人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.receiver_realname,callback:function(t){e.$set(e.seacrhFormInline,\"receiver_realname\",t)},expression:\"seacrhFormInline.receiver_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.companyname,callback:function(t){e.$set(e.seacrhFormInline,\"companyname\",t)},expression:\"seacrhFormInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.open_detail,\"on-current-change\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"协商明细\",width:\"800\"},model:{value:e.openRequest,callback:function(t){e.openRequest=t},expression:\"openRequest\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.requestHeader,data:e.requestData}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);D.options.__file=\"finish.vue\";var N=D.exports,L={data:function(){var e=this;return{customer_file_s:[],customer_file_s_map:new Map,handover_status:[],handover_status_map:new Map,file_connect_type:[],file_connect_type_map:new Map,connect_plan:[],connect_plan_map:new Map,openRequest:!1,requestHeader:[{title:\"状态\",key:\"status\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:150},{title:\"操作人\",key:\"operator_name\",minWidth:150},{title:\"备注\",key:\"memo\",minWidth:200}],requestData:[],detailApplicantRealname:\"\",detailReceiverRealname:\"\",fileHeader:[{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120},{title:\"存放部门\",key:\"departname\",minWidth:120},{title:\"存放地点\",key:\"storage\",minWidth:120},{title:\"存放位置\",key:\"storage_code\",minWidth:120}],fileData:[],openDetail:!1,search_model:\"\",loading:!1,selectRow:\"\",seacrhFormInline:{receiver_realname:\"\",applicant_realname:\"\",companyname:\"\"},page:1,pageSize:10,total:0,data:[],header:[{title:\"申请人\",key:\"applicant_name\",minWidth:120},{title:\"接收人\",key:\"receiver_name\",minWidth:120},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"申请备注\",key:\"application_memo\",minWidth:120},{title:\"申请时间\",key:\"createdate\",minWidth:200},{title:\"交接方式\",key:\"connect_plan\",minWidth:90},{title:\"交接类型\",key:\"connect_type\",minWidth:90},{title:\"申请状态\",key:\"status\",minWidth:120},{title:\"操作\",key:\"action\",minWidth:180,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_detail(a.row)}}},\"[查看详情]\"),t(\"Button\",{props:{type:\"text\",size:\"small\",disabled:!(\"出库\"==a.row.connect_type)},on:{click:function(){e.send_customer_msg(a.row.id)}}},\"[微信推送]\")])}}]}},methods:{open_detail:function(e){this.$bus.emit(\"OPEN_HANDOVER_DETAIL\",e.id)},open_request:function(e){var t=this,a={params:{connect_request_id:e,sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/course/list\",a,function(e){t.requestData=e.data.data,t.openRequest=!0;for(var a=0;a<t.requestData.length;a++);})},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,applicant_realname:e.seacrhFormInline.applicant_realname,receiver_realname:e.seacrhFormInline.receiver_realname,companyname:e.seacrhFormInline.companyname,application_status:\"normal\",sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1;for(var a=0;a<e.data.length;a++)e.data[a].createdate=e.data[a].createdate.slice(0,10),e.data[a].status=e.handover_status_map.get(e.data[a].application_status),e.data[a].connect_plan=e.connect_plan_map.get(e.data[a].connect_plan),e.data[a].connect_type=e.file_connect_type_map.get(e.data[a].connect_type)})},get_data_center:function(){var e=this;return new Promise(function(t,a){e.$GetDataCenter(\"customer_file_s,handover_status,file_connect_type,connect_plan\",function(a){e.customer_file_s=a.data.data.customer_file_s,e.customer_file_s_map=e.$array2map(e.customer_file_s),e.handover_status=a.data.data.handover_status,e.handover_status_map=e.$array2map(e.handover_status),e.file_connect_type=a.data.data.file_connect_type,e.file_connect_type_map=e.$array2map(e.file_connect_type),e.connect_plan=a.data.data.connect_plan,e.connect_plan_map=e.$array2map(e.connect_plan),t()})})},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.get_data()},reset:function(){this.page=1,this.seacrhFormInline.receiver_realname=\"\",this.seacrhFormInline.applicant_realname=\"\",this.seacrhFormInline.companyname=\"\",this.get_data()},create_request:function(){this.$bus.emit(\"OPEN_CREATE_REQUEST_FILE\",!0)},create_file:function(){this.$bus.emit(\"OPEN_CREATE_RESOURE_FILE\",!0)},create_out:function(){this.$bus.emit(\"OPEN_CREATE_OUT_FILE\",!0)},confirm_request:function(){this.selectRow?this.$bus.emit(\"OPEN_CONFIRM_FILE\",this.selectRow):this.$Message.warning(\"请选择一行进行处理！\")},select_row:function(e){this.selectRow=e},send_customer_msg:function(e){var t=this,a={connectRequestId:e};this.$Post(\"api/customer/file/connect/request/customer/send\",a,function(e){t.$Message.success(\"推送发送成功！\")},function(e){t.$Message.error(\"推送发送失败！\")})}},created:function(){var e=this;this.get_data_center().then(function(){e.get_data()}),this.$bus.on(\"HANDOVER_FILE_UPDATE\",function(t){e.get_data()})}},O=Object(i.a)(L,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"applicant_realname\",label:\"申请人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.applicant_realname,callback:function(t){e.$set(e.seacrhFormInline,\"applicant_realname\",t)},expression:\"seacrhFormInline.applicant_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"receiver_realname\",label:\"接收人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.receiver_realname,callback:function(t){e.$set(e.seacrhFormInline,\"receiver_realname\",t)},expression:\"seacrhFormInline.receiver_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.companyname,callback:function(t){e.$set(e.seacrhFormInline,\"companyname\",t)},expression:\"seacrhFormInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_file}},[e._v(\"交接入库\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_request}},[e._v(\"内部交接\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_out}},[e._v(\"交接客户\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.confirm_request}},[e._v(\"交接处理\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.open_detail,\"on-current-change\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"协商明细\",width:\"800\"},model:{value:e.openRequest,callback:function(t){e.openRequest=t},expression:\"openRequest\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.requestHeader,data:e.requestData}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);O.options.__file=\"normal.vue\";var T=O.exports,P={data:function(){var e=this;return{customer_file_s:[],customer_file_s_map:new Map,handover_status:[],handover_status_map:new Map,file_connect_type:[],file_connect_type_map:new Map,connect_plan:[],connect_plan_map:new Map,openRequest:!1,requestHeader:[{title:\"状态\",key:\"status\",minWidth:120},{title:\"创建时间\",key:\"createdate\",minWidth:150},{title:\"操作人\",key:\"operator_name\",minWidth:150},{title:\"备注\",key:\"memo\",minWidth:200}],requestData:[],detailApplicantRealname:\"\",detailReceiverRealname:\"\",fileHeader:[{title:\"资料名称\",key:\"customer_file_name\",minWidth:150},{title:\"所属公司\",key:\"companyname\",minWidth:200},{title:\"客户名称\",key:\"name\",minWidth:150},{title:\"文件数量\",key:\"file_num\",minWidth:120},{title:\"交接数量\",key:\"connect_num\",minWidth:120},{title:\"存放部门\",key:\"departname\",minWidth:120},{title:\"存放地点\",key:\"storage\",minWidth:120},{title:\"存放位置\",key:\"storage_code\",minWidth:120}],fileData:[],openDetail:!1,search_model:\"\",loading:!1,selectRow:\"\",seacrhFormInline:{receiver_realname:\"\",applicant_realname:\"\",companyname:\"\"},page:1,pageSize:10,total:0,data:[],header:[{title:\"申请人\",key:\"applicant_name\",minWidth:120},{title:\"接收人\",key:\"receiver_name\",minWidth:120},{title:\"归属公司\",key:\"companyname\",minWidth:200},{title:\"申请备注\",key:\"application_memo\",minWidth:120},{title:\"申请时间\",key:\"createdate\",minWidth:200},{title:\"交接方式\",key:\"connect_plan\",minWidth:90},{title:\"交接类型\",key:\"connect_type\",minWidth:90},{title:\"申请状态\",key:\"status\",minWidth:120},{title:\"操作\",key:\"action\",minWidth:250,render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_detail(a.row)}}},\"[查看详情]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.open_request(a.row.id)}}},\"[协商记录]\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){e.cancel_request(a.row.id)}}},\"[取消交接]\")])}}]}},methods:{open_detail:function(e){this.$bus.emit(\"OPEN_HANDOVER_DETAIL\",e.id)},open_request:function(e){var t=this,a={params:{connect_request_id:e,sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/course/list\",a,function(e){t.requestData=e.data.data,t.openRequest=!0;for(var a=0;a<t.requestData.length;a++)\"Y\"==t.requestData[a].status?t.requestData[a].status=\"通过\":t.requestData[a].status=\"拒绝\"})},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,applicant_realname:e.seacrhFormInline.applicant_realname,receiver_realname:e.seacrhFormInline.receiver_realname,companyname:e.seacrhFormInline.companyname,application_status:\"reject\",sortField:\"id\"}};this.$Get(\"api/customer/file/connect/request/list\",t,function(t){e.total=t.data.data.total,e.data=t.data.data.rows,e.loading=!1;for(var a=0;a<e.data.length;a++)e.data[a].createdate=e.data[a].createdate.slice(0,10),e.data[a].status=e.handover_status_map.get(e.data[a].application_status),e.data[a].connect_plan=e.connect_plan_map.get(e.data[a].connect_plan),e.data[a].connect_type=e.file_connect_type_map.get(e.data[a].connect_type)})},get_data_center:function(){var e=this;return new Promise(function(t,a){e.$GetDataCenter(\"customer_file_s,handover_status,file_connect_type,connect_plan\",function(a){e.customer_file_s=a.data.data.customer_file_s,e.customer_file_s_map=e.$array2map(e.customer_file_s),e.handover_status=a.data.data.handover_status,e.handover_status_map=e.$array2map(e.handover_status),e.file_connect_type=a.data.data.file_connect_type,e.file_connect_type_map=e.$array2map(e.file_connect_type),e.connect_plan=a.data.data.connect_plan,e.connect_plan_map=e.$array2map(e.connect_plan),t()})})},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.get_data()},reset:function(){this.page=1,this.seacrhFormInline.receiver_realname=\"\",this.seacrhFormInline.applicant_realname=\"\",this.seacrhFormInline.companyname=\"\",this.get_data()},create_file:function(){this.selectRow?this.$bus.emit(\"OPEN_UPDATE_RESOURE_FILE\",this.selectRow):this.$Message.warning(\"请选择一行进行处理！\")},select_row:function(e){this.selectRow=e},cancel_request:function(e){var t=this,a={connectRequestId:e};this.$Post(\"api/customer/file/connect/request/cancel\",a,function(e){t.get_data()},function(e){})}},created:function(){var e=this;this.get_data_center().then(function(){e.get_data()}),this.$bus.on(\"HANDOVER_FILE_UPDATE\",function(t){e.get_data()})}},V=Object(i.a)(P,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                筛选\\n                    \"),e._v(\" \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:e.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"applicant_realname\",label:\"申请人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.applicant_realname,callback:function(t){e.$set(e.seacrhFormInline,\"applicant_realname\",t)},expression:\"seacrhFormInline.applicant_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"receiver_realname\",label:\"接收人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.receiver_realname,callback:function(t){e.$set(e.seacrhFormInline,\"receiver_realname\",t)},expression:\"seacrhFormInline.receiver_realname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"归属公司：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:e.seacrhFormInline.companyname,callback:function(t){e.$set(e.seacrhFormInline,\"companyname\",t)},expression:\"seacrhFormInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.create_file}},[e._v(\"重新提交\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:e.loading,columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.open_detail,\"on-current-change\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"协商明细\",width:\"800\"},model:{value:e.openRequest,callback:function(t){e.openRequest=t},expression:\"openRequest\"}},[a(\"Row\",{attrs:{gutter:20}},[a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.requestHeader,data:e.requestData}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);V.options.__file=\"reject.vue\";var z=V.exports,A=a(109),M=a.n(A),B={data:function(){return{qrcode2Open:!1}},methods:{get_code:function(e){document.getElementById(\"qrcode2\").innerHTML=\"\";new M.a(\"qrcode2\",{text:e,width:200,height:200,colorDark:\"#000000\",colorLight:\"#ffffff\",correctLevel:M.a.CorrectLevel.H})},get_url:function(e){var t=this,a={params:{connectRequestId:e}};this.$Get(\"api/customer/file/connect/request/customer/qr\",a,function(e){t.get_code(e.data.data)})}},mounted:function(){var e=this;e.$bus.on(\"OPEN_INNER_QCODER\",function(t){e.qrcode2Open=!0;e.get_code(\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx7666e5cbbd22b505&redirect_uri=http://cloud.zgcfo.com/api/system/apiWechatQuickOfficeAuthLogin&response_type=code&scope=SCOPE&agentid=1000013&state=STATE#wechat_redirect\")}),e.$bus.on(\"OPEN_OUTER_QCODER\",function(t){e.qrcode2Open=!0,e.get_url(t)})}},H=Object(i.a)(B,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Modal\",{attrs:{title:\"交接二维码\"},model:{value:e.qrcode2Open,callback:function(t){e.qrcode2Open=t},expression:\"qrcode2Open\"}},[a(\"center\",[a(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},[e._v(\"请接收人扫描下方二维码确认\")]),e._v(\" \"),a(\"div\",{attrs:{id:\"qrcode2\"}})]),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)},[],!1,null,null,null);H.options.__file=\"QCode.vue\";var G={name:\"handovermanagement_index\",components:{handOverDetail:l,createRequest:f,createFile:y,comfirmFile:I,createOut:F,all:S,finish:N,normal:T,reject:z,updateReq:C,qCode:H.exports},data:function(){return{}},methods:{get_data:function(){}},created:function(){}},U=Object(i.a)(G,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"1\"}},[a(\"TabPane\",{attrs:{label:\"未处理\",name:\"1\"}},[a(\"normal\")],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已接收\",name:\"2\"}},[a(\"finish\")],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已拒绝\",name:\"3\"}},[a(\"reject\")],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"全部\",name:\"4\"}},[a(\"all\")],1)],1),e._v(\" \"),a(\"hand-over-detail\"),e._v(\" \"),a(\"create-request\"),e._v(\" \"),a(\"create-file\"),e._v(\" \"),a(\"comfirm-file\"),e._v(\" \"),a(\"create-out\"),e._v(\" \"),a(\"update-req\"),e._v(\" \"),a(\"q-code\")],1)},[],!1,null,null,null);U.options.__file=\"index.vue\";t.default=U.exports}}]);"}