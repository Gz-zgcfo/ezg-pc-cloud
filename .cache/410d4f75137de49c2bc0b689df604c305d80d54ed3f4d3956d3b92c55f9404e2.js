{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{487:function(t,e,a){},488:function(t,e,a){},489:function(t,e,a){},490:function(t,e,a){},491:function(t,e,a){},790:function(t,e,a){\"use strict\";var r=a(487);a.n(r).a},792:function(t,e,a){\"use strict\";var r=a(488);a.n(r).a},794:function(t,e,a){\"use strict\";var r=a(489);a.n(r).a},796:function(t,e,a){\"use strict\";var r=a(490);a.n(r).a},798:function(t,e,a){\"use strict\";var r=a(491);a.n(r).a},806:function(t,e,a){\"use strict\";a.r(e);var r={props:{cluesources:{type:Array},customerrating:{type:Array},area:{type:Array},sf_yn:{type:Array},importance:{type:Array},customerTypes_Casr:{type:Array},customer:{type:[Array,Object,String]}},data:function(){return{loading:!1,LabelArray:[],allLabel:[],ChannelType:[],isOpenEdit:!1,formValidate:{id:\"\",NAME:\"\",TEL:\"\",fixedPhone:\"\",qq:\"\",weixin:\"\",ADDRESS:\"\",customerType:[],customersource:\"\",importlevel:\"\",AREA:\"\",issends:\"   \",customerlabel:[],createdate:\"\",updatedate:\"\",gxr:\"\",backup:\"\",sourcesubdivision:\"\",isbound:\"\",email:\"\",channelsource:\"\",channel_type_id:\"\",recCustomer:\"\",importance:\"\",labels:[]},ruleValidate:{}}},methods:{get_data:function(t){var a=this,e={params:{id:t}};this.$Get(\"/api/customer/detail\",e,function(t){if(a.formValidate=t.data.data,a.formValidate.customerType&&(a.formValidate.customerType=a.formValidate.customerType.split(\"-\"),a.formValidate.customerType[0]=parseInt(a.formValidate.customerType[0]),a.formValidate.customerType[1]=parseInt(a.formValidate.customerType[1])),a.formValidate.importlevel&&(a.formValidate.importlevel=\"\"+a.formValidate.importlevel),a.formValidate.labels){a.formValidate.labels=a.formValidate.labels.split(\",\");for(var e=0;e<a.formValidate.labels.length;e++)a.formValidate.labels[e]=parseInt(a.formValidate.labels[e])}a.$emit(\"cancel-loading\",!0)},function(t){a.$Message.error(\"对不起，你选择的客户暂时没有找到相关信息，请确认后重试！2秒后页面将关闭！\"),setTimeout(function(){a.$store.commit(\"close_gobal_customer_detail_modal\")},2e3)})},get_channel_type:function(){var a=this,r=this,o={};return new Promise(function(e,t){a.$Get(\"api/channel/type/queryUserChannel?type=xs\",o,function(t){r.ChannelType=t.data.data,e()})})},get_all_label:function(){var a=this,r=this,o={};return new Promise(function(e,t){a.$Get(\"api/system/label/list?page=1&pageSize=100\",o,function(t){r.allLabel=t.data.data.rows,e()})})}},created:function(){var t=this;Promise.all([this.get_channel_type(),this.get_all_label()]).then(function(){t.get_data(t.customer.ID)})},watch:{}},o=a(4),s=Object(o.a)(r,function(){var a=this,t=a.$createElement,r=a._self._c||t;return r(\"div\",[r(\"Form\",{ref:\"formValidate\",attrs:{rules:a.ruleValidate,model:a.formValidate,\"label-width\":80}},[r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"姓名\",prop:\"NAME\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.NAME,callback:function(t){a.$set(a.formValidate,\"NAME\",t)},expression:\"formValidate.NAME\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"电话\",prop:\"TEL\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.TEL,callback:function(t){a.$set(a.formValidate,\"TEL\",t)},expression:\"formValidate.TEL\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"固话\",prop:\"fixedPhone\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.fixedPhone,callback:function(t){a.$set(a.formValidate,\"fixedPhone\",t)},expression:\"formValidate.fixedPhone\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"QQ\",prop:\"qq\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.qq,callback:function(t){a.$set(a.formValidate,\"qq\",t)},expression:\"formValidate.qq\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"微信\",prop:\"weixin\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.weixin,callback:function(t){a.$set(a.formValidate,\"weixin\",t)},expression:\"formValidate.weixin\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"邮箱\",prop:\"email\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.email,callback:function(t){a.$set(a.formValidate,\"email\",t)},expression:\"formValidate.email\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"服务地址\",prop:\"ADDRESS\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidate.ADDRESS,callback:function(t){a.$set(a.formValidate,\"ADDRESS\",t)},expression:\"formValidate.ADDRESS\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户状态\",prop:\"customerType\"}},[r(\"Cascader\",{attrs:{trigger:\"hover\",data:a.customerTypes_Casr,disabled:\"\"},model:{value:a.formValidate.customerType,callback:function(t){a.$set(a.formValidate,\"customerType\",t)},expression:\"formValidate.customerType\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户来源\",prop:\"customersource\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.customersource,callback:function(t){a.$set(a.formValidate,\"customersource\",t)},expression:\"formValidate.customersource\"}},a._l(a.cluesources,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1),a._v(\" \"),\"xzqd\"==a.formValidate.customersource?r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"渠道名称\",prop:\"channel_type_id\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.channel_type_id,callback:function(t){a.$set(a.formValidate,\"channel_type_id\",t)},expression:\"formValidate.channel_type_id\"}},a._l(a.ChannelType,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.id}},[a._v(a._s(t.channel_type_name))])}),1)],1):a._e(),a._v(\" \"),\"khtj\"==a.formValidate.customersource?r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"推荐客户\",prop:\"rec_customer\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":a.getCustomer},model:{value:a.formValidate.rec_customer,callback:function(t){a.$set(a.formValidate,\"rec_customer\",t)},expression:\"formValidate.rec_customer\"}})],1):a._e(),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"客户等级\",prop:\"importlevel\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.importlevel,callback:function(t){a.$set(a.formValidate,\"importlevel\",t)},expression:\"formValidate.importlevel\"}},a._l(a.customerrating,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"重要性\",prop:\"importance\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.importance,callback:function(t){a.$set(a.formValidate,\"importance\",t)},expression:\"formValidate.importance\"}},a._l(a.importance,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"区域\",prop:\"AREA\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.AREA,callback:function(t){a.$set(a.formValidate,\"AREA\",t)},expression:\"formValidate.AREA\"}},a._l(a.area,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"发送短信\",prop:\"issends\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:a.formValidate.issends,callback:function(t){a.$set(a.formValidate,\"issends\",t)},expression:\"formValidate.issends\"}},a._l(a.sf_yn,function(t){return r(\"Option\",{key:t.id,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"标签\",prop:\"customerlabelTags\"}},a._l(a.LabelArray,function(t,e){return r(\"Tag\",{key:e,attrs:{name:e}},[a._v(a._s(t.labelName))])}),1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"创建时间\",prop:\"CREATEDATE\"}},[r(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:a.formValidate.CREATEDATE,callback:function(t){a.$set(a.formValidate,\"CREATEDATE\",t)},expression:\"formValidate.CREATEDATE\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{label:\"更新时间\",prop:\"updatedate\"}},[r(\"Input\",{attrs:{readonly:\"\",size:\"small\"},model:{value:a.formValidate.updatedate,callback:function(t){a.$set(a.formValidate,\"updatedate\",t)},expression:\"formValidate.updatedate\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{label:\"备注\",prop:\"backup\"}},[r(\"Input\",{attrs:{size:\"small\",type:\"textarea\",readonly:\"\"},model:{value:a.formValidate.backup,callback:function(t){a.$set(a.formValidate,\"backup\",t)},expression:\"formValidate.backup\"}})],1),a._v(\" \"),r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"0px\"}})],1)],1)},[],!1,null,null,null);s.options.__file=\"edit.vue\";var n=s.exports,l={data:function(){return{data:[],header:[{title:\"变更前公司名称\",key:\"oldValue\",minWidth:160},{title:\"变更后公司名称\",key:\"newValue\",minWidth:160},{title:\"修改时间\",key:\"updateDate\",minWidth:160},{title:\"操作人员\",key:\"realname\",minWidth:160}],loading:!1,openComNameLog:!1}},methods:{get_data:function(t){var e=this;e.loading=!0;var a={params:{companyid:t,page:1,pageSize:100,sortField:\"updateDate\"}};this.$Get(\"api/customer/company/companyNameChangeLogList\",a,function(t){e.data=t.data.data.rows,e.loading=!1})}},created:function(){var e=this;this.$bus.off(\"SHOW_OPEN_COMPANY_LOG\",!0),this.$bus.on(\"SHOW_OPEN_COMPANY_LOG\",function(t){e.get_data(t),e.openComNameLog=!0})}},i=Object(o.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{width:\"680\",title:\"公司名称变更日志\"},model:{value:e.openComNameLog,callback:function(t){e.openComNameLog=t},expression:\"openComNameLog\"}},[a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,loading:e.loading,data:e.data}})],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);i.options.__file=\"changeLog.vue\";var c={components:{changeLog:i.exports},props:{customer:{type:[Array,Object,String]},importance:{type:Array},cluesources:{type:Array}},data:function(){var a=this;return{loading:!1,close:!1,header:[{title:\"序号\",type:\"index\",width:60,align:\"center\"},{title:\"公司名称\",minWidth:250,render:function(t,e){return\"\"==e.row.companyname||null==e.row.companyname?\"\":15<e.row.companyname.length?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.companyname.slice(0,15)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.companyname)])]):t(\"span\",e.row.companyname)}},{title:\"跟进销售\",key:\"followby\",minWidth:100},{title:\"交易状态\",key:\"enterprisestatusText\",minWidth:100},{title:\"法人\",key:\"legalrepresentative\",minWidth:100},{title:\"重要等级\",key:\"importlevelText\",minWidth:100},{title:\"创建人\",key:\"createby\",minWidth:100},{title:\"企业来源\",key:\"cluesourceText\",minWidth:150},{title:\"操作\",key:\"action\",minWidth:250,align:\"center\",render:function(t,e){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\",disabled:\"readonly\"==e.row.status},style:{marginRight:\"5px\"},on:{click:function(){a.$bus.emit(\"OPEN_COMPANY_UPDATE\",e.row)}}},\"编辑\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){a.edit(e)}}},\"工商信息\"),t(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){a.get_company_name_change_log(e.row.id)}}},\"名称变更日志\")])}}],data:[],companyarea_Casr:[],taxtype:[]}},methods:{get_data:function(t){var e=this;e.loading=!0;var a=\"api/customer/findCompanysByCustomerId/\"+t;this.$Get(a,{},function(t){e.data=t.data.data,e.loading=!1})},get_data_center:function(){var e=this;this.$GetDataCenter(\"companyarea,taxtype\",function(t){e.companyarea_Casr=e.$changeCars(t.data.data.companyarea),e.taxtype=t.data.data.taxtype,e.close=!0})},get_company_name_change_log:function(t){this.$bus.emit(\"SHOW_OPEN_COMPANY_LOG\",t)}},created:function(){this.get_data_center(),this.get_data(this.customer.ID)}},d=Object(o.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{loading:t.loading,border:\"\",size:\"small\",columns:t.header,data:t.data}}),t._v(\" \"),a(\"change-log\")],1)},[],!1,null,null,null);d.options.__file=\"index.vue\";var p=d.exports,m={props:{row:Object},filters:{DateFormat:function(t){if(t)return t.slice(0,10)}}},u=(a(790),Object(o.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"订单号: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.ordercode))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"开始时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.ServiceStart)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务部门: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.departname))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务人: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.servername))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"状态: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.workOrderStatus))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"创建时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.CreateDate)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"更新时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"14\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.UpdateDate)))])])],1)],1)],1)},[],!1,null,\"43d48a21\",null));u.options.__file=\"oneExpandRow.vue\";var _=u.exports,f={props:{workOrderStatus:{type:Map},departname:{type:String},customer:{type:[String,Object,Array]}},data:function(){return{loading:!1,header:[{type:\"expand\",width:50,render:function(t,e){return t(_,{props:{row:e.row}})}},{title:\"公司\",key:\"companyname\"},{title:\"产品名称\",key:\"product\"},{title:\"当前进度\",key:\"CurrentProcess\"}],data:[]}},methods:{open_expand:function(t,e){1==this.data[e]._expanded?this.$set(this.data[e],\"_expanded\",!1):this.$set(this.data[e],\"_expanded\",!0)},get_data:function(t,e){var o=this;o.loading=!0;var a={params:{page:1,pageSize:1e3,sortField:\"UpdateDate\",nonWorkOrderStatus:60,customerId:t,serviceDept:e,iscycle:\"N\"}};this.$Get(\"api/order/workOrderList\",a,function(t){var e=t.data.data.rows;o.data=[];for(var a=0;a<e.length;a++){var r={};r.CreateDate=e[a].CreateDate,r.CurrentProcess=e[a].CurrentProcess,r.IsOver=e[a].IsOver,r.IsShared=e[a].IsShared,r.IsWork=e[a].IsWork,r.ServiceDeptID=e[a].ServiceDeptID,r.ServiceEnd=e[a].ServiceEnd,r.ServiceStart=e[a].ServiceStart,r.UpdateDate=e[a].UpdateDate,r.companyname=e[a].companyname,r.followname=e[a].followname,r.id=e[a].id,r.name=e[a].name,r.ordercode=e[a].ordercode,r.product=e[a].product,r.resumeFlag=e[a].resumeFlag,r.resumeMsg=e[a].resumeMsg,r.servername=e[a].servername,r.tel=e[a].tel,r.departname=e[a].departname,r.workOrderStatus=o.workOrderStatus.get(e[a].workOrderStatus),r._expanded=!1,o.data.push(r)}o.loading=!1})}},mounted:function(){this.get_data(this.customer.ID,this.departname)}},v=Object(o.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",border:\"\",loading:t.loading,columns:t.header,data:t.data,\"no-data-text\":\"该客户暂无服务中的工单！\"},on:{\"on-row-click\":t.open_expand}})],1)},[],!1,null,null,null);v.options.__file=\"oneOffService.vue\";var y=v.exports,g={props:{row:Object},filters:{DateFormat:function(t){if(t)return t.slice(0,10)}}},h=(a(792),Object(o.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"订单号: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.ordercode))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"开始时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.account_begin_time)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务部门: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.departname))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"服务会计: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.server_realname))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"累计外勤数量: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t.row.legwork_valid_num))])])],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"创建时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.createdate)))])])],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-key\"},[t._v(\"更新时间: \")])]),t._v(\" \"),a(\"Col\",{attrs:{span:\"10\"}},[a(\"span\",{staticClass:\"expand-value\"},[t._v(t._s(t._f(\"DateFormat\")(t.row.updatedate)))])])],1)],1)],1)},[],!1,null,\"fa9e57f2\",null));h.options.__file=\"cycleExpandRow.vue\";var b=h.exports,w={props:{customer:{type:[String,Object,Array]}},data:function(){return{loading:!1,header:[{type:\"expand\",width:50,render:function(t,e){return t(b,{props:{row:e.row}})}},{title:\"公司\",key:\"CompanyName\"},{title:\"产品名称\",key:\"product\"},{title:\"截止税期\",key:\"end_period\"}],data:[]}},methods:{open_expand:function(t,e){1==this.data[e]._expanded?this.$set(this.data[e],\"_expanded\",!1):this.$set(this.data[e],\"_expanded\",!0)},get_data:function(t){var o=this;o.loading=!0;var e={params:{page:1,pageSize:100,un_service_status:\"stop\",customerid:t}};this.$Get(\"api/order/cycle/service/record/list\",e,function(t){var e=t.data.data.rows;o.data=[];for(var a=0;a<e.length;a++){var r={};r.id=e[a].id,r.CompanyName=e[a].CompanyName,r.product=e[a].product,r.end_period=e[a].end_period,r.ordercode=e[a].ordercode,r.account_begin_time=e[a].account_begin_time,r.departname=e[a].departname,r.server_realname=e[a].server_realname,r.accmanager_realname=e[a].accmanager_realname,r.balance_count=e[a].balance_count,r.createdate=e[a].createdate,r.updatedate=e[a].updatedate,r.service_time=e[a].service_time,r.legwork_valid_num=e[a].legwork_valid_num,r._expanded=!1,o.data.push(r)}o.loading=!1})}},mounted:function(){this.get_data(this.customer.ID)}},x=Object(o.a)(w,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",border:\"\",loading:t.loading,columns:t.header,data:t.data,\"no-data-text\":\"该客户未开通记账服务！\"},on:{\"on-row-click\":t.open_expand}})],1)},[],!1,null,null,null);x.options.__file=\"cycleService.vue\";var k=x.exports,C={props:{customer:{type:[String,Object,Array]}},components:{oneOffService:y,cycleService:k},data:function(){return{loading:!0,openTabPane:\"account\",workOrderStatus_map:new Map}},methods:{getDataCenter:function(){var e=this;this.$GetDataCenter(\"workOrderStatus\",function(t){e.workOrderStatus_map=e.$array2map(t.data.data.workOrderStatus),e.loading=!1})}},created:function(){this.getDataCenter()}},S=Object(o.a)(C,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.loading?e._e():a(\"Tabs\",{model:{value:e.openTabPane,callback:function(t){e.openTabPane=t},expression:\"openTabPane\"}},[a(\"TabPane\",{attrs:{label:\"会计服务进度\",name:\"account\"}},[a(\"cycle-service\",{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{customer:e.customer}}),e._v(\" \"),a(\"one-off-service\",{attrs:{workOrderStatus:e.workOrderStatus_map,departname:\"'ACCOUNT'\",customer:e.customer}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"商事服务进度\",name:\"commercial\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:e.workOrderStatus_map,departname:\"'BUSSINESS'\",customer:e.customer}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"企划服务进度\",name:\"plan\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:e.workOrderStatus_map,departname:\"'PLAN'\",customer:e.customer}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"审计服务进度\",name:\"aduit\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:e.workOrderStatus_map,departname:\"'ADUIT'\",customer:e.customer}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"行政服务进度\",name:\"administration\"}},[a(\"one-off-service\",{attrs:{workOrderStatus:e.workOrderStatus_map,departname:\"'EXECUTIVE'\",customer:e.customer}})],1)],1)],1)},[],!1,null,null,null);S.options.__file=\"index.vue\";var D=S.exports,I=a(114),O={data:function(){return{openAllDetail:!1,fiedDetail:{clocktime:\"\",endtime:\"\",fieldlength:\"\",assiststatus:\"\",clockshows:\"\",address1:\"\",address2:\"\",remark:\"\",imgs:[]}}},methods:{get_data:function(t){var r=this,e={params:{followRecordId:t}};this.$Get(\"api/customer/follow/record/detail\",e,function(t){if(t.data.data,null!=t.data.data){if(r.openAllDetail=!0,r.fiedDetail=t.data.data,t.data.data.realpaths){var e;r.fiedDetail.imgs=[],e=r.fiedDetail.realpaths.split(\",\");for(var a=0;a<e.length;a++)r.fiedDetail.imgs.push(e[a])}}else r.$Message.warning(\"暂无数据！\")})}},created:function(){var e=this;this.$bus.on(\"SHOW_OPEN_CUSTOMER_FOLLOW_FIELD\",function(t){e.openAllDetail=!0,e.get_data(t)})}},V=Object(o.a)(O,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看外勤详情\",width:\"600\"},model:{value:e.openAllDetail,callback:function(t){e.openAllDetail=t},expression:\"openAllDetail\"}},[a(\"Form\",{ref:\"fiedDetail\",attrs:{model:e.fiedDetail,\"label-width\":120}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"clocktime\",label:\"上门时间：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.clocktime,callback:function(t){e.$set(e.fiedDetail,\"clocktime\",t)},expression:\"fiedDetail.clocktime\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"endtime\",label:\"离开时间：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.endtime,callback:function(t){e.$set(e.fiedDetail,\"endtime\",t)},expression:\"fiedDetail.endtime\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"fieldlength\",label:\"外勤时长：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.fieldlength,callback:function(t){e.$set(e.fiedDetail,\"fieldlength\",t)},expression:\"fiedDetail.fieldlength\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"assiststatus\",label:\"外勤类型：\"}},[a(\"Select\",{attrs:{type:\"text\",disabled:\"\"},model:{value:e.fiedDetail.assiststatus,callback:function(t){e.$set(e.fiedDetail,\"assiststatus\",t)},expression:\"fiedDetail.assiststatus\"}},[a(\"Option\",{attrs:{value:\"N\"}},[e._v(\"非协助外勤\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"Y\"}},[e._v(\"协助外勤\")])],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"clockshows\",label:\"打卡说明：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.clockshows,callback:function(t){e.$set(e.fiedDetail,\"clockshows\",t)},expression:\"fiedDetail.clockshows\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"address1\",label:\"第一次打卡地址：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.address1,callback:function(t){e.$set(e.fiedDetail,\"address1\",t)},expression:\"fiedDetail.address1\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"address2\",label:\"第二次打卡地址：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.fiedDetail.address2,callback:function(t){e.$set(e.fiedDetail,\"address2\",t)},expression:\"fiedDetail.address2\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"22\"}},[a(\"FormItem\",{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{prop:\"remark\",label:\"备注总结：\"}},[a(\"Input\",{attrs:{type:\"textarea\",readonly:\"\"},model:{value:e.fiedDetail.remark,callback:function(t){e.$set(e.fiedDetail,\"remark\",t)},expression:\"fiedDetail.remark\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{staticStyle:{visibility:\"hidden\"},attrs:{span:\"1\"}},[e._v(\"1\")]),e._v(\" \"),a(\"Col\",{attrs:{span:\"11\"}},[a(\"FormItem\",{staticStyle:{margin:\"5px\"},attrs:{prop:\"Providentfund\",label:\"附件：\",readonly:\"\"}},e._l(e.fiedDetail.imgs,function(t,e){return a(\"Row\",{key:e},[a(\"a\",{attrs:{target:\"_blank\",href:\"/api/assets/\"+t}},[a(\"img\",{attrs:{src:\"/api/assets/\"+t,alt:\"\",width:\"100\",height:\"100\"}})])])}),1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);V.options.__file=\"fieldDetail.vue\";var T=V.exports,$={props:{customer:{type:[Object,Array,String]}},components:{followField:T},data:function(){return{currentIndex:-1,pinglun:[],markert_follow_up_type:[],market_status:[],footer:!1,followList:[],spinShow:!1,currentName:\"\",onlyMarket:\"\",single:!1}},methods:{get_data_center:function(){var a=this,r=this;return new Promise(function(e,t){a.$GetDataCenter(\"markert_follow_up_type,market_status\",function(t){r.markert_follow_up_type=t.data.data.markert_follow_up_type,r.market_status=t.data.data.market_status,e()})})},get_data:function(t){var m=this,e={};e=m.single?{params:{customerId:t,followUpType:\"11,12,13,14,15\"}}:{params:{customerId:t}},m.spinShow=!0,this.$Get(\"api/customer/findCustomerContentById\",e,function(t){m.followList=t.data.data;for(var e=0;e<m.followList.length;e++){if(null!=m.followList[e].imgurls){for(var a=[],r=m.followList[e].imgurls.split(\",\"),o=0;o<r.length;o++){var s={url:\"\",type:\"\"};s.url=\"api/assets/\"+r[o].split(\"``\")[1],s.type=s.url.split(\".\")[1],\"doc\"==s.type||\"docx\"==s.type?s.url=\"http://view.officeapps.live.com/op/view.aspx?src=\"+encodeURI(\"http://cloud.zgcfo.com/\"+s.url):\"xls\"==s.type||\"xlxs\"==s.type?s.url=\"http://view.officeapps.live.com/op/view.aspx?src=\"+encodeURI(\"http://cloud.zgcfo.com/\"+s.url):\"pptx\"!=s.type&&\"ppt\"!=s.type||(s.url=\"http://view.officeapps.live.com/op/view.aspx?src=\"+encodeURI(\"http://cloud.zgcfo.com/\"+s.url)),a.push(s)}m.followList[e].imgs=a}if(m.followList[e].buttons){var n=m.followList[e].buttons.split(\",\");m.followList[e].buttonDetail=[];for(var l=0;l<n.length;l++){var i={};i.buttonsZt=n[l].split(\"``\")[3],i.buttonsdetail=n[l].split(\"``\")[2],i.buttonText=n[l].split(\"``\")[1],m.followList[e].buttonDetail.push(i)}}if(m.followList[e].evaluatecontents){var c=m.followList[e].evaluatecontents.split(\",\");m.followList[e].evaluateNum=c.length,m.followList[e].chat=[];for(var d=0;d<c.length;d++){var p={};p.content=c[d].split(\"``\")[3],p.date=c[d].split(\"``\")[2],p.name=c[d].split(\"``\")[1],m.followList[e].chat.push(p)}}else m.followList[e].evaluateNum=0,m.followList[e].chat=[]}m.spinShow=!1,m.footer=!0})},lingqu:function(t){var e=this,a=\"api\"+t.buttonsdetail;this.$Get(a,{},function(t){e.get_data(e.customer.ID)})},open_evaluate:function(t,e){this.currentIndex==e?this.currentIndex=-1:this.currentIndex=e},send:function(t,o,e){var s=this,a={bussinessid:t,evaluatecontent:s.pinglun[o],serviceranks:e};this.$Post(\"api/customer/addErevaluate\",a,function(t){var e={content:s.pinglun[o],date:Object(I.d)(new Date),name:localStorage.getItem(\"realname\")},a=s.followList[o].chat,r=a.unshift(e);s.$set(s.followList[o],\"evaluateNum\",r),s.$set(s.followList[o],\"chat\",a),s.currentIndex=-1,s.currentIndex=o,s.pinglun[o]=\"\"},function(t){})},open_create_followUp:function(){this.$bus.emit(\"OPEN_CUSTOMER_CREATE_FOLLOW_UP\",!0)},open_detail:function(t){this.$bus.emit(\"OPEN_CUSTOMER_FOLLOW_FIELD\",t)}},created:function(){var t=this;this.currentName=localStorage.getItem(\"realname\"),this.get_data_center().then(function(){t.get_data(t.customer.ID)})}},E=(a(794),Object(o.a)($,function(){var o=this,t=o.$createElement,s=o._self._c||t;return s(\"div\",[s(\"Row\",{staticStyle:{height:\"24px\"}},[s(\"Row\",[s(\"Checkbox\",{staticStyle:{float:\"right\"},on:{\"on-change\":function(t){o.get_data(o.customer.ID)}},model:{value:o.single,callback:function(t){o.single=t},expression:\"single\"}},[o._v(\"只看市场跟进\")])],1)],1),o._v(\" \"),s(\"Scroll\",{attrs:{height:\"500\"}},[o.spinShow?s(\"Spin\",{attrs:{fix:\"\"}},[s(\"Icon\",{staticClass:\"demo-spin-icon-load\",attrs:{type:\"load-c\",size:\"18\"}}),o._v(\" \"),s(\"div\",[o._v(\"加载跟进记录中...\")])],1):o._e(),o._v(\" \"),s(\"Timeline\",{staticStyle:{\"margin-top\":\"15px\",\"margin-right\":\"10px\"}},[s(\"div\",{staticClass:\"content\"},[o._l(o.followList,function(a,r){return s(\"TimelineItem\",{key:r,attrs:{color:\"blue\"}},[\"11\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-telephone\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"12\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-chatbubble\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"13\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"chatbubbles\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"14\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"android-contacts\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"15\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"gear-b\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"16\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"android-hangout\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"17\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"social-buffer\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"18\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"social-bitcoin\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"19\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"ios-lightbulb\"},slot:\"dot\"}):o._e(),o._v(\" \"),\"20\"==a.followType?s(\"Icon\",{attrs:{slot:\"dot\",type:\"android-wifi\"},slot:\"dot\"}):o._e(),o._v(\" \"),s(\"Card\",[s(\"Row\",[s(\"Col\",{attrs:{span:\"2\"}},[s(\"Avatar\",{attrs:{icon:\"person\"}})],1),o._v(\" \"),s(\"Col\",{attrs:{span:\"2\"}},[s(\"B\",{staticStyle:{\"line-height\":\"32px\"}},[o._v(o._s(a.userName))])],1),o._v(\" \"),s(\"Col\",{attrs:{span:\"5\"}},[s(\"P\",{staticStyle:{\"line-height\":\"32px\"}},[o._v(\"跟进类型： \"),s(\"span\",[o._v(o._s(a.followTypeName))])])],1),o._v(\" \"),s(\"Col\",{attrs:{span:\"15\"}},[s(\"P\",{staticStyle:{\"line-height\":\"32px\",\"text-align\":\"right\"}},[o._v(o._s(a.createDate))])],1)],1),o._v(\" \"),s(\"Row\",{staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[s(\"Col\",{attrs:{span:\"20\"}},[s(\"P\",[o._v(o._s(a.serviceContent))])],1),o._v(\" \"),\"22\"==a.followType?s(\"Col\",{attrs:{span:\"4\"}},[s(\"Button\",{staticStyle:{float:\"right\"},attrs:{type:\"primary\"},on:{click:function(t){o.open_detail(a.id)}}},[o._v(\"查看详情\")])],1):o._e()],1),o._v(\" \"),s(\"Row\",{attrs:{gutter:12}},o._l(a.imgs,function(t,e){return a.imgs?s(\"Col\",{key:e,staticStyle:{\"max-width\":\"200px\"},attrs:{span:\"8\"}},[\"doc\"==t.type||\"docx\"==t.type?s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/word.png\",alt:\"word\",width:\"95%\"}})]):\"xls\"==t.type||\"xlsx\"==t.type?s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/excel.png\",alt:\"excel\",width:\"95%\"}})]):\"pptx\"==t.type||\"ppt\"==t.type?s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/ppt.png\",alt:\"ppt\",width:\"95%\"}})]):\"txt\"==t.type?s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/txt.png\",alt:\"txt\",width:\"95%\"}})]):\"pdf\"==t.type?s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/pdf.jpg\",alt:\"txt\",width:\"95%\"}})]):s(\"a\",{attrs:{target:\"_blank\",href:t.url}},[s(\"img\",{attrs:{src:t.url,alt:\"图片\",width:\"95%\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}})])]):o._e()}),1),o._v(\" \"),\"11\"==a.followType||\"12\"==a.followType||\"13\"==a.followType?s(\"Div\",[s(\"Row\",[s(\"Col\",{attrs:{span:\"18\"}},[s(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){o.open_evaluate(a.serviceId,r)}}},[o._v(\"评价（\"+o._s(a.evaluateNum)+\"）\")])],1),o._v(\" \"),s(\"Col\",{attrs:{span:\"6\"}},[s(\"Rate\",{staticStyle:{float:\"right\"},attrs:{\"allow-half\":\"\"},model:{value:a.ranks,callback:function(t){o.$set(a,\"ranks\",t)},expression:\"item.ranks\"}})],1)],1),o._v(\" \"),o.currentIndex==r?s(\"Div\",{staticStyle:{\"margin-top\":\"10px\"}},[s(\"Row\",[s(\"Col\",{attrs:{span:\"22\"}},[s(\"Input\",{key:r,staticStyle:{width:\"99%\"},attrs:{type:\"textarea\",autosize:!0,placeholder:\"请输入您要评价的内容\"},model:{value:o.pinglun[r],callback:function(t){o.$set(o.pinglun,r,t)},expression:\"pinglun[index]\"}})],1),o._v(\" \"),s(\"Col\",{attrs:{span:\"2\"}},[s(\"Button\",{staticStyle:{float:\"right\"},attrs:{type:\"primary\"},on:{click:function(t){o.send(a.bussinessId,r,a.ranks)}}},[o._v(\"评价\")])],1)],1),o._v(\" \"),s(\"Div\",[s(\"Row\",{staticStyle:{\"margin-top\":\"5px\"}},o._l(a.chat,function(t,e){return o.currentIndex==r?s(\"Div\",{key:e,staticClass:\"bubbleItem\",staticStyle:{\"font-size\":\"10px\"}},[s(\"Span\",{staticClass:\"bubble\",class:[t.name==o.currentName?\"leftBubble\":\"rightBubble\"]},[s(\"span\",[o._v(o._s(t.name))]),o._v(\" \"),s(\"span\",{staticStyle:{float:\"right\"}},[o._v(o._s(t.date))]),s(\"br\"),o._v(\" \"),s(\"span\",[o._v(o._s(t.content))]),o._v(\" \"),s(\"span\",{staticClass:\"bottomLevel\"}),o._v(\" \"),s(\"span\",{staticClass:\"topLevel\"})])],1):o._e()}),1)],1)],1):o._e()],1):o._e(),o._v(\" \"),a.buttonDetail?s(\"Row\",[s(\"div\",{staticStyle:{float:\"right\"}},o._l(a.buttonDetail,function(e,t){return s(\"Button\",{key:t,staticStyle:{\"margin-left\":\"5px\"},attrs:{type:\"primary\",shape:\"circle\",disabled:\"1\"==e.buttonsZt},on:{click:function(t){o.lingqu(e)}}},[o._v(\"\\n                                    \"+o._s(e.buttonText)+\"\\n                                \")])}),1)]):o._e()],1)],1)}),o._v(\" \"),s(\"div\",[o.footer?s(\"center\",{staticStyle:{\"padding-bottom\":\"30px\"}},[o._v(\"没有更多数据了！\")]):o._e()],1)],2)])],1),o._v(\" \"),s(\"follow-field\")],1)},[],!1,null,null,null));E.options.__file=\"index.vue\";var R=E.exports,A={props:{payDirs:{type:Array}},data:function(){return{openOrderDetail:!1,formValidateDetail:{CompanyName:\"\",name:\"\",payTime:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\"},orderItem:[],orderItemHeader:[{title:\"序号\",type:\"index\",minWidth:60,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(t,e){return t(\"div\",{domProps:{innerHTML:e.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(t,e){var a=new RegExp(\"</br>\",\"g\");return t(\"div\",[t(\"Input\",{props:{value:e.row.memo.replace(a,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}]}},methods:{get_data:function(t){var a=this,e=\"api/order/detail/\"+t;this.$Get(e,{},function(t){a.formValidateDetail=t.data.data,a.orderItem=a.formValidateDetail.items;for(var e=0;e<a.orderItem.length;e++)if(\"会计到家\"==a.orderItem[e].product){a.kjdj=!0;break}})}},created:function(){var e=this;this.$bus.on(\"SHOW_CUSTOMER_ORDER_DETAIL\",function(t){e.get_data(t.id),e.openOrderDetail=!0})}},P=(a(796),Object(o.a)(A,function(){var a=this,t=a.$createElement,r=a._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"查看\",width:\"100%\"},model:{value:a.openOrderDetail,callback:function(t){a.openOrderDetail=t},expression:\"openOrderDetail\"}},[r(\"Form\",{ref:\"formValidateDetail\",attrs:{model:a.formValidateDetail,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidateDetail.CompanyName,callback:function(t){a.$set(a.formValidateDetail,\"CompanyName\",t)},expression:\"formValidateDetail.CompanyName\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidateDetail.name,callback:function(t){a.$set(a.formValidateDetail,\"name\",t)},expression:\"formValidateDetail.name\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidateDetail.payTime,callback:function(t){a.$set(a.formValidateDetail,\"payTime\",t)},expression:\"formValidateDetail.payTime\"}})],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidateDetail.paynumber,callback:function(t){a.$set(a.formValidateDetail,\"paynumber\",t)},expression:\"formValidateDetail.paynumber\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:a.formValidateDetail.realnumber,callback:function(t){a.$set(a.formValidateDetail,\"realnumber\",t)},expression:\"formValidateDetail.realnumber\"}})],1)],1),a._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"payDir\"}},[r(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:a.formValidateDetail.paydir,callback:function(t){a.$set(a.formValidateDetail,\"paydir\",t)},expression:\"formValidateDetail.paydir\"}},a._l(a.payDirs,function(t,e){return r(\"Option\",{key:e,attrs:{value:t.typecode}},[a._v(a._s(t.typename))])}),1)],1)],1)],1),a._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"GDSreport\"}},[r(\"Select\",{attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:a.formValidateDetail.gdsreport,callback:function(t){a.$set(a.formValidateDetail,\"gdsreport\",t)},expression:\"formValidateDetail.gdsreport\"}},[r(\"Option\",{attrs:{value:\"ybd\"}},[a._v(\"已报道\")]),a._v(\" \"),r(\"Option\",{attrs:{value:\"wbd\"}},[a._v(\"未报道\")]),a._v(\" \"),r(\"Option\",{attrs:{value:\"bybd\"}},[a._v(\"不用报道\")])],1)],1)],1)],1),a._v(\" \"),r(\"Table\",{attrs:{id:\"show-order-item\",border:\"\",columns:a.orderItemHeader,data:a.orderItem,size:\"small\"}})],1),a._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));function F(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}P.options.__file=\"orderDetail.vue\";var L={components:{orderDetail:P.exports},props:{customer:{type:[Array,Object,String]},cluesources:{type:Array}},data:function(){var r=this;return{loading:!1,header:[{title:\"订单号码\",key:\"ordercode\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"产品名称\",key:\"productname\",minWidth:180,render:function(t,e){return\"\"==e.row.productname||null==e.row.productname?\"\":10<e.row.productname.length?t(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[t(\"span\",e.row.productname.slice(0,10)+\"...\"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"span\",e.row.productname)])]):t(\"span\",e.row.productname)}},{title:\"流程状态\",key:\"ProcessType\",minWidth:120},{title:\"缴费渠道\",key:\"base_paydir\",minWidth:140},{title:\"订单价格\",key:\"paynumber\",minWidth:120},{title:\"已付款\",key:\"realnumber\",minWidth:100},{title:\"创建时间\",key:\"base_createdate\",minWidth:120},{title:\"缴费日期\",key:\"payTime\",minWidth:120},{title:\"上传合同\",key:\"contract_flag\",minWidth:120},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:120,render:function(t,e){var a=r;if(e.index!=r.pageSize)return t(\"div\",[t(\"Button\",{props:{type:\"warning\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.record\"}],on:{click:function(){a.$bus.emit(\"ORDER_APPROVELIST_LOG\",e.row.id)}}},\"审批记录\")])}}],data:[],total:0,page:1,pageSize:10,payDirs:[],payDirs_map:new Map,order_contract_flag:[],order_contract_flag_map:new Map,selectRow:\"\"}},methods:{get_data:function(t){var e,a=this;a.loading=!0;var r={params:(e={sortField:a.sortField,order:a.order,page:a.page,pageSize:a.pageSize,customerId:a.customer.ID},F(e,\"sortField\",\"id\"),F(e,\"order\",\"desc\"),e)};this.$Get(\"api/order/list\",r,function(t){a.data=t.data.data.rows,a.total=t.data.data.total;for(var e=0;e<a.data.length;e++)a.data[e].base_paydir=a.payDirs_map.get(a.data[e].base_paydir),a.data[e].contract_flag=a.order_contract_flag_map.get(a.data[e].contract_flag),a.data[e].base_createdate&&(a.data[e].base_createdate=a.data[e].base_createdate.slice(0,10));a.loading=!1})},pageChange:function(t){this.page=t,this.get_data()},rowClassName:function(t,e){if(\"调整订单\"==t.ProcessType&&t.id!=this.selectRow.id)return\"demo-table-error-row\"},get_data_center:function(){var a=this,r=this;return new Promise(function(e,t){a.$GetDataCenter(\"payDirs,order_contract_flag\",function(t){r.payDirs=t.data.data.payDirs,r.order_contract_flag=t.data.data.order_contract_flag,r.payDirs_map=r.$array2map(r.payDirs),r.order_contract_flag_map=r.$array2map(r.order_contract_flag),e()})})},select_row:function(t){t.id?this.selectRow=t:this.selectRow=\"\"},open_show_order:function(){this.selectRow?this.$bus.emit(\"SHOW_CUSTOMER_ORDER_DETAIL\",this.selectRow):this.$Message.warning(\"请选择需要查看的订单！\")},db_click:function(t){this.$bus.emit(\"SHOW_CUSTOMER_ORDER_DETAIL\",t)}},created:function(){var t=this;this.get_data_center().then(function(){t.get_data(t.customer.ID)})}},W=(a(798),Object(o.a)(L,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Button\",{attrs:{name:\"marketingManagement_index_orderlist_check\",type:\"primary\",shape:\"circle\",icon:\"ios-search-strong\"},on:{click:e.open_show_order}},[e._v(\"查看\")]),e._v(\" \"),a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",loading:e.loading,\"row-class-name\":e.rowClassName,columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.db_click,\"on-row-click\":e.select_row}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{current:e.page,size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}}),e._v(\" \"),a(\"order-detail\",{attrs:{payDirs:e.payDirs}})],1)},[],!1,null,null,null));W.options.__file=\"index.vue\";var z=W.exports,N={props:{customer:{type:[Array,Object,String]}},components:{},data:function(){return{header:[{type:\"index\",minWidth:60,align:\"center\"},{title:\"姓名\",key:\"name\",minWidth:100},{title:\"电话\",key:\"tel\",minWidth:150},{title:\"QQ\",key:\"qq\",minWidth:150},{title:\"微信\",key:\"wechat\",minWidth:150},{title:\"邮箱\",key:\"email\",minWidth:150},{title:\"职位\",key:\"jobplace\",minWidth:100},{title:\"发送信息\",key:\"isSend\",minWidth:100},{title:\"备注\",key:\"memo\",minWidth:100}],data:[],loading:!1}},methods:{get_data:function(t){var a=this,e=\"api/customer/findCustomerRelationById/\"+t.ID;a.loading=!0;this.$Get(e,{},function(t){a.data=t.data.data;for(var e=0;e<a.data.length;e++)1==a.data[e].sendmsgflag?a.data[e].isSend=\"是\":a.data[e].isSend=\"否\";a.loading=!1})}},created:function(){this.get_data(this.customer)}},j=Object(o.a)(N,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Table\",{staticStyle:{\"margin-top\":\"15px\"},attrs:{size:\"small\",loading:t.loading,border:\"\",columns:t.header,data:t.data}})],1)},[],!1,null,null,null);j.options.__file=\"index.vue\";var M={components:{editForm:n,company:p,dymaic:D,follow:R,order:z,relation:j.exports},props:{customer:{type:[Array,Object,String]}},data:function(){return{loading:!0,openPanel:[],openEdit:!0,cluesources:[],customerrating:[],area:[],sf_yn:[],importance:[],customerTypes_Casr:[]}},methods:{close:function(){this.$store.commit(\"close_gobal_customer_detail_modal\")},open:function(){},get_data_center:function(){var r=this;return new Promise(function(e,t){var a=r;r.$GetDataCenter(\"customerTypes,cluesources,customerrating,area,sf_yn,importance\",function(t){a.customerTypes=t.data.data.customerTypes,a.cluesources=t.data.data.cluesources,a.customerrating=t.data.data.customerrating,a.area=t.data.data.area,a.sf_yn=t.data.data.sf_yn,a.importance=t.data.data.importance,a.cluesources_map=a.$array2map(a.cluesources),a.customerrating_map=a.$array2map(a.customerrating),a.area_map=a.$array2map(a.area),a.sf_yn_map=a.$array2map(a.sf_yn),a.importance_map=a.$array2map(a.importance),a.customerTypes_Casr=a.$changeCars(a.customerTypes),a.customerTypes_array=a.$Data2Casr(a.customerTypes),e()})})}},created:function(){this.get_data_center()}},U=Object(o.a)(M,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"客户详情\",width:\"100\",styles:{height:\"100%\",top:\"0px\",minWidth:\"900px\"}},on:{\"on-cancel\":e.close},model:{value:e.openEdit,callback:function(t){e.openEdit=t},expression:\"openEdit\"}},[e.loading?a(\"Spin\",{attrs:{fix:\"\"}}):e._e(),e._v(\" \"),a(\"Row\",{staticStyle:{overflow:\"hidden\",\"*zoom\":\"1\"}},[a(\"Card\",{staticStyle:{width:\"300px\",float:\"left\"},attrs:{title:\"客户基本信息\"}},[a(\"edit-form\",{attrs:{customer:e.customer,cluesources:e.cluesources,customerrating:e.customerrating,area:e.area,sf_yn:e.sf_yn,importance:e.importance,customerTypes_Casr:e.customerTypes_Casr},on:{\"cancel-loading\":function(t){e.loading=!1}}})],1),e._v(\" \"),a(\"Card\",{staticStyle:{\"margin-left\":\"310px\",\"min-width\":\"590px\"}},[a(\"Collapse\",{attrs:{accordion:\"\"},model:{value:e.openPanel,callback:function(t){e.openPanel=t},expression:\"openPanel\"}},[a(\"Panel\",{attrs:{name:\"company\"}},[e._v(\"\\n                        企业信息\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"company\"==e.openPanel[0]?a(\"company\",{attrs:{customer:e.customer,importance:e.importance,cluesources:e.cluesources}}):e._e()],1)]),e._v(\" \"),a(\"Panel\",{attrs:{name:\"followUp\"}},[e._v(\"\\n                        客户跟进记录\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"followUp\"==e.openPanel[0]?a(\"follow\",{attrs:{customer:e.customer}}):e._e()],1)]),e._v(\" \"),a(\"Panel\",{attrs:{name:\"order\"}},[e._v(\"\\n                        订单详情\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"order\"==e.openPanel[0]?a(\"order\",{attrs:{customer:e.customer,cluesources:e.cluesources}}):e._e()],1)]),e._v(\" \"),a(\"Panel\",{attrs:{name:\"relation\"}},[e._v(\"\\n                        客户关系人\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"relation\"==e.openPanel[0]?a(\"relation\",{attrs:{customer:e.customer}}):e._e()],1)]),e._v(\" \"),a(\"Panel\",{attrs:{name:\"dymaic\"}},[e._v(\"\\n                        服务动态\\n                        \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},[\"dymaic\"==e.openPanel[0]?a(\"dymaic\",{attrs:{customer:e.customer}}):e._e()],1)])],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);U.options.__file=\"index.vue\";e.default=U.exports}}]);"}