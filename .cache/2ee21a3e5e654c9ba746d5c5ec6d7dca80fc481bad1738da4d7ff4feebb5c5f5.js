{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{153:function(e,t,r){},154:function(e,t,r){},155:function(e,t,r){},156:function(e,t,r){},157:function(e,t,r){},320:function(e,t,r){\"use strict\";var a=r(153);r.n(a).a},322:function(e,t,r){\"use strict\";var a=r(154);r.n(a).a},324:function(e,t,r){\"use strict\";var a=r(155);r.n(a).a},326:function(e,t,r){\"use strict\";var a=r(156);r.n(a).a},328:function(e,t,r){\"use strict\";var a=r(157);r.n(a).a},389:function(e,t,r){\"use strict\";r.r(t);var a=r(78),o=r.n(a),i=r(25),n={props:{id:{type:[String,Number]}},data:function(){return{openRelateOrder:!1,header:[{title:\"订单号码\",key:\"unusualCode\",minWidth:100},{title:\"产品内容\",key:\"productContent\",minWidth:150},{title:\"异常类型\",key:\"unusualType\",minWidth:80},{title:\"审批是由\",key:\"applyMemo\",minWidth:200},{title:\"流程状态\",key:\"currentProcessName\",minWidth:100},{title:\"创建时间\",key:\"createDate\",minWidth:100},{title:\"更新时间\",key:\"updateDate\",minWidth:100}],data:[],loading:!1,unusualType:[],unusualType_map:new Map}},methods:{get_data_center:function(){var e=this,t=this;return new Promise(function(r,a){e.$GetDataCenter(\"unusualType\",function(e){t.unusualType=e.data.data.unusualType,t.unusualType_map=t.$array2map(t.unusualType),r()})})},get_data:function(){var e=this,t={params:{orderId:this.id}};this.$Get(\"api/order/unusual/workorder/findUnusualWorkOrderByOrderId\",t,function(t){t.data.data&&e.data.push({applyMemo:t.data.data.applyMemo,companyId:t.data.data.companyId,createBy:t.data.data.createBy,createDate:Object(i.a)(t.data.data.createDate),updateDate:Object(i.a)(t.data.data.updateDate),id:t.data.data.id,currentProcessName:t.data.data.currentProcessName,productContent:t.data.data.productContent,unusualCode:t.data.data.unusualCode,unusualType:e.unusualType_map.get(t.data.data.unusualType)})})}},created:function(){var e=this,t=this;this.$bus.off(\"RELATE_ABORDER\",!0),this.$bus.on(\"RELATE_ABORDER\",function(r){t.get_data_center().then(t.get_data()),t.openRelateOrder=!0,e.data=[]})}},s=r(2),l=Object(s.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"对应异常工单\",width:\"70%\"},model:{value:e.openRelateOrder,callback:function(t){e.openRelateOrder=t},expression:\"openRelateOrder\"}},[r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.data}}),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);l.options.__file=\"relateOrder.vue\";var d=l.exports,c=(r(91),r(84),r(92)),p={components:{elTree:r.n(c).a},props:{id:{type:[String,Number]},readonly:{type:[String,Boolean],default:!0}},data:function(){return{openServiceItem:!0,selectItems:[],treeData:[],defaultProps:{children:\"children\",label:\"serviceitemname\"},loading:!1}},methods:{get_service_item:function(){var e=this,t={params:{templateCode:\"kjdafwxy\",objectId:this.id}};this.$Get(\"api/system/serviceContract/template/queryTreegridByCode\",t,function(t){t.data.data.selectItems?e.selectItems=t.data.data.selectItems.split(\",\"):e.selectItems=[],e.treeData=t.data.data.treeData})},close:function(){this.$emit(\"close\")},save:function(){for(var e=this.$refs.itemsTree.getCheckedNodes(),t=[],r=0;r<e.length;r++)t.push(e[r].id);var a=this;a.loading=!0;var o={templateCode:\"kjdafwxy\",itemIds:t.join(\",\"),objectId:a.id};this.$Post(\"api/system/serviceContract/template/item/target/save\",o,function(e){a.loading=!1,a.close()},function(e){a.loading=!1})}},created:function(){this.get_service_item()}},u=Object(s.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"会计到家服务项\",width:\"400\"},on:{\"on-cancel\":e.close},model:{value:e.openServiceItem,callback:function(t){e.openServiceItem=t},expression:\"openServiceItem\"}},[r(\"el-tree\",{ref:\"itemsTree\",attrs:{data:e.treeData,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":e.selectItems,props:e.defaultProps}}),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[e.readonly?r(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.save}},[e._v(\"保存\")]):e._e()],1)],1)],1)},[],!1,null,null,null);u.options.__file=\"accountHomeTree.vue\";var m=u.exports,h=r(79);function f(e,t,r){return new Promise(function(a,o){a(Object(h.c)(\"order/finishedUpdate\",e,t,r))}).catch(function(e){return e})}function y(e,t,r){return new Promise(function(a,o){a(Object(h.c)(\"order/update\",e,t,r))}).catch(function(e){return e})}function v(e,t,r,a){var o=\"order/detail/\"+e;return new Promise(function(e,i){e(Object(h.b)(o,t,r,a))}).catch(function(e){return e})}function _(e,t,r){return new Promise(function(a,o){a(Object(h.b)(\"customer/account/detail\",e,t,r))}).catch(function(e){return e})}function g(e,t,r){return new Promise(function(a,o){a(Object(h.c)(\"order/item/refund\",e,t,r))}).catch(function(e){return e})}function b(e,t,r){return new Promise(function(a,o){a(Object(h.c)(\"order/contract/upload\",e,t,r))}).catch(function(e){return e})}function I(e,t,r){return new Promise(function(a,o){a(Object(h.c)(\"order/create\",e,t,r))}).catch(function(e){return e})}function D(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function w(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function n(e){D(i,a,o,n,s,\"next\",e)}function s(e){D(i,a,o,n,s,\"throw\",e)}n(void 0)})}}var k={props:{payDirs:{type:Array}},data:function(){var e=this;return{checkBalance:!1,showAccountHomeItem:!1,loading:!1,allUseBalance:\"待查询\",orderDetail:{customerid:\"\",id:\"\",companyid:\"\",isornotkp:\"N\",CompanyName:\"\",tel:\"\",name:\"\",payTime:\"\",payamount:\"\",neednumber:\"\",paynumber:\"\",realnumber:\"\",paydir:\"\",gdsreport:\"\",performanceMoney:\"\",usebalance:0},orderDetailRule:{isornotkp:[{required:!0,message:\"请补全！\",trigger:\"change\"}],CompanyName:[{required:!0,message:\"请补全！\",trigger:\"change\"}],name:[{required:!0,message:\"请补全！\",trigger:\"change\"}],payTime:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"date\"}],paynumber:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"number\"}],realnumber:[{required:!0,message:\"请补全！\",trigger:\"change\",type:\"number\"}],paydir:[{required:!0,message:\"请补全！\",trigger:\"change\"}]},orderItem:[],orderItemHeader:[{title:\"删除\",key:\"action\",minWidth:60,render:function(t,r){return t(\"Button\",{props:{type:\"text\",size:\"small\"},on:{click:function(){\"会计到家\"==r.row.product&&(e.showAccountHomeItem=!1),e.orderItem.splice(r.index,1),e.computer_paynumber()}}},\"x\")}},{title:\"序号\",type:\"index\",minWidth:80,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150,render:function(t,r){var a=e,o=!1;return\"1051\"!=e.orderItem[r.index].skuid&&\"1052\"!=e.orderItem[r.index].skuid&&\"1053\"!=e.orderItem[r.index].skuid&&\"1054\"!=e.orderItem[r.index].skuid||(o=!0),t(\"div\",[t(\"Input\",{domProps:{},props:{value:e.orderItem[r.index].productnumber,autosize:!0,type:\"text\",size:\"small\",readonly:o},on:{\"on-blur\":function(e){o||(a.orderItem[r.index].productnumber=e.target.value,a.orderItem[r.index].paynumber=a.orderItem[r.index].productnumber*a.orderItem[r.index].oaprice,a.computer_paynumber())},\"on-enter\":function(e){o||(a.orderItem[r.index].productnumber=e.target.value,a.orderItem[r.index].paynumber=a.orderItem[r.index].productnumber*a.orderItem[r.index].oaprice,a.computer_paynumber())}},style:{width:\"100%\"}})])}},{title:\"销售价格\",key:\"paynumber\",minWidth:100,render:function(t,r){var a=e,o=!1,i=!1;return\"1051\"!=e.orderItem[r.index].skuid&&\"1052\"!=e.orderItem[r.index].skuid&&\"1053\"!=e.orderItem[r.index].skuid&&\"1054\"!=e.orderItem[r.index].skuid||(o=!0),\"Y\"==e.orderItem[r.index].iscycle&&(i=!0),t(\"div\",[t(\"Input\",{domProps:{},props:{value:e.orderItem[r.index].paynumber,autosize:!0,type:\"text\",size:\"small\",readonly:o},on:{\"on-blur\":function(e){a.orderItem[r.index].paynumber=e.target.value,i&&a.iscycleY(a.orderItem[r.index]),a.computer_paynumber()},\"on-enter\":function(e){a.orderItem[r.index].paynumber=e.target.value,i&&a.iscycleY(a.orderItem[r.index]),a.computer_paynumber()}},style:{width:\"100%\"}})])}},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100,render:function(t,r){var a=e,o=!1,i=!1;return\"1051\"!=e.orderItem[r.index].skuid&&\"1052\"!=e.orderItem[r.index].skuid&&\"1053\"!=e.orderItem[r.index].skuid&&\"1054\"!=e.orderItem[r.index].skuid||(o=!0),\"Y\"==e.orderItem[r.index].iscycle&&(i=!0),t(\"div\",[t(\"Input\",{domProps:{},props:{value:e.orderItem[r.index].givethenumber,autosize:!0,type:\"text\",size:\"small\"},on:{\"on-blur\":function(e){a.orderItem[r.index].givethenumber=e.target.value,i&&a.priceCycleY(a.orderItem[r.index]),o&&a.price2000(a.orderItem[r.index])},\"on-enter\":function(e){a.orderItem[r.index].givethenumber=e.target.value,i&&a.priceCycleY(a.orderItem[r.index]),o&&a.price2000(a.orderItem[r.index])}},style:{width:\"100%\"}})])}},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:140,render:function(t,r){var a=e;return t(\"div\",[t(\"DatePicker\",{props:{value:e.orderItem[r.index].servicestartdate,type:\"month\",transfer:!1,size:\"small\",disabled:\"N\"==e.orderItem[r.index].iscycle,readonly:\"N\"==e.orderItem[r.index].iscycle},on:{\"on-change\":function(e){var t=e.split(\"-\").join(\"\");a.orderItem[r.index].servicestartdate=t}},style:{width:\"100%\"}})])}},{title:\"服务部门\",key:\"departname\",minWidth:140,render:function(t,r){var a=e;return t(\"div\",[t(\"Select\",{props:{value:e.orderItem[r.index].departid.toString(),transfer:!1,size:\"small\",labelInValue:!0},on:{\"on-change\":function(e){a.orderItem[r.index].departname=e.label,a.orderItem[r.index].departid=e.value}},style:{width:\"100%\"}},JSON.parse(a.orderItem[r.index].servicedeparts).map(function(e){return[t(\"Option\",{props:{value:e.type,label:e.text}})]}))])}},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(t,r){var a=e,o=new RegExp(\"</br>\",\"g\");return e.orderItem[r.index].memo=e.orderItem[r.index].memo.replace(o,\"\\n\"),t(\"div\",[t(\"Input\",{props:{value:e.orderItem[r.index].memo,autosize:!0,type:\"textarea\",size:\"small\"},on:{\"on-blur\":function(e){a.orderItem[r.index].memo=e.target.value}},style:{width:\"100%\"}})])}}]}},methods:{get_data:function(){var e=w(o.a.mark(function e(t){var r,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this,this.showAccountHomeItem=!1,this.loading=!0,e.prev=3,e.next=6,v(t);case 6:r=e.sent,this.orderDetail=r,this.orderItem=r.items.map(function(e){return\"会计到家\"==e.product&&(a.showAccountHomeItem=!0),5==e.deleteflag&&(e.product=e.product.concat(\"（已退款）\")),e}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:this.loading=!1;case 15:case\"end\":return e.stop()}},e,this,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),show_contarct:function(e){this.$bus.emit(\"ORDER_LIST_CONTARCT_PIC_OPEN\",{id:this.orderDetail.id,type:e})},computer_paynumber:function(){for(var e=0,t=0;t<this.orderItem.length;t++)e=parseInt(e)+parseInt(this.orderItem[t].paynumber);this.orderDetail.paynumber=parseInt(e),this.orderDetail.realnumber=parseInt(e)},price2000:function(e){var t=parseInt(e.givethenumber)+parseInt(e.productnumber);e.unitprice=parseInt(e.oaprice/t)},priceCycleY:function(e){var t=parseInt(e.givethenumber)+parseInt(e.productnumber);e.unitprice=parseInt(e.paynumber/t)},iscycleY:function(e){if(1==e.productnumber){var t=parseInt(e.givethenumber)+parseInt(e.productnumber);e.unitprice=parseInt(e.paynumber/t),e.oaprice=e.unitprice}},modal_status_change:function(e){e||(this.$refs.orderDetail.resetFields(),this.orderDetail.customerid=\"\",this.orderDetail.companyid=\"\",this.allUseBalance=\"待查询\",this.orderItem=[])},check_date:function(){if(0==this.orderItem.length)return this.$Message.warning(\"请选择产品！\"),!1;for(var e=0;e<this.orderItem.length;e++){if(this.orderItem[e].hasOwnProperty(\"servicestartdate\")){if(!this.orderItem[e].servicestartdate)return this.$Message.error(\"请输入服务开始税期！\"),!1}else;if(e==this.orderItem.length-1)return!0}},open_isornotkp:function(e){this.$bus.emit(\"OPEN_ORDER_INVOICE\",{customerId:this.orderDetail.customerid,companyId:this.orderDetail.companyid,orderId:this.orderDetail.id,type:e})},get_balance:function(){var e=w(o.a.mark(function e(t,r){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return this.$Message.warning(\"请选择归属公司！\"),e.abrupt(\"return\",!1);case 4:return a={params:{customerId:r}},e.prev=5,e.next=8,_(a);case 8:if(i=e.sent,\"create\"!=t){e.next=13;break}this.allUseBalance=(i.accountAmount-i.lockAmount).toFixed(2),e.next=19;break;case 13:if(\"update\"!=t){e.next=18;break}this.allUseBalance=(i.accountAmount-i.lockAmount+this.orderDetail.usebalance).toFixed(2),this.checkBalance=!0,e.next=19;break;case 18:return e.abrupt(\"return\",!1);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5);case 24:case\"end\":return e.stop()}},e,this,[[5,21]])}));return function(t,r){return e.apply(this,arguments)}}()},created:function(){var e=this;this.$bus.off(\"ADD_PRODUCT\",!0),this.$bus.on(\"ADD_PRODUCT\",function(t){\"会计到家\"==t.product&&(e.showAccountHomeItem=!0),e.orderItem.push(t),e.computer_paynumber()})}};function x(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}var S={mixins:[k],components:{serviceItem:m,relateOrder:d},data:function(){var e=this;return{orderId:\"\",openServiceItem:!1,openShowOrderDetail:!1,orderDetailListHeaderShow:[{title:\"序号\",type:\"index\",minWidth:80,align:\"center\"},{title:\"产品名\",key:\"product\",minWidth:150},{title:\"产品属性\",key:\"propertys\",minWidth:250,render:function(e,t){return e(\"div\",{domProps:{innerHTML:t.row.propertys}})}},{title:\"产品价格\",key:\"oaprice\",minWidth:100},{title:\"产品数量（个/月）\",key:\"productnumber\",minWidth:150},{title:\"销售价格\",key:\"paynumber\",minWidth:100},{title:\"赠送数量\",key:\"givethenumber\",minWidth:100},{title:\"服务开始税期\",key:\"servicestartdate\",minWidth:120},{title:\"服务部门\",key:\"departname\",minWidth:140},{title:\"单价/月\",key:\"unitprice\",minWidth:90},{title:\"备注\",key:\"memo\",minWidth:300,render:function(e,t){var r=new RegExp(\"</br>\",\"g\");return e(\"div\",[e(\"Input\",{props:{value:t.row.memo.replace(r,\"\\n\"),autosize:!0,type:\"textarea\",size:\"small\",readonly:!0},style:{width:\"100%\"}})])}}],dangerOperation:{title:\"退款\",minWidth:80,align:\"center\",render:function(t,r){return t(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginLeft:\"5px\"}},[t(\"Poptip\",{props:{transfer:!0,confirm:!0,title:\"您确定要退款此订单项吗！\"},on:{\"on-ok\":function(){5!=r.row.deleteflag?e.cancel_order(e.orderId,r.row.itemid):e.$message.warning(\"对不起！该订单项已经退款！请确认之后操作!\")}}},\"退款\")])}}}},methods:{open_relateOrder:function(){this.$bus.emit(\"RELATE_ABORDER\",!0)},open_service_item:function(){this.openServiceItem=!0},close_item:function(){this.openServiceItem=!1},cancel_order:function(){var e,t=(e=o.a.mark(function e(t,r){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={itemId:r},e.prev=1,e.next=4,g(a);case 4:i=e.sent,i.status,i.data,this.get_data(t),this.$bus.emit(\"UPDATE_ORDER_LIST\"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:case\"end\":return e.stop()}},e,this,[[1,11]])}),function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function n(e){x(i,a,o,n,s,\"next\",e)}function s(e){x(i,a,o,n,s,\"throw\",e)}n(void 0)})});return function(e,r){return t.apply(this,arguments)}}(),row_class_name:function(e){if(5==e.deleteflag)return\"demo-table-refund-row\"}},created:function(){var e=this;10059==localStorage.getItem(\"id\")&&this.orderDetailListHeaderShow.unshift(this.dangerOperation),this.$bus.off(\"OPEN_ORDERLIST_DETAIL\",!0),this.$bus.on(\"OPEN_ORDERLIST_DETAIL\",function(t){e.checkBalance=!1,e.get_data(t),e.orderId=t,e.openShowOrderDetail=!0})}},O=(r(320),Object(s.a)(S,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"查看订单\",\"mask-closable\":!1,width:\"100\"},on:{\"on-visible-change\":e.modal_status_change},model:{value:e.openShowOrderDetail,callback:function(t){e.openShowOrderDetail=t},expression:\"openShowOrderDetail\"}},[r(\"Form\",{ref:\"orderDetail\",attrs:{model:e.orderDetail,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.CompanyName,callback:function(t){e.$set(e.orderDetail,\"CompanyName\",t)},expression:\"orderDetail.CompanyName\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.name,callback:function(t){e.$set(e.orderDetail,\"name\",t)},expression:\"orderDetail.name\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.payTime,callback:function(t){e.$set(e.orderDetail,\"payTime\",t)},expression:\"orderDetail.payTime\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.paynumber,callback:function(t){e.$set(e.orderDetail,\"paynumber\",t)},expression:\"orderDetail.paynumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.orderDetail.gdsreport,callback:function(t){e.$set(e.orderDetail,\"gdsreport\",t)},expression:\"orderDetail.gdsreport\"}},[r(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.orderDetail.paydir,callback:function(t){e.$set(e.orderDetail,\"paydir\",t)},expression:\"orderDetail.paydir\"}},e._l(e.payDirs,function(t,a){return r(\"Option\",{key:a,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"实付金额\",prop:\"realnumber\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.realnumber,callback:function(t){e.$set(e.orderDetail,\"realnumber\",t)},expression:\"orderDetail.realnumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:e.orderDetail.isornotkp,callback:function(t){e.$set(e.orderDetail,\"isornotkp\",t)},expression:\"orderDetail.isornotkp\"}},[r(\"Option\",{attrs:{value:\"Y\"}},[e._v(\"是\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"N\"}},[e._v(\"否\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"异常工单\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Button\",{attrs:{type:\"info\",size:\"small\"},on:{click:e.open_relateOrder}},[e._v(\"查看\")])],1)])],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"使用余额\",prop:\"usebalance\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Input\",{staticStyle:{width:\"40%\"},attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:e.orderDetail.usebalance,callback:function(t){e.$set(e.orderDetail,\"usebalance\",t)},expression:\"orderDetail.usebalance\"}}),e._v(\" \"),r(\"Button\",{attrs:{type:\"info\",size:\"small\",disabled:e.checkBalance},on:{click:function(t){e.get_balance(\"create\",e.orderDetail.customerid)}}},[e._v(\"查询\")]),e._v(\" \"),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\",\"margin-left\":\"10px\"}},[e._v(\"可用余额：\")]),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\"}},[e._v(e._s(e.allUseBalance))])],1)])],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.show_contarct(\"edit\")}}},[e._v(\"查看合同\")]),e._v(\" \"),e.showAccountHomeItem?r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.openServiceItem=!0}}},[e._v(\"查看会计到家服务项\")]):e._e()],1)],1),e._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{attrs:{columns:e.orderDetailListHeaderShow,data:e.orderItem,loading:e.loading,border:\"\",size:\"small\",id:\"show-order-item\",\"row-class-name\":e.row_class_name}})],1)],1),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{on:{click:function(t){e.openShowOrderDetail=!1}}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),e.openServiceItem?r(\"service-item\",{attrs:{id:e.orderDetail.companyid,readonly:!1},on:{close:e.close_item}}):e._e(),e._v(\" \"),r(\"relate-order\",{attrs:{id:e.orderId}})],1)},[],!1,null,null,null));O.options.__file=\"showOrder.vue\";var C=O.exports,P={name:\"selectName\",data:function(){return{openSelectCompany:!1,searchCompany:\"\",header:[{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"归属客户\",key:\"customerName\",minWidth:150},{title:\"客户电话\",key:\"customerTel\",minWidth:150},{title:\"钱包余额\",key:\"balance\",minWidth:100},{title:\"是否国地税报道\",key:\"gdsStatus\",minWidth:130}],data:[],total:0,page:1,pageSize:10,loading:!1,gds_map:new Map([[\"wbd\",\"未报道\"],[\"ybd\",\"已报道\"],[\"bybd\",\"不用报道\"]])}},methods:{get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:10,companyname:e.searchCompany}};this.$Get(\"api/customer/company/list\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var r=0;r<e.data.length;r++)e.data[r].gdsStatus=e.gds_map.get(e.data[r].gdsreport);e.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},row_select:function(e){this.$emit(\"company-change\",e),this.openSelectCompany=!1}},created:function(){var e=this;this.$bus.off(\"ORDER_OPEN_SELECT_COMPANY\",!0),this.$bus.on(\"ORDER_OPEN_SELECT_COMPANY\",function(t){e.get_data(),e.openSelectCompany=!0})}},R=Object(s.a)(P,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:e.openSelectCompany,callback:function(t){e.openSelectCompany=t},expression:\"openSelectCompany\"}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-enter\":e.get_data},model:{value:e.searchCompany,callback:function(t){e.searchCompany=t},expression:\"searchCompany\"}},[r(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.get_data},slot:\"append\"})],1)],1)],1),e._v(\" \"),r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",loading:e.loading,size:\"small\",columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.row_select}}),e._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,current:e.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}}),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);R.options.__file=\"companySelect.vue\";var $=R.exports,T={name:\"selectName\",props:{id:{type:[String,Number]}},data:function(){return{openSelectAbOrder:!1,searchCompany:\"\",header:[{title:\"订单号码\",key:\"unusual_code\",minWidth:300},{title:\"产品内容\",key:\"product_content\",minWidth:150},{title:\"异常类型\",key:\"unusual_type\",minWidth:150},{title:\"审批是由\",key:\"apply_memo\",minWidth:100},{title:\"创建时间\",key:\"gdsStatus\",minWidth:130}],data:[],total:0,page:1,pageSize:10,loading:!1}},methods:{get_data:function(){var e=this,t={params:{companyId:this.id}};this.$Get(\"api/order/unusual/workorder/findUnusualWorkOrderNotBindOrderByCompanyId\",t,function(t){e.data=t.data.data,e.total=t.data.data.length})},pageChange:function(e){this.page=e,this.get_data()},row_select:function(e){this.$emit(\"aborder-change\",e),this.openSelectAbOrder=!1}},created:function(){var e=this;this.$bus.off(\"SELECT_ABORDER\",!0),this.$bus.on(\"SELECT_ABORDER\",function(t){e.get_data(),e.openSelectAbOrder=!0})}},E=Object(s.a)(T,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"选择对应的异常工单\",width:\"80%\"},model:{value:e.openSelectAbOrder,callback:function(t){e.openSelectAbOrder=t},expression:\"openSelectAbOrder\"}},[r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",loading:e.loading,size:\"small\",columns:e.header,data:e.data},on:{\"on-row-dblclick\":e.row_select}}),e._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"page-size\":e.pageSize,current:e.page,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}}),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);function z(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function N(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function n(e){z(i,a,o,n,s,\"next\",e)}function s(e){z(i,a,o,n,s,\"throw\",e)}n(void 0)})}}E.options.__file=\"abOrderSelect.vue\";var B={mixins:[k],components:{companySelect:$,serviceItem:m,abOrderSelect:E.exports},data:function(){return{openServiceItem:!1,show_file:[],openCreateOrderDetail:!1,loading:!1,orderId:\"\",applyId:\"\"}},methods:{open_abOrder:function(){this.$bus.emit(\"SELECT_ABORDER\",!0)},setting_aborder:function(e){this.applyId=e.id},open_service_item:function(){this.orderDetail.companyid&&(this.openServiceItem=!0)},open_company:function(){this.$bus.emit(\"ORDER_OPEN_SELECT_COMPANY\",!0)},setting_company:function(e){this.orderDetail.CompanyName=e.companyname,this.orderDetail.name=e.customerName,this.orderDetail.tel=e.customerTel,this.orderDetail.gdsreport=e.gdsreport,this.orderDetail.companyid=e.id,this.orderDetail.customerid=e.customerId},handleUpload:function(e){return this.show_file.push(e),!1},fileRemove:function(e){this.show_file.splice(e,1)},upload_img:function(){var e=N(o.a.mark(function e(t){var r,a,i,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this,a=new FormData,\"api/order/contract/upload\",a.append(\"orderId\",t),i=0;i<r.show_file.length;i++)a.append(\"files\",r.show_file[i]);return e.prev=5,e.next=8,b(a);case 8:n=e.sent,n.status,n.data,this.show_file=[],e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5);case 17:case\"end\":return e.stop()}},e,this,[[5,14]])}));return function(t){return e.apply(this,arguments)}}(),open_product_list:function(){this.orderDetail.companyid?this.$bus.emit(\"OPEN_ORDER_PRODUCT_LIST\",this.orderDetail.companyid):this.$Message.warning(\"请先选择公司！\")},create:function(){var e=this,t=this;this.loading=!0,this.$refs.orderDetail.validate(function(r){r&&e.check_date()?t.create_order():e.loading=!1})},create_order:function(){var e=N(o.a.mark(function e(){var t,r,a,n,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={companyId:(t=this).orderDetail.companyid,payDir:t.orderDetail.paydir,orderPayNumber:t.orderDetail.realnumber,serviceStartDate:\"\",GDSreport:t.orderDetail.gdsreport,payTime:Object(i.a)(t.orderDetail.payTime),isornotkp:t.orderDetail.isornotkp,usebalance:t.orderDetail.usebalance,orderitems:JSON.stringify(t.orderItem)},e.prev=2,e.next=5,I(r);case 5:a=e.sent,n=a.status,s=a.data,this.orderId=s.data,n&&(0!=this.show_file.length?this.upload_img(s.data):(this.applyId&&t.relate(),t.$Message.warning(\"订单创建成功！请及时上传合同！\")),setTimeout(function(){t.loading=!1,t.$bus.emit(\"UPDATE_ORDER_LIST\",!0),t.openCreateOrderDetail=!1},200)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2);case 16:this.loading=!1;case 17:case\"end\":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}(),close_item:function(){this.openServiceItem=!1},relate:function(){var e={applyId:this.applyId,orderId:this.orderId};this.$Post(\"api/order/unusual/workorder/linkUnusualWorkOrder\",e,function(e){},function(){}),this.orderId=\"\",this.applyId=\"\"},closeCreateDetail:function(){this.openCreateOrderDetail=!1,this.applyId=\"\"}},created:function(){var e=this;this.$bus.off(\"OPEN_ORDERLIST_ADD\",!0),this.$bus.on(\"OPEN_ORDERLIST_ADD\",function(t){e.orderItem=[],e.openCreateOrderDetail=!0})}},L=Object(s.a)(B,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"新建订单\",width:\"100\",\"mask-closable\":!1},on:{\"on-cancel\":e.closeCreateDetail,\"on-visible-change\":e.modal_status_change},model:{value:e.openCreateOrderDetail,callback:function(t){e.openCreateOrderDetail=t},expression:\"openCreateOrderDetail\"}},[r(\"Form\",{ref:\"orderDetail\",attrs:{model:e.orderDetail,\"label-width\":100,rules:e.orderDetailRule}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_company},model:{value:e.orderDetail.CompanyName,callback:function(t){e.$set(e.orderDetail,\"CompanyName\",t)},expression:\"orderDetail.CompanyName\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_company},model:{value:e.orderDetail.name,callback:function(t){e.$set(e.orderDetail,\"name\",t)},expression:\"orderDetail.name\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:e.orderDetail.payTime,callback:function(t){e.$set(e.orderDetail,\"payTime\",t)},expression:\"orderDetail.payTime\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[r(\"Input\",{attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:e.orderDetail.paynumber,callback:function(t){e.$set(e.orderDetail,\"paynumber\",t)},expression:\"orderDetail.paynumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.gdsreport,callback:function(t){e.$set(e.orderDetail,\"gdsreport\",t)},expression:\"orderDetail.gdsreport\"}},[r(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.paydir,callback:function(t){e.$set(e.orderDetail,\"paydir\",t)},expression:\"orderDetail.paydir\"}},e._l(e.payDirs,function(t,a){return r(\"Option\",{key:a,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[r(\"Input\",{attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.realnumber,callback:function(t){e.$set(e.orderDetail,\"realnumber\",t)},expression:\"orderDetail.realnumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.isornotkp,callback:function(t){e.$set(e.orderDetail,\"isornotkp\",t)},expression:\"orderDetail.isornotkp\"}},[r(\"Option\",{attrs:{value:\"Y\"}},[e._v(\"是\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"N\"}},[e._v(\"否\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"异常工单号\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Input\",{staticStyle:{width:\"60%\"},attrs:{size:\"small\",readonly:\"\"},on:{\"on-focus\":e.open_abOrder},model:{value:e.applyId,callback:function(t){e.applyId=t},expression:\"applyId\"}}),e._v(\" \"),r(\"Button\",{attrs:{type:\"info\",size:\"small\"},on:{click:e.open_abOrder}},[e._v(\"选择\")])],1)])],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"使用余额\",prop:\"usebalance\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Input\",{staticStyle:{width:\"40%\"},attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.usebalance,callback:function(t){e.$set(e.orderDetail,\"usebalance\",t)},expression:\"orderDetail.usebalance\"}}),e._v(\" \"),r(\"Button\",{attrs:{type:\"info\",size:\"small\",disabled:e.checkBalance},on:{click:function(t){e.get_balance(\"create\",e.orderDetail.customerid)}}},[e._v(\"查询\")]),e._v(\" \"),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\",\"margin-left\":\"10px\"}},[e._v(\"可用余额：\")]),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\"}},[e._v(e._s(e.allUseBalance))])],1)])],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{staticStyle:{\"margin-bottom\":\"10px\"}},[r(\"div\",{attrs:{slot:\"label\"},slot:\"label\"},[e._v(\"合同\")]),e._v(\" \"),r(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",\"before-upload\":e.handleUpload,action:\"\"}},[r(\"Button\",{attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[e._v(\"选择文件\")])],1),e._v(\" \"),e._l(e.show_file,function(t,a){return r(\"span\",{key:a},[e._v(e._s(t.name)+\"\\n                            \"),r(\"Button\",{attrs:{type:\"text\"},on:{click:function(t){e.fileRemove(a)}}},[e._v(\"移除\")])],1)})],2)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"24\"}},[r(\"FormItem\",{attrs:{label:\"选择产品\"}},[r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.open_product_list}},[e._v(\"新增\")]),e._v(\" \"),e.showAccountHomeItem?r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.open_service_item}},[e._v(\"查看会计到家服务项\")]):e._e()],1)],1)],1)],1),e._v(\" \"),e.orderItem.length?r(\"Row\",[r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:e.orderItemHeader,data:e.orderItem}})],1):e._e(),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.create}},[e._v(\"创建\")]),e._v(\" \"),r(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.closeCreateDetail}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),r(\"company-select\",{on:{\"company-change\":e.setting_company}}),e._v(\" \"),e.openServiceItem?r(\"service-item\",{attrs:{id:e.orderDetail.companyid},on:{close:e.close_item}}):e._e(),e._v(\" \"),r(\"ab-order-select\",{attrs:{id:e.orderDetail.companyid},on:{\"aborder-change\":e.setting_aborder}})],1)},[],!1,null,null,null);L.options.__file=\"createOrder.vue\";var F=L.exports;function A(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}var V={mixins:[k],data:function(){return{openamendOrderDetail:!1,loading:!1}},methods:{xiugai:function(){var e=this;e.loading=!0,this.$refs.orderDetail.validate(function(){var t,r=(t=o.a.mark(function t(r){var a,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=18;break}return a={id:e.orderDetail.id,paydir:e.orderDetail.paydir,paytime:Object(i.a)(e.orderDetail.payTime),realnumber:e.orderDetail.realnumber,usebalance:e.orderDetail.usebalance,items:JSON.stringify(e.orderItem)},t.prev=3,t.next=6,f(a);case 6:n=t.sent,s=n.status,n.data,s&&(e.$refs.orderDetail.resetFields(),e.orderItem=[],e.$bus.emit(\"UPDATE_ORDER_LIST\",!0),e.openamendOrderDetail=!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3);case 15:e.loading=!1,t.next=18;break;case 18:e.loading=!1;case 19:case\"end\":return t.stop()}},t,this,[[3,12]])}),function(){var e=this,r=arguments;return new Promise(function(a,o){var i=t.apply(e,r);function n(e){A(i,a,o,n,s,\"next\",e)}function s(e){A(i,a,o,n,s,\"throw\",e)}n(void 0)})});return function(e){return r.apply(this,arguments)}}())}},created:function(){var e=this;this.orderItemHeader.shift(),this.$bus.off(\"OPEN_ORDERLIST_AMEND\",!0),this.$bus.on(\"OPEN_ORDERLIST_AMEND\",function(t){e.checkBalance=!1,e.get_data(t),e.openamendOrderDetail=!0})}},W=(r(322),Object(s.a)(V,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"修改订单\",width:\"100\"},on:{\"on-visible-change\":e.modal_status_change},model:{value:e.openamendOrderDetail,callback:function(t){e.openamendOrderDetail=t},expression:\"openamendOrderDetail\"}},[r(\"Form\",{ref:\"orderDetail\",attrs:{model:e.orderDetail,\"label-width\":100,rules:e.orderDetailRule}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.CompanyName,callback:function(t){e.$set(e.orderDetail,\"CompanyName\",t)},expression:\"orderDetail.CompanyName\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.name,callback:function(t){e.$set(e.orderDetail,\"name\",t)},expression:\"orderDetail.name\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:e.orderDetail.payTime,callback:function(t){e.$set(e.orderDetail,\"payTime\",t)},expression:\"orderDetail.payTime\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.paynumber,callback:function(t){e.$set(e.orderDetail,\"paynumber\",t)},expression:\"orderDetail.paynumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:e.orderDetail.gdsreport,callback:function(t){e.$set(e.orderDetail,\"gdsreport\",t)},expression:\"orderDetail.gdsreport\"}},[r(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.paydir,callback:function(t){e.$set(e.orderDetail,\"paydir\",t)},expression:\"orderDetail.paydir\"}},e._l(e.payDirs,function(t,a){return r(\"Option\",{key:a,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[r(\"Input\",{attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.realnumber,callback:function(t){e.$set(e.orderDetail,\"realnumber\",t)},expression:\"orderDetail.realnumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\",disabled:\"\"},model:{value:e.orderDetail.isornotkp,callback:function(t){e.$set(e.orderDetail,\"isornotkp\",t)},expression:\"orderDetail.isornotkp\"}},[r(\"Option\",{attrs:{value:\"Y\"}},[e._v(\"是\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"N\"}},[e._v(\"否\")])],1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"使用余额\",prop:\"usebalance\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Input\",{staticStyle:{width:\"40%\"},attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.usebalance,callback:function(t){e.$set(e.orderDetail,\"usebalance\",t)},expression:\"orderDetail.usebalance\"}}),e._v(\" \"),r(\"Button\",{attrs:{type:\"info\",size:\"small\",disabled:e.checkBalance},on:{click:function(t){e.get_balance(\"update\",e.orderDetail.customerid)}}},[e._v(\"查询\")]),e._v(\" \"),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\",\"margin-left\":\"10px\"}},[e._v(\"可用余额：\")]),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\"}},[e._v(e._s(e.allUseBalance))])],1)])],1)],1)],1),e._v(\" \"),r(\"Row\",[r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:e.orderItemHeader,\"row-class-name\":e.row_class_name,data:e.orderItem}})],1),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.xiugai}},[e._v(\"修改\")]),e._v(\" \"),r(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.openamendOrderDetail=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null));W.options.__file=\"amendOrder.vue\";var M=W.exports;function j(e,t,r,a,o,i,n){try{var s=e[i](n),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}var U={mixins:[k],components:{serviceItem:m},data:function(){return{openEditOrderDetail:!1,loading:!1,openServiceItem:!1}},methods:{open_service_item:function(){this.openServiceItem=!0},close_item:function(){this.openServiceItem=!1},edit:function(){var e=this;e.$ButtonCollect(\"order_edit\"),e.loading=!0,this.$refs.orderDetail.validate(function(){var t,r=(t=o.a.mark(function t(r){var a,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=17;break}return a={id:e.orderDetail.id,payDir:e.orderDetail.paydir,payTime:Object(i.a)(e.orderDetail.payTime),GDSreport:e.orderDetail.gdsreport,companyId:e.orderDetail.companyid,isornotkp:e.orderDetail.isornotkp,orderPayNumber:e.orderDetail.realnumber,orderitems:JSON.stringify(e.orderItem),usebalance:e.orderDetail.usebalance,serviceStartDate:\"\"},t.prev=3,t.next=6,y(a);case 6:n=t.sent,s=n.status,n.data,s&&setTimeout(function(){e.loading=!1,e.openEditOrderDetail=!1,e.$bus.emit(\"UPDATE_ORDER_LIST\",!0)},500),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3);case 15:t.next=17;break;case 17:e.loading=!1;case 18:case\"end\":return t.stop()}},t,this,[[3,12]])}),function(){var e=this,r=arguments;return new Promise(function(a,o){var i=t.apply(e,r);function n(e){j(i,a,o,n,s,\"next\",e)}function s(e){j(i,a,o,n,s,\"throw\",e)}n(void 0)})});return function(e){return r.apply(this,arguments)}}())},open_product_list:function(){this.orderDetail.companyid?this.$bus.emit(\"OPEN_ORDER_PRODUCT_LIST\",this.orderDetail.companyid):this.$Message.warning(\"请先选择公司！\")}},created:function(){var e=this;this.$bus.off(\"OPEN_ORDERLIST_EDIT\",!0),this.$bus.on(\"OPEN_ORDERLIST_EDIT\",function(t){e.checkBalance=!1,e.get_data(t),e.openEditOrderDetail=!0})}},q=(r(324),Object(s.a)(U,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"编辑订单\",width:\"100\"},on:{\"on-visible-change\":e.modal_status_change},model:{value:e.openEditOrderDetail,callback:function(t){e.openEditOrderDetail=t},expression:\"openEditOrderDetail\"}},[r(\"Form\",{ref:\"orderDetail\",attrs:{model:e.orderDetail,\"label-width\":100,rules:e.orderDetailRule}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属公司\",prop:\"CompanyName\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.CompanyName,callback:function(t){e.$set(e.orderDetail,\"CompanyName\",t)},expression:\"orderDetail.CompanyName\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"归属客户\",prop:\"name\"}},[r(\"Input\",{attrs:{size:\"small\",readonly:\"\"},model:{value:e.orderDetail.name,callback:function(t){e.$set(e.orderDetail,\"name\",t)},expression:\"orderDetail.name\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间\",prop:\"payTime\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{size:\"small\",type:\"date\"},model:{value:e.orderDetail.payTime,callback:function(t){e.$set(e.orderDetail,\"payTime\",t)},expression:\"orderDetail.payTime\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单总价\",prop:\"paynumber\"}},[r(\"Input\",{attrs:{size:\"small\",number:\"\",readonly:\"\"},model:{value:e.orderDetail.paynumber,callback:function(t){e.$set(e.orderDetail,\"paynumber\",t)},expression:\"orderDetail.paynumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"国地税报道\",prop:\"gdsreport\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",disabled:\"\",size:\"small\"},model:{value:e.orderDetail.gdsreport,callback:function(t){e.$set(e.orderDetail,\"gdsreport\",t)},expression:\"orderDetail.gdsreport\"}},[r(\"Option\",{attrs:{value:\"ybd\"}},[e._v(\"已报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"wbd\"}},[e._v(\"未报道\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"bybd\"}},[e._v(\"不用报道\")])],1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道\",prop:\"paydir\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.paydir,callback:function(t){e.$set(e.orderDetail,\"paydir\",t)},expression:\"orderDetail.paydir\"}},e._l(e.payDirs,function(t,a){return r(\"Option\",{key:a,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"已付款\",prop:\"realnumber\"}},[r(\"Input\",{attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.realnumber,callback:function(t){e.$set(e.orderDetail,\"realnumber\",t)},expression:\"orderDetail.realnumber\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"是否提供发票\",prop:\"isornotkp\"}},[r(\"Select\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",size:\"small\"},model:{value:e.orderDetail.isornotkp,callback:function(t){e.$set(e.orderDetail,\"isornotkp\",t)},expression:\"orderDetail.isornotkp\"}},[r(\"Option\",{attrs:{value:\"Y\"}},[e._v(\"是\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"N\"}},[e._v(\"否\")])],1)],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"使用余额\",prop:\"usebalance\"}},[r(\"div\",{staticStyle:{display:\"inline-block\"}},[r(\"Input\",{staticStyle:{width:\"40%\"},attrs:{size:\"small\",number:\"\"},model:{value:e.orderDetail.usebalance,callback:function(t){e.$set(e.orderDetail,\"usebalance\",t)},expression:\"orderDetail.usebalance\"}}),e._v(\" \"),r(\"Button\",{attrs:{type:\"info\",size:\"small\",disabled:e.checkBalance},on:{click:function(t){e.get_balance(\"update\",e.orderDetail.customerid)}}},[e._v(\"查询\")]),e._v(\" \"),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\",\"margin-left\":\"10px\"}},[e._v(\"可用余额：\")]),r(\"span\",{staticStyle:{\"line-height\":\"24px\",height:\"24px\",display:\"inline-block\"}},[e._v(e._s(e.allUseBalance))])],1)])],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:e.open_product_list}},[e._v(\"新增产品\")]),e._v(\" \"),r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.show_contarct(\"edit\")}}},[e._v(\"查看合同\")]),e._v(\" \"),e.showAccountHomeItem?r(\"Button\",{attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.openServiceItem=!0}}},[e._v(\"查看会计到家服务项\")]):e._e()],1)],1)],1),e._v(\" \"),r(\"Row\",[r(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{id:\"orderItem\",\"highlight-row\":\"\",border:\"\",size:\"small\",columns:e.orderItemHeader,data:e.orderItem}})],1),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\",name:\"order_edit\",loading:e.loading},on:{click:e.edit}},[e._v(\"编辑\")]),e._v(\" \"),r(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.openEditOrderDetail=!1}}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),e.openServiceItem?r(\"service-item\",{attrs:{id:e.orderDetail.companyid},on:{close:e.close_item}}):e._e()],1)},[],!1,null,null,null));q.options.__file=\"editOrderDetail.vue\";var G=q.exports,H={data:function(){return{orderId:\"\",openContract:!1,imgArray:[],type:\"onlyShow\",contractFlag:\"\",loading:!1}},methods:{get_contarct_data:function(){var e=this,t={params:{customerId:e.orderId,bType:\"OrderConctract\"}};this.$Get(\"/api/customer/findCustomerFilesById\",t,function(t){e.imgArray=t.data.data,e.openContract=!0})},submit_contract:function(){},img_remove:function(e){var t=this,r=\"/api/customer/customerFileRemove/\"+e;this.$Get(r,{},function(e){t.$Message.success(\"删除成功！\"),t.get_contarct_data()})},handleUpload:function(e){var t=this,r=new FormData;r.append(\"orderId\",t.orderId),r.append(\"files\",e),this.$Post(\"api/order/contract/upload\",r,function(e){t.get_contarct_data()},function(e){})},confirm:function(){var e=this;e.$ButtonCollect(\"order_contract\"),e.loading=!0;var t={id:e.orderId,contractFlag:e.contractFlag};this.$Post(\"api/order/contract/flag/update\",t,function(t){e.loading=!1,e.openContract=!1},function(t){e.loading=!1})}},computed:{isNull:function(){return!this.imgArray.length},isOperation:function(){return\"onlyShow\"!=this.type}},created:function(){var e=this;e.$bus.on(\"ORDER_LIST_CONTARCT_PIC_OPEN\",function(t){e.orderId=t.id,e.type=t.type,e.get_contarct_data()})}},Y=Object(s.a)(H,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"合同\"},model:{value:e.openContract,callback:function(t){e.openContract=t},expression:\"openContract\"}},[e.isNull?r(\"Row\",[r(\"span\",[e._v(\"\\n                该订单未上传合同文件！\\n            \")])]):e._e(),e._v(\" \"),r(\"Row\",{attrs:{gutter:20}},[e._l(e.imgArray,function(t,a){return r(\"Col\",{key:a,attrs:{span:\"6\"}},[r(\"a\",{attrs:{target:\"_blank\",href:\"/api/assets/\"+t.realpath}},[\"xls\"==t.extend||\"xlsx\"==t.extend?r(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/excel.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"doc\"==t.extend||\"docx\"==t.extend?r(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/word.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"ppt\"==t.extend||\"pptx\"==t.extend?r(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/ppt.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"txt\"==t.extend?r(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/txt.png\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):\"pdf\"==t.extend?r(\"img\",{attrs:{src:\"/api/assets/upload/commonImg/pdf.jpg\",alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}}):r(\"img\",{attrs:{src:\"/api/assets/\"+t.realpath,alt:\"不可预览\",width:\"100\",height:\"100\",onerror:\"this.src='/api/assets/upload/commonImg/error.jpg';this.onerror=null\"}})]),e._v(\" \"),e.isOperation?r(\"Button\",{attrs:{type:\"text\"},on:{click:function(r){e.img_remove(t.id)}}},[e._v(\"删除\")]):e._e()],1)}),e._v(\" \"),e.isOperation?r(\"Col\",{staticStyle:{height:\"100px\"},attrs:{span:\"6\"}},[r(\"Upload\",{ref:\"upload\",attrs:{\"before-upload\":e.handleUpload,action:\"\"}},[r(\"Button\",{staticStyle:{\"margin-top\":\"40px\"},attrs:{type:\"ghost\",icon:\"ios-cloud-upload-outline\"}},[e._v(\"选择文件\")])],1)],1):e._e()],2),e._v(\" \"),r(\"Row\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.contract\"],expression:\"['orderL.contract']\"}]},[r(\"Col\",{attrs:{span:\"12\"}},[r(\"Select\",{staticStyle:{width:\"180px\"},model:{value:e.contractFlag,callback:function(t){e.contractFlag=t},expression:\"contractFlag\"}},[r(\"Option\",{attrs:{value:\"wsc\"}},[e._v(\"未上传\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"ysc\"}},[e._v(\"已上传(部分|全部)\")]),e._v(\" \"),r(\"Option\",{attrs:{value:\"ybq\"}},[e._v(\"已补全\")])],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"12\"}},[r(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.confirm}},[e._v(\"修改\")])],1)],1),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"Button\",{attrs:{type:\"primary\"},on:{click:function(t){e.openContract=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);Y.options.__file=\"show_contarct.vue\";var K=Y.exports,J={data:function(){return{changeArea:!1,companyId:\"\",loading:!1,sideLoading:!1,productPrice:0,areaCode:[\"440000\",\"440100\",\"440103\"],SKU:\"\",orderAddProduct:!1,searchProduct:\"\",productColumns:[{type:\"index\",width:60,align:\"center\"},{title:\"产品名称\",key:\"product\"}],productData:[],total:0,page:1,pageSize:10,selectProduct:\"\",queryProperty:[],producSku:[],selectProperty:[]}},computed:{disabled:function(){return!this.SKU},isAdmin:function(){return\"10059\"==localStorage.getItem(\"id\")}},methods:{search_product_1:function(){this.page=1,this.search_product()},search_product:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,product:e.searchProduct}};this.$Get(\"api/product/list\",t,function(t){e.productData=t.data.data.rows,e.total=t.data.data.total,e.loading=!1})},pageChange:function(e){this.page=e,this.search_product()},select_product:function(e){if(\"14\"==e.id)return this.$Message.error(\"对不起，该产品已经不允许操作！\"),!1;this.SKU=\"\",this.sideLoading=!0,this.selectProduct=e,this.productPrice=0,this.queryProperty=[],this.selectProperty=[],this.get_queryProperty(e.id),this.get_product_sku(e.id)},get_queryProperty:function(e){var t=this,r={params:{productId:e}};this.$Get(\"api/product/queryPropertyByProductId\",r,function(r){if(t.queryProperty=r.data.data,100==e){for(var a=[],o=0;o<t.queryProperty.length;o++)95==t.queryProperty[o].propertyId&&(a[0]=t.queryProperty[o]),23==t.queryProperty[o].propertyId&&(a[1]=t.queryProperty[o]),16==t.queryProperty[o].propertyId&&(a[2]=t.queryProperty[o]);t.queryProperty=a,t.changeArea=!0}else t.changeArea=!1})},get_product_sku:function(e){var t=this,r={params:{productId:e}};this.$Get(\"api/product/getSKUListByProductId\",r,function(e){t.producSku=e.data.data;var r=t.producSku[0].linkPropertys.split(\",\");1==r.length&&(t.selectProperty.push(parseInt(r[0])),t.property_change()),t.property_change(),setTimeout(function(){t.sideLoading=!1},200)})},find_sku:function(){var e=this;return new Promise(function(t,r){e.SKU=\"\";var a=e.producSku[0].linkPropertys.split(\",\").length;if(e.selectProperty.length==a)for(var o=[],i=e.selectProperty.join(\",\"),n=0;n<e.producSku.length;n++){o=e.producSku[n].linkPropertys.split(\",\"),e.find_array(o,i)&&(e.SKU=e.producSku[n].id,t())}})},find_array:function(e,t){if(t=t.split(\",\"),e.length!=t.length)return!1;var r=e.length,a=0;e=e.sort(),t=t.sort();for(var o=0;o<r;o++){if(e[o]!=t[o])return!1;a++}return a==r||void 0},get_product_price_by_sku:function(){var e=this,t={params:{skuId:e.SKU,areaId:e.areaCode[2]}};this.$Get(\"api/product/getPriceByAreaAndSKU\",t,function(t){e.productPrice=t.data.data[0].oaprice})},area_change:function(e){this.property_change()},property_change:function(e){var t=this;this.productPrice=0,this.selectProperty.length&&this.find_sku().then(function(){t.get_product_price_by_sku()}).catch(function(e){})},add_product:function(){var e=this,t={params:{productSkuIds:e.SKU,areaId:e.areaCode[2]}};this.$Get(\"/api/order/queryItemDetail\",t,function(t){if(e.detail=t.data.data[0],\"1051\"!=e.detail.skuid&&\"1052\"!=e.detail.skuid&&\"1053\"!=e.detail.skuid&&\"1054\"!=e.detail.skuid||(e.detail.productnumber=\"12\",e.detail.unitprice=parseInt(e.detail.unitprice/12)),\"Y\"==t.data.data[0].iscycle){var r={params:{productId:e.selectProduct.id,companyId:e.companyId}};e.$Get(\"api/order/cycle/service/record/budget/period\",r,function(t){e.detail.servicestartdate=t.data.data,e.$bus.emit(\"ADD_PRODUCT\",e.detail),e.productListShow=!1})}else e.$bus.emit(\"ADD_PRODUCT\",e.detail),e.productListShow=!1})},open_flow_img:function(){window.open(\"/api/dataCenter/activiti/getInputStreamBySkuId?skuId=\"+this.SKU)},rowClassName:function(e,t){if(\"14\"==e.id)return\"disabled-row\"}},watch:{},created:function(){var e=this;this.$bus.off(\"OPEN_ORDER_PRODUCT_LIST\",!0),this.$bus.on(\"OPEN_ORDER_PRODUCT_LIST\",function(t){e.productPrice=0,e.selectProduct=\"\",e.searchProduct=\"\",e.companyId=t,e.search_product(),e.orderAddProduct=!0})}},Q=(r(326),Object(s.a)(J,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Modal\",{attrs:{title:\"产品名称\",width:\"1000\"},model:{value:e.orderAddProduct,callback:function(t){e.orderAddProduct=t},expression:\"orderAddProduct\"}},[r(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[r(\"Col\",{attrs:{span:\"4\"}},[r(\"Input\",{attrs:{placeholder:\"输入产品搜索\"},on:{\"on-enter\":e.search_product_1},model:{value:e.searchProduct,callback:function(t){e.searchProduct=t},expression:\"searchProduct\"}},[r(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.search_product_1},slot:\"append\"})],1)],1)],1),e._v(\" \"),r(\"Row\",[r(\"Col\",{attrs:{span:\"8\"}},[r(\"Card\",[r(\"Col\",{attrs:{span:\"16\"}},[r(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[e._v(\"产品列表\")])]),e._v(\" \"),r(\"Table\",{attrs:{loading:e.loading,\"highlight-row\":\"\",\"row-class-name\":e.rowClassName,columns:e.productColumns,data:e.productData},on:{\"on-row-click\":e.select_product}}),e._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,current:e.page,\"show-total\":\"\",\"show-elevator\":\"\",simple:\"\"},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"15\",offset:\"1\"}},[e.sideLoading?r(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):e._e(),e._v(\" \"),e.selectProduct?r(\"Card\",{attrs:{\"dis-hover\":\"\"}},[r(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[e._v(\"产品详情\")]),e._v(\" \"),r(\"Row\",{staticClass:\"productDetail-title\",staticStyle:{\"margin-bottom\":\"20px\"}},[r(\"p\",{attrs:{id:\"product_name\"}},[e._v(e._s(e.selectProduct.product))]),e._v(\" \"),r(\"p\",{staticClass:\"productDetail-title-price\"},[r(\"span\",[e._v(\"￥\"),r(\"strong\",{attrs:{id:\"product_price\"}},[e._v(e._s(e.productPrice))])])]),e._v(\" \"),r(\"div\",{staticClass:\"productDetail-title-content\"})]),e._v(\" \"),100==e.selectProduct.id&&e.changeArea?r(\"Row\",{staticClass:\"type-select\"},[r(\"p\",[e._v(e._s(e.queryProperty[0].name))]),e._v(\" \"),r(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(t){e.property_change,e.selectProperty[1]=\"\",e.productPrice=0,e.SKU=\"\"}},model:{value:e.selectProperty[0],callback:function(t){e.$set(e.selectProperty,0,t)},expression:\"selectProperty[0]\"}},e._l(e.queryProperty[0].children,function(t,a){return r(\"Radio\",{key:a,attrs:{label:t.pvId}},[e._v(e._s(t.propertyValue))])}),1),e._v(\" \"),310==e.selectProperty[0]?r(\"p\",[e._v(e._s(e.queryProperty[2].name))]):e._e(),e._v(\" \"),310==e.selectProperty[0]?r(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":e.property_change},model:{value:e.selectProperty[1],callback:function(t){e.$set(e.selectProperty,1,t)},expression:\"selectProperty[1]\"}},e._l(e.queryProperty[2].children,function(t,a){return r(\"Radio\",{key:a,attrs:{label:t.pvId}},[e._v(e._s(t.propertyValue))])}),1):e._e(),e._v(\" \"),310!=e.selectProperty[0]?r(\"p\",[e._v(e._s(e.queryProperty[1].name))]):e._e(),e._v(\" \"),310!=e.selectProperty[0]?r(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":e.property_change},model:{value:e.selectProperty[1],callback:function(t){e.$set(e.selectProperty,1,t)},expression:\"selectProperty[1]\"}},e._l(e.queryProperty[1].children,function(t,a){return r(\"Radio\",{key:a,attrs:{label:t.pvId}},[e._v(e._s(t.propertyValue))])}),1):e._e()],1):e._e(),e._v(\" \"),e._l(e.queryProperty,function(t,a){return 100!=e.selectProduct.id?r(\"Row\",{key:a,staticClass:\"type-select\"},[r(\"p\",[e._v(e._s(t.name))]),e._v(\" \"),r(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":e.property_change},model:{value:e.selectProperty[a],callback:function(t){e.$set(e.selectProperty,a,t)},expression:\"selectProperty[index]\"}},e._l(t.children,function(t,a){return r(\"Radio\",{key:a,attrs:{label:t.pvId}},[e._v(e._s(t.propertyValue))])}),1)],1):e._e()}),e._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"20px\"}},[r(\"p\",{staticStyle:{\"font-size\":\"16px\",\"padding-bottom\":\"16px\"}},[e._v(\"地区\")]),e._v(\" \"),r(\"Col\",{attrs:{span:\"10\"}},[r(\"al-cascader\",{attrs:{\"data-type\":\"code\",level:\"2\"},on:{\"on-change\":e.area_change},model:{value:e.areaCode,callback:function(t){e.areaCode=t},expression:\"areaCode\"}})],1)],1),e._v(\" \"),r(\"Row\",[r(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\",disabled:e.disabled},on:{click:e.add_product}},[e._v(\"立即购买\")]),e._v(\" \"),e.isAdmin?r(\"Button\",{staticStyle:{\"margin-top\":\"20px\"},attrs:{type:\"error\",icon:\"bag\",size:\"large\",disabled:e.disabled},on:{click:e.open_flow_img}},[e._v(\"查看流程图\")]):e._e()],1)],2):e._e()],1)],1),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null));Q.options.__file=\"productSelect.vue\";var X={name:\"orderList_index\",components:{showOrder:C,createOrder:F,amendOrder:M,editOrder:G,showContarct:K,productSelect:Q.exports},data:function(){var e=this;return{imgLoading:!0,flowImgOpen:!1,flowChartImg:\"\",payDirType:[],search_model:\"0\",selectRow:\"\",formValidateSearch:{ordercode:\"\",companyname:\"\",customername:\"\",customertel:\"\",payDir:\"\",date:[],crealname:\"\",frealname:\"\",paytime:[]},total:0,page:1,pageSize:10,loading:!1,order:\"desc\",sortField:\"id\",header:[{title:\"订单号码\",key:\"ordercode\",minWidth:140},{title:\"公司名称\",key:\"companyname\",minWidth:300},{title:\"客户名称\",key:\"name\",minWidth:120},{title:\"客户电话\",key:\"tel\",minWidth:120},{title:\"产品名称\",key:\"productname\",minWidth:180,render:function(e,t){return\"\"==t.row.productname||null==t.row.productname?\"\":t.row.productname.length>10?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.productname.slice(0,10)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.productname)])]):e(\"span\",t.row.productname)}},{title:\"流程状态\",key:\"ProcessType\",minWidth:120,sortable:\"custom\"},{title:\"缴费渠道\",key:\"base_paydir\",minWidth:140,sortable:\"custom\"},{title:\"订单价格\",key:\"paynumber\",minWidth:120,sortable:\"custom\"},{title:\"已付款\",key:\"realnumber\",minWidth:100,sortable:\"custom\"},{title:\"创建时间\",key:\"base_createdate\",minWidth:120,sortable:\"custom\"},{title:\"缴费日期\",key:\"payTime\",minWidth:120,sortable:\"custom\"},{title:\"余款\",key:\"neednumber\",minWidth:100,sortable:\"custom\"},{title:\"客户来源\",key:\"customersource\",minWidth:120},{title:\"创建人\",key:\"crealname\",minWidth:100},{title:\"跟进人\",key:\"frealname\",minWidth:100},{title:\"上传合同\",key:\"contract_flag\",minWidth:120,sortable:\"custom\"},{title:\"操作\",key:\"action\",fixed:\"right\",minWidth:120,render:function(t,r){var a=e;if(r.index!=e.data.length-1)return t(\"div\",[t(\"Button\",{props:{type:\"warning\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.record\"}],on:{click:function(){a.$bus.emit(\"ORDER_APPROVELIST_LOG\",r.row.id)}}},\"审批记录\")])}},{title:\"退款\",key:\"action\",minWidth:75,render:function(t,r){var a=e;if(r.index!=e.pageSize)return t(\"Button\",{props:{type:\"error\",size:\"small\"},directives:[{name:\"permission\",value:\"orderL.cancelOrder\"}]},[t(\"Poptip\",{props:{transfer:!0,confirm:!0,title:\"您确定要退款此订单吗！\"},on:{\"on-ok\":function(){var t={id:r.row.id};e.$Post(\"api/order/refund\",t,function(e){a.get_data(),a.$bus.emit(\"UPDATE_ORDER_LIST\")},function(e){})}}},\"退款\")])}}],amdinOpertionCol:{title:\"订单操作\",key:\"action\",minWidth:180,render:function(t,r){var a=e;if(r.index!=e.pageSize)return t(\"div\",[t(\"Button\",{props:{type:\"warning\",size:\"small\"},on:{click:function(){a.$ButtonCollect(\"order_rebuild_orderflow\");var e={params:{orderId:r.row.id}};a.$Get(\"api/order/resetOrderProcess\",e,function(e){a.$Message.success(e.data.msg),a.get_data()})}}},\"重置流程\"),t(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginLeft:\"10px\"},on:{click:function(){a.$ButtonCollect(\"order_rebuild_worderorder\");var e={params:{orderId:r.row.id}};a.$Get(\"api/order/orderApprovalFinish\",e,function(e){a.$Message.success(e.data.msg)})}}},\"生成工单\")])}},data:[],payDirs:[],cluesources:[],order_contract_flag:[],payDirs_map:new Map,cluesources_map:new Map,order_contract_flag_map:new Map}},methods:{account_downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",ordercode:this.formValidateSearch.ordercode,companyname:this.formValidateSearch.companyname,customername:this.formValidateSearch.customername,customertel:this.formValidateSearch.customertel,crealname:this.formValidateSearch.crealname,frealname:this.formValidateSearch.frealname,payDir:this.formValidateSearch.payDir,bcreatedate:Object(i.a)(this.formValidateSearch.date[0]),ecreatedate:Object(i.a)(this.formValidateSearch.date[1]),bpaytime:Object(i.a)(this.formValidateSearch.paytime[0]),epaytime:Object(i.a)(this.formValidateSearch.paytime[1]),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"payTime\",title:\"到账时间\"},{field:\"affiliation_area\",title:\"地区\",format:\"affiliation_area\"},{field:\"departname\",title:\"部门\"},{field:\"frealname\",title:\"业务员\"},{field:\"name\",title:\"联系人\"},{field:\"\",title:\"是否交回\"},{field:\"\",title:\"360搜索\"},{field:\"companyname\",title:\"企业名称\"},{field:\"tel\",title:\"联系电话\"},{field:\"realnumber\",title:\"客户小计\"},{field:\"base_paydir\",title:\"入款账户\",format:\"payDirs\"}]))},t=this.$MergeURL(\"api/order/list\",e);window.open(t)},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",ordercode:this.formValidateSearch.ordercode,companyname:this.formValidateSearch.companyname,customername:this.formValidateSearch.customername,customertel:this.formValidateSearch.customertel,crealname:this.formValidateSearch.crealname,frealname:this.formValidateSearch.frealname,payDir:this.formValidateSearch.payDir,bcreatedate:Object(i.a)(this.formValidateSearch.date[0]),ecreatedate:Object(i.a)(this.formValidateSearch.date[1]),bpaytime:Object(i.a)(this.formValidateSearch.paytime[0]),epaytime:Object(i.a)(this.formValidateSearch.paytime[1]),export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"ordercode\",title:\"订单号码\"},{field:\"companyname\",title:\"公司名称\"},{field:\"name\",title:\"客户名称\"},{field:\"productname\",title:\"产品名称\"},{field:\"ProcessType\",title:\"流程状态\"},{field:\"base_paydir\",title:\"缴费渠道\",format:\"payDirs\"},{field:\"paynumber\",title:\"订单价格\"},{field:\"realnumber\",title:\"已付款\"},{field:\"neednumber\",title:\"余款\"},{field:\"base_createdate\",title:\"创建时间\"},{field:\"crealname\",title:\"创建人\"},{field:\"frealname\",title:\"跟进人\"}]))},t=this.$MergeURL(\"api/order/list\",e);window.open(t)},Search:function(){this.page=1,this.get_data()},handleReset:function(){this.$refs.formValidateSearch.resetFields(),this.formValidateSearch.date=[],this.get_data()},sort:function(e){this.sortField=e.key,\"normal\"==e.order?(this.order=\"desc\",this.sortField=\"id\"):this.order=e.order,this.get_data()},get_data:function(){var e=this;e.loading=!0;var t={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,ordercode:e.formValidateSearch.ordercode,companyname:e.formValidateSearch.companyname,customername:e.formValidateSearch.customername,customertel:e.formValidateSearch.customertel,crealname:e.formValidateSearch.crealname,frealname:e.formValidateSearch.frealname,payDir:e.formValidateSearch.payDir,bpaytime:Object(i.a)(e.formValidateSearch.paytime[0]),epaytime:Object(i.a)(e.formValidateSearch.paytime[1]),sumField:\"paynumber,realnumber,neednumber\",bcreatedate:Object(i.a)(e.formValidateSearch.date[0]),ecreatedate:Object(i.a)(e.formValidateSearch.date[1])}};this.$Get(\"api/order/list\",t,function(t){e.data=t.data.data.rows,e.total=t.data.data.total;for(var r=0;r<e.data.length;r++)e.data[r].base_paydir=e.payDirs_map.get(e.data[r].base_paydir),e.data[r].customersource=e.cluesources_map.get(e.data[r].customersource),e.data[r].contract_flag=e.order_contract_flag_map.get(e.data[r].contract_flag),e.data[r].base_createdate&&(e.data[r].base_createdate=e.data[r].base_createdate.slice(0,10));e.data.push({base_paydir:\"合计\",paynumber:t.data.data.sum.paynumber,realnumber:t.data.data.sum.realnumber,neednumber:t.data.data.sum.neednumber}),e.loading=!1})},pageChange:function(e){this.page=e,this.get_data()},pageSizeChange:function(e){this.pageSize=e,this.get_data()},rowClassName:function(e,t){if(\"调整订单\"==e.ProcessType&&e.id!=this.selectRow.id)return\"demo-table-error-row\"},select_row:function(e){e.id?this.selectRow=e:this.selectRow=\"\"},get_data_center:function(){var e=this,t=this;return new Promise(function(r,a){e.$GetDataCenter(\"payDirs,cluesources,order_contract_flag\",function(e){t.payDirs=e.data.data.payDirs,t.cluesources=e.data.data.cluesources,t.order_contract_flag=e.data.data.order_contract_flag,t.payDirs_map=t.$array2map(t.payDirs),t.cluesources_map=t.$array2map(t.cluesources),t.order_contract_flag_map=t.$array2map(t.order_contract_flag),r()})})},open_order_detail:function(e){this.$bus.emit(\"OPEN_ORDERLIST_DETAIL\",e.id)},order_show:function(){this.selectRow?this.open_order_detail(this.selectRow):this.$Message.warning(\"请选择一行进行操作！\")},open_flowChart:function(){var e=this;this.selectRow?(this.imgLoading=!0,this.flowImgOpen=!0,this.flowChartImg=\"/api/dataCenter/activiti/getResourceInputStreamObj?bussinessKey=\"+this.selectRow.id,setTimeout(function(){e.imgLoading=!1},1e3)):this.$Message.warning(\"请选择一行进行操作！\")},reapply_process:function(){var e=this;this.selectRow?\"Returned\"==e.selectRow.CurrentProcess?e.$Modal.confirm({loading:!0,title:\"重新提交审批\",content:\"<p>是否重新提交审批</p>\",onOk:function(){var t={params:{orderId:e.selectRow.id,auditFlag:1}};e.$Get(\"api/activiti/reApplyProcessByOrderId\",t,function(t){e.$Modal.remove(),e.$Message.success(\"重新提交成功\"),setTimeout(function(){e.get_data()},1e3)},function(t){e.$Modal.remove(),e.$Message.error(\"提交失败！\"),setTimeout(function(){e.get_data()},1e3)})}}):e.$Message.warning(\"该订单状态不允许重新提交\"):this.$Message.warning(\"请选择一行进行操作！\")},del_order:function(){var e=this;if(this.selectRow){e.$ButtonCollect(\"order_rebuild_orderflow\");e.$ButtonCollect(\"order_del\");var t={id:e.selectRow.id};e.$Post(\"api/order/del\",t,function(t){setTimeout(function(){e.get_data()},500)},function(e){})}else this.$Message.warning(\"请选择一行进行操作！\")},xiugai_open:function(){this.selectRow?\"Finished\"!=this.selectRow.CurrentProcess?this.$Message.warning(\"未完结订单不予许进行修改！\"):this.$bus.emit(\"OPEN_ORDERLIST_AMEND\",this.selectRow.id):this.$Message.warning(\"请选择一行进行操作！\")},open_edit:function(){this.selectRow?\"Ready\"!=this.selectRow.CurrentProcess&&\"Returned\"!=this.selectRow.CurrentProcess&&\"ReturnedToReady\"!=this.selectRow.CurrentProcess?this.$Message.warning(\"当前订单状态不允许编辑！\"):this.$bus.emit(\"OPEN_ORDERLIST_EDIT\",this.selectRow.id):this.$Message.warning(\"请选择一行进行操作！\")},open_add:function(){this.$bus.emit(\"OPEN_ORDERLIST_ADD\",!0)},order_cancelOrder:function(){}},created:function(){var e=this;this.loading=!0,this.get_data_center().then(this.get_data()),10059==localStorage.getItem(\"id\")&&this.header.push(this.amdinOpertionCol),this.$bus.on(\"UPDATE_ORDER_LIST\",function(t){e.get_data()})}},Z=(r(328),Object(s.a)(X,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"Card\",{staticStyle:{\"min-width\":\"800px\"}},[r(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[r(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[r(\"Panel\",{attrs:{name:\"1\"}},[r(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                            筛选\\n                        \"),r(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.Search(t):null}},slot:\"content\"},[r(\"Form\",{ref:\"formValidateSearch\",attrs:{model:e.formValidateSearch,\"label-width\":100}},[r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"订单号码：\",prop:\"ordercode\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.ordercode,callback:function(t){e.$set(e.formValidateSearch,\"ordercode\",t)},expression:\"formValidateSearch.ordercode\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"公司名称：\",prop:\"companyname\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.companyname,callback:function(t){e.$set(e.formValidateSearch,\"companyname\",t)},expression:\"formValidateSearch.companyname\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customername\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customername,callback:function(t){e.$set(e.formValidateSearch,\"customername\",t)},expression:\"formValidateSearch.customername\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"客户电话：\",prop:\"customertel\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.customertel,callback:function(t){e.$set(e.formValidateSearch,\"customertel\",t)},expression:\"formValidateSearch.customertel\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费渠道：\",prop:\"customername\"}},[r(\"Select\",{attrs:{transfer:\"\",size:\"small\"},model:{value:e.formValidateSearch.payDir,callback:function(t){e.$set(e.formValidateSearch,\"payDir\",t)},expression:\"formValidateSearch.payDir\"}},e._l(e.payDirs,function(t,a){return r(\"Option\",{key:a,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"创建时间：\",prop:\"date\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.formValidateSearch.date,callback:function(t){e.$set(e.formValidateSearch,\"date\",t)},expression:\"formValidateSearch.date\"}})],1)],1)],1),e._v(\" \"),r(\"Row\",{attrs:{gutter:16}},[r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"创建人：\",prop:\"crealname\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.crealname,callback:function(t){e.$set(e.formValidateSearch,\"crealname\",t)},expression:\"formValidateSearch.crealname\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"跟进人：\",prop:\"frealname\"}},[r(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidateSearch.frealname,callback:function(t){e.$set(e.formValidateSearch,\"frealname\",t)},expression:\"formValidateSearch.frealname\"}})],1)],1),e._v(\" \"),r(\"Col\",{attrs:{span:\"8\"}},[r(\"FormItem\",{attrs:{label:\"缴费时间：\",prop:\"paytime\"}},[r(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\",size:\"small\"},model:{value:e.formValidateSearch.paytime,callback:function(t){e.$set(e.formValidateSearch,\"paytime\",t)},expression:\"formValidateSearch.paytime\"}})],1)],1)],1),e._v(\" \"),r(\"center\",[r(\"FormItem\",[r(\"Button\",{attrs:{type:\"primary\"},on:{click:e.Search}},[e._v(\"搜索\")]),e._v(\" \"),r(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:e.handleReset}},[e._v(\"重置\")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),r(\"Row\",[r(\"ButtonGroup\",[r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.add\"],expression:\"['orderL.add']\"}],attrs:{type:\"primary\",icon:\"plus\",name:\"order_add\"},on:{click:e.open_add}},[e._v(\"录入\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.edit\"],expression:\"['orderL.edit']\"}],attrs:{type:\"primary\",icon:\"edit\",name:\"order_edit\"},on:{click:e.open_edit}},[e._v(\"编辑\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.detail\"],expression:\"['orderL.detail']\"}],attrs:{type:\"primary\",icon:\"information-circled\",name:\"order_show\"},on:{click:e.order_show}},[e._v(\"查看\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.flowChart\"],expression:\"['orderL.flowChart']\"}],attrs:{type:\"primary\",icon:\"ios-crop\"},on:{click:e.open_flowChart}},[e._v(\"查看流程图\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.resubmit\"],expression:\"['orderL.resubmit']\"}],attrs:{type:\"primary\",icon:\"refresh\",name:\"order_re_submit\"},on:{click:e.reapply_process}},[e._v(\"重新提交\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.amend\"],expression:\"['orderL.amend']\"}],attrs:{type:\"primary\",icon:\"edit\",name:\"order_amend\"},on:{click:e.xiugai_open}},[e._v(\"修改\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.delOrder\"],expression:\"['orderL.delOrder']\"}],attrs:{type:\"primary\",icon:\"trash-b\",name:\"order_amend\"},on:{click:e.del_order}},[e._v(\"删除\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.amend\"],expression:\"['orderL.amend']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.get_data}},[e._v(\"刷新\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.export\"],expression:\"['orderL.export']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")]),e._v(\" \"),r(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"orderL.export\"],expression:\"['orderL.export']\"}],attrs:{type:\"primary\",icon:\"ios-color-filter-outline\"},on:{click:e.account_downloadExcel}},[e._v(\"结算导出\")])],1)],1),e._v(\" \"),r(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[r(\"Table\",{attrs:{loading:e.loading,\"highlight-row\":\"\",size:\"small\",border:\"\",\"row-class-name\":e.rowClassName,columns:e.header,data:e.data},on:{\"on-row-click\":e.select_row,\"on-row-dblclick\":e.open_order_detail,\"on-sort-change\":e.sort}}),e._v(\" \"),r(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:e.page},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1),e._v(\" \"),r(\"Modal\",{attrs:{title:\"查看流程图\",width:\"80%\"},model:{value:e.flowImgOpen,callback:function(t){e.flowImgOpen=t},expression:\"flowImgOpen\"}},[e.imgLoading?r(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):e._e(),e._v(\" \"),r(\"center\",[r(\"img\",{attrs:{src:e.flowChartImg,width:\"100%\"}})]),e._v(\" \"),r(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1),e._v(\" \"),r(\"show-order\",{attrs:{payDirs:e.payDirs}}),e._v(\" \"),r(\"create-order\",{attrs:{payDirs:e.payDirs}}),e._v(\" \"),r(\"amend-order\",{attrs:{payDirs:e.payDirs}}),e._v(\" \"),r(\"edit-order\",{attrs:{payDirs:e.payDirs}}),e._v(\" \"),r(\"show-contarct\"),e._v(\" \"),r(\"product-select\")],1)},[],!1,null,null,null));Z.options.__file=\"orderListIndex.vue\";t.default=Z.exports},79:function(e,t,r){\"use strict\";r.d(t,\"b\",function(){return l}),r.d(t,\"a\",function(){return c}),r.d(t,\"c\",function(){return d});var a=r(6),o=r.n(a),i=r(7),n=r.n(i);function s(e){200==e.status?n.a.Message.error(e.data.msg):n.a.Message.error(\"服务器异常！\"+e.message)}function l(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,i=\"api/\"+e;return new Promise(function(e,r){o.a.get(i,t).then(function(t){200==t.status&&4e4==t.data.msgCode?e(t.data.data):a(t)}).catch(function(e){r(a(e))})})}function d(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,i=\"api/\"+e;return new Promise(function(e,r){o.a.post(i,t).then(function(t){200==t.status&&4e4==t.data.msgCode?(n.a.Message.success(t.data.msg||\"执行成功！\"),e({status:!0,data:t.data})):(n.a.Message.error(t.data.msg),e({status:!1,data:t.data}))}).catch(function(e){r(a(e))})})}function c(e){var t={params:{groupCodes:e}};return new Promise(function(e,r){o.a.get(\"api/system/tsType/queryTsTypeByGroupCodes\",t).then(function(t){200==t.status&&4e4==t.data.msgCode?e(t.data.data):fail(t)}).catch(function(e){r(s(e))})})}}}]);"}