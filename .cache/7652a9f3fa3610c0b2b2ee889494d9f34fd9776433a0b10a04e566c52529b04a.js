{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{854:function(e,t,a){\"use strict\";a.r(t);var i={props:[\"invoiceStatus\"],data:function(){return{openUpdateTemplate:!1,loading:!1,invoiceTemplate:{}}},methods:{update_templ:function(){var t=this;t.loading=!0;var e={id:t.invoiceTemplate.id,invoiceStatus:t.invoiceTemplate.invoice_status,taxMemo:t.invoiceTemplate.tax_memo,enterpriseName:t.invoiceTemplate.enterprise_name,invoiceType:t.invoiceTemplate.invoice_type,taxNum:t.invoiceTemplate.tax_num,invoiceContent:t.invoiceTemplate.invoice_content,taxMoney:t.invoiceTemplate.tax_money,registerAddress:t.invoiceTemplate.register_address,register_tel:t.invoiceTemplate.registerTel,bank:t.invoiceTemplate.bank,bankAccount:t.invoiceTemplate.bank_account,receiver:t.invoiceTemplate.receiver,receiverMobile:t.invoiceTemplate.receiver_mobile,receiverAddress:t.invoiceTemplate.receiver_address,email:t.invoiceTemplate.email};this.$Post(\"api/customer/updateCustomerInvoice\",e,function(e){t.loading=!1,t.openUpdateTemplate=!1,t.$bus.emit(\"UPDATE_INVOICE_LIST\",!0)},function(e){t.loading=!1})}},created:function(){var t=this;this.$bus.off(\"OPEN_EDIT_INVOICE_TEMPLATE\",!0),this.$bus.on(\"OPEN_EDIT_INVOICE_TEMPLATE\",function(e){t.invoiceTemplate=e,t.openUpdateTemplate=!0})}},o=a(4),n=Object(o.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Modal\",{attrs:{width:\"700\",title:\"查看\"},model:{value:t.openUpdateTemplate,callback:function(e){t.openUpdateTemplate=e},expression:\"openUpdateTemplate\"}},[a(\"Form\",{ref:\"invoiceTemplate\",attrs:{model:t.invoiceTemplate,\"label-width\":120}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户名称\",prop:\"customerName\"}},[a(\"Input\",{attrs:{placeholder:\"\",readonly:\"\"},model:{value:t.invoiceTemplate.customerName,callback:function(e){t.$set(t.invoiceTemplate,\"customerName\",e)},expression:\"invoiceTemplate.customerName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"单位名称\",prop:\"enterprise_name\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.enterprise_name,callback:function(e){t.$set(t.invoiceTemplate,\"enterprise_name\",e)},expression:\"invoiceTemplate.enterprise_name\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"发票类型\",prop:\"invoice_type\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.invoice_type,callback:function(e){t.$set(t.invoiceTemplate,\"invoice_type\",e)},expression:\"invoiceTemplate.invoice_type\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"纳税人识别号\",prop:\"tax_num\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.tax_num,callback:function(e){t.$set(t.invoiceTemplate,\"tax_num\",e)},expression:\"invoiceTemplate.tax_num\"}})],1)],1)],1),t._v(\" \"),a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"发票内容\",prop:\"invoice_content\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.invoice_content,callback:function(e){t.$set(t.invoiceTemplate,\"invoice_content\",e)},expression:\"invoiceTemplate.invoice_content\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"开票金额\",prop:\"tax_money\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.tax_money,callback:function(e){t.$set(t.invoiceTemplate,\"tax_money\",e)},expression:\"invoiceTemplate.tax_money\"}})],1)],1)],1),t._v(\" \"),\"增值税专用发票\"==t.invoiceTemplate.invoice_type||\"专用发票\"==t.invoiceTemplate.invoice_type?a(\"Row\",[a(\"FormItem\",{attrs:{label:\"注册地址\",prop:\"register_address\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.register_address,callback:function(e){t.$set(t.invoiceTemplate,\"register_address\",e)},expression:\"invoiceTemplate.register_address\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"注册电话\",prop:\"register_tel\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.register_tel,callback:function(e){t.$set(t.invoiceTemplate,\"register_tel\",e)},expression:\"invoiceTemplate.register_tel\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"开户银行\",prop:\"bank\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.bank,callback:function(e){t.$set(t.invoiceTemplate,\"bank\",e)},expression:\"invoiceTemplate.bank\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"银行账户\",prop:\"bank_account\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.bank_account,callback:function(e){t.$set(t.invoiceTemplate,\"bank_account\",e)},expression:\"invoiceTemplate.bank_account\"}})],1)],1):t._e(),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"领取方式\",prop:\"express_type\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.express_type,callback:function(e){t.$set(t.invoiceTemplate,\"express_type\",e)},expression:\"invoiceTemplate.express_type\"}})],1),t._v(\" \"),\"快递\"==t.invoiceTemplate.express_type?a(\"Row\",[a(\"FormItem\",{attrs:{label:\"接收人\",prop:\"receiver\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.receiver,callback:function(e){t.$set(t.invoiceTemplate,\"receiver\",e)},expression:\"invoiceTemplate.receiver\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"联系方式\",prop:\"receiver_mobile\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.receiver_mobile,callback:function(e){t.$set(t.invoiceTemplate,\"receiver_mobile\",e)},expression:\"invoiceTemplate.receiver_mobile\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"收件地址\",prop:\"receiver_address\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.receiver_address,callback:function(e){t.$set(t.invoiceTemplate,\"receiver_address\",e)},expression:\"invoiceTemplate.receiver_address\"}})],1)],1):t._e(),t._v(\" \"),\"邮箱\"==t.invoiceTemplate.express_type?a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"email\"}},[a(\"Input\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.email,callback:function(e){t.$set(t.invoiceTemplate,\"email\",e)},expression:\"invoiceTemplate.email\"}})],1):t._e(),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"tax_memo\"}},[a(\"Input\",{attrs:{placeholder:\"\",type:\"textarea\",row:\"5\"},model:{value:t.invoiceTemplate.tax_memo,callback:function(e){t.$set(t.invoiceTemplate,\"tax_memo\",e)},expression:\"invoiceTemplate.tax_memo\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"创建时间\",prop:\"create_date\"}},[a(\"Input\",{attrs:{placeholder:\"\",readonly:\"\"},model:{value:t.invoiceTemplate.create_date,callback:function(e){t.$set(t.invoiceTemplate,\"create_date\",e)},expression:\"invoiceTemplate.create_date\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"状态\",prop:\"invoice_status\"}},[a(\"Select\",{attrs:{placeholder:\"\"},model:{value:t.invoiceTemplate.invoice_status,callback:function(e){t.$set(t.invoiceTemplate,\"invoice_status\",e)},expression:\"invoiceTemplate.invoice_status\"}},t._l(t.invoiceStatus,function(e){return a(\"Option\",{key:e.id,attrs:{value:e.typecode}},[t._v(t._s(e.typename))])}),1)],1)],1),t._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.update_templ}},[t._v(\"修改\")])],1)],1)],1)},[],!1,null,null,null);n.options.__file=\"show.vue\";var l=n.exports;a(114);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c={components:{showTemplate:l},name:\"invoicelist_index\",data:function(){var e,a=this;return r(e={invoiceStatus:[],invoiceStatus_Map:new Map,selectRow:[],logoutLoading:!1,logoutReason:\"\",openLogout:!1},\"selectRow\",{}),r(e,\"current_row\",\"\"),r(e,\"search_model\",\"\"),r(e,\"loading\",!1),r(e,\"openDetail\",!1),r(e,\"seacrhFormInline\",{followName:\"\",customerName:\"\"}),r(e,\"page\",1),r(e,\"pageSize\",10),r(e,\"total\",0),r(e,\"data\",[]),r(e,\"header\",[{title:\"状态\",key:\"invoice_status_name\",minWidth:120,render:function(e,t){return e(\"div\",{},a.invoiceStatus_Map.get(t.row.invoice_status))}},{title:\"客户名称\",key:\"customerName\",minWidth:100},{title:\"单位名称\",key:\"enterprise_name\",minWidth:220},{title:\"发票类别\",key:\"invoice_type\",minWidth:120},{title:\"发票内容\",key:\"invoice_content\",minWidth:120},{title:\"领取方式\",key:\"express_type\",minWidth:120},{title:\"跟进销售\",key:\"followby\",minWidth:120},{title:\"创建时间\",key:\"create_date\",minWidth:120,render:function(e,t){var a=t.row.create_date;return a&&(a=a.slice(0,10)),e(\"div\",{},a)}},{title:\"备注\",key:\"tax_memo\",minWidth:150},{title:\"操作\",width:100,align:\"center\",render:function(e,t){return e(\"div\",[e(\"Button\",{props:{type:\"text\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){a.update_template(t.row)}}},\"查看\")])}}]),e},methods:{save_current_row:function(e){this.current_row=e},update_template:function(e){this.$bus.emit(\"OPEN_EDIT_INVOICE_TEMPLATE\",e)},get_data:function(){var t=this;t.loading=!0;var e={params:{page:t.page,pageSize:t.pageSize,sortField:\"id\",followName:t.seacrhFormInline.followName,customerName:t.seacrhFormInline.customerName}};this.$Get(\"api/customer/customerInvoiceList\",e,function(e){t.total=e.data.data.total,t.data=e.data.data.rows,t.loading=!1}),this.current_row=\"\"},pageChange:function(e){this.page=e,this.get_data()},search:function(){this.page=1,this.get_data()},reset:function(){this.$refs.seacrhFormInline.resetFields(),this.get_data()},get_data_center:function(){var t=this;this.$GetDataCenter(\"invoiceStatus\",function(e){t.invoiceStatus=e.data.data.invoiceStatus,t.invoiceStatus_Map=t.$array2map(t.invoiceStatus),t.get_data()})}},created:function(){this.get_data_center();var t=this;this.$bus.on(\"UPDATE_INVOICE_LIST\",function(e){t.get_data()})}},s=Object(o.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:t.search_model,callback:function(e){t.search_model=e},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),t._v(\"\\n                  筛选\\n                  \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.search(e):null}},slot:\"content\"},[a(\"Form\",{ref:\"seacrhFormInline\",attrs:{model:t.seacrhFormInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customerName\",label:\"客户名称：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.customerName,callback:function(e){t.$set(t.seacrhFormInline,\"customerName\",e)},expression:\"seacrhFormInline.customerName\"}})],1)],1),t._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"followName\",label:\"跟进人：\"}},[a(\"Input\",{attrs:{type:\"text\",size:\"small\",placeholder:\"\"},model:{value:t.seacrhFormInline.followName,callback:function(e){t.$set(t.seacrhFormInline,\"followName\",e)},expression:\"seacrhFormInline.followName\"}})],1)],1)],1),t._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:t.search}},[t._v(\"搜索\")]),t._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:t.reset}},[t._v(\"重置\")])],1)],1)],1)],1)],1)],1),t._v(\" \"),a(\"Row\"),t._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",loading:t.loading,columns:t.header,data:t.data},on:{\"on-current-change\":t.save_current_row}}),t._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{placement:\"top\",size:\"small\",total:t.total,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":t.pageChange}})],1)],1),t._v(\" \"),a(\"show-template\",{attrs:{invoiceStatus:t.invoiceStatus}})],1)},[],!1,null,null,null);s.options.__file=\"index.vue\";t.default=s.exports}}]);"}