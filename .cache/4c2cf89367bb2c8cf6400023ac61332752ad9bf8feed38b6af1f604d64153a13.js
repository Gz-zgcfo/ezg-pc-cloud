{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{409:function(t,a,n){\"use strict\";n.r(a);var o=n(25),r={props:[\"complaintType\",\"processType\"],data:function(){return{search_model:\"\",Nloading:!1,NpageTotal:new Number,Npage:\"1\",NpageSize:\"10\",Ndata:[],NformInline:{updatedate:[],createdate:[],companyname:\"\",customername:\"\",customertel:\"\",departname:\"\"},page:1,pageSize:10,current_row:\"\",header:[{title:\"客户\",width:100,key:\"name\"},{title:\"客户电话\",width:120,key:\"tel\"},{title:\"公司\",width:260,key:\"companyname\",render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>16?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,16)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",width:200,key:\"departname\"},{title:\"投诉类型\",width:120,key:\"typeName\"},{title:\"处理状态\",width:120,key:\"processName\"},{title:\"受理人\",width:120,key:\"receiving\"},{title:\"创建时间\",width:120,key:\"createdate\"},{title:\"更新时间\",width:120,key:\"updatedate\"},{title:\"创建人\",width:120,key:\"createby\"}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",processType:\"'unDone','doing'\",companyname:this.NformInline.companyname,customername:this.NformInline.customername,customertel:this.NformInline.customertel,bcreatedate:Object(o.a)(this.NformInline.createdate[0]),ecreatedate:Object(o.a)(this.NformInline.createdate[1]),bupdatedate:Object(o.a)(this.NformInline.updatedate[0]),eupdatedate:Object(o.a)(this.NformInline.updatedate[1]),departname:this.NformInline.departname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"type\",title:\"投诉类型\",format:\"complaintType\"},{field:\"processType\",title:\"处理状态\",format:\"processType\"},{field:\"receiving\",title:\"受理人\"},{field:\"createdate\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"},{field:\"createby\",title:\"创建人\"},{field:\"record\",title:\"投诉内容\"},{field:\"rx\",title:\"解决方案\"}]))},t=this.$MergeURL(\"api/customer/complaintList\",e);window.open(t)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.NformInline.companyname=\"\",this.NformInline.customername=\"\",this.NformInline.customertel=\"\",this.NformInline.updatedate=[],this.NformInline.createdate=[],this.NformInline.departname=\"\",this.getData()},getData:function(){var e=this;e.Nloading=!0;var t={params:{page:e.page,pageSize:e.pageSize,processType:\"'unDone','doing'\",sortField:\"updatedate\",companyname:e.NformInline.companyname,customername:e.NformInline.customername,customertel:e.NformInline.customertel,bcreatedate:Object(o.a)(e.NformInline.createdate[0]),ecreatedate:Object(o.a)(e.NformInline.createdate[1]),bupdatedate:Object(o.a)(e.NformInline.updatedate[0]),eupdatedate:Object(o.a)(e.NformInline.updatedate[1]),departname:e.NformInline.departname}};this.$Get(\"api/customer/complaintList\",t,function(t){e.Ndata=t.data.data.rows,e.NpageTotal=t.data.data.total,e.Nloading=!1;for(var a=0;a<e.Ndata.length;a++)e.Ndata[a].complaintManage=e.Ndata[a].complaint_manage,e.Ndata[a].typeName=e.complaintType.get(e.Ndata[a].type),e.Ndata[a].processName=e.processType.get(e.Ndata[a].processType),null==e.Ndata[a].createdate||\"\"==e.Ndata[a].createdate||(e.Ndata[a].createdate=e.Ndata[a].createdate.slice(0,10)),null==e.Ndata[a].updatedate||\"\"==e.Ndata[a].updatedate||(e.Ndata[a].updatedate=e.Ndata[a].updatedate.slice(0,10))})},save_current_row:function(e){this.current_row=e},NpageChange:function(e){this.page=e,this.getData()},NpageSizeChange:function(){this.pageSize=e,this.getData()},Add_deal_complain:function(){this.$bus.emit(\"ADD_COMPLAINT\",!0)},deal_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"DEAL_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")},open_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"SHOW_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")}},created:function(){var e=this;this.getData(),e.$bus.on(\"UPDATE_COMPLAINT\",function(t){e.getData()})}},l=n(2),i=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"NformInline\",attrs:{model:e.NformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customername\",label:\"客户：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.NformInline.customername,callback:function(t){e.$set(e.NformInline,\"customername\",t)},expression:\"NformInline.customername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\"},model:{value:e.NformInline.createdate,callback:function(t){e.$set(e.NformInline,\"createdate\",t)},expression:\"NformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"更新时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\"},model:{value:e.NformInline.updatedate,callback:function(t){e.$set(e.NformInline,\"updatedate\",t)},expression:\"NformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.NformInline.departname,callback:function(t){e.$set(e.NformInline,\"departname\",t)},expression:\"NformInline.departname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customertel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.NformInline.customertel,callback:function(t){e.$set(e.NformInline,\"customertel\",t)},expression:\"NformInline.customertel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.NformInline.companyname,callback:function(t){e.$set(e.NformInline,\"companyname\",t)},expression:\"NformInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintN.complaintN\"],expression:\"['complaintN.complaintN']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.Add_deal_complain}},[e._v(\"我要投诉\")]),e._v(\" \"),a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintN.dealwith\"],expression:\"['complaintN.dealwith']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.deal_complain}},[e._v(\"我要处理\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.open_complain}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.Ndata,loading:e.Nloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.open_complain}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.NpageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.NpageChange,\"on-page-size-change\":e.NpageSizeChange}})],1)],1)],1)},[],!1,null,null,null);i.options.__file=\"unfinished.vue\";var s=i.exports,p={props:[\"complaintType\",\"processType\"],data:function(){return{search_model:\"\",Yloading:!1,NpageTotal:new Number,Npage:\"1\",NpageSize:\"10\",Ydata:[],YformInline:{updatedate:[],createdate:[],companyname:\"\",customername:\"\",customertel:\"\",departname:\"\"},page:1,pageSize:10,current_row:\"\",header:[{title:\"客户\",width:100,key:\"name\"},{title:\"客户电话\",width:120,key:\"tel\"},{title:\"公司\",width:240,key:\"companyname\",render:function(e,t){return\"\"==t.row.companyname||null==t.row.companyname?\"\":t.row.companyname.length>14?e(\"Poptip\",{props:{trigger:\"hover\",placement:\"bottom\"}},[e(\"span\",t.row.companyname.slice(0,14)+\"...\"),e(\"Icon\",{props:{type:\"arrow-down-b\"}}),e(\"div\",{slot:\"content\"},[e(\"span\",t.row.companyname)])]):e(\"span\",t.row.companyname)}},{title:\"服务部门\",width:200,key:\"departname\"},{title:\"投诉类型\",width:120,key:\"typeName\"},{title:\"处理状态\",width:120,key:\"processName\"},{title:\"受理人\",width:120,key:\"receiving\"},{title:\"创建时间\",width:120,key:\"createdate\"},{title:\"更新时间\",width:120,key:\"updatedate\"},{title:\"创建人\",width:120,key:\"createby\"}]}},methods:{downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",processType:\"done\",companyname:this.YformInline.companyname,customername:this.YformInline.customername,customertel:this.YformInline.customertel,bcreatedate:Object(o.a)(this.YformInline.createdate[0]),ecreatedate:Object(o.a)(this.YformInline.createdate[1]),bupdatedate:Object(o.a)(this.YformInline.updatedate[0]),eupdatedate:Object(o.a)(this.YformInline.updatedate[1]),departname:this.YformInline.departname,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"name\",title:\"客户名称\"},{field:\"companyname\",title:\"公司名称\"},{field:\"departname\",title:\"服务部门\"},{field:\"type\",title:\"投诉类型\",format:\"complaintType\"},{field:\"processType\",title:\"处理状态\",format:\"processType\"},{field:\"receiving\",title:\"受理人\"},{field:\"createdate\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"},{field:\"createby\",title:\"创建人\"},{field:\"record\",title:\"投诉内容\"},{field:\"rx\",title:\"解决方案\"}]))},t=this.$MergeURL(\"api/customer/complaintList\",e);window.open(t)},search:function(){this.page=1,this.getData()},reset:function(){this.page=1,this.YformInline.companyname=\"\",this.YformInline.customername=\"\",this.YformInline.customertel=\"\",this.YformInline.updatedate=[],this.YformInline.createdate=[],this.YformInline.departname=\"\",this.getData()},getData:function(){var e=this;e.Yloading=!0;var t={params:{page:e.page,pageSize:e.pageSize,processType:\"done\",sortField:\"updatedate\",companyname:e.YformInline.companyname,customername:e.YformInline.customername,customertel:e.YformInline.customertel,bcreatedate:Object(o.a)(e.YformInline.createdate[0]),ecreatedate:Object(o.a)(e.YformInline.createdate[1]),bupdatedate:Object(o.a)(e.YformInline.updatedate[0]),eupdatedate:Object(o.a)(e.YformInline.updatedate[1]),departname:e.YformInline.departname}};this.$Get(\"api/customer/complaintList\",t,function(t){e.Ydata=t.data.data.rows,e.NpageTotal=t.data.data.total;for(var a=0;a<e.Ydata.length;a++)e.Ydata[a].typeName=e.complaintType.get(e.Ydata[a].type),e.Ydata[a].processName=e.processType.get(e.Ydata[a].processType),e.Ydata[a].complaintManage=e.Ydata[a].complaint_manage,null==e.Ydata[a].createdate||\"\"==e.Ydata[a].createdate||(e.Ydata[a].createdate=e.Ydata[a].createdate.slice(0,10)),null==e.Ydata[a].updatedate||\"\"==e.Ydata[a].updatedate||(e.Ydata[a].updatedate=e.Ydata[a].updatedate.slice(0,10));e.Yloading=!1})},save_current_row:function(e){this.current_row=e},YpageChange:function(e){this.page=e,this.getData()},YpageSizeChange:function(){this.pageSize=e,this.getData()},Add_deal_complain:function(){this.$bus.emit(\"ADD_COMPLAINT\",!0)},deal_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"DEAL_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")},open_complain:function(){\"\"!=this.current_row?this.$bus.emit(\"SHOW_COMPLATNT\",this.current_row):this.$Message.warning(\"请选择一行进行处理！\")}},created:function(){var e=this;this.getData(),e.$bus.on(\"UPDATE_COMPLAINT\",function(t){e.getData()})}},c=Object(l.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"20px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                    筛选\\n                    \"),a(\"p\",{attrs:{slot:\"content\"},slot:\"content\"}),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"YformInline\",attrs:{model:e.YformInline,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customername\",label:\"客户：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.YformInline.customername,callback:function(t){e.$set(e.YformInline,\"customername\",t)},expression:\"YformInline.customername\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"createdate\",label:\"创建时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-start\"},model:{value:e.YformInline.createdate,callback:function(t){e.$set(e.YformInline,\"createdate\",t)},expression:\"YformInline.createdate\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"updatedate\",label:\"更新时间：\"}},[a(\"DatePicker\",{staticStyle:{width:\"100%\"},attrs:{transfer:\"\",type:\"daterange\",placement:\"bottom-end\"},model:{value:e.YformInline.updatedate,callback:function(t){e.$set(e.YformInline,\"updatedate\",t)},expression:\"YformInline.updatedate\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"服务部门：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.YformInline.departname,callback:function(t){e.$set(e.YformInline,\"departname\",t)},expression:\"YformInline.departname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"customertel\",label:\"客户电话：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.YformInline.customertel,callback:function(t){e.$set(e.YformInline,\"customertel\",t)},expression:\"YformInline.customertel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",placeholder:\"\"},model:{value:e.YformInline.companyname,callback:function(t){e.$set(e.YformInline,\"companyname\",t)},expression:\"YformInline.companyname\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"20px\"},attrs:{type:\"ghost\"},on:{click:e.reset}},[e._v(\"重置\")])],1)],1)],1),e._v(\" \"),a(\"p\")],1)],1)],1),e._v(\" \"),a(\"Row\",[a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"complaintY.dealwith\"],expression:\"['complaintY.dealwith']\"}],attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.deal_complain}},[e._v(\"我要处理\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.open_complain}},[e._v(\"查看\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-color-wand-outline\"},on:{click:e.downloadExcel}},[e._v(\"导出Excel\")])],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{ref:\"selection\",attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.header,data:e.Ydata,loading:e.Yloading},on:{\"on-current-change\":e.save_current_row,\"on-row-dblclick\":e.open_complain}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.NpageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.YpageChange,\"on-page-size-change\":e.YpageSizeChange}})],1)],1)],1)},[],!1,null,null,null);c.options.__file=\"finished.vue\";var m=c.exports,d={props:[\"complaintType\",\"processType\"],data:function(){return{loading:!1,deal_complaint:!1,deal:{},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:\"\"}},methods:{deal_complaint_detail:function(){var e=this;e.loading=!0;var t={id:e.deal.id,rx:e.deal.rx,processtype:e.deal.processType,complaintManage:e.deal.complaintManage};this.$Post(\"api/customer/updateComplaint\",t,function(t){e.deal_complaint=!1,e.loading=!1,e.$bus.emit(\"UPDATE_COMPLAINT\",!0)},function(t){e.loading=!1})}},created:function(){var e=this;e.$bus.on(\"DEAL_COMPLATNT\",function(t){e.deal_complaint=!0,e.deal=t})}},u=Object(l.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"投诉处理\",width:\"600\"},model:{value:e.deal_complaint,callback:function(t){e.deal_complaint=t},expression:\"deal_complaint\"}},[a(\"Form\",{ref:\"deal\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:e.deal,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.deal.companyname,callback:function(t){e.$set(e.deal,\"companyname\",t)},expression:\"deal.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"投诉部门：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.deal.departname,callback:function(t){e.$set(e.deal,\"departname\",t)},expression:\"deal.departname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"typeName\",label:\"投诉类型：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.deal.typeName,callback:function(t){e.$set(e.deal,\"typeName\",t)},expression:\"deal.typeName\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.deal.record,callback:function(t){e.$set(e.deal,\"record\",t)},expression:\"deal.record\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"processType\",label:\"处理状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",readonly:\"\"},model:{value:e.deal.processType,callback:function(t){e.$set(e.deal,\"processType\",t)},expression:\"deal.processType\"}},e._l(e.processType,function(t,n){return a(\"Option\",{key:n,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"rx\",label:\"解决方案：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4},model:{value:e.deal.rx,callback:function(t){e.$set(e.deal,\"rx\",t)},expression:\"deal.rx\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"receiving\",label:\"受理人：\"}},[a(\"Input\",{attrs:{type:\"text\",rows:4,readonly:\"\"},model:{value:e.deal.receiving,callback:function(t){e.$set(e.deal,\"receiving\",t)},expression:\"deal.receiving\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"createby\",label:\"创建人：\"}},[a(\"Input\",{attrs:{type:\"text\",rows:4,readonly:\"\"},model:{value:e.deal.createby,callback:function(t){e.$set(e.deal,\"createby\",t)},expression:\"deal.createby\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"complaintManage\",label:\"客服反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4},model:{value:e.deal.complaintManage,callback:function(t){e.$set(e.deal,\"complaintManage\",t)},expression:\"deal.complaintManage\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.deal_complaint_detail}},[e._v(\"处理\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.deal_complaint=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);u.options.__file=\"deal.vue\";var y=u.exports,h={props:[\"complaintType\",\"processType\"],data:function(){return{rows:4,show_complaint:!1,show:{},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:\"\"}},methods:{},created:function(){var e=this;e.$bus.on(\"SHOW_COMPLATNT\",function(t){e.show_complaint=!0,e.show=t})}},f=Object(l.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"查看\",width:\"600\"},model:{value:e.show_complaint,callback:function(t){e.show_complaint=t},expression:\"show_complaint\"}},[a(\"Form\",{ref:\"show\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:e.show,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"companyname\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.show.companyname,callback:function(t){e.$set(e.show,\"companyname\",t)},expression:\"show.companyname\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"departname\",label:\"投诉部门：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.show.departname,callback:function(t){e.$set(e.show,\"departname\",t)},expression:\"show.departname\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"typeName\",label:\"投诉类型：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.show.typeName,callback:function(t){e.$set(e.show,\"typeName\",t)},expression:\"show.typeName\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.show.record,callback:function(t){e.$set(e.show,\"record\",t)},expression:\"show.record\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"processType\",label:\"处理状态：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\",disabled:\"\"},model:{value:e.show.processType,callback:function(t){e.$set(e.show,\"processType\",t)},expression:\"show.processType\"}},e._l(e.processType,function(t,n){return a(\"Option\",{key:n,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"rx\",label:\"解决方案：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.show.rx,callback:function(t){e.$set(e.show,\"rx\",t)},expression:\"show.rx\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"receiving\",label:\"受理人：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.show.receiving,callback:function(t){e.$set(e.show,\"receiving\",t)},expression:\"show.receiving\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"createby\",label:\"创建人：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},model:{value:e.show.createby,callback:function(t){e.$set(e.show,\"createby\",t)},expression:\"show.createby\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"complaintManage\",label:\"客服反馈：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:4,readonly:\"\"},model:{value:e.show.complaintManage,callback:function(t){e.$set(e.show,\"complaintManage\",t)},expression:\"show.complaintManage\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.show_complaint=!1}}},[e._v(\"关闭\")])],1)],1)],1)},[],!1,null,null,null);f.options.__file=\"show.vue\";var g=f.exports,_={props:[\"depart\",\"type\"],data:function(){return{loading:!1,rows:4,add_complaint:!1,add:{companyid:\"\",departid:\"\",type:\"\",record:\"\"},selectCompany:!1,searchCompany:\"\",columns44:[{title:\"公司名称\",key:\"CompanyName\",width:300},{title:\"归属客户\",key:\"NAME\"},{title:\"客户电话\",key:\"TEL\"}],company_data:[],company_data_total:new Number,currentPage:new Number,InnerComplaintType:[]}},methods:{add_complaint_detail:function(){var e=this;e.loading=!0;var t={companyid:e.add.companyid,departid:e.add.departid,type:e.add.type,record:e.add.record};this.$Post(\"api/customer/createComplaint\",t,function(t){e.add_complaint=!1,e.loading=!1,e.$bus.emit(\"UPDATE_COMPLAINT\",!0),e.add.companyid=\"\",e.add.departid=\"\",e.add.type=\"\",e.add.record=\"\"},function(t){e.loading=!1})},close_complaint_detail:function(){this.add_complaint=!1,this.add.companyid=\"\",this.add.departid=\"\",this.add.type=\"\",this.add.record=\"\"},getCompany:function(){var e=this,t=\"\";e.currentPage=1,t=0==e.isSearch?\"/customer/company/list?page=1&pageSize=10\":\"/customer/company/list?page=1&pageSize=10&companyname=\"+e.searchCompany,e.selectCompany=!0,this.GetData(t,function(t){var a=t.data.data;e.company_data=[],e.company_data_total=a.total;for(var n=0;n<10;n++)e.company_data.push({CompanyName:a.rows[n].companyname,TEL:a.rows[n].customerTel,NAME:a.rows[n].customerName,cpid:a.rows[n].id,balance:a.rows[n].balance})})},keyDown:function(e){\"Enter\"==e.code&&this.searchCompanyData()},searchCompanyData:function(){\"\"!=this.searchCompany?(this.isSearch=!0,this.getCompany()):(this.isSearch=!1,this.getCompany())},company_page_change:function(e){var t=this,a=\"\";a=0==t.isSearch?\"/customer/company/list?page=\"+e+\"&pageSize=10\":\"/customer/company/list?page=\"+e+\"&pageSize=10&companyname=\"+t.searchCompany,this.GetData(a,function(e){var a=e.data.data;t.company_data=[],t.company_data_total=a.total;for(var n=0;n<10;n++)t.company_data.push({CompanyName:a.rows[n].companyname,TEL:a.rows[n].customerTel,NAME:a.rows[n].customerName,cpid:a.rows[n].id,balance:a.rows[n].balance})})},rowSelect:function(e){this.selectCompany=!1,this.add.companyid=e.cpid,this.add.NAME=e.NAME,this.add.companyName=e.CompanyName},get_data_center:function(){var e=this;this.$GetDataCenter(\"InnerComplaintType\",function(t){e.InnerComplaintType=t.data.data.InnerComplaintType})}},created:function(){var e=this;e.$bus.on(\"ADD_COMPLAINT\",function(t){e.add_complaint=!0,e.get_data_center()})}},w=Object(l.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Modal\",{attrs:{title:\"我要投诉\",width:\"600\"},model:{value:e.add_complaint,callback:function(t){e.add_complaint=t},expression:\"add_complaint\"}},[a(\"Form\",{ref:\"add\",staticStyle:{width:\"500px\",margin:\"auto\"},attrs:{model:e.add,\"label-width\":100}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"companyName\",label:\"公司：\"}},[a(\"Input\",{attrs:{type:\"text\",readonly:\"\"},on:{\"on-focus\":e.getCompany},model:{value:e.add.companyName,callback:function(t){e.$set(e.add,\"companyName\",t)},expression:\"add.companyName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"departid\",label:\"投诉部门：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\"},model:{value:e.add.departid,callback:function(t){e.$set(e.add,\"departid\",t)},expression:\"add.departid\"}},e._l(e.depart,function(t,n){return a(\"Option\",{key:n,attrs:{value:t.ID}},[e._v(e._s(t.departname))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"type\",label:\"投诉类型：\"}},[a(\"Select\",{attrs:{transfer:\"\",placeholder:\"\"},model:{value:e.add.type,callback:function(t){e.$set(e.add,\"type\",t)},expression:\"add.type\"}},e._l(e.InnerComplaintType,function(t,n){return a(\"Option\",{key:n,attrs:{value:t.typecode}},[e._v(e._s(t.typename))])}),1)],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"24\"}},[a(\"FormItem\",{attrs:{prop:\"record\",label:\"投诉内容：\"}},[a(\"Input\",{attrs:{type:\"textarea\",rows:e.rows},model:{value:e.add.record,callback:function(t){e.$set(e.add,\"record\",t)},expression:\"add.record\"}})],1)],1)],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:e.add_complaint_detail}},[e._v(\"新增\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.close_complaint_detail}},[e._v(\"关闭\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",width:\"80%\"},model:{value:e.selectCompany,callback:function(t){e.selectCompany=t},expression:\"selectCompany\"}},[a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"Input\",{attrs:{placeholder:\"输入公司名称搜索\"},on:{\"on-keydown\":e.keyDown},model:{value:e.searchCompany,callback:function(t){e.searchCompany=t},expression:\"searchCompany\"}},[a(\"Button\",{attrs:{slot:\"append\",icon:\"ios-search\"},on:{click:e.searchCompanyData},slot:\"append\"})],1)],1)],1),e._v(\" \"),a(\"Table\",{ref:\"selection\",staticStyle:{\"margin-top\":\"10px\"},attrs:{border:\"\",\"highlight-row\":\"\",size:\"small\",columns:e.columns44,data:e.company_data},on:{\"on-row-dblclick\":e.rowSelect}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.company_data_total,current:e.currentPage,\"show-total\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function(t){e.currentPage=t},\"on-change\":e.company_page_change}}),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"})],1)],1)},[],!1,null,null,null);w.options.__file=\"add_complaint.vue\";var v={name:\"complaintcenter_index\",components:{unFinsih:s,finsih:m,deal:y,show:g,addComplaint:w.exports},data:function(){return{smsDept:[],complaintType:[],processType:[],user:[],smsDept_map:new Map,complaintType_map:new Map,processType_map:new Map,user_map:new Map}},methods:{getData:function(){var e=this;this.$GetDataCenter(\"complaintType,processType\",function(t){var a=t.data.data;e.complaintType=a.complaintType,e.processType=a.processType,e.complaintType_map=Object(o.e)(e.complaintType),e.processType_map=Object(o.e)(e.processType)}),this.$http.get(\"api/customer/checkDepartMsg\").then(function(t){e.smsDept=t.data.data})},getUser:function(){var e=this;this.$http.get(\"api/user/list\",{params:{page:1,pageSize:1e4}}).then(function(t){var a=t.data.data.rows;e.user=a,e.user_map=Object(o.e)(e.user)})}},created:function(){this.getData()}},b=Object(l.a)(v,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{staticStyle:{\"padding-bottom\":\"200px\"},attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"待处理\",name:\"name1\"}},[a(\"un-finsih\",{attrs:{complaintType:e.complaintType_map,processType:e.processType_map}})],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已处理\",name:\"name2\"}},[a(\"finsih\",{attrs:{complaintType:e.complaintType_map,processType:e.processType_map}})],1)],1),e._v(\" \"),a(\"deal\",{attrs:{complaintType:e.complaintType_map,processType:e.processType}}),e._v(\" \"),a(\"show\",{attrs:{complaintType:e.complaintType,processType:e.processType}}),e._v(\" \"),a(\"add-complaint\",{attrs:{depart:e.smsDept,type:e.complaintType}})],1)},[],!1,null,null,null);b.options.__file=\"complaintcenter_index.vue\";a.default=b.exports},462:function(e,t,a){\"use strict\";a.r(t);var n={name:\"customerRate_index\",data:function(){return{data:[],header:[{title:\"序号\",type:\"index\",width:80},{title:\"公司名称\",minWidth:200,render:function(e,t){for(var a=[],n=0;n<t.row.itemObj.length;n++)a.push(t.row.itemObj[n].company_name);return e(\"div\",a.join(\",\"))}},{title:\"产品名称\",minWidth:200,render:function(e,t){for(var a=[],n=0;n<t.row.itemObj.length;n++)a.push(t.row.itemObj[n].product_name);return e(\"div\",a.join(\",\"))}},{title:\"服务人员\",minWidth:120,render:function(e,t){return e(\"div\",t.row.itemObj[0].server_name)}},{title:\"评价完结\",minWidth:120,key:\"status\"},{title:\"专业能力\",minWidth:120,key:\"ability_ranks\"},{title:\"服务态度\",minWidth:120,key:\"attitude_ranks\"},{title:\"服务态度\",minWidth:120,key:\"service_ranks\"},{title:\"意见与反馈\",minWidth:120,key:\"customer_memo\"},{title:\"评价时间\",minWidth:120,key:\"evaluate_time\"}],total:0,page:1,pageSize:10,loading:!1,search_model:\"\",formValidateSearch:{companyName:\"\",type:\"\"}}},methods:{Search:function(){this.page=1,this.get_data()},pageChange:function(e){this.page=e,this.get_data()},handleReset:function(){this.page=1,this.$refs.formValidateSearch.resetFields(),this.get_data()},get_data:function(){var e=this;e.loading=!0;var t={params:{page:e.page,pageSize:e.pageSize,sortField:\"id\",order:\"desc\"}};this.$Get(\"api/customer/work/order/callback/list\",t,function(t){e.loading=!1,e.total=t.data.data.total,e.data=t.data.data.rows;for(var a=0;a<e.data.length;a++)e.data[a].itemObj=JSON.parse(e.data[a].items),\"Y\"==e.data[a].callback_status?e.data[a].status=\"完成\":e.data[a].status=\"未完成\",e.data[a].evaluate_time&&(e.data[a].evaluate_time=e.data[a].evaluate_time.slice(0,10))})}},created:function(){this.get_data()}},o=a(2),r=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Card\",[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}}),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{loading:e.loading,\"highlight-row\":\"\",size:\"small\",border:\"\",columns:e.header,data:e.data}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\",\"padding-bottom\":\"10px\"},attrs:{size:\"small\",total:e.total,\"show-total\":\"\",\"show-elevator\":\"\",current:e.page},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange}})],1)],1)],1)},[],!1,null,null,null);r.options.__file=\"index.vue\";t.default=r.exports}}]);"}