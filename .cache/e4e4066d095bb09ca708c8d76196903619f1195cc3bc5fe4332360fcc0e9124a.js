{"source":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{437:function(e,t,a){\"use strict\";a.r(t);var o=a(85),r={data:function(){var e=this;return{customerPage:1,SearchValidateCustomer:{customer_name:\"\",customer_mobile_phone:\"\"},customerLoading:!1,sortField:\"updatedate\",order:\"desc\",search_model:\"\",table_loading:!1,SearchValidate:{date:[],customer_name:\"\",customer_mobile_phone:\"\",customerStatus:[],customer_area:\"\"},ishandleSubmit:!1,isXiaoshou:!1,modal_add:!1,addTag:!1,followbysTag:!1,loading:!1,pageTotal:new Number,pageTotal2:new Number,customerTotal:new Number,customerid:\"\",pagea:1,pageSizea:10,pageTotala:new Number,data2:[],data3:[],data33:[],qudaotype:[],customerlabelGroup:[],followbysGroup:[],followbysGroup2:[],areaValue:[],xiaoshou:[],customertypeValue:[],importlevelValue:[],page:1,pageSize:\"10\",labelpagesize:\"10\",labelpage:\"1\",formValidate:{customerName:\"\",customerTel:\"\",customerMobilePhone:\"\",customerWechat:\"\",customerEmail:\"\",customerQQ:\"\",customerArea:\"\",customerLevel:\"\",customerTags:\"\",customerMemo:\"\",channelTypeId:\"\"},columns3:[{type:\"selection\",width:60,align:\"center\"},{title:\"用户名\",key:\"username\"},{title:\"真实姓名\",key:\"realname\"},{title:\"电话\",key:\"mobilephone\"}],columns4:[{type:\"selection\",width:60,align:\"center\"},{title:\"标签\",key:\"labelName\"}],ruleValidate:{customerTel:[{validator:function(e,t,a){\"\"==t||null==t?a():/\\d{3}-\\d{8}|\\d{4}-\\d{7}/.test(t)?a():a(new Error(\"固话格式不正确\"))},trigger:\"change\"}],customerQQ:[{validator:function(e,t,a){var o=RegExp(/^[1-9][0-9]{4,9}$/);\"\"==t||null==t?a():o.test(t)?a():a(new Error(\"QQ格式不正确\"))},trigger:\"change\"}],customerWechat:[{validator:function(e,t,a){\"\"==t||null==t?a():/^[a-zA-Z\\d_]{5,}$/.test(t)?a():a(new Error(\"微信格式不正确\"))},trigger:\"change\"}],customerEmail:[{validator:function(e,t,a){\"\"==t||null==t?a():/^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/g.test(t)?a():a(new Error(\"邮箱格式不正确\"))},trigger:\"change\"}],customerName:[{required:!0,trigger:\"change\",message:\"客户名称不能为空\"}],customerArea:[{required:!0,trigger:\"change\",message:\"请选择区域\"}],customerStatus:[{required:!0,validator:function(e,t,a){\"\"==t||null==t?a(new Error(\"请选择客户状态\")):a()},trigger:\"change\"}],customerMobilePhone:[{required:!0,validator:function(t,a,o){if(\"\"==a||null==a)o(new Error(\"电话不能为空\"));else if(/^1\\d{10}$/.test(a)){var r=\"/channel/customer/phoneIsExist?customerMobilePhone=\"+a;e.GetData(r,function(e){1==e.data.data?o(new Error(\"抱歉，该号码已经存在\")):o()})}else o(new Error(\"电话格式不正确\"))},trigger:\"change\"}]},customerColumns:[{title:\"客户名称\",key:\"customer_name\",minWidth:120},{title:\"联系方式\",key:\"people\",render:function(t,a){return t(\"Poptip\",{props:{trigger:\"hover\",title:\"联系方式\",placement:\"bottom\"}},[t(\"span\",e.customerData[a.index].customer_mobile_phone+\"    \"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"ul\",e.customerData[a.index].people.map(function(e){return[t(\"li\",{style:{padding:\"4px\"}},\"手机：\"+e.customer_mobile_phone),t(\"li\",{style:{padding:\"4px\"}},\"固话：\"+e.customer_tel),t(\"li\",{style:{padding:\"4px\"}},\"Q  Q：\"+e.customerqq),t(\"li\",{style:{padding:\"4px\"}},\"微信：\"+e.customer_wechat)]}))])])},minWidth:150},{title:\"客户状态\",key:\"customer_status\",minWidth:150},{title:\"地区\",key:\"customer_area\",minWidth:80},{title:\"跟进人\",key:\"followbyname\",minWidth:120},{title:\"创建人\",key:\"createrealname\",minWidth:120},{title:\"更新时间\",key:\"updatedate\",minWidth:150},{title:\"创建时间\",key:\"createdate\",minWidth:150},{title:\"操作\",key:\"action\",fixed:\"right\",width:70,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},directives:[{name:\"permission\",value:\"channelC.cheek\"}],style:{marginRight:\"5px\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customer_id})}}},\"查看\")])}}],columns:[{title:\"客户名称\",key:\"customer_name\",minWidth:120,sortable:!0},{title:\"联系方式\",key:\"people\",render:function(t,a){return t(\"Poptip\",{props:{trigger:\"hover\",title:\"联系方式\",placement:\"bottom\"}},[t(\"span\",e.data2[a.index].customer_mobile_phone+\"    \"),t(\"Icon\",{props:{type:\"arrow-down-b\"}}),t(\"div\",{slot:\"content\"},[t(\"ul\",e.data2[a.index].people.map(function(e){return[t(\"li\",{style:{padding:\"4px\"}},\"手机：\"+e.customer_mobile_phone),t(\"li\",{style:{padding:\"4px\"}},\"固话：\"+e.customer_tel),t(\"li\",{style:{padding:\"4px\"}},\"Q  Q：\"+e.customerqq),t(\"li\",{style:{padding:\"4px\"}},\"微信：\"+e.customer_wechat)]}))])])},minWidth:150},{title:\"客户状态\",key:\"customer_status\",minWidth:150,sortable:!0},{title:\"线索状态\",key:\"clue_status\",minWidth:120,sortable:!0},{title:\"地区\",key:\"customer_area\",minWidth:80,sortable:!0},{title:\"销售\",key:\"followbyname\",minWidth:120,sortable:!0},{title:\"创建人\",key:\"createrealname\",minWidth:120,sortable:!0},{title:\"更新时间\",key:\"updatedate\",minWidth:150,sortable:!0},{title:\"创建时间\",key:\"createdate\",minWidth:150,sortable:!0},{title:\"操作\",key:\"action\",fixed:\"right\",width:70,align:\"center\",render:function(t,a){return t(\"div\",[t(\"Button\",{props:{type:\"text\",size:\"small\"},directives:[{name:\"permission\",value:\"channelC.cheek\"}],style:{marginRight:\"5px\"},on:{click:function(){e.$store.commit(\"open_gobal_customer_detail_modal\",{ID:a.row.customer_id})}}},\"查看\")])}}],customerTypeArr:[],area:[],customerType:[],customerData:[]}},methods:{sort:function(e){\"\"==e.key?this.sortField=\"updatedate\":\"customer_area\"==e.key?this.sortField=\"area\":\"customer_status\"==e.key?this.sortField=\"customertype\":this.sortField=e.key,\"normal\"==e.order?(this.order=\"\",this.sortField=\"updatedate\"):this.order=e.order,this.getData()},handleReset:function(){this.SearchValidate.customer_name=\"\",this.SearchValidate.customer_mobile_phone=\"\",this.SearchValidate.customerStatus=\"\",this.SearchValidate.date=\"\",this.SearchValidate.customer_area=\"\",this.getData(),this.SearchValidateCustomer.customer_name=\"\",this.SearchValidateCustomer.customer_mobile_phone=\"\",this.get_customer_data(),this.ishandleSubmit=!1},Search:function(){this.page=1,this.getData()},getDataCenter:function(){var e=this;this.$GetDataCenter(\"area,customerTypes\",function(t){e.area=t.data.data.area,e.customerType=t.data.data.customerTypes,e.customerTypeArr=[];for(var a=0;a<e.customerType.length;a++){var o={};if(null!=e.customerType[a].children)for(var r=0;r<e.customerType[a].children.length;r++)(o={}).id=e.customerType[a].children[r].id,o.typecode=e.customerType[a].children[r].typecode,o.typename=e.customerType[a].children[r].typename,o.pid=e.customerType[a].children[r].pid,o.ptypename=e.customerType[a].typename,o.ptypecode=e.customerType[a].typecode,e.customerTypeArr.push(o);else(o={}).id=e.customerType[a].id,o.typecode=e.customerType[a].typecode,o.ptypename=e.customerType[a].typename,o.typename=\"\",o.pid=0,e.customerTypeArr.push(o);if(e.customerType[a].value=e.customerType[a].id,e.customerType[a].label=e.customerType[a].typename,null!=e.customerType[a].children)for(var s=0;s<e.customerType[a].children.length;s++)e.customerType[a].children[s].value=e.customerType[a].children[s].id,e.customerType[a].children[s].label=e.customerType[a].children[s].typename}})},findAreaText:function(e){for(var t=0;t<this.area.length;t++)if(this.area[t].typecode==e&&\"\"!=e)return this.area[t].typename},findCustomerType:function(e){if(\"\"==e||null==e)return\"\";var t=e.split(\"-\");if(\"\"==t[1]||null==t[1]){for(var a=0;a<this.customerTypeArr.length;a++)if(this.customerTypeArr[a].id==t[0]&&\"\"!=t[0])return this.customerTypeArr[a].ptypename+\" - \"+this.customerTypeArr[a].typename}else for(var o=0;o<this.customerTypeArr.length;o++)if(this.customerTypeArr[o].id==t[1]&&\"\"!=t[1])return this.customerTypeArr[o].ptypename+\" - \"+this.customerTypeArr[o].typename},getCannelType:function(){var e=this;this.$Get(\"api/channel/type/queryUserChannel\",{params:{type:\"qdyh\"}},function(t){e.formValidate.channelTypeId=t.data.data[0].id,e.qudaotype=[];for(var a=0;a<t.data.data.length;a++)e.qudaotype.push(t.data.data[a])})},downloadExcel:function(){var e={page:\"1\",pageSize:\"1000000\",customer_name:this.SearchValidate.customer_name,customer_mobile_phone:this.SearchValidate.customer_mobile_phone,customer_area:this.SearchValidate.customer_area,export:\"Y\",exportField:encodeURI(JSON.stringify([{field:\"customer_name\",title:\"客户名称\"},{field:\"customertype\",title:\"客户状态\",format:\"customerType\"},{field:\"clue_status\",title:\"线索状态\",format:\"channelcluet\"},{field:\"area\",title:\"地区\",format:\"area\"},{field:\"followbyname\",title:\"销售\"},{field:\"createrealname\",title:\"创建人\"},{field:\"createdate\",title:\"创建时间\"},{field:\"updatedate\",title:\"更新时间\"}]))},t=this.$MergeURL(\"api/channel/customer/list\",e);window.open(t)},getData:function(){var e=this;e.table_loading=!0;var t=[],a=\"\";a=\"\"==e.SearchValidate.customerStatus||null==e.SearchValidate.customerStatus?\"\":e.SearchValidate.customerStatus.join(\"-\");var r={params:{sortField:e.sortField,order:e.order,page:e.page,pageSize:e.pageSize,customer_name:e.SearchValidate.customer_name,customer_mobile_phone:e.SearchValidate.customer_mobile_phone,customerStatus:a,bUpdatedate:Object(o.a)(e.SearchValidate.date[0]),eUpdatedate:Object(o.a)(e.SearchValidate.date[1]),customer_area:e.SearchValidate.customer_area}};this.$GetDataCenter(\"channelcluet\",function(e){t=e.data.data.channelcluet}),e.$http.get(\"api/channel/customer/list\",r).then(function(a){!function(a){var o=a.data.data;e.pageTotal=o.total,e.data2=[];for(var r=0;r<o.rows.length;r++){for(var s=\"\",l=0;l<t.length;l++)o.rows[r].clue_status==t[l].typecode&&(s=t[l].typename);e.data2.push({cluestatus:o.rows[r].cluestatus,followbyname:o.rows[r].followbyname,customer_name:o.rows[r].customer_name,channel_name:o.rows[r].channel_name,clue_status:s,createdate:o.rows[r].createdate.substr(0,10),customer_area:e.findAreaText(o.rows[r].area),customer_email:o.rows[r].customer_email,customer_level:o.rows[r].customer_level,customer_memo:o.rows[r].customer_memo,customer_status:e.findCustomerType(o.rows[r].customertype),customer_tags:o.rows[r].customer_tags,customer_id:o.rows[r].customer_id,updatedate:o.rows[r].updatedate.substr(0,10),createrealname:o.rows[r].createrealname,customer_mobile_phone:o.rows[r].customer_mobile_phone,people:[{customer_mobile_phone:o.rows[r].customer_mobile_phone,customer_tel:o.rows[r].customer_tel,customer_wechat:o.rows[r].customer_wechat,customerqq:o.rows[r].customerqq}]})}e.table_loading=!1}(a)})},get_customer_data:function(){var e=this;e.customerLoading=!0;\"\"==e.SearchValidate.customerStatus||null==e.SearchValidate.customerStatus||e.SearchValidate.customerStatus.join(\"-\");var t={params:{page:e.customerPage,pageSize:10}};e.$http.get(\"api/customer/list\",t).then(function(t){!function(t){var a=t.data.data;e.customerTotal=a.total,e.customerData=[];for(var o=0;o<a.rows.length;o++)e.customerData.push({followbyname:a.rows[o].followbyname,customer_name:a.rows[o].NAME,createdate:a.rows[o].CREATEDATE.substr(0,10),customer_area:e.findAreaText(a.rows[o].AREA),customer_email:a.rows[o].email,customer_memo:a.rows[o].backup,customer_status:e.findCustomerType(a.rows[o].customerType),customer_id:a.rows[o].ID,updatedate:a.rows[o].updatedate.substr(0,10),createrealname:a.rows[o].createbyname,customer_mobile_phone:a.rows[o].TEL,people:[{customer_mobile_phone:a.rows[o].TEL,customer_wechat:a.rows[o].weixin,customerqq:a.rows[o].qq}]});e.customerLoading=!1}(t)})},SearchCustomer:function(){this.customerPage=1,this.get_customer_data()},pageChangeCustomer:function(e){this.customerPage=e,this.get_customer_data()},pageChange:function(e){this.page=e,this.getData()},pageSizeChange:function(e){this.pageSize=e,this.getData()},examine:function(e){localStorage.setItem(\"customerTag\",e.customer_tags),this.$store.commit(\"open_gobal_customer_detail_modal\",{ID:e.customer_id})},selectRow:function(e){this.customerid=e.customer_id},handleSubmit:function(e){var t=this,a=this;this.loading=!0,this.$refs[e].validate(function(e){if(e){if(void 0!=a.customerlabelGroup){for(var l=[],n=0;n<a.customerlabelGroup.length;n++)l.push(a.customerlabelGroup[n].id);a.formValidate.customerTags=l.toString()}\"\"!=a.formValidate.customerTel&&null!=a.formValidate.customerTel||\"\"!=a.formValidate.customerMobilePhone&&null!=a.formValidate.customerMobilePhone||\"\"!=a.formValidate.customerWechat&&null!=a.formValidate.customerWechat||\"\"!=a.formValidate.customerQQ&&null!=a.formValidate.weixin?a.$Post(o,a.formValidate,r,s):(t.loading=!1,t.$Message.error(\"电话、固话、QQ、微信必须填写一个\"))}else t.loading=!1});var o=\"/api/channel/customer/create\";function r(e){a.getData(),a.modal_add=!1,a.loading=!1,a.cancel(\"formValidate\")}function s(e){a.loading=!1}},cancel:function(e){this.customerlabelGroup=[],this.followbysGroup=[],this.$refs[e].resetFields()},getLabelData:function(){var e=this;e.data3=[],this.$http.get(\"/api/system/label/list?page=1&pageSize=10\").then(function(t){var a=t.data.data,o=a.rows.length;e.pageTotal2=a.total;for(var r=[],s=0;s<o;s++){var l={};l.labelName=a.rows[s].labelName,l.id=a.rows[s].id;for(var n=0;n<e.customerlabelGroup.length;n++)l.labelName==e.customerlabelGroup[n].labelName&&(l._checked=!0,r.push(l));e.data3.push(l)}}).catch(function(e){})},getfollowbysData:function(){var e=this,t=\"/user/list?page=\"+e.pagea+\"&pageSize=\"+e.pageSizea;this.GetData(t,function(t){var a=t.data.data;e.addCannelUser=!0,e.pageTotala=a.total,e.data33=[];for(var o=0;o<a.rows.length;o++){for(var r={},s=0;s<e.followbysGroup.length;s++)if(e.followbysGroup[s].id==a.rows[o].id){r._checked=!0;break}r.id=a.rows[o].id,r.mobilephone=a.rows[o].mobilephone,r.realname=a.rows[o].realname,r.username=a.rows[o].username,e.data33.push(r)}})},pageChangea:function(e){this.pagea=e;for(var t=0;t<this.followbysGroup.length;t++)this.followbysGroup2.push(this.followbysGroup[t]);this.followbysGroup=[],this.getfollowbysData()},pageSizeChangea:function(e){this.pageSizea=e,this.getfollowbysData()},selectionChange:function(e){if(0==this.customerlabelGroup.length)this.customerlabelGroup=e;else for(var t=0;t<e.length;t++){for(var a=0,o=0;o<this.customerlabelGroup.length&&e[t].id!=this.customerlabelGroup[o].id;o++)a++;a==this.customerlabelGroup.length&&this.customerlabelGroup.push({id:e[t].id,labelName:e[t].labelName})}},selectCancel:function(e,t){e:for(var a=0;a<this.customerlabelGroup.length;a++)if(t.id==this.customerlabelGroup[a].id){this.customerlabelGroup.splice(a,1);break e}},addUserClick:function(e){this.followbysGroup=[];for(var t=0;t<e.length;t++){var a={};a.id=e[t].id,a.realname=e[t].realname,this.followbysGroup.push(a)}},ok2:function(){},cancel2:function(){},pageChange2:function(e){var t=this;t.labelpage=e;var a=\"/api/system/label/list?page=\"+t.labelpage+\"&pageSize=\"+t.labelpagesize;this.$http.get(a).then(function(e){t.$backToLogin(e),t.data3=[];var a=e.data.data,o=a.rows.length;t.pageTotal2=a.total;for(var r=[],s=0;s<o;s++){var l={};l.labelName=a.rows[s].labelName,l.id=a.rows[s].id;for(var n=0;n<t.customerlabelGroup.length;n++)l.labelName==t.customerlabelGroup[n].labelName&&(l._checked=!0,r.push(l));t.data3.push(l)}})},pageSizeChange2:function(e){var t=this;t.labelpagesize=e;var a=\"/api/system/label/list?page=\"+t.labelpage+\"&pageSize=\"+t.labelpagesize;this.$http.get(a).then(function(e){t.$backToLogin(e),t.data3=[];var a=e.data.data,o=a.rows.length;t.pageTotal2=a.total;for(var r=[],s=0;s<o;s++){var l={};l.labelName=a.rows[s].labelName,l.id=a.rows[s].id;for(var n=0;n<t.customerlabelGroup.length;n++)l.labelName==t.customerlabelGroup[n].labelName&&(l._checked=!0,r.push(l));t.data3.push(l)}})},AddUserClick:function(){for(var e=0;e<this.followbysGroup.length;e++)this.followbysGroup2.push(this.followbysGroup[e]);this.followbysGroup=[]},radioChange:function(e){var t=this,a={params:{channelTypeId:e,type:\"xs\"}};this.$Get(\"api/channel/user/queryChannelUser\",a,function(e){for(var a=0;a<e.data.data.length;a++)t.isXiaoshou=!0,t.xiaoshou.push(e.data.data[a])})},handleClose2:function(e){for(var t=0;t<this.customerlabelGroup.length;t++)if(this.customerlabelGroup[t].labelname==e.name){var a=this.customerlabelGroup.indexOf(e);a>-1&&this.customerlabelGroup.splice(a,1)}}},mounted:function(){this.getDataCenter(),this.getData(),this.get_customer_data()}},s=a(2),l=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Tabs\",{attrs:{value:\"name1\"}},[a(\"TabPane\",{attrs:{label:\"我的客户\",name:\"name1\"}},[a(\"Card\",{staticStyle:{\"min-width\":\"800px\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                                    筛选\\n                                \\n                                \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.SearchCustomer(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"SearchValidateCustomer\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:e.SearchValidateCustomer,\"label-width\":80}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customer_name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidateCustomer.customer_name,callback:function(t){e.$set(e.SearchValidateCustomer,\"customer_name\",t)},expression:\"SearchValidateCustomer.customer_name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系方式：\",prop:\"customer_mobile_phone\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidateCustomer.customer_mobile_phone,callback:function(t){e.$set(e.SearchValidateCustomer,\"customer_mobile_phone\",t)},expression:\"SearchValidateCustomer.customer_mobile_phone\"}})],1)],1)],1),e._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"5px\"}},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.SearchCustomer}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(t){e.handleReset(\"SearchValidateCustomer\")}}},[e._v(\"\\n                                                            重置\\n                                                        \")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.customerColumns,data:e.customerData,loading:e.customerLoading},on:{\"on-current-change\":e.selectRow,\"on-row-dblclick\":e.examine}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\",\"margin-bottom\":\"10px\"},attrs:{size:\"small\",total:e.customerTotal,\"show-total\":\"\",\"show-elevator\":\"\",current:e.customerPage},on:{\"update:current\":function(t){e.customerPage=t},\"on-change\":e.pageChangeCustomer}})],1)],1)],1),e._v(\" \"),a(\"TabPane\",{attrs:{label:\"已领取\",name:\"name2\"}},[a(\"Card\",{staticStyle:{\"min-width\":\"800px\"}},[a(\"Row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"Collapse\",{model:{value:e.search_model,callback:function(t){e.search_model=t},expression:\"search_model\"}},[a(\"Panel\",{attrs:{name:\"1\"}},[a(\"Icon\",{staticStyle:{\"margin-left\":\"20px\",\"margin-right\":\"5px\"},attrs:{type:\"search\"}}),e._v(\"\\n                                    筛选\\n                                \\n                                \"),a(\"div\",{attrs:{slot:\"content\"},on:{keydown:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.Search(t):null}},slot:\"content\"},[a(\"Form\",{ref:\"SearchValidate\",staticStyle:{\"margin-top\":\"15px\"},attrs:{model:e.SearchValidate,\"label-width\":80}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户名称：\",prop:\"customer_name\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidate.customer_name,callback:function(t){e.$set(e.SearchValidate,\"customer_name\",t)},expression:\"SearchValidate.customer_name\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"联系方式：\",prop:\"customer_mobile_phone\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.SearchValidate.customer_mobile_phone,callback:function(t){e.$set(e.SearchValidate,\"customer_mobile_phone\",t)},expression:\"SearchValidate.customer_mobile_phone\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"客户状态：\",prop:\"customerStatus\"}},[a(\"Cascader\",{staticStyle:{\"margin-top\":\"5px\",width:\"100%\"},attrs:{trigger:\"hover\",transfer:\"\",data:e.customerType,size:\"small\"},model:{value:e.SearchValidate.customerStatus,callback:function(t){e.$set(e.SearchValidate,\"customerStatus\",t)},expression:\"SearchValidate.customerStatus\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"8\"}},[a(\"FormItem\",{attrs:{label:\"区域：\",prop:\"customer_area\"}},[a(\"Select\",{attrs:{transfer:\"\",size:\"small\"},on:{\"on-change\":e.Search},model:{value:e.SearchValidate.customer_area,callback:function(t){e.$set(e.SearchValidate,\"customer_area\",t)},expression:\"SearchValidate.customer_area\"}},[a(\"Option\",{attrs:{value:\"gz\"}},[e._v(\"广州\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"sz\"}},[e._v(\"深圳\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"dg\"}},[e._v(\"东莞\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"lz\"}},[e._v(\"兰州\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zh\"}},[e._v(\"珠海\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zz\"}},[e._v(\"郑州\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"sh\"}},[e._v(\"上海\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"zs\"}},[e._v(\"中山\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"fs\"}},[e._v(\"佛山\")]),e._v(\" \"),a(\"Option\",{attrs:{value:\"qt\"}},[e._v(\"其他\")])],1)],1)],1)],1),e._v(\" \"),a(\"center\",[a(\"FormItem\",{staticStyle:{\"margin-top\":\"5px\"}},[a(\"Button\",{attrs:{type:\"primary\"},on:{click:e.Search}},[e._v(\"搜索\")]),e._v(\" \"),a(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(t){e.handleReset(\"SearchValidate\")}}},[e._v(\"\\n                                                            重置\\n                                                        \")])],1)],1)],1)],1)],1)],1)],1),e._v(\" \"),a(\"ButtonGroup\",[a(\"Button\",{directives:[{name:\"permission\",rawName:\"v-permission\",value:[\"channelC.add\"],expression:\"['channelC.add']\"}],attrs:{type:\"primary\",icon:\"plus\"},on:{click:function(t){e.getCannelType(),e.modal_add=!0}}},[e._v(\"录入\")])],1),e._v(\" \"),a(\"Row\",{staticStyle:{\"margin-top\":\"10px\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",size:\"small\",columns:e.columns,data:e.data2,loading:e.table_loading},on:{\"on-current-change\":e.selectRow,\"on-row-dblclick\":e.examine,\"on-sort-change\":e.sort}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\",\"margin-bottom\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\",current:e.page},on:{\"update:current\":function(t){e.page=t},\"on-change\":e.pageChange,\"on-page-size-change\":e.pageSizeChange}})],1)],1)],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"录入\"},model:{value:e.modal_add,callback:function(t){e.modal_add=t},expression:\"modal_add\"}},[a(\"Form\",{ref:\"formValidate\",attrs:{rules:e.ruleValidate,model:e.formValidate,\"label-width\":80}},[a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"客户名称\",prop:\"customerName\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerName,callback:function(t){e.$set(e.formValidate,\"customerName\",t)},expression:\"formValidate.customerName\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"电话\",prop:\"customerMobilePhone\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerMobilePhone,callback:function(t){e.$set(e.formValidate,\"customerMobilePhone\",t)},expression:\"formValidate.customerMobilePhone\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"固话\",prop:\"customerTel\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerTel,callback:function(t){e.$set(e.formValidate,\"customerTel\",t)},expression:\"formValidate.customerTel\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"QQ\",prop:\"customerQQ\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerQQ,callback:function(t){e.$set(e.formValidate,\"customerQQ\",t)},expression:\"formValidate.customerQQ\"}})],1)],1)],1),e._v(\" \"),a(\"Row\",{staticStyle:{height:\"56px\"},attrs:{gutter:16}},[a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"微信\",prop:\"customerWechat\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerWechat,callback:function(t){e.$set(e.formValidate,\"customerWechat\",t)},expression:\"formValidate.customerWechat\"}})],1)],1),e._v(\" \"),a(\"Col\",{attrs:{span:\"12\"}},[a(\"FormItem\",{attrs:{label:\"邮箱\",prop:\"customerEmail\"}},[a(\"Input\",{attrs:{size:\"small\"},model:{value:e.formValidate.customerEmail,callback:function(t){e.$set(e.formValidate,\"customerEmail\",t)},expression:\"formValidate.customerEmail\"}})],1)],1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"标签\",prop:\"customerTags\"}},[e._l(e.customerlabelGroup,function(t){return a(\"Tag\",{key:t.id,attrs:{name:t.id,id:t.id,closable:\"\"},on:{\"on-close\":function(a){e.handleClose2(t)}}},[e._v(\"\\n                    \"+e._s(t.labelName)+\"\\n                \")])}),e._v(\" \"),a(\"Button\",{attrs:{icon:\"ios-plus-empty\",type:\"dashed\",size:\"small\"},on:{click:function(t){e.getLabelData(),e.addTag=!0}}},[e._v(\"添加\")])],2),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"渠道类型\",prop:\"channelTypeId\"}},[a(\"RadioGroup\",{on:{\"on-change\":e.radioChange},model:{value:e.formValidate.channelTypeId,callback:function(t){e.$set(e.formValidate,\"channelTypeId\",t)},expression:\"formValidate.channelTypeId\"}},e._l(e.qudaotype,function(t){return a(\"Radio\",{key:t.id,attrs:{label:t.id,id:t.id}},[e._v(e._s(t.channel_type_name))])}),1)],1),e._v(\" \"),a(\"FormItem\",{attrs:{label:\"备注\",prop:\"customerMemo\"}},[a(\"Input\",{attrs:{size:\"small\",type:\"textarea\"},model:{value:e.formValidate.customerMemo,callback:function(t){e.$set(e.formValidate,\"customerMemo\",t)},expression:\"formValidate.customerMemo\"}})],1)],1),e._v(\" \"),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"primary\",loading:e.loading},on:{click:function(t){e.handleSubmit(\"formValidate\")}}},[e._v(\"新增\")]),e._v(\" \"),a(\"Button\",{attrs:{type:\"ghost\"},on:{click:function(t){e.cancel(\"formValidate\")}}},[e._v(\"重置\")])],1)],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"添加标签\"},on:{\"on-ok\":e.ok2,\"on-cancel\":e.cancel2},model:{value:e.addTag,callback:function(t){e.addTag=t},expression:\"addTag\"}},[a(\"Table\",{ref:\"selection\",attrs:{border:\"\",columns:e.columns4,data:e.data3},on:{\"on-select-cancel\":e.selectCancel,\"on-selection-change\":e.selectionChange}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotal2,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChange2,\"on-page-size-change\":e.pageSizeChange2}})],1),e._v(\" \"),a(\"Modal\",{attrs:{title:\"添加跟进人\",width:\"40%\"},on:{\"on-ok\":e.AddUserClick,\"on-cancel\":e.cancel2},model:{value:e.followbysTag,callback:function(t){e.followbysTag=t},expression:\"followbysTag\"}},[a(\"Table\",{attrs:{\"highlight-row\":\"\",columns:e.columns3,data:e.data33},on:{\"on-selection-change\":e.addUserClick}}),e._v(\" \"),a(\"Page\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{size:\"small\",total:e.pageTotala,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":e.pageChangea,\"on-page-size-change\":e.pageSizeChangea}})],1)],1)},[],!1,null,null,null);l.options.__file=\"channelCustomer_table.vue\";var n={name:\"channelCustomer_index\",components:{channelTable:l.exports},data:function(){return{modal:!1,customerid:\"\",isExamine:!1}},methods:{isExamineChange:function(e){this.customerid=e,this.isExamine=!0,this.modal=!0},cancel:function(){this.customerid=\"\",this.isExamine=!1},ok:function(){},isEdit:function(){}}},i=Object(s.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(\"channel-table\",{on:{isExamine:this.isExamineChange}})],1)},[],!1,null,null,null);i.options.__file=\"channelCustomer.vue\";t.default=i.exports},85:function(e,t,a){\"use strict\";function o(e){if(null==e||\"\"==e)return\"\";var t=new Date(e),a=\"\"+(t.getMonth()+1),o=\"\"+t.getDate(),r=t.getFullYear();return a.length<2&&(a=\"0\"+a),o.length<2&&(o=\"0\"+o),[r,a,o].join(\"-\")}a.d(t,\"a\",function(){return o})}}]);"}